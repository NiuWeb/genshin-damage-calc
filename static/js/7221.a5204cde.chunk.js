"use strict";(self.webpackChunkgenshin_gui=self.webpackChunkgenshin_gui||[]).push([[7221,7017,1836,6323],{10072:function(t,e,n){n.d(e,{w:function(){return f}});var r=n(1413),o=n(45987),i=n(45043),a=n(79188),s=n(2532),u=n(46417),c=["value","options","onChange","allowAny"];function f(t){var e=t.value,n=t.options,f=t.onChange,l=t.allowAny,d=(0,o.Z)(t,c);function p(t){f(n.find((function(e){return e===t})))}return(0,u.jsxs)(s.Z.Select,(0,r.Z)((0,r.Z)({},d),{},{value:e||-1,onChange:function(t){return p(t.target.value)},children:[l?(0,u.jsx)("option",{value:-1,children:(0,a.KF)("ANY")}):null,n.map((function(t){return(0,u.jsx)("option",{value:t,children:i.G.Describe.getTitle(t)},t)}))]}))}},60850:function(t,e,n){n.d(e,{Z:function(){return w}});var r=n(79188),o=n(48648),i=n(93298),a=n(74308),s=n(1413),u=n(10072),c=n(64919),f=n(45043),l=n(2532),d=n(12014),p=n(46417),v=f.G.Values.ListCharacterStat;function h(t){var e=t.filter,n=t.onChange,r=t.onDelete;function a(t){var r=t;n((0,s.Z)((0,s.Z)({},e),{},{operator:r}))}return(0,p.jsxs)(o.Z,{direction:"horizontal",gap:1,children:[(0,p.jsx)(u.w,{size:"sm",value:e.stat,options:v,onChange:function(t){t&&n((0,s.Z)((0,s.Z)({},e),{},{stat:t}))}}),(0,p.jsxs)(l.Z.Select,{size:"sm",style:{width:72},value:e.operator,onChange:function(t){return a(t.target.value)},children:[(0,p.jsx)("option",{value:"=",children:"="}),(0,p.jsx)("option",{value:">=",children:">="}),(0,p.jsx)("option",{value:"<=",children:"<="}),(0,p.jsx)("option",{value:">",children:">"}),(0,p.jsx)("option",{value:"<",children:"<"})]}),(0,p.jsx)(c.K,{size:"sm",value:e.value,onChange:function(t){void 0!==t&&n((0,s.Z)((0,s.Z)({},e),{},{value:t}))},percent:!f.G.Values.isFlatStat(e.stat),places:f.G.Values.isFlatStat(e.stat)?0:1}),(0,p.jsx)(i.Z,{onClick:r,variant:"danger",size:"sm",children:(0,p.jsx)(d.Z,{style:{verticalAlign:"-0.125em"}})})]})}function w(t){var e=t.filters,n=t.onChange,s=t.onAdd,u=t.onDelete;return(0,p.jsxs)(o.Z,{gap:1,children:[(0,p.jsxs)(i.Z,{onClick:s,children:[(0,p.jsx)(a.Z,{className:"me-1"}),(0,r.KF)("ACTION_ADD_FILTER")]}),null===e||void 0===e?void 0:e.map((function(t,e){return(0,p.jsx)(h,{filter:t,onDelete:function(){return u(e)},onChange:function(t){return n(e,t)}},e)}))]})}},64236:function(t,e,n){n.d(e,{X:function(){return a}});var r=n(92882),o=n(60850),i=n(46417);function a(){var t=(0,r.L)();return(0,i.jsx)(o.Z,{filters:t.getFilters(),onAdd:function(){return t.addFilter({stat:"ATKpercent",operator:">=",value:0})},onDelete:function(e){return t.removeFilter(e)},onChange:function(e,n){return t.setFilter(e,n)}})}},7155:function(t,e,n){n.d(e,{J:function(){return v}});var r=n(1413),o=n(10340),i=n(37671),a=function(){var t=(0,o.T)(),e=(0,o.C)((function(t){return t.config}));return(0,r.Z)((0,r.Z)({},e),{},{setWorkers:function(e){t(i.Nw.setWorkers(e))}})},s=n(36687),u=n(93298),c=n(41251),f=n(45624),l=n(46417),d=window.navigator.hardwareConcurrency||4,p=Array.from(Array(d).keys()).map((function(t){return t+1}));function v(){var t=a();return(0,l.jsxs)(s.Z,{children:[(0,l.jsx)(u.Z,{disabled:!0,children:"Workers"}),(0,l.jsx)(c.Z,{title:t.workers,onSelect:function(e){if(e){var n=parseInt(e)||4;t.setWorkers(n)}},as:s.Z,children:p.map((function(t){return(0,l.jsx)(f.Z.Item,{eventKey:t,children:t},t)}))})]})}},47221:function(t,e,n){n.r(e),n.d(e,{default:function(){return F},position:function(){return B},title:function(){return b}});var r=n(74165),o=n(15861),i=n(93324),a=n(96103),s=n(85278),u=n(64236),c=n(7155),f=n(45043),l=n(26671),d=n(1836),p=n(10340),v=n(22384),h=n(92882),w=n(46323),g=n(79188),Z=n(29447);function m(t,e){var n=performance.now();return t.character instanceof f.G.Character&&(t.character=f.G.CharacterLoader.exportCharacter(t.character)),t.rotation instanceof f.G.Rotation&&(t.rotation=f.G.RotationLoader.exportRotation(t.rotation)),(0,Z.HB)().postMessage({id:n,type:"optimizer-artifacts",data:t}),new Promise((function(t){var r=(0,Z.HB)().addMessageListener((function(o){o.id===n&&(!1===o.complete?e(o.result[0],o.result[1]):(t(o.result),(0,Z.HB)().removeMessageListener(r)))}))}))}var x=n(47017),y=n(47313),C=n(48648),j=n(93298),k=n(63849),N=n(31616),L=n(97890),M=n(46417),b="OPTIMIZER_ARTIFACT",B=6;function F(){var t=function(){var t=(0,p.T)(),e=(0,p.C)((function(t){return t.bonus}));return{getCopy:function(){return JSON.parse(JSON.stringify(e))},setEffect:function(e,n){t(v.Nw.setEffect([e,n]))}}}(),e=t.getCopy(),n=(0,y.useMemo)((function(){var t=[];return e.forEach((function(e){var n=e.name.split(".")[0],r=f.G.Database.getArtifactBonusFactories().find((function(t){return t.name===n}));if(!r)throw new Error("Effect not found: "+n);var o=r.effects.find((function(t){return t.name===e.name}));if(!o)throw new Error("Effect not found: "+e.name);t.push([e,o])})),t}),[e]),b=(0,d.r)(),B=(0,w.a)(),F=(0,L.s0)(),H=(0,l.Z)(),S=(0,h.L)(),T=(0,y.useState)(0),A=(0,i.Z)(T,2),E=A[0],P=A[1];function z(){return(z=(0,o.Z)((0,r.Z)().mark((function t(){var n,o,i,s,u;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=(0,a.vo)(),o=n.character,i=n.rotationId,b.show(),t.next=4,(0,x.q$)({id:i});case 4:return s=t.sent[0],t.next=7,m({character:o,rotation:s,query:H.getFilter(),filters:S.getFilters(),effects:e},(function(t,e){b.setCurrent(t),b.setTotal(e)}));case 7:u=t.sent,B.setArtifacts(u),b.hide(),F("/editor/optimizer/results");case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return(0,y.useEffect)((function(){(function(t){var e=performance.now();return(0,Z.HB)().postMessage({id:e,type:"optimizer-artifacts-count",data:null!==t&&void 0!==t?t:{}}),new Promise((function(t){var n=(0,Z.HB)().addMessageListener((function(r){r.id===e&&(t(r.result),(0,Z.HB)().removeMessageListener(n))}))}))})(H.getFilter()).then(P)}),[H]),(0,M.jsxs)(C.Z,{gap:1,children:[(0,M.jsxs)(C.Z,{gap:1,direction:"horizontal",children:[(0,M.jsx)(j.Z,{variant:"warning",className:"text-black w-100",onClick:function(){return z.apply(this,arguments)},children:(0,g.KF)("OPTIMIZER_OPTIMIZE_N",{n:E})}),(0,M.jsx)(c.J,{})]}),(0,M.jsx)(u.X,{}),(0,M.jsx)(k.Z,{className:"gx-1 gy-1",children:n.map((function(e,n){var r=(0,i.Z)(e,2),o=r[0],a=r[1];return(0,M.jsx)(N.Z,{xl:6,md:12,children:(0,M.jsx)(s.h,{className:"h-100",hideToggle:!0,hideDescription:!0,effect:o,factory:a,onChange:function(){return t.setEffect(n,o)}})},n)}))})]})}},26671:function(t,e,n){n.d(e,{Z:function(){return a}});var r=n(1413),o=n(79931),i=n(10340),a=function(){var t=(0,i.T)(),e=(0,i.C)((function(t){return t.artifactsFilter}));return(0,r.Z)((0,r.Z)({},e),{},{setPiece:function(e){t(o.Nw.setPiece(e))},setBonus:function(e){t(o.Nw.setBonus(e))},setMainstat:function(e){t(o.Nw.setMainstat(e))},setLevel:function(e){t(o.Nw.setLevel(e))},setSubstats:function(e){t(o.Nw.setSubstats(e))},setSubstatsOperator:function(e){t(o.Nw.setSubstatsOperator(e))},setLocked:function(e){t(o.Nw.setLocked(e))},getFilter:function(){return e},getCount:function(){var t,n,r,o,i,a,s,u,c,f=0;return f+=null!==(t=null===(n=e.piece)||void 0===n?void 0:n.length)&&void 0!==t?t:0,f+=null!==(r=null===(o=e.bonus)||void 0===o?void 0:o.length)&&void 0!==r?r:0,f+=null!==(i=null===(a=e.mainstat)||void 0===a?void 0:a.length)&&void 0!==i?i:0,f+=null!==(s=null===(u=e.substats)||void 0===u||null===(c=u.list)||void 0===c?void 0:c.length)&&void 0!==s?s:0,e.level&&(e.level.min>0||e.level.max<20)&&f++,f}})}},1836:function(t,e,n){n.d(e,{r:function(){return a}});var r=n(1413),o=n(76159),i=n(10340);function a(){var t=(0,i.T)(),e=(0,i.C)((function(t){return t.loading}));return(0,r.Z)((0,r.Z)({},e),{},{value:e.current/e.total,show:function(){return t(o.Nw.show(!0))},hide:function(){return t(o.Nw.show(!1))},setTotal:function(e){return t(o.Nw.total(e))},setCurrent:function(e){return t(o.Nw.current(e))},setLabel:function(e){return t(o.Nw.label(e))}})}},92882:function(t,e,n){n.d(e,{L:function(){return i}});var r=n(10340),o=n(78049);function i(){var t=(0,r.T)(),e=(0,r.C)((function(t){return t.filter}));return{getFilters:function(){return null!==e&&void 0!==e?e:[]},addFilter:function(e){t(o.z.actions.addFilter(e))},removeFilter:function(e){t(o.z.actions.removeFilter(e))},setFilter:function(e,n){t(o.z.actions.setFilter([e,n]))}}}},46323:function(t,e,n){n.d(e,{a:function(){return a}});var r=n(1413),o=n(60489),i=n(10340);function a(){var t=(0,i.T)(),e=(0,i.C)((function(t){return t.result}));return(0,r.Z)((0,r.Z)({},e),{},{setRows:function(e){t(e?o.Nw.setRows(e):o.Nw.setRows([]))},setStates:function(e){t(e?o.Nw.setStates(e):o.Nw.setStates([]))},setArtifacts:function(e){t(o.Nw.setArtifacts(e))},setResinStates:function(e){t(o.Nw.setResinStates(e))}})}},47017:function(t,e,n){n.d(e,{L$:function(){return u},SP:function(){return v},dO:function(){return f},om:function(){return d},q$:function(){return a}});var r=n(74165),o=n(15861),i=n(29447);function a(t){return s.apply(this,arguments)}function s(){return s=(0,o.Z)((0,r.Z)().mark((function t(e){var n;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=performance.now(),t.abrupt("return",new Promise(function(){var t=(0,o.Z)((0,r.Z)().mark((function t(o,a){var s;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s=(0,i.HB)().addMessageListener((function(t){"storage-rotations"===t.type&&t.id===n&&(t.error?a(t.error):((0,i.HB)().removeMessageListener(s),o(t.result)))})),(0,i.HB)().postMessage({type:"storage-rotations",id:n,data:{get:e||{}}});case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()));case 2:case"end":return t.stop()}}),t)}))),s.apply(this,arguments)}function u(t){return c.apply(this,arguments)}function c(){return c=(0,o.Z)((0,r.Z)().mark((function t(e){var n;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.id){t.next=2;break}return t.abrupt("return",!1);case 2:return n=performance.now(),t.abrupt("return",new Promise(function(){var t=(0,o.Z)((0,r.Z)().mark((function t(o,a){var s;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s=(0,i.HB)().addMessageListener((function(t){"storage-rotations"===t.type&&t.id===n&&(t.error?a(t.error):((0,i.HB)().removeMessageListener(s),o(t.result)))})),(0,i.HB)().postMessage({type:"storage-rotations",id:n,data:{set:{id:e.id,rotation:e}}});case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()));case 4:case"end":return t.stop()}}),t)}))),c.apply(this,arguments)}function f(t){return l.apply(this,arguments)}function l(){return l=(0,o.Z)((0,r.Z)().mark((function t(e){var n;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==e.id&&null!==e.id){t.next=2;break}return t.abrupt("return");case 2:return n=performance.now(),t.abrupt("return",new Promise(function(){var t=(0,o.Z)((0,r.Z)().mark((function t(o,a){var s;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s=(0,i.HB)().addMessageListener((function(t){"storage-rotations"===t.type&&t.id===n&&(t.error?a(t.error):((0,i.HB)().removeMessageListener(s),o(t.result)))})),(0,i.HB)().postMessage({type:"storage-rotations",id:n,data:{duplicate:{id:e.id}}});case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()));case 4:case"end":return t.stop()}}),t)}))),l.apply(this,arguments)}function d(t){return p.apply(this,arguments)}function p(){return p=(0,o.Z)((0,r.Z)().mark((function t(e){var n;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==e.id&&null!==e.id){t.next=2;break}return t.abrupt("return",!1);case 2:return n=performance.now(),t.abrupt("return",new Promise(function(){var t=(0,o.Z)((0,r.Z)().mark((function t(o,a){var s;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s=(0,i.HB)().addMessageListener((function(t){"storage-rotations"===t.type&&t.id===n&&(t.error?a(t.error):((0,i.HB)().removeMessageListener(s),o(t.result)))})),(0,i.HB)().postMessage({type:"storage-rotations",id:n,data:{delete:{id:e.id}}});case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()));case 4:case"end":return t.stop()}}),t)}))),p.apply(this,arguments)}function v(t){return h.apply(this,arguments)}function h(){return h=(0,o.Z)((0,r.Z)().mark((function t(e){var n;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=performance.now(),t.abrupt("return",new Promise(function(){var t=(0,o.Z)((0,r.Z)().mark((function t(o,a){var s;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s=(0,i.HB)().addMessageListener((function(t){"storage-rotations"===t.type&&t.id===n&&(t.error?a(t.error):((0,i.HB)().removeMessageListener(s),o(t.result)))})),(0,i.HB)().postMessage({type:"storage-rotations",id:n,data:{add:{characterName:e}}});case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()));case 2:case"end":return t.stop()}}),t)}))),h.apply(this,arguments)}}}]);