"use strict";(self.webpackChunkgenshin_gui=self.webpackChunkgenshin_gui||[]).push([[851,3736,720,6474,7829],{65476:function(n,e,t){t.d(e,{Tw:function(){return o}});var r=t(93324);function i(n,e,t){return n+(e-n)*t}function a(n){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n);return e?[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]:[0,0,0]}function c(n){var e=function(n){return Math.floor(Math.min(Math.max(0,n),255)).toString(16)},t=e(n[0]),r=e(n[1]),i=e(n[2]);return"#"+(1===t.length?"0"+t:t)+(1===r.length?"0"+r:r)+(1===i.length?"0"+i:i)}function s(n){if(n.map.length<=1)throw new Error("Colormap must have at least two colors");return n.map[0].factor>0&&n.map.unshift({factor:0,color:n.map[0].color}),function(e){var t=n.min,s=n.max,o=n.map;if(e<=t)return c(a(o[0].color));if(e>=s)return c(a(o[o.length-1].color));var l,u,d=(e-t)/(s-t),f=o.findIndex((function(n){return n.factor>=d}));if(0===f)return o[0].color;d<=o[0].factor&&console.log(d),-1===f?(l=o[o.length-2],u=o[o.length-1]):(l=o[f-1],u=o[f]);var h=l.factor,x=u.factor,m=(d-h)/(x-h);return function(n,e,t){var s=a(n),o=(0,r.Z)(s,3),l=o[0],u=o[1],d=o[2],f=a(e),h=(0,r.Z)(f,3),x=h[0],m=h[1],v=h[2];return c([i(l,x,t),i(u,m,t),i(d,v,t)])}(l.color,u.color,m)}}function o(n,e){return s({min:n,max:e,map:[{factor:0,color:"ff6400"},{factor:.5,color:"fff000"},{factor:1,color:"1aff00"}]})}},60720:function(n,e,t){function r(n,e,t){"string"===typeof n&&(n=[n]);var r=t?function(n,e){return n===e}:function(n,e){return n.toLowerCase().includes(e.toLowerCase())},i=n;return e.map((function(n,e){return i.some((function(e){return"string"===typeof n?r(n,e):n.some((function(n){return r(n,e)}))}))?e:-1})).filter((function(n){return-1!==n}))}t.d(e,{D:function(){return r}})},87882:function(n,e,t){t.d(e,{c7:function(){return T},gw:function(){return Z},Rp:function(){return C}});var r=t(93433),i=t(74165),a=t(15861),c=t(96103),s=t(75936),o=t(17829),l=t(45043),u=t(79188),d=t(47313),f=t(465),h=t(89582),x=t(71587),m=t(65476),v=t(46417),g=(0,m.Tw)(0,3);function j(n){var e=n.stars,t=n.roll,i=(0,d.useMemo)((function(){return l.G.DatabaseValues.getSubstatRolls(e,t.name)}),[e,t.name]);return(0,v.jsx)("div",{children:t.rolls.map((function(n,e){return(0,r.Z)(Array(n).keys()).map((function(n,r){return(0,v.jsx)("div",{className:"d-inline-block text-black pt-1 pb-1 ps-4 pe-4",style:{backgroundColor:g(e)},children:(0,l.q)(t.name,i[e])},r)}))}))})}function p(n){var e=n.artifact,t=(0,d.useMemo)((function(){return e.substats.map((function(n){var t=l.G.DatabaseValues.getSubstatRolls(e.stars,n.name),r=l.G.calculateRolls(n,e.stars,!1),i=r.reduce((function(n,e){return n+e}),0),a=r.reduce((function(n,e,r){return n+e*t[r]}),0)/(t[t.length-1]*i)||0;return{name:n.name,rolls:r,total:i,efficiency:a}}))}),[e]),r=(0,d.useMemo)((function(){return t.reduce((function(n,e){return n+e.total}),0)}),[t]),i=(0,d.useMemo)((function(){return l.G.DatabaseValues.getMaxRolls(e.stars)}),[e]);return(0,v.jsxs)(f.Z,{striped:!0,bordered:!0,hover:!0,responsive:!0,children:[(0,v.jsx)("thead",{children:(0,v.jsxs)("tr",{children:[(0,v.jsx)("th",{children:(0,u.KF)("STAT_LONG")}),(0,v.jsxs)("th",{children:[(0,u.KF)("ARTIFACT_ROLLS"),(0,v.jsx)("h5",{className:"d-inline-block m-0 ms-2",children:(0,v.jsxs)(h.Z,{bg:r<=i?"info":"danger",children:[r,"/",i]})})]}),(0,v.jsx)("th",{children:(0,u.KF)("STAT_TOTAL")}),(0,v.jsx)("th",{children:(0,u.KF)("STAT_EFFICIENCY")})]})}),(0,v.jsx)("tbody",{children:t.map((function(n,t){return(0,v.jsxs)("tr",{children:[(0,v.jsx)("td",{className:"align-middle",children:l.G.Describe.getTitle(n.name)}),(0,v.jsx)("td",{className:"align-middle",children:(0,v.jsx)(j,{stars:e.stars,roll:n})}),(0,v.jsx)("td",{className:"align-middle",children:(0,l.q)(n.name,e.substats[t].value)}),(0,v.jsx)("td",{className:"align-middle",children:(0,v.jsx)(x.Z,{className:"text-black",variant:"warning",now:100*n.efficiency,label:l.G.percent(n.efficiency,!0,2)})})]},t)}))})]})}var Z=function(){return[{title:(0,u.KF)("ARTIFACT_VIEW_SUBSTAT_ROLLS"),action:function(n){return(0,a.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,(0,s.a)({title:(0,u.KF)("ARTIFACT_SUBSTAT_ROLLS"),message:(0,v.jsx)(p,{artifact:n})});case 3:case"end":return e.stop()}}),e)})))()}},{title:(0,u.KF)("ARTIFACT_CLEAR"),action:function(n){return(0,a.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,o.Q)({message:(0,u.KF)("ARTIFACT_CONFIRMCLEAR"),size:"sm"});case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:n.bonus=void 0,n.mainstat.value=0,n.substats.forEach((function(n){return n.value=0}));case 8:case"end":return e.stop()}}),e)})))()}}]},C=function(){return[].concat((0,r.Z)(Z()),[{title:(0,u.KF)("ACTION_EQUIP"),action:function(n){return(0,a.Z)((0,i.Z)().mark((function e(){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,o.Q)({message:(0,u.KF)("ACTION_CONFIRMEQUIP")});case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:t=(0,c.tl)(),l.G.CharacterLoader.importArtifacts([n],t),(0,s.a)({message:(0,u.KF)("ACTION_DONE")});case 8:case"end":return e.stop()}}),e)})))()}},{title:(0,u.KF)("ACTION_DELETE"),action:function(){return(0,a.Z)((0,i.Z)().mark((function n(){var e;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,o.Q)({message:(0,u.KF)("ARTIFACT_CONFIRMDELETE")});case 2:return e=n.sent,n.abrupt("return",e);case 4:case"end":return n.stop()}}),n)})))()}}])},T=C().findIndex((function(n){return n.title===(0,u.KF)("ACTION_DELETE")}))},4276:function(n,e,t){t.d(e,{J:function(){return L}});var r=t(97273),i=t(45043),a=t(93298),c=t(65832),s=t(48648),o=t(31136),l=t(63849),u=t(31616),d=t(89452),f=t(87882),h=t(79188),x=t(68582),m=t(47313),v=t(80035),g=t(2532),j=t(46417);function p(n){var e,t=n.artifact,r=n.onChange,c=n.readonly,s=(0,x.Z)().language,l=(0,m.useMemo)((function(){var n=function(n){return i.G.Database.getArtifactBonusFactories().filter((function(e){return e.maxstars===n})).map((function(n){return[i.G.Describe.getTitle(n),n.name]})).sort((function(n,e){return n[0].localeCompare(e[0])}))};return{4:n(4),5:n(5)}}),[s]);function u(n){c||(t.bonus=n&&""!==n?n:void 0,r())}var d=(0,j.jsxs)(v.Z,{children:[(0,j.jsx)(v.Z.Header,{children:(0,h.KF)("ARTIFACT_SET_EFFECT")}),(0,j.jsx)(v.Z.Body,{children:(0,j.jsxs)(g.Z.Select,{autoFocus:!0,disabled:c,onChange:function(n){return u(n.target.value)},value:null!==(e=t.bonus)&&void 0!==e?e:"",children:[(0,j.jsx)("option",{value:"",children:(0,h.KF)("ARTIFACT_NO_SET_EFFECT")}),(0,j.jsx)("optgroup",{label:"4x",children:l[4].map((function(n,e){return(0,j.jsx)("option",{value:n[1],children:n[0]},e)}))}),(0,j.jsx)("optgroup",{label:"5x",children:l[5].map((function(n,e){return(0,j.jsx)("option",{value:n[1],children:n[0]},e)}))})]})})]}),f=t.bonus?i.G.Describe.getTitle(t.bonus):(0,h.KF)("ARTIFACT_NO_SET_EFFECT");return(0,j.jsx)(o.Z,{rootClose:!0,trigger:"click",overlay:d,children:(0,j.jsx)(a.Z,{disabled:c,className:"w-100",variant:"success",children:f})})}var Z=t(95668),C=t(71518),T=t(43832);function b(n){var e=n.artifact,t=n.onChange;return(0,j.jsx)(o.Z,{overlay:(0,j.jsx)(Z.Z,{children:(0,h.KF)(e.locked?"ACTION_LOCKED":"ACTION_UNLOCKED")}),trigger:["hover","focus"],children:(0,j.jsx)(a.Z,{onClick:function(){e.locked=!e.locked,t&&t()},children:e.locked?(0,j.jsx)(C.Z,{}):(0,j.jsx)(T.Z,{})})})}var F=t(41251),A=t(45624),N=t(87994),y=function(n){return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(N.Z,{className:"me-1",style:{verticalAlign:"-0.125em"}}),n]})};function k(n){var e=n.artifact,t=n.onChange,r=n.readonly;return(0,j.jsx)(F.Z,{disabled:r,onSelect:function(n){if(n){var r=parseInt(n);4!==r&&5!==r||(e.stars=r,t())}},title:y(e.stars),children:[4,5].map((function(n){return(0,j.jsx)(A.Z.Item,{eventKey:n,children:y(n)},n)}))})}var E=t(64919),I=t(36687);function _(n){var e=n.artifact,t=n.stat,r=n.onChange,a=n.readonly,c=t===e.mainstat,o=i.G.Values.isFlatStat(t.name),l=(0,m.useMemo)((function(){return c?i.G.getMainstatsFor(e.piece):i.G.getSubstatsFor(e.mainstat.name)}),[e,t,e.mainstat.name]);return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(u.Z,{xs:8,children:(0,j.jsx)(s.Z,{direction:"horizontal",children:(0,j.jsx)(F.Z,{disabled:a,className:"w-100",onSelect:function(n){if(!a&&n){var i=n;if(l.includes(i)){if(c)t.name=i;else{var s=e.substats.find((function(n){return n.name===i})),o=t.name;t.name=i,s&&(s.name=o)}r()}}},size:c?void 0:"sm",variant:c?"warning":void 0,as:I.Z,title:i.G.Describe.getTitle(t.name),children:l.map((function(n,e){return(0,j.jsx)(A.Z.Item,{eventKey:n,onClick:function(){},children:i.G.Describe.getTitle(n)},e)}))})})}),(0,j.jsx)(u.Z,{xs:4,children:(0,j.jsx)(E.K,{disabled:a,size:c?void 0:"sm",value:t.value,percent:!i.G.Values.isFlatStat(t.name),places:o?0:1,onChange:function(n,e){a||(t.value=n,(t.value<n||n<0)&&e(),r())}})})]})}var S=t(26934),R=t(12014);function L(n){var e=n.showLock,t=n.actions,h=n.artifact,x=n.onChange,m=n.readonly,v=n.onChangeMainstat,g=n.onChangeSubstat,Z=n.onChangeBonus,C=n.onChangeStars,T=n.onActionFinish,F=n.onAccept,A=n.onCancel,N=n.isDraft;function y(n){null===g||void 0===g||g(n),null===x||void 0===x||x()}function E(n,e){null===T||void 0===T||T(n,e),null===x||void 0===x||x()}t||(t=(0,f.gw)()),N&&(t=[],e=!1);var I=(0,j.jsx)(r.C,{item:h,actions:t,placement:"right",onActionFinish:function(n,e){return E(n,e)}}),L=(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(a.Z,{variant:"success",onClick:F,children:(0,j.jsx)(S.Z,{})}),(0,j.jsx)(a.Z,{variant:"danger",onClick:A,children:(0,j.jsx)(R.Z,{})})]});return(0,j.jsx)("div",{className:N?"animated-border":void 0,children:(0,j.jsxs)(c.Z,{children:[(0,j.jsx)(c.Z.Header,{className:"bg-info",children:(0,j.jsxs)(s.Z,{direction:"horizontal",gap:1,children:[e?(0,j.jsx)(b,{artifact:h,onChange:x}):null,(0,j.jsx)(k,{artifact:h,onChange:function(){null===C||void 0===C||C(),null===x||void 0===x||x()},readonly:m}),(0,j.jsx)("h5",{className:"m-0 me-auto",children:i.G.Describe.getTitle(h.piece)}),N?L:(0,j.jsx)(o.Z,{rootClose:!0,trigger:"click",placement:"bottom",overlay:I,children:(0,j.jsx)(a.Z,{disabled:m,children:(0,j.jsx)(d.Z,{style:{verticalAlign:"-0.125em"}})})})]})}),(0,j.jsx)(c.Z.Body,{children:(0,j.jsxs)(l.Z,{className:"gx-1 gy-1",children:[(0,j.jsx)(u.Z,{xs:12,children:(0,j.jsx)(p,{artifact:h,onChange:function(){null===Z||void 0===Z||Z(),null===x||void 0===x||x()},readonly:m})}),(0,j.jsx)(_,{readonly:m,artifact:h,stat:h.mainstat,onChange:function(){null===v||void 0===v||v(),null===x||void 0===x||x()}}),h.substats.map((function(n,e){return(0,j.jsx)(_,{readonly:m,artifact:h,stat:n,onChange:function(){return y(e)}},e)}))]})})]})})}},86828:function(n,e,t){t.d(e,{X:function(){return g}});var r=t(1413),i=t(45987),a=t(45043),c=t(13736),s=t(46474),o=t(79188),l=t(48648),u=t(2532),d=t(85278),f=t(46417),h=["effect","isOwnEffect","onChange"];function x(n){var e=n.effect,t=n.isOwnEffect,a=n.onChange,c=(0,i.Z)(n,h);return(0,f.jsx)(d.h,(0,r.Z)((0,r.Z)({},c),{},{effect:e,factory:e.factory,replaceTitle:t?function(n){return n.replace(/\((.*)\)\s*/g,(function(n,e){var t=e.split(" ").pop();return t&&t.match(/^C\d$/)?"(".concat(t,") "):""}))}:void 0,onChange:function(n){!0===n?e.enable():!1===n&&e.disable(),a()}}))}var m=t(47313),v=["effects","onChange","hideToggle"];function g(n){var e=n.effects,t=n.onChange,d=n.hideToggle,h=(0,i.Z)(n,v),g=(0,s.R)(e,(function(n){return a.G.Describe.getTitle(n.name)+" "+a.G.Describe.getDescription(n.name)})),j=g.search,p=g.setSearch,Z=g.items,C=(0,c.h)(Z,5);return(0,f.jsxs)("div",{children:[e.length<=5?null:(0,f.jsxs)(l.Z,{gap:1,children:[(0,f.jsx)("div",{children:(0,f.jsx)(u.Z.Control,{size:"sm",type:"text",placeholder:(0,o.KF)("EFFECT_SEARCH"),value:j,onChange:function(n){return p(n.target.value)}})}),(0,f.jsx)("div",{className:"d-flex justify-content-center",children:(0,f.jsx)(C.Pagination,{})})]}),C.items.map((function(n,e){return(0,f.jsx)("div",{className:"m-1",children:(0,m.createElement)(x,(0,r.Z)((0,r.Z)({},h),{},{hideToggle:null===d||void 0===d?void 0:d(n),highlight:j,key:n.name,effect:n,onChange:function(){return t(n)}}))},e)})),0===C.items.length?(0,f.jsx)("div",{className:"text-center",children:(0,o.KF)("EFFECT_EMPTY")}):null,e.length<=5?null:(0,f.jsx)("div",{className:"d-flex justify-content-center",children:(0,f.jsx)(C.Pagination,{})})]})}},97273:function(n,e,t){t.d(e,{C:function(){return x}});var r=t(74165),i=t(15861),a=t(1413),c=t(15671),s=t(43144),o=t(60136),l=t(27277),u=t(47313),d=t(2304),f=t(80035),h=t(46417),x=function(n){(0,o.Z)(t,n);var e=(0,l.Z)(t);function t(){return(0,c.Z)(this,t),e.apply(this,arguments)}return(0,s.Z)(t,[{key:"render",value:function(){var n=this,e=(0,a.Z)({},this.props);delete e.item,delete e.actions,delete e.onActionFinish,delete e.popover;var t=!1!==this.props.popover,c=(0,h.jsx)(d.Z,{children:this.props.actions.map((function(e,t){return(0,h.jsx)(d.Z.Item,{action:!0,onClick:(0,i.Z)((0,r.Z)().mark((function i(){var a,c,s;return(0,r.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.action(n.props.item);case 2:s=r.sent,null===(a=(c=n.props).onActionFinish)||void 0===a||a.call(c,t,s);case 4:case"end":return r.stop()}}),i)}))),children:e.title},t)}))});return t?(0,h.jsx)(f.Z,(0,a.Z)((0,a.Z)({},e),{},{children:(0,h.jsx)(f.Z.Body,{children:c})})):c}}]),t}(u.Component)},95878:function(n,e,t){t.d(e,{L:function(){return c}});var r=t(93324),i=t(47313),a=t(46417);function c(n){var e,t=n.children,c=(0,i.useReducer)((function(n){return(n+1)%7}),0),s=(0,r.Z)(c,2)[1];return(0,a.jsx)(a.Fragment,{children:null!==(e=t(s))&&void 0!==e?e:null})}},17829:function(n,e,t){t.d(e,{Q:function(){return d}});var r=t(93324),i=t(79188),a=t(47313),c=t(98410),s=t(93298),o=t(76487),l=t(46417);function u(n){var e,t,o,u,d=(0,a.useState)(!0),f=(0,r.Z)(d,2),h=f[0],x=f[1],m=n.props;function v(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];x(!1),n.proceed(e)}var g=null===(e=null===m||void 0===m?void 0:m.closeButton)||void 0===e||e,j=null===(t=n.props)||void 0===t?void 0:t.message,p=j?"function"===typeof j?j(v):j:"";return(0,l.jsxs)(c.Z,{size:null!==(o=null===m||void 0===m?void 0:m.size)&&void 0!==o?o:"lg",show:h,onHide:v,children:[(0,l.jsx)(c.Z.Header,{closeButton:g,children:(0,l.jsx)(c.Z.Title,{id:"contained-modal-title-vcenter",children:null!==(u=null===m||void 0===m?void 0:m.title)&&void 0!==u?u:(0,i.KF)("DIALOG_CONFIRM")})}),(0,l.jsx)(c.Z.Body,{children:p}),(0,l.jsxs)(c.Z.Footer,{children:[(0,l.jsx)(s.Z,{variant:"success",onClick:function(){return v(!0)},children:(null===m||void 0===m?void 0:m.accept)||(0,i.KF)("DIALOG_ACCEPT")}),(0,l.jsx)(s.Z,{variant:"danger",onClick:function(){return v(!1)},children:(null===m||void 0===m?void 0:m.cancel)||(0,i.KF)("DIALOG_CANCEL")})]})]})}var d=function(n){return(0,o.LA)((0,o.mP)(u))({props:n})}},13736:function(n,e,t){t.d(e,{h:function(){return s}});var r=t(93324),i=t(47313),a=t(38804),c=t(46417);function s(n,e){var t=(0,i.useState)(1),s=(0,r.Z)(t,2),o=s[0],l=s[1],u=(0,i.useMemo)((function(){return Math.ceil(n.length/e)}),[n,e]),d=(0,i.useMemo)((function(){var n=Array.from(Array(u).keys()).map((function(n){return n+1}));if(n.length>5){var e=n.length-o,t=Math.min(e,5),r=Math.max(5-t,Math.floor(2.5)),i=Math.max(0,o-r);return n.slice(i,i+5)}return n}),[u,o]);(0,i.useEffect)((function(){o>u&&l(1)}),[u,o]);var f=function(){var n=o-1;n<=0&&(n=u),l(n)},h=function(){var n=o+1;n>u&&(n=1),l(n)},x=(0,i.useMemo)((function(){return n.slice((o-1)*e,o*e)}),[o,n,e]);return{page:o,items:x,Pagination:function(){return(0,c.jsxs)(a.Z,{className:"m-0",children:[(0,c.jsx)(a.Z.Prev,{onClick:f}),d.map((function(n,e){return-1!==n?(0,c.jsx)(a.Z.Item,{active:n===o,onClick:function(){return l(n)},children:n},e):(0,c.jsx)(a.Z.Ellipsis,{},e)})),(0,c.jsx)(a.Z.Next,{onClick:h})]})},gotoNext:h,gotoPrev:f,findItem:function(t){var r=n.indexOf(t)+1;return r<0?-1:Math.ceil(r/e)},setPage:function(n){n<1&&(n=1),n>u&&(n=u),l(n)}}}},46474:function(n,e,t){t.d(e,{R:function(){return c}});var r=t(93324),i=t(60720),a=t(47313);function c(n,e,t){var c=(0,a.useState)(t||""),s=(0,r.Z)(c,2),o=s[0],l=s[1],u=(0,a.useMemo)((function(){return o?(0,i.D)(o,n.map((function(n){return e(n)}))).map((function(e){return n[e]})):n}),[o,n,e]);return(0,a.useEffect)((function(){return l(t||"")}),[t]),{search:o,setSearch:l,items:u}}},50851:function(n,e,t){t.r(e),t.d(e,{default:function(){return R},position:function(){return S},title:function(){return _}});var r=t(96103),i=t(4276),a=t(95878),c=t(75936),s=t(79188),o=t(65832),l=t(93298),u=t(93324),d=t(65476),f=t(45043),h=t(47313),x=t(465),m=t(93433),v=t(71587),g=t(26934),j=t(64919),p=t(46417);function Z(n){var e,t=n.editor,i=n.stat,a=n.onClick,c=(0,h.useState)([0,0,0,0]),s=(0,u.Z)(c,2),o=s[0],d=s[1],x=null!==(e=t.getTotalRolls()[i])&&void 0!==e?e:[0,0,0,0],Z=o.reduce((function(n,e){return n+e}),0),C=t.getAvailableTotalRollsCount(i),T=Z>C;(0,h.useEffect)((function(){return d((0,m.Z)(x))}),(0,m.Z)(x));var F=0===C?"":Z+"/"+C,A=(0,r.tl)().artifacts,N=f.G.reduceArray(A.map((function(n){return n.substats.filter((function(n){return n.name===i})).map((function(n){return n.value}))}))).reduce((function(n,e){return n+e}),0);return(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{className:"align-middle",children:f.G.Describe.getTitle(i)}),o.map((function(n,e){return(0,p.jsx)("td",{className:"align-middle text-black text-center",style:{backgroundColor:b(e),width:64},children:(0,p.jsx)(j.K,{size:"sm",style:{width:16},value:n,onChange:function(n){var t=(0,m.Z)(o);t[e]=n,d(t)}})},e)})),(0,p.jsx)("td",{className:"align-middle",children:(0,p.jsx)(v.Z,{variant:T?"danger":"info",now:Z,max:C,label:F})}),(0,p.jsx)("td",{className:"align-middle",children:(0,f.q)(i,N)}),(0,p.jsx)("td",{children:0===C?null:(0,p.jsx)("div",{className:"d-flex justify-content-center",children:(0,p.jsx)(l.Z,{disabled:T,variant:T?"danger":"success",onClick:function(){T||a(o)},children:(0,p.jsx)(g.Z,{style:{verticalAlign:"-0.125em"}})})})})]})}var C=t(2377);function T(n){var e,t=n.editor,i=n.stat,a=n.onClick,c=null!==(e=t.getTotalRolls()[i])&&void 0!==e?e:[0,0,0,0],s=c.reduce((function(n,e){return n+e}),0),o=t.getAvailableTotalRollsCount(i),u=(0,r.tl)().artifacts,d=f.G.reduceArray(u.map((function(n){return n.substats.filter((function(n){return n.name===i})).map((function(n){return n.value}))}))).reduce((function(n,e){return n+e}),0),h=0===o?"":s+"/"+o;return(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{className:"align-middle",children:f.G.Describe.getTitle(i)}),c.map((function(n,e){return(0,p.jsx)("td",{className:"align-middle text-black text-center",style:{backgroundColor:b(e),width:64},children:n},e)})),(0,p.jsx)("td",{className:"align-middle",children:(0,p.jsx)(v.Z,{variant:"info",now:s,max:o,label:h})}),(0,p.jsx)("td",{className:"align-middle",children:(0,f.q)(i,d)}),(0,p.jsx)("td",{children:0===o?null:(0,p.jsx)("div",{className:"d-flex justify-content-center",children:(0,p.jsx)(l.Z,{onClick:a,children:(0,p.jsx)(C.Z,{style:{verticalAlign:"-0.125em"}})})})})]})}var b=(0,d.Tw)(0,3);function F(n){var e=n.character,t=n.onChange,r=(0,h.useState)(void 0),i=(0,u.Z)(r,2),a=i[0],c=i[1],o=e.getEditor(),l=o.getTotalCount(),d=o.getTotal(),m=e.artifacts.map((function(n){return f.G.DatabaseValues.getMaxRolls(n.stars)})).reduce((function(n,e){return n+e}),0);return(0,p.jsxs)(x.Z,{responsive:!0,children:[(0,p.jsx)("thead",{children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{className:"text-center",children:(0,s.KF)("STAT_LONG")}),(0,p.jsx)("th",{colSpan:4,className:"text-center",children:(0,s.KF)("ARTIFACT_ROLLS")}),(0,p.jsx)("th",{className:"text-center",children:(0,s.KF)("STAT_TOTAL")}),(0,p.jsx)("th",{className:"text-center",children:(0,s.KF)("STAT_VALUE")}),(0,p.jsx)("th",{className:"text-center",children:(0,s.KF)("ACTION")})]})}),(0,p.jsx)("tbody",{children:f.G.ArtifactType.ListSubstats.map((function(n){return n===a?(0,p.jsx)(Z,{editor:o,stat:n,onClick:function(e){return function(n,e){o.assignRolls(n,e,!0),c(void 0),t()}(n,e)}},n):(0,p.jsx)(T,{editor:o,stat:n,onClick:function(){return c(n)}},n)}))}),(0,p.jsx)("tfoot",{children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{className:"align-middle",children:(0,s.KF)("STAT_TOTAL")}),l.map((function(n,e){return(0,p.jsx)("td",{className:"align-middle text-black text-center",style:{backgroundColor:b(e)},children:(0,p.jsx)("strong",{children:n})},e)})),(0,p.jsx)("td",{colSpan:3,className:"align-middle text-center",children:(0,p.jsxs)("strong",{children:[d,"/",m]})})]})})]})}function A(n){var e=n.character,t=n.onChange;return(0,p.jsx)(o.Z,{className:"border-info",children:(0,p.jsx)(o.Z.Body,{children:(0,p.jsx)(l.Z,{size:"lg",onClick:function(){(0,c.a)({closeButton:!1,title:(0,s.KF)("ARTIFACT_ROLLS_EDITOR"),message:(0,p.jsx)(a.L,{children:function(n){return(0,p.jsx)(F,{character:e,onChange:n})}})}).then((function(){e.removeEditor(),t()}))},children:(0,s.KF)("ARTIFACT_ROLLS_EDITOR")})})})}var N=t(86828),y=t(42072),k=t(22102),E=t(63849),I=t(31616),_="artifacts",S=1;function R(){var n=(0,r.tl)(),e=(0,y.P)().update;return(0,p.jsx)(k.Z,{children:(0,p.jsxs)(E.Z,{className:"gx-2 gy-2",children:[n.artifacts.map((function(n,t){return(0,p.jsx)(I.Z,{sm:12,md:6,lg:4,children:(0,p.jsx)(a.L,{children:function(t){return(0,p.jsx)(i.J,{artifact:n,onActionFinish:e,onChangeBonus:e,onChange:t})}})},t)})),(0,p.jsx)(I.Z,{sm:12,md:6,lg:4,children:(0,p.jsx)("div",{className:"position-relative w-100 h-100 d-flex justify-content-center align-items-center",children:(0,p.jsx)(A,{character:n,onChange:e})})}),(0,p.jsx)(I.Z,{xs:12,children:(0,p.jsx)(N.X,{hideToggle:function(){return!0},effects:n.bonus.effects,onChange:e})})]})})}}}]);