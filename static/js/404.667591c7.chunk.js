"use strict";(self.webpackChunkgenshin_gui=self.webpackChunkgenshin_gui||[]).push([[404,4860,6103,3736,6323,5936,7526,7829],{60403:function(e,n,t){t.d(n,{R:function(){return i}});var r=t(79188);function i(e){var n="";return n+=(0,r.G3)().toLowerCase()+"/","https://github.com/NiuWeb/genshin-damage-calc/blob/help/"+(n=(n+=e).replace(/(\/|\\)+/g,"/"))}},96103:function(e,n,t){t.d(n,{Ce:function(){return f},Uw:function(){return m},dn:function(){return h},mW:function(){return l},tl:function(){return d},vo:function(){return u}});var r=t(45043),i=t(79188),a=t(94860),s=[],c=new a.z0,o=s[0];function l(){return s.map((function(e){return e}))}var u=function(){return o},d=function(){return u().character};function f(e){if(!s.includes(e))throw new Error("Trying to set a project that is not loaded in the central.");o=e}function h(e,n){var t,a;if(e=e?c.insertName(e):c.insertName((0,i.KF)("PROJ_Untitled")),n){var o=(a=n instanceof r.G.Character?n:r.G.CharacterLoader.importCharacter(n)).getRotationFactories();if(null===o||void 0===o||!o.length)throw new Error("THERE ARE NO ROTATIONS LOADED FOR THE CHARACTER ".concat(n.name));t=o[0].id}else t=(a=new r.G.Character(r.G.Database.getCharacterFactories()[0])).getRotationFactories()[0].id;var l={title:e,character:a,rotationId:t};return s.splice(0,0,l),f(l),l}function m(e){if(!e)return!1;var n=s.indexOf(e);return!(n<0)&&(s.splice(n,1),c.removeName(e.title),0===s.length?h():f(0===n?s[0]:s[n-1]),!0)}h(void 0,r.G.Character.create("Albedo"))},65476:function(e,n,t){t.d(n,{Tw:function(){return o}});var r=t(93324);function i(e,n,t){return e+(n-e)*t}function a(e){var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]:[0,0,0]}function s(e){var n=function(e){return Math.floor(Math.min(Math.max(0,e),255)).toString(16)},t=n(e[0]),r=n(e[1]),i=n(e[2]);return"#"+(1===t.length?"0"+t:t)+(1===r.length?"0"+r:r)+(1===i.length?"0"+i:i)}function c(e){if(e.map.length<=1)throw new Error("Colormap must have at least two colors");return e.map[0].factor>0&&e.map.unshift({factor:0,color:e.map[0].color}),function(n){var t=e.min,c=e.max,o=e.map;if(n<=t)return s(a(o[0].color));if(n>=c)return s(a(o[o.length-1].color));var l,u,d=(n-t)/(c-t),f=o.findIndex((function(e){return e.factor>=d}));if(0===f)return o[0].color;d<=o[0].factor&&console.log(d),-1===f?(l=o[o.length-2],u=o[o.length-1]):(l=o[f-1],u=o[f]);var h=l.factor,m=u.factor,v=(d-h)/(m-h);return function(e,n,t){var c=a(e),o=(0,r.Z)(c,3),l=o[0],u=o[1],d=o[2],f=a(n),h=(0,r.Z)(f,3),m=h[0],v=h[1],x=h[2];return s([i(l,m,t),i(u,v,t),i(d,x,t)])}(l.color,u.color,v)}}function o(e,n){return c({min:e,max:n,map:[{factor:0,color:"ff6400"},{factor:.5,color:"fff000"},{factor:1,color:"1aff00"}]})}},30448:function(e,n,t){t.d(n,{c:function(){return l},j:function(){return o}});var r=t(74165),i=t(15861),a=t(93433),s=t(15671),c=t(43144),o=function(){function e(n,t){(0,s.Z)(this,e),this.delay=n,this.callback=t,this.counter=0,this.completed=!0,this.lastParam=void 0,this.onReturn=function(){}}return(0,c.Z)(e,[{key:"internalCall",value:function(e){for(var n=this,t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];this.completed&&(this.completed=!1,setTimeout((function(){n.onReturn(n.callback.apply(n,r)),n.completed=!0,n.counter!==e&&n.lastParam&&n.internalCall.apply(n,[n.counter].concat((0,a.Z)(n.lastParam)))}),this.delay))}},{key:"call",value:function(){this.counter++;for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];this.lastParam=n,this.internalCall.apply(this,[this.counter].concat(n))}}]),e}();function l(e){return u.apply(this,arguments)}function u(){return(u=(0,i.Z)((0,r.Z)().mark((function e(n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){return setTimeout(e,n)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},67526:function(e,n,t){t.d(n,{S:function(){return a},x:function(){return s}});var r=t(74165),i=t(15861);function a(e,n){var t=document.createElement("a");t.style.display="none",t.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(n)),t.setAttribute("download",e),document.body.appendChild(t),t.click(),document.body.removeChild(t)}function s(e,n){return c.apply(this,arguments)}function c(){return(c=(0,i.Z)((0,r.Z)().mark((function e(n,t){var i,a,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e){t&&t(e)},(i=document.createElement("input")).setAttribute("type","file"),i.setAttribute("accept",n),s=new Promise((function(e,n){i.onchange=function(){if(i.files){var t=i.files[0],r=new FileReader;r.addEventListener("loadstart",a),r.addEventListener("load",a),r.addEventListener("progress",a),r.addEventListener("error",a),r.addEventListener("abort",a);var s=new Promise((function(e){r.onloadend=function(t){var i;a(t);var s=null===(i=r.result)||void 0===i?void 0:i.toString();s?e(s):n("Text is undefined")}}));return r.readAsText(t),s.then(e).catch(n),s}}})),document.body.appendChild(i),i.focus(),i.click(),document.body.removeChild(i),e.abrupt("return",s);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},94860:function(e,n,t){t.d(n,{z0:function(){return s}});var r,i=t(15671),a=t(43144),s=function(){function e(n){(0,i.Z)(this,e),this.names=void 0,n||(n=[]),this.names=n.map((function(n){return e.cleanName(n)}))}return(0,a.Z)(e,[{key:"clear",value:function(){this.names.length=0}},{key:"removeName",value:function(e){this.names.splice(this.names.indexOf(e),1)}},{key:"insertName",value:function(n){n=e.cleanName(n);for(var t=0,r=function(){return n+(0===t?"":" ("+t+")")};this.names.includes(r());)t++;return this.names.push(r()),r()}},{key:"validateName",value:function(n){return(n=n.replace(/^\s*([^\s]?.*[^\s])\s*$/i,"$1")).match(/^\s*$/i)?"NAME_EMPTY":n.length>c?"NAME_LARGE":this.names.includes(n)?"NAME_EXISTING":e.cleanName(n)!==n?"NAME_INVALID":"NAME_OK"}}],[{key:"cleanName",value:function(e){return e=(e=(e=(e=e.replace(/^\s*([^\s]?.*[^\s])\s*$/i,"$1")).replace(/(\n|\r|\t)+/g,"")).replace(/([^a-z0-9.,\xe1\xe9\xed\xf3\xfa\xc1\xc9\xcd\xd3\xda\xf1\xd1:_ \-+?!\xbf\xa1#$%&/()])/gi,"")).slice(0,c+1)}}]),e}();!function(e){e[e.NAME_EMPTY=0]="NAME_EMPTY",e[e.NAME_EXISTING=1]="NAME_EXISTING",e[e.NAME_LARGE=2]="NAME_LARGE",e[e.NAME_INVALID=3]="NAME_INVALID",e[e.NAME_OK=4]="NAME_OK"}(r||(r={}));var c=80},97679:function(e,n,t){function r(e,n){for(var t=e.toFixed(n),r=t.length-1;r>=0&&"0"===t[r];r--)t=t.slice(0,r);return t.endsWith(".")&&(t=t.slice(0,t.length-1)),t}t.d(n,{F:function(){return r}})},87882:function(e,n,t){t.d(n,{c7:function(){return b},gw:function(){return Z},Rp:function(){return N}});var r=t(93433),i=t(74165),a=t(15861),s=t(96103),c=t(75936),o=t(17829),l=t(45043),u=t(79188),d=t(47313),f=t(465),h=t(89582),m=t(71587),v=t(65476),x=t(46417),p=(0,v.Tw)(0,3);function g(e){var n=e.stars,t=e.roll,i=(0,d.useMemo)((function(){return l.G.DatabaseValues.getSubstatRolls(n,t.name)}),[n,t.name]);return(0,x.jsx)("div",{children:t.rolls.map((function(e,n){return(0,r.Z)(Array(e).keys()).map((function(e,r){return(0,x.jsx)("div",{className:"d-inline-block text-black pt-1 pb-1 ps-4 pe-4",style:{backgroundColor:p(n)},children:(0,l.q)(t.name,i[n])},r)}))}))})}function j(e){var n=e.artifact,t=(0,d.useMemo)((function(){return n.substats.map((function(e){var t=l.G.DatabaseValues.getSubstatRolls(n.stars,e.name),r=l.G.calculateRolls(e,n.stars,!1),i=r.reduce((function(e,n){return e+n}),0),a=r.reduce((function(e,n,r){return e+n*t[r]}),0)/(t[t.length-1]*i)||0;return{name:e.name,rolls:r,total:i,efficiency:a}}))}),[n]),r=(0,d.useMemo)((function(){return t.reduce((function(e,n){return e+n.total}),0)}),[t]),i=(0,d.useMemo)((function(){return l.G.DatabaseValues.getMaxRolls(n.stars)}),[n]);return(0,x.jsxs)(f.Z,{striped:!0,bordered:!0,hover:!0,responsive:!0,children:[(0,x.jsx)("thead",{children:(0,x.jsxs)("tr",{children:[(0,x.jsx)("th",{children:(0,u.KF)("STAT_LONG")}),(0,x.jsxs)("th",{children:[(0,u.KF)("ARTIFACT_ROLLS"),(0,x.jsx)("h5",{className:"d-inline-block m-0 ms-2",children:(0,x.jsxs)(h.Z,{bg:r<=i?"info":"danger",children:[r,"/",i]})})]}),(0,x.jsx)("th",{children:(0,u.KF)("STAT_TOTAL")}),(0,x.jsx)("th",{children:(0,u.KF)("STAT_EFFICIENCY")})]})}),(0,x.jsx)("tbody",{children:t.map((function(e,t){return(0,x.jsxs)("tr",{children:[(0,x.jsx)("td",{className:"align-middle",children:l.G.Describe.getTitle(e.name)}),(0,x.jsx)("td",{className:"align-middle",children:(0,x.jsx)(g,{stars:n.stars,roll:e})}),(0,x.jsx)("td",{className:"align-middle",children:(0,l.q)(e.name,n.substats[t].value)}),(0,x.jsx)("td",{className:"align-middle",children:(0,x.jsx)(m.Z,{className:"text-black",variant:"warning",now:100*e.efficiency,label:l.G.percent(e.efficiency,!0,2)})})]},t)}))})]})}var Z=function(){return[{title:(0,u.KF)("ARTIFACT_VIEW_SUBSTAT_ROLLS"),action:function(e){return(0,a.Z)((0,i.Z)().mark((function n(){return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=3,(0,c.a)({title:(0,u.KF)("ARTIFACT_SUBSTAT_ROLLS"),message:(0,x.jsx)(j,{artifact:e})});case 3:case"end":return n.stop()}}),n)})))()}},{title:(0,u.KF)("ARTIFACT_CLEAR"),action:function(e){return(0,a.Z)((0,i.Z)().mark((function n(){return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,o.Q)({message:(0,u.KF)("ARTIFACT_CONFIRMCLEAR"),size:"sm"});case 2:if(n.sent){n.next=5;break}return n.abrupt("return");case 5:e.bonus=void 0,e.mainstat.value=0,e.substats.forEach((function(e){return e.value=0}));case 8:case"end":return n.stop()}}),n)})))()}}]},N=function(){return[].concat((0,r.Z)(Z()),[{title:(0,u.KF)("ACTION_EQUIP"),action:function(e){return(0,a.Z)((0,i.Z)().mark((function n(){var t;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,o.Q)({message:(0,u.KF)("ACTION_CONFIRMEQUIP")});case 2:if(n.sent){n.next=5;break}return n.abrupt("return");case 5:t=(0,s.tl)(),l.G.CharacterLoader.importArtifacts([e],t),(0,c.a)({message:(0,u.KF)("ACTION_DONE")});case 8:case"end":return n.stop()}}),n)})))()}},{title:(0,u.KF)("ACTION_DELETE"),action:function(){return(0,a.Z)((0,i.Z)().mark((function e(){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,o.Q)({message:(0,u.KF)("ARTIFACT_CONFIRMDELETE")});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))()}}])},b=N().findIndex((function(e){return e.title===(0,u.KF)("ACTION_DELETE")}))},4276:function(e,n,t){t.d(n,{J:function(){return k}});var r=t(97273),i=t(45043),a=t(93298),s=t(65832),c=t(48648),o=t(31136),l=t(63849),u=t(31616),d=t(37140),f=t(87882),h=t(79188),m=t(68582),v=t(47313),x=t(80035),p=t(2532),g=t(46417);function j(e){var n,t=e.artifact,r=e.onChange,s=e.readonly,c=(0,m.Z)().language,l=(0,v.useMemo)((function(){var e=function(e){return i.G.Database.getArtifactBonusFactories().filter((function(n){return n.maxstars===e})).map((function(e){return[i.G.Describe.getTitle(e),e.name]})).sort((function(e,n){return e[0].localeCompare(n[0])}))};return{4:e(4),5:e(5)}}),[c]);function u(e){s||(t.bonus=e&&""!==e?e:void 0,r())}var d=(0,g.jsxs)(x.Z,{children:[(0,g.jsx)(x.Z.Header,{children:(0,h.KF)("ARTIFACT_SET_EFFECT")}),(0,g.jsx)(x.Z.Body,{children:(0,g.jsxs)(p.Z.Select,{autoFocus:!0,disabled:s,onChange:function(e){return u(e.target.value)},value:null!==(n=t.bonus)&&void 0!==n?n:"",children:[(0,g.jsx)("option",{value:"",children:(0,h.KF)("ARTIFACT_NO_SET_EFFECT")}),(0,g.jsx)("optgroup",{label:"4x",children:l[4].map((function(e,n){return(0,g.jsx)("option",{value:e[1],children:e[0]},n)}))}),(0,g.jsx)("optgroup",{label:"5x",children:l[5].map((function(e,n){return(0,g.jsx)("option",{value:e[1],children:e[0]},n)}))})]})})]}),f=t.bonus?i.G.Describe.getTitle(t.bonus):(0,h.KF)("ARTIFACT_NO_SET_EFFECT");return(0,g.jsx)(o.Z,{rootClose:!0,trigger:"click",overlay:d,children:(0,g.jsx)(a.Z,{disabled:s,className:"w-100",variant:"success",children:f})})}var Z=t(95668),N=t(71518),b=t(43832);function A(e){var n=e.artifact,t=e.onChange;return(0,g.jsx)(o.Z,{overlay:(0,g.jsx)(Z.Z,{children:(0,h.KF)(n.locked?"ACTION_LOCKED":"ACTION_UNLOCKED")}),trigger:["hover","focus"],children:(0,g.jsx)(a.Z,{onClick:function(){n.locked=!n.locked,t&&t()},children:n.locked?(0,g.jsx)(N.Z,{}):(0,g.jsx)(b.Z,{})})})}var C=t(41251),E=t(45624),F=t(87994),y=function(e){return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(F.Z,{className:"me-1",style:{verticalAlign:"-0.125em"}}),e]})};function T(e){var n=e.artifact,t=e.onChange,r=e.readonly;return(0,g.jsx)(C.Z,{disabled:r,onSelect:function(e){if(e){var r=parseInt(e);4!==r&&5!==r||(n.stars=r,t())}},title:y(n.stars),children:[4,5].map((function(e){return(0,g.jsx)(E.Z.Item,{eventKey:e,children:y(e)},e)}))})}var w=t(64919),O=t(36687);function I(e){var n=e.artifact,t=e.stat,r=e.onChange,a=e.readonly,s=t===n.mainstat,o=i.G.Values.isFlatStat(t.name),l=(0,v.useMemo)((function(){return s?i.G.getMainstatsFor(n.piece):i.G.getSubstatsFor(n.mainstat.name)}),[n,t,n.mainstat.name]);return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(u.Z,{xs:8,children:(0,g.jsx)(c.Z,{direction:"horizontal",children:(0,g.jsx)(C.Z,{disabled:a,className:"w-100",onSelect:function(e){if(!a&&e){var i=e;if(l.includes(i)){if(s)t.name=i;else{var c=n.substats.find((function(e){return e.name===i})),o=t.name;t.name=i,c&&(c.name=o)}r()}}},size:s?void 0:"sm",variant:s?"warning":void 0,as:O.Z,title:i.G.Describe.getTitle(t.name),children:l.map((function(e,n){return(0,g.jsx)(E.Z.Item,{eventKey:e,onClick:function(){},children:i.G.Describe.getTitle(e)},n)}))})})}),(0,g.jsx)(u.Z,{xs:4,children:(0,g.jsx)(w.K,{disabled:a,size:s?void 0:"sm",value:t.value,percent:!i.G.Values.isFlatStat(t.name),places:o?0:1,onChange:function(e,n){a||(t.value=e,(t.value<e||e<0)&&n(),r())}})})]})}var S=t(26934),R=t(12014);function k(e){var n=e.showLock,t=e.actions,h=e.artifact,m=e.onChange,v=e.readonly,x=e.onChangeMainstat,p=e.onChangeSubstat,Z=e.onChangeBonus,N=e.onChangeStars,b=e.onActionFinish,C=e.onAccept,E=e.onCancel,F=e.isDraft;function y(e){null===p||void 0===p||p(e),null===m||void 0===m||m()}function w(e,n){null===b||void 0===b||b(e,n),null===m||void 0===m||m()}t||(t=(0,f.gw)()),F&&(t=[],n=!1);var O=(0,g.jsx)(r.C,{item:h,actions:t,placement:"right",onActionFinish:function(e,n){return w(e,n)}}),k=(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(a.Z,{variant:"success",onClick:C,children:(0,g.jsx)(S.Z,{})}),(0,g.jsx)(a.Z,{variant:"danger",onClick:E,children:(0,g.jsx)(R.Z,{})})]});return(0,g.jsx)("div",{className:F?"animated-border":void 0,children:(0,g.jsxs)(s.Z,{children:[(0,g.jsx)(s.Z.Header,{className:"bg-info",children:(0,g.jsxs)(c.Z,{direction:"horizontal",gap:1,children:[n?(0,g.jsx)(A,{artifact:h,onChange:m}):null,(0,g.jsx)(T,{artifact:h,onChange:function(){null===N||void 0===N||N(),null===m||void 0===m||m()},readonly:v}),(0,g.jsx)("h5",{className:"m-0 me-auto",children:i.G.Describe.getTitle(h.piece)}),F?k:(0,g.jsx)(o.Z,{rootClose:!0,trigger:"click",placement:"bottom",overlay:O,children:(0,g.jsx)(a.Z,{disabled:v,children:(0,g.jsx)(d.Z,{style:{verticalAlign:"-0.125em"}})})})]})}),(0,g.jsx)(s.Z.Body,{children:(0,g.jsxs)(l.Z,{className:"gx-1 gy-1",children:[(0,g.jsx)(u.Z,{xs:12,children:(0,g.jsx)(j,{artifact:h,onChange:function(){null===Z||void 0===Z||Z(),null===m||void 0===m||m()},readonly:v})}),(0,g.jsx)(I,{readonly:v,artifact:h,stat:h.mainstat,onChange:function(){null===x||void 0===x||x(),null===m||void 0===m||m()}}),h.substats.map((function(e,n){return(0,g.jsx)(I,{readonly:v,artifact:h,stat:e,onChange:function(){return y(n)}},n)}))]})})]})})}},97273:function(e,n,t){t.d(n,{C:function(){return m}});var r=t(74165),i=t(15861),a=t(1413),s=t(15671),c=t(43144),o=t(60136),l=t(27277),u=t(47313),d=t(2304),f=t(80035),h=t(46417),m=function(e){(0,o.Z)(t,e);var n=(0,l.Z)(t);function t(){return(0,s.Z)(this,t),n.apply(this,arguments)}return(0,c.Z)(t,[{key:"render",value:function(){var e=this,n=(0,a.Z)({},this.props);delete n.item,delete n.actions,delete n.onActionFinish,delete n.popover;var t=!1!==this.props.popover,s=(0,h.jsx)(d.Z,{children:this.props.actions.map((function(n,t){return(0,h.jsx)(d.Z.Item,{action:!0,onClick:(0,i.Z)((0,r.Z)().mark((function i(){var a,s,c;return(0,r.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.action(e.props.item);case 2:c=r.sent,null===(a=(s=e.props).onActionFinish)||void 0===a||a.call(s,t,c);case 4:case"end":return r.stop()}}),i)}))),children:n.title},t)}))});return t?(0,h.jsx)(f.Z,(0,a.Z)((0,a.Z)({},n),{},{children:(0,h.jsx)(f.Z.Body,{children:s})})):s}}]),t}(u.Component)},64919:function(e,n,t){t.d(n,{K:function(){return d}});var r=t(1413),i=t(93324),a=t(45987),s=t(47313),c=t(98698),o=t(2532),l=t(46417),u=["places","percent","value","onChange","children"],d=function(e){var n=e.places,t=void 0===n?1:n,d=e.percent,h=e.value,m=void 0===h?0:h,v=e.onChange,x=e.children,p=(0,a.Z)(e,u);function g(){var e=m;return d&&(e*=100),function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,t=e.toFixed(n).replace(/\.0+$/,"").split(".");if(1===t.length)return t[0];var r=t[1].replace(/0+$/,"");return t[0]+(r.length>0?"."+r:"")}(e,t)}var j=(0,s.useState)(g()),Z=(0,i.Z)(j,2),N=Z[0],b=Z[1],A=(0,s.useState)(!1),C=(0,i.Z)(A,2),E=C[0],F=C[1];return(0,s.useEffect)((function(){var e=f(N,t);e=d?e/100:e,Math.abs(e-m)<1e-5||b(g())}),[m,d,t]),(0,l.jsxs)(c.Z,{size:p.size,children:[null!==x&&void 0!==x?x:null,(0,l.jsx)(o.Z.Control,(0,r.Z)((0,r.Z)({},p),{},{value:N,onChange:function(e){var n=e.target.value;b(function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,t=e.split(".");if(1===t.length)return e;var r=t[0],i=t[1];return r&&0!==i.length?"".concat(r,".").concat(i.substring(0,n)):e}(n));var r=f(n,t);Number.isFinite(r)?(!function(e){var n=d?e/100:e;null===v||void 0===v||v(n,(function(){return b(g())}))}(r),E&&F(!1)):E||F(!0)}})),d?(0,l.jsx)(c.Z.Text,{children:"%"}):null]})};function f(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(""===e)return 0;if("0."===e)return 0;if("0"===e)return 0;if(".0"===e)return 0;if("."===e)return 0;if(e=e.replace(/,/g,".").replace(/\.+/g,".").replace(/^\./,"0.").replace(/\.$/,""),!/^[+-]?[0-9]*\.?[0-9]*$/.test(e))return NaN;var t=parseFloat(e);return t=Math.floor(t*Math.pow(10,n))/Math.pow(10,n)}},88893:function(e,n,t){t.d(n,{X:function(){return o}});var r=t(1413),i=t(45987),a=t(29162),s=t(46417),c=["options"];function o(e){var n=e.options,t=(0,i.Z)(e,c);return(0,s.jsx)(a.pY,(0,r.Z)((0,r.Z)({},t),{},{options:n||[],multiple:!0}))}},75936:function(e,n,t){t.d(n,{a:function(){return d}});var r=t(93324),i=t(79188),a=t(47313),s=t(98410),c=t(93298),o=t(76487),l=t(46417);function u(e){var n,t,o,u,d,f,h,m,v,x=(0,a.useState)(!0),p=(0,r.Z)(x,2),g=p[0],j=p[1];function Z(){j(!1),e.proceed()}var N=null===(n=null===(t=e.props)||void 0===t?void 0:t.closeButton)||void 0===n||n,b=null===(o=null===(u=e.props)||void 0===u?void 0:u.footerButton)||void 0===o||o,A=null===(d=e.props)||void 0===d?void 0:d.message,C=A?"function"===typeof A?A(Z):A:"";return(0,l.jsxs)(s.Z,{size:null!==(f=null===(h=e.props)||void 0===h?void 0:h.size)&&void 0!==f?f:"lg",show:g,onHide:Z,children:[(0,l.jsx)(s.Z.Header,{closeButton:N,children:(0,l.jsx)(s.Z.Title,{id:"contained-modal-title-vcenter",children:null!==(m=null===(v=e.props)||void 0===v?void 0:v.title)&&void 0!==m?m:(0,i.KF)("DIALOG_ALERT")})}),(0,l.jsx)(s.Z.Body,{children:C}),b?(0,l.jsx)(s.Z.Footer,{children:(0,l.jsx)(c.Z,{onClick:Z,children:(0,i.KF)("DIALOG_ACCEPT")})}):null]})}var d=function(e){return(0,o.LA)((0,o.mP)(u))({props:e})}},17829:function(e,n,t){t.d(n,{Q:function(){return d}});var r=t(93324),i=t(79188),a=t(47313),s=t(98410),c=t(93298),o=t(76487),l=t(46417);function u(e){var n,t,o,u,d=(0,a.useState)(!0),f=(0,r.Z)(d,2),h=f[0],m=f[1],v=e.props;function x(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];m(!1),e.proceed(n)}var p=null===(n=null===v||void 0===v?void 0:v.closeButton)||void 0===n||n,g=null===(t=e.props)||void 0===t?void 0:t.message,j=g?"function"===typeof g?g(x):g:"";return(0,l.jsxs)(s.Z,{size:null!==(o=null===v||void 0===v?void 0:v.size)&&void 0!==o?o:"lg",show:h,onHide:x,children:[(0,l.jsx)(s.Z.Header,{closeButton:p,children:(0,l.jsx)(s.Z.Title,{id:"contained-modal-title-vcenter",children:null!==(u=null===v||void 0===v?void 0:v.title)&&void 0!==u?u:(0,i.KF)("DIALOG_CONFIRM")})}),(0,l.jsx)(s.Z.Body,{children:j}),(0,l.jsxs)(s.Z.Footer,{children:[(0,l.jsx)(c.Z,{variant:"success",onClick:function(){return x(!0)},children:(null===v||void 0===v?void 0:v.accept)||(0,i.KF)("DIALOG_ACCEPT")}),(0,l.jsx)(c.Z,{variant:"danger",onClick:function(){return x(!1)},children:(null===v||void 0===v?void 0:v.cancel)||(0,i.KF)("DIALOG_CANCEL")})]})]})}var d=function(e){return(0,o.LA)((0,o.mP)(u))({props:e})}},13736:function(e,n,t){t.d(n,{h:function(){return c}});var r=t(93324),i=t(47313),a=t(38804),s=t(46417);function c(e,n){var t=(0,i.useState)(1),c=(0,r.Z)(t,2),o=c[0],l=c[1],u=(0,i.useMemo)((function(){return Math.ceil(e.length/n)}),[e,n]),d=(0,i.useMemo)((function(){var e=Array.from(Array(u).keys()).map((function(e){return e+1}));if(e.length>5){var n=e.length-o,t=Math.min(n,5),r=Math.max(5-t,Math.floor(2.5)),i=Math.max(0,o-r);return e.slice(i,i+5)}return e}),[u,o]);(0,i.useEffect)((function(){o>u&&l(1)}),[u,o]);var f=function(){var e=o-1;e<=0&&(e=u),l(e)},h=function(){var e=o+1;e>u&&(e=1),l(e)},m=(0,i.useMemo)((function(){return e.slice((o-1)*n,o*n)}),[o,e,n]);return{page:o,items:m,Pagination:function(){return(0,s.jsxs)(a.Z,{className:"m-0",children:[(0,s.jsx)(a.Z.Prev,{onClick:f}),d.map((function(e,n){return-1!==e?(0,s.jsx)(a.Z.Item,{active:e===o,onClick:function(){return l(e)},children:e},n):(0,s.jsx)(a.Z.Ellipsis,{},n)})),(0,s.jsx)(a.Z.Next,{onClick:h})]})},gotoNext:h,gotoPrev:f,findItem:function(t){var r=e.indexOf(t)+1;return r<0?-1:Math.ceil(r/n)},setPage:function(e){e<1&&(e=1),e>u&&(e=u),l(e)}}}},60404:function(e,n,t){t.r(n),t.d(n,{default:function(){return je},title:function(){return ge}});var r=t(4276),i=t(74165),a=t(1413),s=t(15861),c=t(96103),o=t(30448),l=t(75936),u=t(17829),d=t(79188),f=t(46152),h=t(45043);function m(){return m=(0,s.Z)((0,i.Z)().mark((function e(n,t){var r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.Q)({message:(0,d.KF)("ACTION_CONFIRMEQUIP")});case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:return r=(0,c.tl)(),h.G.CharacterLoader.importArtifacts(n,r),t&&h.G.EffectLoader.importEffectsTo(t,r.bonus.effects),e.next=10,(0,o.c)(80);case 10:return e.next=12,(0,u.Q)({message:(0,d.KF)("ACTION_CONFIRMLOCK"),accept:(0,d.KF)("YES"),cancel:(0,d.KF)("NO")});case 12:if(!e.sent){e.next=16;break}return e.next=16,Promise.all(n.map(function(){var e=(0,s.Z)((0,i.Z)().mark((function e(n){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.rR)((0,a.Z)((0,a.Z)({},n),{},{locked:!0})));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()));case 16:return e.next=18,(0,l.a)({message:(0,d.KF)("ACTION_DONE")});case 18:case"end":return e.stop()}}),e)}))),m.apply(this,arguments)}var v=t(65832),x=t(48648),p=t(89582),g=t(93298),j=t(46417);function Z(e){var n=e.artifacts,t=e.bonus,r=e.damage;return(0,j.jsx)("div",{className:"h-100 d-flex align-items-center justify-content-center",children:(0,j.jsx)(v.Z,{className:"d-inline-block",children:(0,j.jsx)(v.Z.Body,{children:(0,j.jsxs)(x.Z,{gap:1,children:[(0,j.jsxs)(x.Z,{direction:"horizontal",gap:1,className:"align-items-center",children:[(0,j.jsx)("div",{children:(0,d.KF)("DAMAGE")}),(0,j.jsx)("h5",{className:"m-0",children:(0,j.jsx)(p.Z,{bg:"danger",children:Math.round(r||0)})})]}),(0,j.jsx)(g.Z,{size:"sm",onClick:function(){return function(e,n){return m.apply(this,arguments)}(n,t)},children:(0,d.KF)("ACTION_EQUIP")})]})})})})}var N=t(47313),b=t(58446);function A(e){var n=e.items,t=(0,N.useMemo)((function(){var e=n.map((function(e){return e[0]})),t=0;return{series:[{name:(0,d.KF)("DAMAGE"),data:e.map((function(e){return{x:t+=e.cost.result,y:e.damage}}))}],options:{title:{text:(0,d.KF)("DAMAGE_PROGRESSION"),align:"center",style:{fontSize:"18pt",fontWeight:"bold"}},chart:{width:640,height:480,type:"line"},xaxis:{tickAmount:20,title:{text:(0,d.KF)("RESIN_TOTAL")}},yaxis:{tickAmount:10,labels:{formatter:function(e){return Math.round(e).toString()}},title:{text:(0,d.KF)("DAMAGE")}},tooltip:{x:{formatter:function(e){return(0,d.KF)("RESIN_TOTAL")+": "+Math.round(e)}},y:{formatter:function(e){return Math.round(e).toString()}}}}}}),[n]),r=t.series,i=t.options;return(0,j.jsx)("div",{className:"m-1 d-flex justify-content-center",children:(0,j.jsx)("div",{className:"bg-white",style:{width:720,maxWidth:"100%"},children:(0,j.jsx)(b.Z,{series:r,options:i})})})}var C=["CharacterLevel","WeaponLevel","NormalAttackLevel","ElementalSkillLevel","ElementalBurstLevel"],E=t(23346),F=t(93433),y=t(465),T=t(97679);function w(e){var n=e.items,t=Object.keys(n);return t.includes("cost")&&(t=t.filter((function(e){return"cost"!==e}))),(0,j.jsx)(y.Z,{striped:!0,bordered:!0,hover:!0,responsive:!0,children:(0,j.jsxs)("tbody",{children:[(0,j.jsxs)("tr",{className:"bg-info",children:[(0,j.jsx)("td",{children:(0,d.KF)("RESOURCE")}),(0,j.jsx)("td",{children:(0,d.KF)("AMOUNT")})]}),t.map((function(e,t){return(0,j.jsxs)("tr",{children:[(0,j.jsx)("td",{children:h.G.Describe.getTitle(e)}),(0,j.jsx)("td",{children:(0,T.F)(n[e]||0,4)})]},t)})),n.cost?(0,j.jsxs)("tr",{className:"bg-primary",children:[(0,j.jsx)("td",{children:(0,d.KF)("COST")}),(0,j.jsx)("td",{children:(0,T.F)(n.cost||0,2)})]}):null]})})}var O=h.G.Resources.ResourceNames;function I(e){var n=e.cost,t=e.domain,r=h.G.Describe.getTitle(String(t).valueOf()),i=n[t]||0,a=i*(n.domains[t].cost||0),s=(0,N.useMemo)((function(){return O.map((function(e){var r=(n.domains[t][e]||0)*i;return r>0?r:null}))}),[n,t,i]);return(0,j.jsxs)("tr",{children:[(0,j.jsx)("td",{className:"align-middle",children:(0,j.jsx)("a",{className:"hover-cursor-pointer",onClick:function(){(0,l.a)({title:r,message:(0,j.jsx)(w,{items:n.domains[t]})})},children:r})}),s.map((function(e,n){return(0,j.jsx)("td",{className:"align-middle",children:null===e||void 0===e?void 0:e.toFixed(2)},n)})),(0,j.jsx)("td",{className:"align-middle",children:i>0?i.toFixed(2):null}),(0,j.jsx)("td",{className:"align-middle",children:a>0?a.toFixed(2):null})]})}function S(e){var n=e.cost;return(0,j.jsx)("table",{children:(0,j.jsx)("tbody",{children:(0,j.jsxs)("tr",{children:[(0,j.jsx)("td",{className:"pe-2",children:(0,d.KF)("FEASIBLE")}),(0,j.jsx)("td",{children:(0,j.jsx)("div",{className:"badge text-black "+(n.feasible?"bg-success":"bg-danger"),children:(0,d.KF)(n.feasible?"YES":"NO")})})]})})})}var R=h.G.Resources.ResourceNames,k=h.G.Resources.DomainNames,L=["Domain"].concat((0,F.Z)(R),["AverageRuns","ResinCost"]);function M(e){var n=e.cost,t=(0,N.useMemo)((function(){return R.map((function(e){return n.resources[e]}))}),[n]),r=(0,N.useMemo)((function(){return k.map((function(e){return n[e]})).reduce((function(e,n){return(e||0)+(n||0)}),0)||0}),[n]);return(0,j.jsxs)("div",{children:[(0,j.jsx)(y.Z,{striped:!0,bordered:!0,hover:!0,responsive:!0,className:"w-100",children:(0,j.jsxs)("tbody",{children:[(0,j.jsx)("tr",{children:L.map((function(e,n){return(0,j.jsx)("td",{className:"bg-info align-middle text-center",children:h.G.Describe.getTitle(String(e).valueOf())},n)}))}),(0,j.jsx)("tr",{children:(0,j.jsx)("td",{colSpan:L.length,className:"bg-primary text-center",children:(0,d.KF)("RESIN_MATS_REQUIRED")})}),(0,j.jsxs)("tr",{children:[(0,j.jsx)("td",{}),t.map((function(e,n){return(0,j.jsx)("td",{children:(null===e||void 0===e?void 0:e.toFixed(2))||null},n)})),(0,j.jsx)("td",{children:r.toFixed(2)}),(0,j.jsx)("td",{children:n.result.toFixed(2)})]}),(0,j.jsx)("tr",{children:(0,j.jsx)("td",{colSpan:L.length,className:"bg-primary text-center",children:(0,d.KF)("RESIN_MATS_OBTAINED")})}),k.map((function(e,t){return(0,j.jsx)(I,{cost:n,domain:e},t)}))]})}),(0,j.jsx)("div",{className:"d-flex justify-content-center",children:(0,j.jsx)(S,{cost:n})})]})}var _=t(93324),K=[20,40,50,60,70,80,90];function G(e){var n=(0,_.Z)(e.upgrade,2),t=n[0],r=n[1],i=h.G.Describe.getTitle(t),a=String(r).valueOf(),s=h.G.Describe.getTitle(a);if(("CharacterLevel"===t||"WeaponLevel"===t)&&a.startsWith("L")){var c=parseInt(a.slice(1));a="L"+K[c]}return{title:i,strval:a,value:s}}function D(e){var n=e.item,t=G(n),r=t.title,i=t.value;return(0,j.jsx)("table",{className:"w-100",children:(0,j.jsxs)("tbody",{children:[(0,j.jsxs)("tr",{className:"text-nowrap",children:[(0,j.jsx)("th",{className:"pe-2",children:(0,d.KF)("DAMAGE")}),(0,j.jsx)("td",{children:h.G.round(n.damage)})]}),(0,j.jsxs)("tr",{className:"text-nowrap",children:[(0,j.jsx)("th",{className:"pe-2",children:(0,d.KF)("BENEFIT")}),(0,j.jsx)("td",{children:h.G.percent(n.benefit,!0,4)})]}),(0,j.jsxs)("tr",{className:"text-nowrap",children:[(0,j.jsx)("th",{className:"pe-2",children:(0,d.KF)("COST")}),(0,j.jsx)("td",{children:(0,j.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,j.jsx)("div",{children:h.G.round(n.cost.result)}),(0,j.jsx)(g.Z,{onClick:function(){(0,l.a)({size:"xl",title:(0,d.KF)("RESIN_COST")+" | "+r+" (".concat(i,")"),message:(0,j.jsx)(M,{cost:n.cost})})},size:"sm",variant:"secondary",className:"border border-dark",children:(0,j.jsx)(E.Z,{style:{verticalAlign:"-0.125em"}})})]})})]}),(0,j.jsxs)("tr",{className:"bg-dark text-nowrap",children:[(0,j.jsx)("th",{className:"pe-2",children:(0,d.KF)("BENEFIT_OVER_COST")}),(0,j.jsx)("td",{children:h.G.percent(n.ratio,!0,4)})]})]})})}var P=t(31136),B=t(95668),z=t(87994);function U(e){var n=e.item,t=G(n),r=t.title,i=t.strval,a=t.value;return(0,j.jsxs)("div",{className:"bg-primary p-1 d-flex justify-content-between align-items-center text-nowrap",children:[(0,j.jsxs)("div",{className:"d-flex",children:[n.selected?(0,j.jsx)(P.Z,{trigger:["hover","focus"],rootClose:!0,overlay:(0,j.jsx)(B.Z,{children:(0,d.KF)("UPGRADE_OPTIMAL")}),children:(0,j.jsx)("div",{className:"badge bg-success me-1",children:(0,j.jsx)(z.Z,{})})}):null,(0,j.jsx)("div",{className:"me-1",children:r})]}),(0,j.jsx)(P.Z,{trigger:["hover","focus"],rootClose:!0,overlay:(0,j.jsx)(B.Z,{children:a}),children:(0,j.jsx)("div",{className:"badge bg-warning text-black",children:i})})]})}function Q(e){var n=e.item;return(0,j.jsxs)("div",{children:[(0,j.jsx)(U,{item:n}),(0,j.jsx)("div",{className:"p-1 bg-secondary",children:(0,j.jsx)(D,{item:n})})]})}function V(e){var n=e.row,t=(0,N.useMemo)((function(){return C.map((function(e){return n.find((function(n){return n.upgrade[0]===e}))}))}),[n]);return(0,j.jsx)("tr",{children:t.map((function(e,n){return(0,j.jsx)("td",{children:e?(0,j.jsx)(Q,{item:e}):null},n)}))})}function $(e){var n=e.items;return n.length?(0,j.jsx)("div",{children:(0,j.jsx)("table",{className:"m-auto",children:(0,j.jsx)("tbody",{children:n.map((function(e,n){return(0,j.jsxs)(N.Fragment,{children:[(0,j.jsx)("tr",{children:(0,j.jsxs)("th",{className:"bg-info text-center text-black",colSpan:C.length,children:[(0,d.KF)("UPGRADES_AVAILABLE"),"\xa0(",n+1,")"]})}),(0,j.jsx)(V,{row:e})]},n)}))})})}):null}var H=t(45987),W=t(63849),Y=t(31616),X=t(80035),J=t(66019),q=t(26934),ee=t(13736),ne=t(67526),te=t(13997),re=t.n(te),ie=t(65476),ae=t(71587),se=t(70441);function ce(e,n){var t=n.map((function(e){return parseFloat(String(e).valueOf())})),r=h.G.minValue(t),i=h.G.maxValue(t),a=function(e){var n=e.item,t=String(n).valueOf();return t=t.replace(/(\([^)]+\))/gi,"_$1_"),(0,j.jsx)(se.D,{components:{p:function(e){return(0,j.jsx)("span",{children:e.children})},em:function(e){return(0,j.jsx)("sub",{children:e.children})}},children:t})};switch(e){default:return function(e){var n=e.item,t=e.highlight;return(0,j.jsx)("td",{className:"text-nowrap text-center align-middle"+(t?" highlight":""),children:(0,j.jsx)(a,{item:n})})};case"COLORMAP":var s=(0,ie.Tw)(r,i);return function(e){var n=e.item,t=parseFloat(String(n).valueOf()),r=s(t);return(0,j.jsx)("td",{className:"text-nowrap text-black align-middle",style:{backgroundColor:r},children:(0,j.jsx)(a,{item:n})})};case"PROGRESSBAR":return function(e){var n=e.item,t=String(n).valueOf(),r=100*parseFloat(t)/i;return r=Math.floor(r),(0,j.jsx)("td",{className:"align-middle",children:(0,j.jsx)(ae.Z,{className:"text-black",variant:"warning",now:r,max:100,label:t})})};case"INVERSE_COLORMAP":var c=(0,ie.Tw)(r,i);return function(e){var n=e.item,t=parseFloat(String(n).valueOf()),r=c(i-t);return(0,j.jsx)("td",{className:"text-nowrap text-black align-middle",style:{backgroundColor:r},children:(0,j.jsx)(a,{item:n})})};case"WEAPON":return function(e){var n=e.item,t=e.highlight;return(0,j.jsx)("td",{className:"text-nowrap align-middle"+(t?" highlight":""),children:(0,j.jsx)(a,{item:n})})}}}function oe(e){return e.replace(/\([^)]+\)/gi,"")}var le=t(88893),ue=["items","onChange","label","onSelect"],de=["label"];function fe(e){var n=e.items,t=e.onChange,r=e.label,i=e.onSelect,s=(0,H.Z)(e,ue),c=(0,ee.h)(n,30),o=(0,N.useMemo)((function(){return n[0]?Object.keys(n[0]):[]}),[n]),l=function(e){return(0,N.useMemo)((function(){return e.map((function(e){if(h.G.Describe.has(e))return h.G.Describe.getTitle(e);var n=e.toUpperCase();return(0,d.KF)(n)}))}),[e])}(o),u=function(e,n){return(0,N.useMemo)((function(){return e.map((function(e){return e.match(/^damage$/i)?ce("COLORMAP",n.map((function(n){return n[e]}))):e.match(/^(relative|benefit)$/i)?ce("PROGRESSBAR",n.map((function(n){return n[e]}))):e.match(/^weapon$/i)?ce("WEAPON",n.map((function(n){return n[e]}))):e.match(/^cost$/i)?ce("INVERSE_COLORMAP",n.map((function(n){return n[e]}))):ce("STRING",n.map((function(n){return n[e]})))}))}),[e,n])}(o,n),f=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(0,N.useMemo)((function(){var t=[];return e.forEach((function(e){for(var r in e){var i=e[r];if(i&&"number"!==typeof i){var a=String(i).valueOf().trim();n&&(a=oe(a).trim()),a.match(/[a-z]+/gi)&&(t.includes(a)||t.push(a))}}})),t}),[e,n])}(n),m=(0,N.useState)([]),v=(0,_.Z)(m,2),x=v[0],p=v[1],Z=f.map((function(e){return{id:e,label:e}})),b=x.map((function(e){return{id:e,label:e}}));if(!n||!n.length)return null;return(0,j.jsxs)("div",{className:"results-table",children:[(0,j.jsxs)(W.Z,{className:"gx-0 gy-0",children:[(0,j.jsx)(Y.Z,{xs:2,children:(0,j.jsx)("div",{className:"d-flex justify-content-start m-1",children:(0,j.jsx)(P.Z,{placement:"bottom",overlay:(0,j.jsx)(X.Z,{children:(0,j.jsx)("div",{className:"m-1",style:{width:320},children:(0,j.jsx)(le.X,{id:"results-tag-search",options:Z,selected:b,onChange:function(e){return p(e.map((function(e){return e.id+""})))}})})}),rootClose:!0,trigger:["click"],children:(0,j.jsx)(g.Z,{children:(0,d.KF)("ACTION_SEARCHBY")})})})}),(0,j.jsx)(Y.Z,{xs:8,children:(0,j.jsx)("div",{className:"d-flex justify-content-center m-1",children:(0,j.jsx)(c.Pagination,{})})}),(0,j.jsx)(Y.Z,{xs:2,children:(0,j.jsx)("div",{className:"d-flex justify-content-end m-1",children:(0,j.jsxs)(g.Z,{onClick:function(){var e=l,t=n.map((function(e){return o.map((function(n){return String(e[n]).valueOf()}))})),r=re().unparse({fields:e,data:t});(0,ne.S)("results.csv",r)},children:[(0,d.KF)("ACTION_EXPORT")," (CSV)"]})})})]}),(0,j.jsx)("div",{className:"overflow-auto",children:(0,j.jsxs)(y.Z,(0,a.Z)((0,a.Z)({},s),{},{children:[(0,j.jsx)("thead",{children:(0,j.jsxs)("tr",{children:[(0,j.jsx)("th",{}),l.map((function(e,n){return(0,j.jsx)("th",{children:e},n)}))]})}),(0,j.jsx)("tbody",{children:c.items.map((function(e,s){return(0,j.jsxs)("tr",{children:[(0,j.jsx)("td",{children:(0,j.jsx)(he,{onClick:function(){return function(e){var r=30*(c.page-1),i=n[r+e];if(i&&i.damage){var s=Number.isFinite(Number(i.damage))?Number(i.damage).valueOf():0,o=(0,F.Z)(n);o.forEach((function(e,n){var t=(0,a.Z)({},e);if(o[n]=t,t.damage){var r=Number.isFinite(Number(t.damage))?Number(t.damage).valueOf():0;t.relative&&(t.relative=h.G.percent(r/s))}})),null===t||void 0===t||t(o)}}(s)}})}),o.map((function(n,t){var r=u[t],i=e[n],a=x.includes(String(i).valueOf());return(0,j.jsx)(r,{item:i,highlight:a},t)})),(0,j.jsx)("td",{children:(0,j.jsx)(me,{label:r,onClick:function(){return function(e){var n=30*(c.page-1);null===i||void 0===i||i(n+e)}(s)}})})]},s)}))})]}))}),(0,j.jsx)("div",{className:"d-flex justify-content-center mb-1",children:(0,j.jsx)(c.Pagination,{})})]})}function he(e){return(0,j.jsx)(P.Z,{trigger:["hover","focus"],overlay:(0,j.jsx)(B.Z,{id:"tooltip-baseline",children:(0,d.KF)("ACTION_SET_BASELINE")}),children:(0,j.jsx)(g.Z,(0,a.Z)((0,a.Z)({},e),{},{size:"sm",variant:"secondary",children:(0,j.jsx)(J.Z,{style:{verticalAlign:"-0.125em"}})}))})}function me(e){var n=e.label,t=(0,H.Z)(e,de);return(0,j.jsx)(P.Z,{trigger:["hover","focus"],overlay:(0,j.jsx)(B.Z,{id:"tooltip-baseline",children:n}),children:(0,j.jsx)(g.Z,(0,a.Z)((0,a.Z)({},t),{},{size:"sm",variant:"secondary",children:(0,j.jsx)(q.Z,{style:{verticalAlign:"-0.125em"}})}))})}var ve=t(60403);function xe(){return(xe=(0,s.Z)((0,i.Z)().mark((function e(n){var t,r,s,o,f,m;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,u.Q)({title:(0,d.KF)("ACTION_EQUIP"),message:(0,j.jsx)(se.D,{children:(0,d.KF)("ACTION_EQUIPCONFIRM")})});case 4:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:if(t=(0,c.tl)(),n.weapon&&h.G.CharacterLoader.importWeapon(n.weapon,t),n.bonus&&(r=n.bonus.name.split(";"),s=r[0]||void 0,o=r[1]||void 0,s||o?s&&o?t.bonus.setBonusNames(s,o):t.bonus.setBonusNames(s||o):t.bonus.setBonusNames(void 0),h.G.CharacterLoader.importArtifactBonus(n.bonus,t)),n.artifacts&&h.G.CharacterLoader.importArtifacts(n.artifacts,t),!n.rolls){e.next=26;break}return e.next=14,(0,u.Q)({title:(0,d.KF)("ROLLS_REALISTICCONFIRM"),message:(0,j.jsx)(se.D,{components:{a:function(e){return(0,j.jsx)("a",(0,a.Z)((0,a.Z)({},e),{},{target:"_blank",children:e.children}))}},children:(0,d.KF)("ROLLS_REALISTICCONFIRM_DESCRIPTION",{url:(0,ve.R)("editor/optimizer/substats/index.md")})}),accept:(0,d.KF)("YES"),cancel:(0,d.KF)("NO")});case 14:f=e.sent,m=h.G.ArtifactLoader.exportArtifacts(t.artifacts),t.artifacts.forEach((function(e){return e.stars=5})),e.prev=17,h.G.CharacterLoader.importRolls(n.rolls,t,f),e.next=26;break;case 21:return e.prev=21,e.t0=e.catch(17),e.next=25,(0,l.a)({message:String(e.t0).valueOf()});case 25:h.G.ArtifactLoader.importArtifactsTo(m,t.artifacts);case 26:return n.Level&&(t.Level=n.Level),n.Ascended&&(t.Ascended=n.Ascended),n.NormalAttackLevel&&(t.NormalAttackLevel=n.NormalAttackLevel),n.ElementalSkillLevel&&(t.ElementalSkillLevel=n.ElementalSkillLevel),n.ElementalBurstLevel&&(t.ElementalBurstLevel=n.ElementalBurstLevel),e.next=33,(0,l.a)({message:(0,d.KF)("ACTION_DONE")});case 33:case"end":return e.stop()}}),e,null,[[17,21]])})))).apply(this,arguments)}var pe=t(46323),ge="OPTIMIZER_RESULTS";function je(){var e=(0,pe.a)(),n=e.artifacts,t=e.resinStates,i=!n&&!t.length&&!e.states.length&&!e.rows.length;return(0,j.jsxs)("div",{children:[i?(0,j.jsx)("div",{className:"m-2 text-center",children:(0,d.KF)("OPTIMIZER_EMPTY")}):null,n?(0,j.jsx)("div",{className:"overflow-hidden mt-1",children:(0,j.jsxs)(W.Z,{className:"gx-1 gy-1",children:[(0,j.jsx)(Y.Z,{xl:4,md:6,xs:12,children:(0,j.jsx)(Z,{artifacts:n.artifacts,bonus:n.bonus,damage:n.damage})}),n.artifacts.map((function(e,n){return(0,j.jsx)(Y.Z,{xl:4,md:6,xs:12,children:(0,j.jsx)(r.J,{readonly:!0,artifact:e})},n)}))]})}):null,(0,j.jsx)("div",{className:"overflow-auto",children:(0,j.jsx)(fe,{responsive:!0,label:(0,d.KF)("ACTION_EQUIP"),onSelect:function(n){return function(e){return xe.apply(this,arguments)}(e.states[n].state)},onChange:function(n){return e.setRows(n)},items:e.rows})}),(0,j.jsx)("div",{className:"overflow-auto",children:t.length?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("hr",{}),(0,j.jsx)("h4",{className:"text-center",children:(0,d.KF)("OPTIMIZER_UPGRADES")}),(0,j.jsx)(A,{items:t}),(0,j.jsx)($,{items:t})]}):null})]})}},46323:function(e,n,t){t.d(n,{a:function(){return s}});var r=t(1413),i=t(60489),a=t(10340);function s(){var e=(0,a.T)(),n=(0,a.C)((function(e){return e.result}));return(0,r.Z)((0,r.Z)({},n),{},{setRows:function(n){e(n?i.Nw.setRows(n):i.Nw.setRows([]))},setStates:function(n){e(n?i.Nw.setStates(n):i.Nw.setStates([]))},setArtifacts:function(n){e(i.Nw.setArtifacts(n))},setResinStates:function(n){e(i.Nw.setResinStates(n))}})}},46152:function(e,n,t){t.d(n,{hW:function(){return h},rR:function(){return d},yN:function(){return l}});var r=t(1413),i=t(74165),a=t(15861),s=t(29447);function c(e){return o.apply(this,arguments)}function o(){return o=(0,a.Z)((0,i.Z)().mark((function e(n){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=performance.now(),e.abrupt("return",new Promise(function(){var e=(0,a.Z)((0,i.Z)().mark((function e(r,a){var c;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=(0,s.HB)().addMessageListener((function(e){"storage-artifacts"===e.type&&e.id===t&&(e.error?a(e.error):((0,s.HB)().removeMessageListener(c),r(e.result)))})),(0,s.HB)().postMessage({type:"storage-artifacts",id:t,data:n});case 2:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)}))),o.apply(this,arguments)}function l(e){return u.apply(this,arguments)}function u(){return(u=(0,a.Z)((0,i.Z)().mark((function e(n){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c({get:(0,r.Z)({},n)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(e){return f.apply(this,arguments)}function f(){return(f=(0,a.Z)((0,i.Z)().mark((function e(n){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c({set:n}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){return m.apply(this,arguments)}function m(){return(m=(0,a.Z)((0,i.Z)().mark((function e(n){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.id){e.next=3;break}return e.abrupt("return",!1);case 3:return e.abrupt("return",c({delete:{id:t}}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}}]);