(self.webpackChunkgenshin_gui=self.webpackChunkgenshin_gui||[]).push([[2803],{30361:function(t){t.exports=function(t){return t.length?function(t){var i={is_blank:/^\W{0,}$/,is_objective:/(max|min)(imize){0,}\:/i,is_int:/^(?!\/\*)\W{0,}int/i,is_bin:/^(?!\/\*)\W{0,}bin/i,is_constraint:/(\>|\<){0,}\=/i,is_unrestricted:/^\S{0,}unrestricted/i,parse_lhs:/(\-|\+){0,1}\s{0,1}\d{0,}\.{0,}\d{0,}\s{0,}[A-Za-z]\S{0,}/gi,parse_rhs:/(\-|\+){0,1}\d{1,}\.{0,}\d{0,}\W{0,}\;{0,1}$/i,parse_dir:/(\>|\<){0,}\=/gi,parse_int:/[^\s|^\,]+/gi,parse_bin:/[^\s|^\,]+/gi,get_num:/(\-|\+){0,1}(\W|^)\d+\.{0,1}\d{0,}/g,get_word:/[A-Za-z].*/},e={opType:"",optimize:"_obj",constraints:{},variables:{}},s={">=":"min","<=":"max","=":"equal"},r="",n=null,a="",o="",h="",l=0;"string"===typeof t&&(t=t.split("\n"));for(var d=0;d<t.length;d++)if(h="__"+d,r=t[d],n=null,i.is_objective.test(r))e.opType=r.match(/(max|min)/gi)[0],(n=r.match(i.parse_lhs).map((function(t){return t.replace(/\s+/,"")})).slice(1)).forEach((function(t){a=null===(a=t.match(i.get_num))?"-"===t.substr(0,1)?-1:1:a[0],a=parseFloat(a),o=t.match(i.get_word)[0].replace(/\;$/,""),e.variables[o]=e.variables[o]||{},e.variables[o]._obj=a}));else if(i.is_int.test(r))n=r.match(i.parse_int).slice(1),e.ints=e.ints||{},n.forEach((function(t){t=t.replace(";",""),e.ints[t]=1}));else if(i.is_bin.test(r))n=r.match(i.parse_bin).slice(1),e.binaries=e.binaries||{},n.forEach((function(t){t=t.replace(";",""),e.binaries[t]=1}));else if(i.is_constraint.test(r)){var u=r.indexOf(":");(n=(-1===u?r:r.slice(u+1)).match(i.parse_lhs).map((function(t){return t.replace(/\s+/,"")}))).forEach((function(t){a=null===(a=t.match(i.get_num))?"-"===t.substr(0,1)?-1:1:a[0],a=parseFloat(a),o=t.match(i.get_word)[0],e.variables[o]=e.variables[o]||{},e.variables[o][h]=a})),l=parseFloat(r.match(i.parse_rhs)[0]),r=s[r.match(i.parse_dir)[0]],e.constraints[h]=e.constraints[h]||{},e.constraints[h][r]=l}else i.is_unrestricted.test(r)&&(n=r.match(i.parse_int).slice(1),e.unrestricted=e.unrestricted||{},n.forEach((function(t){t=t.replace(";",""),e.unrestricted[t]=1})));return e}(t):function(t){if(!t)throw new Error("Solver requires a model to operate on");var i="",e={max:"<=",min:">=",equal:"="},s=new RegExp("[^A-Za-z0-9_[{}/.&#$%~'@^]","gi");if(t.opType)for(var r in i+=t.opType+":",t.variables)t.variables[r][r]=t.variables[r][r]?t.variables[r][r]:1,t.variables[r][t.optimize]&&(i+=" "+t.variables[r][t.optimize]+" "+r.replace(s,"_"));else i+="max:";for(var n in i+=";\n\n",t.constraints)for(var a in t.constraints[n])if("undefined"!==typeof e[a]){for(var o in t.variables)"undefined"!==typeof t.variables[o][n]&&(i+=" "+t.variables[o][n]+" "+o.replace(s,"_"));i+=" "+e[a]+" "+t.constraints[n][a],i+=";\n"}if(t.ints)for(var h in i+="\n\n",t.ints)i+="int "+h.replace(s,"_")+";\n";if(t.unrestricted)for(var l in i+="\n\n",t.unrestricted)i+="unrestricted "+l.replace(s,"_")+";\n";return i}(t)}},11863:function(t,i,e){i.reformat=e(30361),i.solve=function(t){return new Promise((function(i,s){"undefined"!==typeof window&&s("Function Not Available in Browser");e(30361)(t);t.external||s("Data for this function must be contained in the 'external' attribute. Not seeing anything there."),t.external.binPath||s("No Executable | Binary path provided in arguments as 'binPath'"),t.external.args||s("No arguments array for cli | bash provided on 'args' attribute"),t.external.tempName||s("No 'tempName' given. This is necessary to produce a staging file for the solver to operate on")}))}},87027:function(t,i,e){t.exports={lpsolve:e(11863)}},53995:function(t,i,e){var s=e(51830),r=(e(76631),e(33368)),n=r.Constraint,a=r.Equality,o=r.Variable,h=r.IntegerVariable;r.Term;function l(t,i){this.tableau=new s(t),this.name=i,this.variables=[],this.integerVariables=[],this.unrestrictedVariables={},this.constraints=[],this.nConstraints=0,this.nVariables=0,this.isMinimization=!0,this.tableauInitialized=!1,this.relaxationIndex=1,this.useMIRCuts=!1,this.checkForCycles=!0,this.messages=[]}t.exports=l,l.prototype.minimize=function(){return this.isMinimization=!0,this},l.prototype.maximize=function(){return this.isMinimization=!1,this},l.prototype._getNewElementIndex=function(){if(this.availableIndexes.length>0)return this.availableIndexes.pop();var t=this.lastElementIndex;return this.lastElementIndex+=1,t},l.prototype._addConstraint=function(t){var i=t.slack;this.tableau.variablesPerIndex[i.index]=i,this.constraints.push(t),this.nConstraints+=1,!0===this.tableauInitialized&&this.tableau.addConstraint(t)},l.prototype.smallerThan=function(t){var i=new n(t,!0,this.tableau.getNewElementIndex(),this);return this._addConstraint(i),i},l.prototype.greaterThan=function(t){var i=new n(t,!1,this.tableau.getNewElementIndex(),this);return this._addConstraint(i),i},l.prototype.equal=function(t){var i=new n(t,!0,this.tableau.getNewElementIndex(),this);this._addConstraint(i);var e=new n(t,!1,this.tableau.getNewElementIndex(),this);return this._addConstraint(e),new a(i,e)},l.prototype.addVariable=function(t,i,e,s,r){if("string"===typeof r)switch(r){case"required":default:r=0;break;case"strong":r=1;break;case"medium":r=2;break;case"weak":r=3}var n,a=this.tableau.getNewElementIndex();return null!==i&&void 0!==i||(i="v"+a),null!==t&&void 0!==t||(t=0),null!==r&&void 0!==r||(r=0),e?(n=new h(i,t,a,r),this.integerVariables.push(n)):n=new o(i,t,a,r),this.variables.push(n),this.tableau.variablesPerIndex[a]=n,s&&(this.unrestrictedVariables[a]=!0),this.nVariables+=1,!0===this.tableauInitialized&&this.tableau.addVariable(n),n},l.prototype._removeConstraint=function(t){var i=this.constraints.indexOf(t);-1!==i?(this.constraints.splice(i,1),this.nConstraints-=1,!0===this.tableauInitialized&&this.tableau.removeConstraint(t),t.relaxation&&this.removeVariable(t.relaxation)):console.warn("[Model.removeConstraint] Constraint not present in model")},l.prototype.removeConstraint=function(t){return t.isEquality?(this._removeConstraint(t.upperBound),this._removeConstraint(t.lowerBound)):this._removeConstraint(t),this},l.prototype.removeVariable=function(t){var i=this.variables.indexOf(t);if(-1!==i)return this.variables.splice(i,1),!0===this.tableauInitialized&&this.tableau.removeVariable(t),this;console.warn("[Model.removeVariable] Variable not present in model")},l.prototype.updateRightHandSide=function(t,i){return!0===this.tableauInitialized&&this.tableau.updateRightHandSide(t,i),this},l.prototype.updateConstraintCoefficient=function(t,i,e){return!0===this.tableauInitialized&&this.tableau.updateConstraintCoefficient(t,i,e),this},l.prototype.setCost=function(t,i){var e=t-i.cost;return!1===this.isMinimization&&(e=-e),i.cost=t,this.tableau.updateCost(i,e),this},l.prototype.loadJson=function(t){this.isMinimization="max"!==t.opType;for(var i=t.variables,e=t.constraints,s={},r={},n=Object.keys(e),o=n.length,h=0;h<o;h+=1){var l,d,u=n[h],c=e[u],v=c.equal,p=c.weight,f=c.priority,x=void 0!==p||void 0!==f;if(void 0===v){var m=c.min;void 0!==m&&(l=this.greaterThan(m),s[u]=l,x&&l.relax(p,f));var b=c.max;void 0!==b&&(d=this.smallerThan(b),r[u]=d,x&&d.relax(p,f))}else{l=this.greaterThan(v),s[u]=l,d=this.smallerThan(v),r[u]=d;var y=new a(l,d);x&&y.relax(p,f)}}var I=Object.keys(i),g=I.length;this.tolerance=t.tolerance||0,t.timeout&&(this.timeout=t.timeout),t.options&&(t.options.timeout&&(this.timeout=t.options.timeout),0===this.tolerance&&(this.tolerance=t.options.tolerance||0),t.options.useMIRCuts&&(this.useMIRCuts=t.options.useMIRCuts),"undefined"===typeof t.options.exitOnCycles?this.checkForCycles=!0:this.checkForCycles=t.options.exitOnCycles,t.options.keep_solutions?this.keep_solutions=t.options.keep_solutions:this.keep_solutions=!1);for(var w=t.ints||{},C=t.binaries||{},B=t.unrestricted||{},V=t.optimize,_=0;_<g;_+=1){var O=I[_],M=i[O],R=M[V]||0,j=!!C[O],E=!!w[O]||j,z=!!B[O],S=this.addVariable(R,O,E,z);j&&this.smallerThan(1).addTerm(1,S);var k=Object.keys(M);for(h=0;h<k.length;h+=1){var P=k[h];if(P!==V){var N=M[P],T=s[P];void 0!==T&&T.addTerm(N,S);var F=r[P];void 0!==F&&F.addTerm(N,S)}}}return this},l.prototype.getNumberOfIntegerVariables=function(){return this.integerVariables.length},l.prototype.solve=function(){return!1===this.tableauInitialized&&(this.tableau.setModel(this),this.tableauInitialized=!0),this.tableau.solve()},l.prototype.isFeasible=function(){return this.tableau.feasible},l.prototype.save=function(){return this.tableau.save()},l.prototype.restore=function(){return this.tableau.restore()},l.prototype.activateMIRCuts=function(t){this.useMIRCuts=t},l.prototype.debug=function(t){this.checkForCycles=t},l.prototype.log=function(t){return this.tableau.log(t)}},10077:function(t){t.exports=function(t,i){var e,s,r,n,a,o=i.optimize,h=JSON.parse(JSON.stringify(i.optimize)),l=Object.keys(i.optimize),d=0,u={},c="",v={},p=[];for(delete i.optimize,s=0;s<l.length;s++)h[l[s]]=0;for(s=0;s<l.length;s++){for(a in i.optimize=l[s],i.opType=o[l[s]],e=t.Solve(i,void 0,void 0,!0),l)if(!i.variables[l[a]])for(n in e[l[a]]=e[l[a]]?e[l[a]]:0,i.variables)i.variables[n][l[a]]&&e[n]&&(e[l[a]]+=e[n]*i.variables[n][l[a]]);for(c="base",r=0;r<l.length;r++)e[l[r]]?c+="-"+(1e3*e[l[r]]|0)/1e3:c+="-0";if(!u[c]){for(u[c]=1,d++,r=0;r<l.length;r++)e[l[r]]&&(h[l[r]]+=e[l[r]]);delete e.feasible,delete e.result,p.push(e)}}for(s=0;s<l.length;s++)i.constraints[l[s]]={equal:h[l[s]]/d};for(s in i.optimize="cheater-"+Math.random(),i.opType="max",i.variables)i.variables[s].cheater=1;for(s in p)for(n in p[s])v[n]=v[n]||{min:1e99,max:-1e99};for(s in v)for(n in p)p[n][s]?(p[n][s]>v[s].max&&(v[s].max=p[n][s]),p[n][s]<v[s].min&&(v[s].min=p[n][s])):(p[n][s]=0,v[s].min=0);return{midpoint:e=t.Solve(i,void 0,void 0,!0),vertices:p,ranges:v}}},48037:function(t,i,e){var s=e(16708);function r(t,i,e,r,n){s.call(this,t,i,e,r),this.iter=n}t.exports=r,r.prototype=Object.create(s.prototype),r.constructor=r},16708:function(t){function i(t,i,e,s){this.feasible=e,this.evaluation=i,this.bounded=s,this._tableau=t}t.exports=i,i.prototype.generateSolutionSet=function(){for(var t={},i=this._tableau,e=i.varIndexByRow,s=i.variablesPerIndex,r=i.matrix,n=i.rhsColumn,a=i.height-1,o=Math.round(1/i.precision),h=1;h<=a;h+=1){var l=s[e[h]];if(void 0!==l&&!0!==l.isSlack){var d=r[h][n];t[l.id]=Math.round((Number.EPSILON+d)*o)/o}}return t}},51830:function(t,i,e){var s=e(16708),r=e(48037);function n(t){this.model=null,this.matrix=null,this.width=0,this.height=0,this.costRowIndex=0,this.rhsColumn=0,this.variablesPerIndex=[],this.unrestrictedVars=null,this.feasible=!0,this.evaluation=0,this.simplexIters=0,this.varIndexByRow=null,this.varIndexByCol=null,this.rowByVarIndex=null,this.colByVarIndex=null,this.precision=t||1e-8,this.optionalObjectives=[],this.objectivesByPriority={},this.savedState=null,this.availableIndexes=[],this.lastElementIndex=0,this.variables=null,this.nVars=0,this.bounded=!0,this.unboundedVarIndex=null,this.branchAndCutIterations=0}function a(t,i){this.priority=t,this.reducedCosts=new Array(i);for(var e=0;e<i;e+=1)this.reducedCosts[e]=0}t.exports=n,n.prototype.solve=function(){return this.model.getNumberOfIntegerVariables()>0?this.branchAndCut():this.simplex(),this.updateVariableValues(),this.getSolution()},a.prototype.copy=function(){var t=new a(this.priority,this.reducedCosts.length);return t.reducedCosts=this.reducedCosts.slice(),t},n.prototype.setOptionalObjective=function(t,i,e){var s=this.objectivesByPriority[t];void 0===s&&(s=new a(t,Math.max(this.width,i+1)),this.objectivesByPriority[t]=s,this.optionalObjectives.push(s),this.optionalObjectives.sort((function(t,i){return t.priority-i.priority})));s.reducedCosts[i]=e},n.prototype.initialize=function(t,i,e,s){this.variables=e,this.unrestrictedVars=s,this.width=t,this.height=i;for(var r=new Array(t),n=0;n<t;n++)r[n]=0;this.matrix=new Array(i);for(var a=0;a<i;a++)this.matrix[a]=r.slice();this.varIndexByRow=new Array(this.height),this.varIndexByCol=new Array(this.width),this.varIndexByRow[0]=-1,this.varIndexByCol[0]=-1,this.nVars=t+i-2,this.rowByVarIndex=new Array(this.nVars),this.colByVarIndex=new Array(this.nVars),this.lastElementIndex=this.nVars},n.prototype._resetMatrix=function(){var t,i,e=this.model.variables,s=this.model.constraints,r=e.length,n=s.length,a=this.matrix[0],o=!0===this.model.isMinimization?-1:1;for(t=0;t<r;t+=1){var h=e[t],l=h.priority,d=o*h.cost;0===l?a[t+1]=d:this.setOptionalObjective(l,t+1,d),i=e[t].index,this.rowByVarIndex[i]=-1,this.colByVarIndex[i]=t+1,this.varIndexByCol[t+1]=i}for(var u=1,c=0;c<n;c+=1){var v,p,f=s[c],x=f.index;this.rowByVarIndex[x]=u,this.colByVarIndex[x]=-1,this.varIndexByRow[u]=x;var m=f.terms,b=m.length,y=this.matrix[u++];if(f.isUpperBound){for(v=0;v<b;v+=1)p=m[v],y[this.colByVarIndex[p.variable.index]]=p.coefficient;y[0]=f.rhs}else{for(v=0;v<b;v+=1)p=m[v],y[this.colByVarIndex[p.variable.index]]=-p.coefficient;y[0]=-f.rhs}}},n.prototype.setModel=function(t){this.model=t;var i=t.nVariables+1,e=t.nConstraints+1;return this.initialize(i,e,t.variables,t.unrestrictedVariables),this._resetMatrix(),this},n.prototype.getNewElementIndex=function(){if(this.availableIndexes.length>0)return this.availableIndexes.pop();var t=this.lastElementIndex;return this.lastElementIndex+=1,t},n.prototype.density=function(){for(var t=0,i=this.matrix,e=0;e<this.height;e++)for(var s=i[e],r=0;r<this.width;r++)0!==s[r]&&(t+=1);return t/(this.height*this.width)},n.prototype.setEvaluation=function(){var t=Math.round(1/this.precision),i=this.matrix[this.costRowIndex][this.rhsColumn],e=Math.round((Number.EPSILON+i)*t)/t;this.evaluation=e,0===this.simplexIters&&(this.bestPossibleEval=e)},n.prototype.getSolution=function(){var t=!0===this.model.isMinimization?this.evaluation:-this.evaluation;return this.model.getNumberOfIntegerVariables()>0?new r(this,t,this.feasible,this.bounded,this.branchAndCutIterations):new s(this,t,this.feasible,this.bounded)}},765:function(t,i,e){var s=e(51830);s.prototype.copy=function(){var t=new s(this.precision);t.width=this.width,t.height=this.height,t.nVars=this.nVars,t.model=this.model,t.variables=this.variables,t.variablesPerIndex=this.variablesPerIndex,t.unrestrictedVars=this.unrestrictedVars,t.lastElementIndex=this.lastElementIndex,t.varIndexByRow=this.varIndexByRow.slice(),t.varIndexByCol=this.varIndexByCol.slice(),t.rowByVarIndex=this.rowByVarIndex.slice(),t.colByVarIndex=this.colByVarIndex.slice(),t.availableIndexes=this.availableIndexes.slice();for(var i=[],e=0;e<this.optionalObjectives.length;e++)i[e]=this.optionalObjectives[e].copy();t.optionalObjectives=i;for(var r=this.matrix,n=new Array(this.height),a=0;a<this.height;a++)n[a]=r[a].slice();return t.matrix=n,t},s.prototype.save=function(){this.savedState=this.copy()},s.prototype.restore=function(){if(null!==this.savedState){var t,i,e=this.savedState,s=e.matrix;for(this.nVars=e.nVars,this.model=e.model,this.variables=e.variables,this.variablesPerIndex=e.variablesPerIndex,this.unrestrictedVars=e.unrestrictedVars,this.lastElementIndex=e.lastElementIndex,this.width=e.width,this.height=e.height,t=0;t<this.height;t+=1){var r=s[t],n=this.matrix[t];for(i=0;i<this.width;i+=1)n[i]=r[i]}var a=e.varIndexByRow;for(i=0;i<this.height;i+=1)this.varIndexByRow[i]=a[i];for(;this.varIndexByRow.length>this.height;)this.varIndexByRow.pop();var o=e.varIndexByCol;for(t=0;t<this.width;t+=1)this.varIndexByCol[t]=o[t];for(;this.varIndexByCol.length>this.width;)this.varIndexByCol.pop();for(var h=e.rowByVarIndex,l=e.colByVarIndex,d=0;d<this.nVars;d+=1)this.rowByVarIndex[d]=h[d],this.colByVarIndex[d]=l[d];if(e.optionalObjectives.length>0&&this.optionalObjectives.length>0){this.optionalObjectives=[],this.optionalObjectivePerPriority={};for(var u=0;u<e.optionalObjectives.length;u++){var c=e.optionalObjectives[u].copy();this.optionalObjectives[u]=c,this.optionalObjectivePerPriority[c.priority]=c}}}}},76631:function(t,i,e){var s=e(51830);function r(t,i,e){this.type=t,this.varIndex=i,this.value=e}function n(t,i){this.relaxedEvaluation=t,this.cuts=i}function a(t,i){return i.relaxedEvaluation-t.relaxedEvaluation}s.prototype.applyCuts=function(t){if(this.restore(),this.addCutConstraints(t),this.simplex(),this.model.useMIRCuts)for(var i=!0;i;){var e=this.computeFractionalVolume(!0);this.applyMIRCuts(),this.simplex(),this.computeFractionalVolume(!0)>=.9*e&&(i=!1)}},s.prototype.branchAndCut=function(){var t=[],i=0,e=this.model.tolerance,s=!0,o=1e99;this.model.timeout&&(o=Date.now()+this.model.timeout);for(var h=1/0,l=null,d=[],u=0;u<this.optionalObjectives.length;u+=1)d.push(1/0);var c,v=new n(-1/0,[]);for(t.push(v);t.length>0&&!0===s&&Date.now()<o;)if(c=this.model.isMinimization?this.bestPossibleEval*(1+e):this.bestPossibleEval*(1-e),e>0&&h<c&&(s=!1),!((v=t.pop()).relaxedEvaluation>h)){var p=v.cuts;if(this.applyCuts(p),i++,!1!==this.feasible){var f=this.evaluation;if(!(f>h)){if(f===h){for(var x=!0,m=0;m<this.optionalObjectives.length&&!(this.optionalObjectives[m].reducedCosts[0]>d[m]);m+=1)if(this.optionalObjectives[m].reducedCosts[0]<d[m]){x=!1;break}if(x)continue}if(!0===this.isIntegral()){if(this.__isIntegral=!0,1===i)return void(this.branchAndCutIterations=i);l=v,h=f;for(var b=0;b<this.optionalObjectives.length;b+=1)d[b]=this.optionalObjectives[b].reducedCosts[0];if(this.model.keep_solutions){var y=this.model.tableau.getSolution(),I=y.generateSolutionSet();I.result=y.evaluation,this.model.solutions||(this.model.solutions=[]),this.model.solutions.push(I)}}else{1===i&&this.save();for(var g=this.getMostFractionalVar(),w=g.index,C=[],B=[],V=p.length,_=0;_<V;_+=1){var O=p[_];O.varIndex===w?"min"===O.type?B.push(O):C.push(O):(C.push(O),B.push(O))}var M=Math.ceil(g.value),R=Math.floor(g.value),j=new r("min",w,M);C.push(j);var E=new r("max",w,R);B.push(E),t.push(new n(f,C)),t.push(new n(f,B)),t.sort(a)}}}}null!==l&&this.applyCuts(l.cuts),this.branchAndCutIterations=i}},11094:function(t,i,e){var s=e(51830);function r(t,i){this.index=t,this.value=i}s.prototype.getMostFractionalVar=function(){for(var t=0,i=null,e=null,s=this.model.integerVariables,n=s.length,a=0;a<n;a++){var o=s[a].index,h=this.rowByVarIndex[o];if(-1!==h){var l=this.matrix[h][this.rhsColumn],d=Math.abs(l-Math.round(l));t<d&&(t=d,i=o,e=l)}}return new r(i,e)},s.prototype.getFractionalVarWithLowestCost=function(){for(var t=1/0,i=null,e=null,s=this.model.integerVariables,n=s.length,a=0;a<n;a++){var o=s[a],h=o.index,l=this.rowByVarIndex[h];if(-1!==l){var d=this.matrix[l][this.rhsColumn];if(Math.abs(d-Math.round(d))>this.precision){var u=o.cost;t>u&&(t=u,i=h,e=d)}}}return new r(i,e)}},57040:function(t,i,e){var s=e(51830),r=e(33368).SlackVariable;s.prototype.addCutConstraints=function(t){for(var i,e=t.length,s=this.height,n=s+e,a=s;a<n;a+=1)void 0===this.matrix[a]&&(this.matrix[a]=this.matrix[a-1].slice());this.height=n,this.nVars=this.width+this.height-2;for(var o=this.width-1,h=0;h<e;h+=1){var l=t[h],d=s+h,u="min"===l.type?-1:1,c=l.varIndex,v=this.rowByVarIndex[c],p=this.matrix[d];if(-1===v){for(p[this.rhsColumn]=u*l.value,i=1;i<=o;i+=1)p[i]=0;p[this.colByVarIndex[c]]=u}else{var f=this.matrix[v],x=f[this.rhsColumn];for(p[this.rhsColumn]=u*(l.value-x),i=1;i<=o;i+=1)p[i]=-u*f[i]}var m=this.getNewElementIndex();this.varIndexByRow[d]=m,this.rowByVarIndex[m]=d,this.colByVarIndex[m]=-1,this.variablesPerIndex[m]=new r("s"+m,m),this.nVars+=1}},s.prototype._addLowerBoundMIRCut=function(t){if(t===this.costRowIndex)return!1;this.model;var i=this.matrix;if(!this.variablesPerIndex[this.varIndexByRow[t]].isInteger)return!1;var e=i[t][this.rhsColumn],s=e-Math.floor(e);if(s<this.precision||1-this.precision<s)return!1;var n=this.height;i[n]=i[n-1].slice(),this.height+=1,this.nVars+=1;var a=this.getNewElementIndex();this.varIndexByRow[n]=a,this.rowByVarIndex[a]=n,this.colByVarIndex[a]=-1,this.variablesPerIndex[a]=new r("s"+a,a),i[n][this.rhsColumn]=Math.floor(e);for(var o=1;o<this.varIndexByCol.length;o+=1){if(this.variablesPerIndex[this.varIndexByCol[o]].isInteger){var h=i[t][o],l=Math.floor(h)+Math.max(0,h-Math.floor(h)-s)/(1-s);i[n][o]=l}else i[n][o]=Math.min(0,i[t][o]/(1-s))}for(var d=0;d<this.width;d+=1)i[n][d]-=i[t][d];return!0},s.prototype._addUpperBoundMIRCut=function(t){if(t===this.costRowIndex)return!1;this.model;var i=this.matrix;if(!this.variablesPerIndex[this.varIndexByRow[t]].isInteger)return!1;var e=i[t][this.rhsColumn],s=e-Math.floor(e);if(s<this.precision||1-this.precision<s)return!1;var n=this.height;i[n]=i[n-1].slice(),this.height+=1,this.nVars+=1;var a=this.getNewElementIndex();this.varIndexByRow[n]=a,this.rowByVarIndex[a]=n,this.colByVarIndex[a]=-1,this.variablesPerIndex[a]=new r("s"+a,a),i[n][this.rhsColumn]=-s;for(var o=1;o<this.varIndexByCol.length;o+=1){var h=this.variablesPerIndex[this.varIndexByCol[o]],l=i[t][o],d=l-Math.floor(l);h.isInteger?i[n][o]=d<=s?-d:-(1-d)*s/d:i[n][o]=l>=0?-l:l*s/(1-s)}return!0},s.prototype.applyMIRCuts=function(){}},26184:function(t,i,e){var s=e(51830);s.prototype._putInBase=function(t){var i=this.rowByVarIndex[t];if(-1===i){for(var e=this.colByVarIndex[t],s=1;s<this.height;s+=1){var r=this.matrix[s][e];if(r<-this.precision||this.precision<r){i=s;break}}this.pivot(i,e)}return i},s.prototype._takeOutOfBase=function(t){var i=this.colByVarIndex[t];if(-1===i){for(var e=this.rowByVarIndex[t],s=this.matrix[e],r=1;r<this.height;r+=1){var n=s[r];if(n<-this.precision||this.precision<n){i=r;break}}this.pivot(e,i)}return i},s.prototype.updateVariableValues=function(){for(var t=this.variables.length,i=Math.round(1/this.precision),e=0;e<t;e+=1){var s=this.variables[e],r=s.index,n=this.rowByVarIndex[r];if(-1===n)s.value=0;else{var a=this.matrix[n][this.rhsColumn];s.value=Math.round((a+Number.EPSILON)*i)/i}}},s.prototype.updateRightHandSide=function(t,i){var e=this.height-1,s=this.rowByVarIndex[t.index];if(-1===s){for(var r=this.colByVarIndex[t.index],n=0;n<=e;n+=1){var a=this.matrix[n];a[this.rhsColumn]-=i*a[r]}var o=this.optionalObjectives.length;if(o>0)for(var h=0;h<o;h+=1){var l=this.optionalObjectives[h].reducedCosts;l[this.rhsColumn]-=i*l[r]}}else this.matrix[s][this.rhsColumn]-=i},s.prototype.updateConstraintCoefficient=function(t,i,e){if(t.index===i.index)throw new Error("[Tableau.updateConstraintCoefficient] constraint index should not be equal to variable index !");var s=this._putInBase(t.index),r=this.colByVarIndex[i.index];if(-1===r)for(var n=this.rowByVarIndex[i.index],a=0;a<this.width;a+=1)this.matrix[s][a]+=e*this.matrix[n][a];else this.matrix[s][r]-=e},s.prototype.updateCost=function(t,i){var e=t.index,s=this.width-1,r=this.colByVarIndex[e];if(-1===r){var n,a=this.matrix[this.rowByVarIndex[e]];if(0===t.priority){var o=this.matrix[0];for(n=0;n<=s;n+=1)o[n]+=i*a[n]}else{var h=this.objectivesByPriority[t.priority].reducedCosts;for(n=0;n<=s;n+=1)h[n]+=i*a[n]}}else this.matrix[0][r]-=i},s.prototype.addConstraint=function(t){var i=t.isUpperBound?1:-1,e=this.height,s=this.matrix[e];void 0===s&&(s=this.matrix[0].slice(),this.matrix[e]=s);for(var r=this.width-1,n=0;n<=r;n+=1)s[n]=0;s[this.rhsColumn]=i*t.rhs;for(var a=t.terms,o=a.length,h=0;h<o;h+=1){var l=a[h],d=l.coefficient,u=l.variable.index,c=this.rowByVarIndex[u];if(-1===c)s[this.colByVarIndex[u]]+=i*d;else{var v=this.matrix[c];v[this.rhsColumn];for(n=0;n<=r;n+=1)s[n]-=i*d*v[n]}}var p=t.index;this.varIndexByRow[e]=p,this.rowByVarIndex[p]=e,this.colByVarIndex[p]=-1,this.height+=1},s.prototype.removeConstraint=function(t){var i=t.index,e=this.height-1,s=this._putInBase(i),r=this.matrix[e];this.matrix[e]=this.matrix[s],this.matrix[s]=r,this.varIndexByRow[s]=this.varIndexByRow[e],this.varIndexByRow[e]=-1,this.rowByVarIndex[i]=-1,this.availableIndexes[this.availableIndexes.length]=i,t.slack.index=-1,this.height-=1},s.prototype.addVariable=function(t){var i=this.height-1,e=this.width,s=!0===this.model.isMinimization?-t.cost:t.cost,r=t.priority,n=this.optionalObjectives.length;if(n>0)for(var a=0;a<n;a+=1)this.optionalObjectives[a].reducedCosts[e]=0;0===r?this.matrix[0][e]=s:(this.setOptionalObjective(r,e,s),this.matrix[0][e]=0);for(var o=1;o<=i;o+=1)this.matrix[o][e]=0;var h=t.index;this.varIndexByCol[e]=h,this.rowByVarIndex[h]=-1,this.colByVarIndex[h]=e,this.width+=1},s.prototype.removeVariable=function(t){var i=t.index,e=this._takeOutOfBase(i),s=this.width-1;if(e!==s){for(var r=this.height-1,n=0;n<=r;n+=1){var a=this.matrix[n];a[e]=a[s]}var o=this.optionalObjectives.length;if(o>0)for(var h=0;h<o;h+=1){var l=this.optionalObjectives[h].reducedCosts;l[e]=l[s]}var d=this.varIndexByCol[s];this.varIndexByCol[e]=d,this.colByVarIndex[d]=e}this.varIndexByCol[s]=-1,this.colByVarIndex[i]=-1,this.availableIndexes[this.availableIndexes.length]=i,t.index=-1,this.width-=1}},57500:function(t,i,e){e(94210),e(57040),e(26184),e(51363),e(765),e(11094),e(58446),t.exports=e(51830)},58446:function(t,i,e){var s=e(51830);s.prototype.countIntegerValues=function(){for(var t=0,i=1;i<this.height;i+=1)if(this.variablesPerIndex[this.varIndexByRow[i]].isInteger){var e=this.matrix[i][this.rhsColumn];(e-=Math.floor(e))<this.precision&&-e<this.precision&&(t+=1)}return t},s.prototype.isIntegral=function(){for(var t=this.model.integerVariables,i=t.length,e=0;e<i;e++){var s=this.rowByVarIndex[t[e].index];if(-1!==s){var r=this.matrix[s][this.rhsColumn];if(Math.abs(r-Math.round(r))>this.precision)return!1}}return!0},s.prototype.computeFractionalVolume=function(t){for(var i=-1,e=1;e<this.height;e+=1)if(this.variablesPerIndex[this.varIndexByRow[e]].isInteger){var s=this.matrix[e][this.rhsColumn];if(s=Math.abs(s),Math.min(s-Math.floor(s),Math.floor(s+1))<this.precision){if(!t)return 0}else-1===i?i=s:i*=s}return-1===i?0:i}},51363:function(t,i,e){e(51830).prototype.log=function(t,i){console.log("****",t,"****"),console.log("Nb Variables",this.width-1),console.log("Nb Constraints",this.height-1),console.log("Basic Indexes",this.varIndexByRow),console.log("Non Basic Indexes",this.varIndexByCol),console.log("Rows",this.rowByVarIndex),console.log("Cols",this.colByVarIndex);var e,s,r,n,a,o,h,l,d,u,c,v="",p=[" "];for(s=1;s<this.width;s+=1)a=this.varIndexByCol[s],h=(o=void 0===(n=this.variablesPerIndex[a])?"c"+a:n.id).length,Math.abs(h-5),l=" ",d="\t",h>5?l+=" ":d+="\t",p[s]=l,v+=d+o;console.log(v);var f=this.matrix[this.costRowIndex],x="\t";for(e=1;e<this.width;e+=1)x+="\t",x+=p[e],x+=f[e].toFixed(5);for(x+="\t"+p[0]+f[0].toFixed(5),console.log(x+"\tZ"),r=1;r<this.height;r+=1){for(u=this.matrix[r],c="\t",s=1;s<this.width;s+=1)c+="\t"+p[s]+u[s].toFixed(5);c+="\t"+p[0]+u[0].toFixed(5),a=this.varIndexByRow[r],o=void 0===(n=this.variablesPerIndex[a])?"c"+a:n.id,console.log(c+"\t"+o)}console.log("");var m=this.optionalObjectives.length;if(m>0){console.log("    Optional objectives:");for(var b=0;b<m;b+=1){var y=this.optionalObjectives[b].reducedCosts,I="";for(e=1;e<this.width;e+=1)I+=y[e]<0?"":" ",I+=p[e],I+=y[e].toFixed(5);I+=(y[0]<0?"":" ")+p[0]+y[0].toFixed(5),console.log(I+" z"+b)}}return console.log("Feasible?",this.feasible),console.log("evaluation",this.evaluation),this}},94210:function(t,i,e){var s=e(51830);s.prototype.simplex=function(){return this.bounded=!0,this.phase1(),!0===this.feasible&&this.phase2(),this},s.prototype.phase1=function(){for(var t=this.model.checkForCycles,i=[],e=this.matrix,s=this.rhsColumn,r=this.width-1,n=this.height-1,a=0;;){for(var o=0,h=-this.precision,l=1;l<=n;l++){!0===this.unrestrictedVars[this.varIndexByRow[l]];var d=e[l][s];d<h&&(h=d,o=l)}if(0===o)return this.feasible=!0,a;for(var u=0,c=-1/0,v=e[0],p=e[o],f=1;f<=r;f++){var x=p[f];if(!0===this.unrestrictedVars[this.varIndexByCol[f]]||x<-this.precision){var m=-v[f]/x;c<m&&(c=m,u=f)}}if(0===u)return this.feasible=!1,a;if(t){i.push([this.varIndexByRow[o],this.varIndexByCol[u]]);var b=this.checkForCycles(i);if(b.length>0)return this.model.messages.push("Cycle in phase 1"),this.model.messages.push("Start :"+b[0]),this.model.messages.push("Length :"+b[1]),this.feasible=!1,a}this.pivot(o,u),a+=1}},s.prototype.phase2=function(){for(var t,i,e=this.model.checkForCycles,s=[],r=this.matrix,n=this.rhsColumn,a=this.width-1,o=this.height-1,h=this.precision,l=this.optionalObjectives.length,d=null,u=0;;){var c=r[this.costRowIndex];l>0&&(d=[]);for(var v=0,p=h,f=!1,x=1;x<=a;x++)t=c[x],i=!0===this.unrestrictedVars[this.varIndexByCol[x]],l>0&&-h<t&&t<h?d.push(x):i&&t<0?-t>p&&(p=-t,v=x,f=!0):t>p&&(p=t,v=x,f=!1);if(l>0)for(var m=0;0===v&&d.length>0&&m<l;){var b=[],y=this.optionalObjectives[m].reducedCosts;p=h;for(var I=0;I<d.length;I++)t=y[x=d[I]],i=!0===this.unrestrictedVars[this.varIndexByCol[x]],-h<t&&t<h?b.push(x):i&&t<0?-t>p&&(p=-t,v=x,f=!0):t>p&&(p=t,v=x,f=!1);d=b,m+=1}if(0===v)return this.setEvaluation(),this.simplexIters+=1,u;for(var g=0,w=1/0,C=(this.varIndexByRow,1);C<=o;C++){var B=r[C],V=B[n],_=B[v];if(!(-h<_&&_<h)){if(_>0&&h>V&&V>-h){w=0,g=C;break}var O=f?-V/_:V/_;O>h&&w>O&&(w=O,g=C)}}if(w===1/0)return this.evaluation=-1/0,this.bounded=!1,this.unboundedVarIndex=this.varIndexByCol[v],u;if(e){s.push([this.varIndexByRow[g],this.varIndexByCol[v]]);var M=this.checkForCycles(s);if(M.length>0)return this.model.messages.push("Cycle in phase 2"),this.model.messages.push("Start :"+M[0]),this.model.messages.push("Length :"+M[1]),this.feasible=!1,u}this.pivot(g,v,!0),u+=1}};var r=[];s.prototype.pivot=function(t,i){var e=this.matrix,s=e[t][i],n=this.height-1,a=this.width-1,o=this.varIndexByRow[t],h=this.varIndexByCol[i];this.varIndexByRow[t]=h,this.varIndexByCol[i]=o,this.rowByVarIndex[h]=t,this.rowByVarIndex[o]=-1,this.colByVarIndex[h]=-1,this.colByVarIndex[o]=i;for(var l,d,u,c=e[t],v=0,p=0;p<=a;p++)c[p]>=-1e-16&&c[p]<=1e-16?c[p]=0:(c[p]/=s,r[v]=p,v+=1);c[i]=1/s;this.precision;for(var f=0;f<=n;f++)if(f!==t&&!(e[f][i]>=-1e-16&&e[f][i]<=1e-16)){var x=e[f];if((l=x[i])>=-1e-16&&l<=1e-16)0!==l&&(x[i]=0);else{for(d=0;d<v;d++)(u=c[p=r[d]])>=-1e-16&&u<=1e-16?0!==u&&(c[p]=0):x[p]=x[p]-l*u;x[i]=-l/s}}var m=this.optionalObjectives.length;if(m>0)for(var b=0;b<m;b+=1){var y=this.optionalObjectives[b].reducedCosts;if(0!==(l=y[i])){for(d=0;d<v;d++)0!==(u=c[p=r[d]])&&(y[p]=y[p]-l*u);y[i]=-l/s}}},s.prototype.checkForCycles=function(t){for(var i=0;i<t.length-1;i++)for(var e=i+1;e<t.length;e++){var s=t[i],r=t[e];if(s[0]===r[0]&&s[1]===r[1]){if(e-i>t.length-e)break;for(var n=!0,a=1;a<e-i;a++){var o=t[i+a],h=t[e+a];if(o[0]!==h[0]||o[1]!==h[1]){n=!1;break}}if(n)return[i,e-i]}}return[]}},82142:function(t,i){i.CleanObjectiveAttributes=function(t){var i,e,s;if("string"===typeof t.optimize){if(t.constraints[t.optimize]){for(e in i=Math.random(),t.variables)t.variables[e][t.optimize]&&(t.variables[e][i]=t.variables[e][t.optimize]);return t.constraints[i]=t.constraints[t.optimize],delete t.constraints[t.optimize],t}return t}for(s in t.optimize)if(t.constraints[s])if("equal"===t.constraints[s])delete t.optimize[s];else{for(e in i=Math.random(),t.variables)t.variables[e][s]&&(t.variables[e][i]=t.variables[e][s]);t.constraints[i]=t.constraints[s],delete t.constraints[s]}return t}},33368:function(t){function i(t,i,e,s){this.id=t,this.cost=i,this.index=e,this.value=0,this.priority=s}function e(t,e,s,r){i.call(this,t,e,s,r)}function s(t,e){i.call(this,t,0,e,0)}function r(t,i){this.variable=t,this.coefficient=i}function n(t,i,e){return 0===e||"required"===e?null:(i=i||1,e=e||1,!1===t.isMinimization&&(i=-i),t.addVariable(i,"r"+t.relaxationIndex++,!1,!1,e))}function a(t,i,e,r){this.slack=new s("s"+e,e),this.index=e,this.model=r,this.rhs=t,this.isUpperBound=i,this.terms=[],this.termsByVarIndex={},this.relaxation=null}function o(t,i){this.upperBound=t,this.lowerBound=i,this.model=t.model,this.rhs=t.rhs,this.relaxation=null}e.prototype.isInteger=!0,s.prototype.isSlack=!0,a.prototype.addTerm=function(t,i){var e=i.index,s=this.termsByVarIndex[e];if(void 0===s)s=new r(i,t),this.termsByVarIndex[e]=s,this.terms.push(s),!0===this.isUpperBound&&(t=-t),this.model.updateConstraintCoefficient(this,i,t);else{var n=s.coefficient+t;this.setVariableCoefficient(n,i)}return this},a.prototype.removeTerm=function(t){return this},a.prototype.setRightHandSide=function(t){if(t!==this.rhs){var i=t-this.rhs;!0===this.isUpperBound&&(i=-i),this.rhs=t,this.model.updateRightHandSide(this,i)}return this},a.prototype.setVariableCoefficient=function(t,i){var e=i.index;if(-1!==e){var s=this.termsByVarIndex[e];if(void 0===s)this.addTerm(t,i);else if(t!==s.coefficient){var r=t-s.coefficient;!0===this.isUpperBound&&(r=-r),s.coefficient=t,this.model.updateConstraintCoefficient(this,i,r)}return this}console.warn("[Constraint.setVariableCoefficient] Trying to change coefficient of inexistant variable.")},a.prototype.relax=function(t,i){this.relaxation=n(this.model,t,i),this._relax(this.relaxation)},a.prototype._relax=function(t){null!==t&&(this.isUpperBound?this.setVariableCoefficient(-1,t):this.setVariableCoefficient(1,t))},o.prototype.isEquality=!0,o.prototype.addTerm=function(t,i){return this.upperBound.addTerm(t,i),this.lowerBound.addTerm(t,i),this},o.prototype.removeTerm=function(t){return this.upperBound.removeTerm(t),this.lowerBound.removeTerm(t),this},o.prototype.setRightHandSide=function(t){this.upperBound.setRightHandSide(t),this.lowerBound.setRightHandSide(t),this.rhs=t},o.prototype.relax=function(t,i){this.relaxation=n(this.model,t,i),this.upperBound.relaxation=this.relaxation,this.upperBound._relax(this.relaxation),this.lowerBound.relaxation=this.relaxation,this.lowerBound._relax(this.relaxation)},t.exports={Constraint:a,Variable:i,IntegerVariable:e,SlackVariable:s,Equality:o,Term:r}},93853:function(t,i,e){var s,r=e(57500),n=e(53995),a=e(76631),o=e(33368),h=e(82142),l=o.Constraint,d=o.Variable,u=o.Numeral,c=o.Term,v=e(87027),p=function(){"use strict";this.Model=n,this.branchAndCut=a,this.Constraint=l,this.Variable=d,this.Numeral=u,this.Term=c,this.Tableau=r,this.lastSolvedModel=null,this.External=v,this.ReformatLP=e(30361),this.MultiObjective=function(t){return e(10077)(this,t)}};p.prototype.Solve=function(t,i,s,r){if(r)for(var a in h)t=h[a](t);if(!t)throw new Error("Solver requires a model to operate on");if("object"===typeof t.optimize&&Object.keys(t.optimize>1))return e(10077)(this,t);if(t.external){var o=Object.keys(v);if(o=JSON.stringify(o),!t.external.solver)throw new Error("The model you provided has an 'external' object that doesn't have a solver attribute. Use one of the following:"+o);if(!v[t.external.solver])throw new Error("No support (yet) for "+t.external.solver+". Please use one of these instead:"+o);return v[t.external.solver].solve(t)}t instanceof n===!1&&(t=new n(i).loadJson(t));var l=t.solve();if(this.lastSolvedModel=t,l.solutionSet=l.generateSolutionSet(),s)return l;var d={};return d.feasible=l.feasible,d.result=l.evaluation,d.bounded=l.bounded,l._tableau.__isIntegral&&(d.isIntegral=!0),Object.keys(l.solutionSet).forEach((function(t){0!==l.solutionSet[t]&&(d[t]=l.solutionSet[t])})),d},void 0===(s=function(){return new p}.apply(i,[]))||(t.exports=s),t.exports=new p}}]);