"use strict";(self.webpackChunkgenshin_gui=self.webpackChunkgenshin_gui||[]).push([[4528],{84528:function(e,t,n){n.r(t),n.d(t,{default:function(){return C},position:function(){return g},title:function(){return v}});var r=n(74165),a=n(15861),i=n(96103),s=n(75936),c=n(45043),o=n(1836),u=n(62151),l=n(46323),d=n(79188),h=n(29447);function f(e,t){var n=performance.now();return e.character instanceof c.G.Character&&(e.character=c.G.CharacterLoader.exportCharacter(e.character)),e.rotation instanceof c.G.Rotation&&(e.rotation=c.G.RotationLoader.exportRotation(e.rotation)),(0,h.HB)().postMessage({id:n,type:"optimizer-resin",data:e}),new Promise((function(e){var r=(0,h.HB)().addMessageListener((function(a){a.id===n&&(!1===a.complete?t(a.result):(e(a.result),(0,h.HB)().removeMessageListener(r)))}))}))}var p=n(47017),R=n(48648),I=n(93298),E=n(65832),O=n(2532),x=n(97890),Z=n(46417),m=c.G.Resources.validateResourcesObject,v="OPTIMIZER_RESIN",g=5;function C(){var e=(0,o.r)(),t=(0,l.a)(),n=(0,x.s0)(),c=(0,u.$)();function h(){return(h=(0,a.Z)((0,r.Z)().mark((function a(){var o,u,l,h,R,I,E,O,x,v,g;return(0,r.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=(0,i.vo)(),u=o.character,l=o.rotationId,r.next=3,(0,p.q$)({id:l});case 3:if(h=r.sent[0],R=c.getResources(),m(R)){r.next=10;break}return E=(null===(I=m.errors)||void 0===I?void 0:I.map((function(e){return e.message||""})))||[],(0,s.a)({message:(0,Z.jsxs)("div",{children:[(0,Z.jsx)("div",{children:(0,d.KF)("OPTIMIZER_RESIN_RESOURCES_ERROR")}),(0,Z.jsx)("pre",{children:E.map((function(e,t){return(0,Z.jsx)("div",{children:e},t)}))})]})}),r.abrupt("return");case 10:return e.show(),r.next=13,f({character:u,rotation:h,talentsOnly:c.talentsOnly,resources:R},(function(t){e.setCurrent(t[0]),e.setTotal(t[1])}));case 13:O=r.sent,x=O.map((function(e){return e[0][0]})).filter((function(e){return!!e})),v=O.map((function(e){return e[1]})).filter((function(e){return!!e})),g=O.map((function(e){return e[0]})).filter((function(e){return!!e})),t.setRows(v),t.setStates(x),t.setResinStates(g),e.hide(),n("/editor/optimizer/results");case 23:case"end":return r.stop()}}),a)})))).apply(this,arguments)}return(0,Z.jsxs)(R.Z,{gap:1,children:[(0,Z.jsx)(I.Z,{variant:"warning",className:"text-black",onClick:function(){return h.apply(this,arguments)},children:(0,d.KF)("OPTIMIZER_OPTIMIZE")}),(0,Z.jsxs)(E.Z,{children:[(0,Z.jsx)(E.Z.Header,{as:"h5",className:"bg-info m-0",children:(0,d.KF)("OPTIMIZER_RESIN_CONFIGURE")}),(0,Z.jsxs)(E.Z.Body,{children:[(0,Z.jsxs)(O.Z,{children:[(0,Z.jsx)(O.Z.Check,{checked:!c.talentsOnly,onChange:function(e){return e.currentTarget.checked?c.setTalentsOnly(!1):void 0},type:"radio",label:(0,d.KF)("OPTIMIZE_ALL_UPGRADES")}),(0,Z.jsx)(O.Z.Check,{checked:c.talentsOnly,onChange:function(e){return e.currentTarget.checked?c.setTalentsOnly(!0):void 0},type:"radio",label:(0,d.KF)("OPTIMIZE_TALENT_ONLY")})]}),(0,Z.jsx)(I.Z,{onClick:function(){return n("/editor/optimizer/resin/editor")},children:(0,d.KF)("OPTIMIZER_RESIN_RESOURCES_CONFIGURE")})]})]})]})}}}]);