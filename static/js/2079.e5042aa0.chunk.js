"use strict";(self.webpackChunkgenshin_gui=self.webpackChunkgenshin_gui||[]).push([[2079],{72079:function(e,t,n){n.r(t),n.d(t,{default:function(){return ae},position:function(){return ce},title:function(){return se}});var r=n(93324),i=n(96103),s=n(94860),c=n(13736),a=n(42072),l=n(79188),o=n(1413),d=n(74165),u=n(15861),h=n(45043),x=n(29447);function j(e){return f.apply(this,arguments)}function f(){return f=(0,u.Z)((0,d.Z)().mark((function e(t){var n;return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=performance.now(),e.abrupt("return",new Promise(function(){var e=(0,u.Z)((0,d.Z)().mark((function e(r,i){var s;return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=(0,x.HB)().addMessageListener((function(e){"storage-projects"===e.type&&e.id===n&&(e.error?i(e.error):((0,x.HB)().removeMessageListener(s),r(e.result)))})),(0,x.HB)().postMessage({type:"storage-projects",id:n,data:t});case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)}))),f.apply(this,arguments)}function p(e){return m.apply(this,arguments)}function m(){return(m=(0,u.Z)((0,d.Z)().mark((function e(t){return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",j({get:(0,o.Z)({},t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return v.apply(this,arguments)}function v(){return(v=(0,u.Z)((0,d.Z)().mark((function e(t){return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",j({get:(0,o.Z)((0,o.Z)({},t),{},{basics:!0})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(){return(Z=(0,u.Z)((0,d.Z)().mark((function e(t){var n;return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p({name:t,exact:!0});case 2:if((n=e.sent)&&0!==n.length){e.next=5;break}return e.abrupt("return",void 0);case 5:return e.abrupt("return",n[0]);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e,t){return N.apply(this,arguments)}function N(){return(N=(0,u.Z)((0,d.Z)().mark((function e(t,n){var r,i;return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=(0,o.Z)({},n)).character instanceof h.G.Character&&(r.character=h.G.CharacterLoader.exportCharacter(r.character)),e.next=4,j({set:{name:t,project:r}});case 4:return i=e.sent,e.abrupt("return",!!i);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){return(O=(0,u.Z)((0,d.Z)().mark((function e(t,n){var r;return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j({rename:{name:t,newName:n}});case 2:return r=e.sent,e.abrupt("return",!!r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(){return(C=(0,u.Z)((0,d.Z)().mark((function e(t){var n;return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j({delete:{name:t}});case 2:return n=e.sent,e.abrupt("return",!!n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var R=n(47313),T=n(65832),y=n(48648),_=n(465),A=n(98410),P=n(93298),F=n(74308),K=n(18734),w=n(46474),b=n(2532),J=n(31136),L=n(95668),k=n(97890),D=n(46417);function S(){var e=(0,R.useMemo)((function(){return h.G.Database.getCharacterFactories().sort((function(e,t){var n=h.G.Describe.getTitle(e),r=h.G.Describe.getTitle(t);return n.localeCompare(r)}))}),[]),t=(0,k.s0)(),n=(0,w.R)(e,(function(e){return h.G.Describe.getTitle(e)+" "+h.G.Describe.getTitle("Element."+e.element)+" "+h.G.Describe.getTitle(e.weaponType)})),r=(0,c.h)(n.items,10);return(0,D.jsxs)(y.Z,{gap:1,children:[(0,D.jsx)(b.Z.Control,{type:"text",placeholder:(0,l.KF)("PROJ_NEW_PLACEHOLDER"),value:n.search,onChange:function(e){return n.setSearch(e.target.value)}}),(0,D.jsx)("div",{className:"d-flex justify-content-center",children:(0,D.jsx)(r.Pagination,{})}),(0,D.jsxs)(_.Z,{striped:!0,bordered:!0,hover:!0,responsive:!0,children:[(0,D.jsx)("thead",{children:(0,D.jsxs)("tr",{children:[(0,D.jsx)("th",{children:(0,l.KF)("CHARACTER")}),(0,D.jsx)("th",{children:(0,l.KF)("ELEMENT")}),(0,D.jsx)("th",{children:(0,l.KF)("WEAPON")}),(0,D.jsx)("th",{children:(0,l.KF)("ACTION_ACTIONS")})]})}),(0,D.jsx)("tbody",{children:r.items.map((function(e,n){return(0,D.jsxs)("tr",{children:[(0,D.jsx)("td",{className:"align-middle",style:{width:"40%"},children:h.G.Describe.getTitle(e)}),(0,D.jsxs)("td",{className:"align-middle",style:{width:"25%"},children:[(0,D.jsx)(K.Z,{element:e.element}),h.G.Describe.getTitle("Element."+e.element)]}),(0,D.jsx)("td",{className:"align-middle",style:{width:"25%"},children:h.G.Describe.getTitle(e.weaponType)}),(0,D.jsx)("td",{className:"align-middle text-center",children:(0,D.jsx)(J.Z,{trigger:["hover","focus"],overlay:(0,D.jsx)(L.Z,{id:"tooltip-top",children:(0,l.KF)("PROJ_NEWPROJECT")}),children:(0,D.jsx)(P.Z,{onClick:function(){return function(e){var n=new h.G.Character(e);(0,i.dn)(void 0,n),t("/editor")}(e)},children:(0,D.jsx)(F.Z,{})})})})]},n)}))})]})]})}function I(){var e=(0,R.useState)(!1),t=(0,r.Z)(e,2),n=t[0],i=t[1];return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)(A.Z,{size:"lg",show:n,onHide:function(){return i(!1)},children:[(0,D.jsx)(A.Z.Header,{closeButton:!0,children:(0,D.jsx)(A.Z.Title,{id:"contained-modal-title-vcenter",children:(0,l.KF)("PROJ_NEWPROJECT")})}),(0,D.jsx)(A.Z.Body,{children:(0,D.jsx)(S,{})})]}),(0,D.jsxs)(P.Z,{onClick:function(){i(!0)},children:[(0,D.jsx)(F.Z,{className:"me-1",style:{verticalAlign:"-0.125em"}}),(0,l.KF)("PROJ_NEWPROJECT")]})]})}var M=n(25566),H=n.n(M),G=n(81018),W=n(26934),B=n(12014),V=n(17829),z=n(70441),X=n(56122);function Q(e){var t=e.names,n=e.project,r=e.search,s=(0,a.P)().update,c=null!==r&&void 0!==r?r:"",o=n===(0,i.vo)(),d=(0,k.s0)();return(0,D.jsxs)("tr",{className:o?"bg-secondary":void 0,onClick:function(){(0,i.Ce)(n),s()},children:[(0,D.jsx)("td",{className:"w-50 align-middle",children:(0,D.jsx)(H(),{autoEscape:!0,searchWords:[c],textToHighlight:n.title})}),(0,D.jsx)("td",{className:"align-middle w-25",children:(0,D.jsx)(H(),{autoEscape:!0,searchWords:[c],textToHighlight:h.G.Describe.getTitle(n.character)})}),(0,D.jsx)("td",{className:"align-middle",children:n.character.Level}),(0,D.jsx)("td",{className:"align-middle",children:(0,D.jsx)("div",{className:"d-flex justify-content-center",children:(0,D.jsxs)(y.Z,{direction:"horizontal",gap:1,children:[(0,D.jsx)(J.Z,{trigger:["hover","focus"],overlay:(0,D.jsx)(L.Z,{children:(0,l.KF)("PROJ_GOTO_EDITOR")}),children:(0,D.jsx)(P.Z,{onClick:function(){d("/editor")},children:(0,D.jsx)(G.Z,{style:{verticalAlign:"-0.125em"}})})}),(0,D.jsx)(J.Z,{trigger:["hover","focus"],overlay:(0,D.jsx)(L.Z,{children:(0,l.KF)("PROJ_SAVE")}),children:(0,D.jsx)(P.Z,{variant:"warning",onClick:function(){(0,X.m)({title:(0,l.KF)("PROJ_SAVE"),label:(0,l.KF)("PROJ_SAVEPROJECT"),defaultValue:n.title,validate:function(e){var n=t.validateName(e);return"NAME_OK"===n||"NAME_EXISTING"===n||(0,l.KF)(n)}}).then((function(e){e&&("NAME_OK"===t.validateName(e)&&(n.title=e,E(e,n).then((function(){s()}))),"NAME_EXISTING"===t.validateName(e)&&(0,V.Q)({message:(0,D.jsx)(z.D,{children:(0,l.KF)("PROJ_CONFIRMREPLACE",{project:e})})}).then((function(t){t&&(n.title=e,E(e,n).then((function(){s()})))})))}))},children:(0,D.jsx)(W.Z,{style:{verticalAlign:"-0.125em"}})})}),(0,D.jsx)(J.Z,{trigger:["hover","focus"],overlay:(0,D.jsx)(L.Z,{children:(0,l.KF)("PROJ_CLOSE")}),children:(0,D.jsx)(P.Z,{variant:"danger",onClick:function(){(0,V.Q)({message:(0,D.jsx)(z.D,{children:(0,l.KF)("PROJ_CONFIRMCLOSE",{project:n.title})})}).then((function(e){e&&((0,i.Uw)(n),s())}))},children:(0,D.jsx)(B.Z,{style:{verticalAlign:"-0.125em"}})})})]})})})]})}function U(){var e=(0,i.mW)(),t=(0,i.vo)(),n=(0,c.h)(e,5),o=(0,a.P)().id,d=(0,R.useState)([]),u=(0,r.Z)(d,2),h=u[0],x=u[1];(0,R.useEffect)((function(){g().then((function(e){e&&x(e)}))}),[o]);var j=(0,R.useMemo)((function(){return new s.z0(h.map((function(e){return e.title})))}),[e,h]);return(0,R.useEffect)((function(){n.setPage(n.findItem(t))}),[]),(0,D.jsxs)(T.Z,{children:[(0,D.jsx)(T.Z.Header,{as:"h5",className:"m-0 bg-info",children:(0,l.KF)("PROJ_OPENPROJECTS")}),(0,D.jsx)(T.Z.Body,{children:(0,D.jsxs)(y.Z,{gap:2,children:[(0,D.jsx)(I,{}),e.length<=5?null:(0,D.jsx)("div",{className:"d-flex justify-content-center",children:(0,D.jsx)(n.Pagination,{})}),n.items.length?(0,D.jsxs)(_.Z,{striped:!0,bordered:!0,hover:!0,responsive:!0,children:[(0,D.jsx)("thead",{children:(0,D.jsxs)("tr",{children:[(0,D.jsx)("th",{children:(0,l.KF)("PROJ_TITLE")}),(0,D.jsx)("th",{children:(0,l.KF)("CHARACTER")}),(0,D.jsx)("th",{children:(0,l.KF)("STAT_LEVEL")}),(0,D.jsx)("th",{children:(0,l.KF)("ACTION_ACTIONS")})]})}),(0,D.jsx)("tbody",{children:n.items.map((function(e,t){return(0,D.jsx)(Q,{names:j,project:e},t)}))})]}):null]})})]})}var $=n(83496),q=n(55341),Y=n(42911),ee=n(59461),te=n(75936);function ne(e){var t=e.names,n=e.project,r=e.onChange,s=e.search,c=null!==s&&void 0!==s?s:"",a=(0,k.s0)(),o=(0,$.i)();return(0,D.jsxs)("tr",{children:[(0,D.jsx)("td",{className:"w-50 align-middle",children:(0,D.jsx)(H(),{autoEscape:!0,searchWords:[c],textToHighlight:n.title})}),(0,D.jsx)("td",{className:"align-middle w-25",children:(0,D.jsx)(H(),{autoEscape:!0,searchWords:[c],textToHighlight:h.G.Describe.getTitle(n.character)})}),(0,D.jsx)("td",{className:"align-middle",children:n.level}),(0,D.jsx)("td",{className:"align-middle",children:(0,D.jsx)("div",{className:"d-flex justify-content-center",children:(0,D.jsxs)(y.Z,{direction:"horizontal",gap:1,children:[(0,D.jsx)(J.Z,{trigger:["hover","focus"],overlay:(0,D.jsx)(L.Z,{children:(0,l.KF)("PROJ_OPEN")}),children:(0,D.jsx)(P.Z,{onClick:function(){(function(e){return Z.apply(this,arguments)})(n.title).then((function(e){e?((0,i.dn)(e.title,e.character),a("/editor")):(0,te.a)({message:(0,l.KF)("PROJ_PROJECT_NOT_FOUND")})}))},children:(0,D.jsx)(G.Z,{style:{verticalAlign:"-0.125em"}})})}),(0,D.jsx)(J.Z,{trigger:["hover","focus"],overlay:(0,D.jsx)(L.Z,{children:(0,l.KF)("ACTION_RENAME")}),children:(0,D.jsx)(P.Z,{onClick:function(){(0,X.m)({title:(0,l.KF)("PROJ_RENAME"),label:(0,l.KF)("PROJ_RENAME_LABEL"),defaultValue:n.title,validate:function(e){var n=t.validateName(e);return"NAME_OK"===n||(0,l.KF)(n)}}).then((function(e){e&&"NAME_OK"===t.validateName(e)&&function(e,t){return O.apply(this,arguments)}(n.title,e).then((function(e){e?r():(0,te.a)({message:(0,l.KF)("PROJ_RENAME_ERROR")})}))}))},children:(0,D.jsx)(Y.Z,{style:{verticalAlign:"-0.125em"}})})}),(0,D.jsx)(J.Z,{trigger:["hover","focus"],overlay:(0,D.jsx)(L.Z,{children:(0,l.KF)("ACTION_EXPORT")}),children:(0,D.jsx)(P.Z,{onClick:function(){o.addProjects([n.title]),a("/storage/export")},children:(0,D.jsx)(q.Z,{style:{verticalAlign:"-0.125em"}})})}),(0,D.jsx)(J.Z,{trigger:["hover","focus"],overlay:(0,D.jsx)(L.Z,{children:(0,l.KF)("ACTION_DELETE")}),children:(0,D.jsx)(P.Z,{variant:"danger",onClick:function(){(0,V.Q)({message:(0,D.jsx)(z.D,{children:(0,l.KF)("PROJ_CONFIRMDELETE",{project:n.title})})}).then((function(e){e&&function(e){return C.apply(this,arguments)}(n.title).then((function(e){e?r():(0,te.a)({message:(0,l.KF)("PROJ_DELETE_ERROR")})}))}))},children:(0,D.jsx)(ee.Z,{style:{verticalAlign:"-0.125em"}})})})]})})})]})}function re(){var e=(0,R.useState)(""),t=(0,r.Z)(e,2),n=t[0],i=t[1],o=(0,R.useState)([]),d=(0,r.Z)(o,2),u=d[0],h=d[1],x=(0,c.h)(u,10),j=(0,a.P)(),f=j.update,p=j.id,m=(0,R.useMemo)((function(){return new s.z0(u.map((function(e){return e.title})))}),[u]);(0,R.useEffect)((function(){g({name:n.match(/^\s*$/i)?void 0:n}).then((function(e){e&&h(e)}))}),[n,p]);var v=(0,$.i)(),Z=(0,k.s0)();return(0,D.jsxs)(T.Z,{children:[(0,D.jsx)(T.Z.Header,{as:"h5",className:"m-0 bg-info",children:(0,l.KF)("PROJ_SAVEDPROJECTS")}),(0,D.jsxs)(T.Z.Body,{children:[(0,D.jsxs)(y.Z,{direction:"horizontal",gap:1,children:[(0,D.jsx)(b.Z.Control,{type:"text",placeholder:(0,l.KF)("PROJ_SEARCH_PLACEHOLDER"),value:n,onChange:function(e){return i(e.target.value)}}),(0,D.jsx)(J.Z,{trigger:["hover","focus"],overlay:(0,D.jsx)(L.Z,{children:(0,l.KF)("ACTION_EXPORT_ALL")}),children:(0,D.jsx)(P.Z,{onClick:function(){v.addProjects(u.map((function(e){return e.title}))),Z("/storage/export")},children:(0,D.jsx)(q.Z,{})})})]}),(0,D.jsx)("div",{className:"d-flex justify-content-center m-2",children:x.items.length?(0,D.jsx)(x.Pagination,{}):(0,l.KF)("RESULT_NO_MATCH")}),(0,D.jsx)("div",{className:"overflow-auto",children:x.items.length?(0,D.jsxs)(_.Z,{responsive:!0,striped:!0,bordered:!0,hover:!0,children:[(0,D.jsx)("thead",{children:(0,D.jsxs)("tr",{children:[(0,D.jsx)("th",{children:(0,l.KF)("PROJ_TITLE")}),(0,D.jsx)("th",{children:(0,l.KF)("CHARACTER")}),(0,D.jsx)("th",{children:(0,l.KF)("STAT_LEVEL")}),(0,D.jsx)("th",{children:(0,l.KF)("ACTION_ACTIONS")})]})}),(0,D.jsx)("tbody",{children:x.items.map((function(e,t){return(0,D.jsx)(ne,{names:m,project:e,search:n,onChange:f},t)}))})]}):null})]})]})}var ie=n(22102),se="dashboard",ce=2;function ae(){return(0,D.jsx)(ie.Z,{children:(0,D.jsxs)(y.Z,{gap:1,children:[(0,D.jsx)(U,{}),(0,D.jsx)(re,{})]})})}}}]);