"use strict";(self.webpackChunkgenshin_gui=self.webpackChunkgenshin_gui||[]).push([[7917],{27917:function(e,n,r){r.r(n),r.d(n,{default:function(){return L},position:function(){return w},title:function(){return D}});var t,i=r(74165),a=r(15861),c=r(93324),s=r(67526),o=r(45043),u=r(79188);!function(e){e[e.REPLACE=0]="REPLACE",e[e.ADD=1]="ADD",e[e.ADD_UNIQUE=2]="ADD_UNIQUE",e[e.NONE=3]="NONE"}(t||(t={}));var l=r(4942),d=r(29447);function f(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"file",r=performance.now();return new Promise(function(){var t=(0,a.Z)((0,i.Z)().mark((function t(a,c){var s;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s=(0,d.HB)().addMessageListener((function(e){"storage-import"===e.type&&e.id===r&&(e.error?c(e.error):((0,d.HB)().removeMessageListener(s),a(e.result)))})),(0,d.HB)().postMessage({type:"storage-import",id:r,data:(0,l.Z)({},n,e)});case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())}function p(e){var n=performance.now();return new Promise(function(){var r=(0,a.Z)((0,i.Z)().mark((function r(t,a){var c;return(0,i.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:c=(0,d.HB)().addMessageListener((function(e){"storage-import"===e.type&&e.id===n&&(e.error?a(e.error):((0,d.HB)().removeMessageListener(c),t(e.result)))})),(0,d.HB)().postMessage({type:"storage-import",id:n,data:{confirm:e}});case 2:case"end":return r.stop()}}),r)})));return function(e,n){return r.apply(this,arguments)}}())}function h(e){var n=performance.now();return new Promise(function(){var r=(0,a.Z)((0,i.Z)().mark((function r(t,a){var c;return(0,i.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:c=(0,d.HB)().addMessageListener((function(e){"storage-import"===e.type&&e.id===n&&(e.error?a(e.error):((0,d.HB)().removeMessageListener(c),t(e.result)))})),(0,d.HB)().postMessage({type:"storage-import",id:n,data:{edit:e}});case 2:case"end":return r.stop()}}),r)})));return function(e,n){return r.apply(this,arguments)}}())}var x=r(47313),m=r(465),g=r(65832),j=r(48648),T=r(93298),Z=r(5955),_=r(46417);function I(e){var n=e.artifacts,r=(0,x.useReducer)((function(e){return(e+1)%7}),0),s=(0,c.Z)(r,2)[1],l=(0,x.useState)(t.ADD),d=(0,c.Z)(l,2),f=d[0],I=d[1],N=(0,x.useState)(!1),v=(0,c.Z)(N,2),A=v[0],C=v[1];function O(e,n){e.target.checked&&I(n)}function E(){return(E=(0,a.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p({artifacts:f});case 2:C(!0);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(0,x.useEffect)((function(){return C(!1)}),[n]);var R=(0,_.jsxs)(m.Z,{hover:!0,bordered:!0,striped:!0,responsive:!0,children:[(0,_.jsx)("thead",{children:(0,_.jsx)("tr",{children:(0,_.jsx)("th",{colSpan:3,className:"bg-primary text-center",children:(0,u.KF)("ACTION_PREVIEW")})})}),(0,_.jsx)("tbody",{children:(0,_.jsxs)("tr",{children:[(0,_.jsx)("td",{children:(0,u.KF)("VALUE_MAX")}),(0,_.jsx)("td",{children:o.G.Describe.getTitle(n.maxPercent.name)}),(0,_.jsx)("td",{children:(0,o.q)(n.maxPercent.name,n.maxPercent.value)})]})})]});function P(e){return y.apply(this,arguments)}function y(){return(y=(0,a.Z)((0,i.Z)().mark((function e(r){var t,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h({artifacts:{multiplyPercent:r}});case 2:if((t=e.sent).compare){e.next=5;break}return e.abrupt("return");case 5:a=t.compare.artifacts,n.maxPercent=a.maxPercent,n.total=a.total,n.unique=a.unique,s();case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,_.jsxs)(g.Z,{children:[(0,_.jsx)(g.Z.Header,{as:"h5",className:"bg-info",children:(0,u.KF)("ACTION_IMPORT_ARTIFACTS")}),(0,_.jsx)(g.Z.Body,{children:(0,_.jsxs)(j.Z,{gap:1,children:[(0,_.jsx)(T.Z,{onClick:function(){return E.apply(this,arguments)},disabled:A,children:(0,u.KF)("ACTION_IMPORT")}),(0,_.jsx)(Z.Z,{type:"checkbox",id:"ACTION_IMPORT_ARTIFACTS_ADD_ALL",checked:f===t.ADD,onChange:function(e){return O(e,t.ADD)},label:(0,u.KF)("ACTION_IMPORT_ARTIFACTS_ADD_ALL",{n:n.total})}),(0,_.jsx)(Z.Z,{type:"checkbox",id:"ACTION_IMPORT_ARTIFACTS_REPLACE_ALL",checked:f===t.REPLACE,onChange:function(e){return O(e,t.REPLACE)},label:(0,u.KF)("ACTION_IMPORT_ARTIFACTS_REPLACE_ALL",{n:n.total})}),(0,_.jsx)(Z.Z,{type:"checkbox",id:"ACTION_IMPORT_ARTIFACTS_UNIQUE",checked:f===t.ADD_UNIQUE,onChange:function(e){return O(e,t.ADD_UNIQUE)},label:(0,u.KF)("ACTION_IMPORT_ARTIFACTS_UNIQUE",{n:n.unique})}),(0,_.jsx)(Z.Z,{type:"checkbox",id:"ACTION_IMPORT_ARTIFACTS_NONE",checked:f===t.NONE,onChange:function(e){return O(e,t.NONE)},label:(0,u.KF)("ACTION_IMPORT_ARTIFACTS_NONE")}),(0,_.jsx)("h5",{className:"m-1 p-1 bg-primary",children:(0,u.KF)("IMPORT_FIX_PERCENT")}),(0,_.jsx)("p",{className:"m-0 p-1",children:(0,u.KF)("IMPORT_FIX_PERCENT_DESCRIPTION")}),(0,_.jsx)("div",{className:"d-flex justify-content-center",children:R}),(0,_.jsx)("div",{className:"d-flex justify-content-center",children:(0,_.jsxs)(j.Z,{direction:"horizontal",gap:1,children:[(0,_.jsx)(T.Z,{onClick:function(){return P(10)},children:(0,u.KF)("ACTION_MULTIPLY_BY",{x:10})}),(0,_.jsx)(T.Z,{onClick:function(){return P(.1)},children:(0,u.KF)("ACTION_DIVIDE_BY",{x:10})})]})})]})})]})}var N=r(94860),v=r(13736),A=r(31136),C=r(95668),O=r(2304),E=r(63849),R=r(31616),P=r(53411),y=r(12014);function F(e){var n=e.label,r=e.onChange,t=e.existing,i=e.items,a=e.onImport,c=e.map,s=e.onRemove,o=e.title,l=e.placeholder,d=new N.z0(t),f=i.map((function(e,n){return"NAME_OK"===d.validateName(c(e,n))?1:0})).reduce((function(e,n){return e+n}),0),p=(0,v.h)(i,10),h=p.items,x=p.Pagination,m=(0,_.jsx)("div",{className:"p-1 text-center",children:l});var Z=(0,_.jsxs)(j.Z,{gap:1,children:[(0,_.jsxs)(j.Z,{direction:"horizontal",gap:1,children:[(0,_.jsx)(x,{}),(0,_.jsxs)(T.Z,{disabled:0===f,className:"w-100",onClick:function(){a(i.filter((function(e,n){return"NAME_OK"===d.validateName(c(e,n))})))},children:[(0,u.KF)("ACTION_IMPORT")," (",f,")"]}),(0,_.jsx)(A.Z,{trigger:["hover","focus"],overlay:(0,_.jsx)(C.Z,{children:(0,u.KF)("ACTION_SELECTED_UNSELECT")}),children:(0,_.jsx)(T.Z,{variant:"danger",onClick:function(){i.forEach((function(e,n){return s(e,n)}))},children:(0,_.jsx)(y.Z,{style:{verticalAlign:"-0.125em"}})})})]}),(0,_.jsx)(O.Z,{children:h.map((function(e,t){return(0,_.jsx)(O.Z.Item,{children:(0,_.jsxs)(E.Z,{className:"gx-1 gy-0",children:[(0,_.jsx)(R.Z,{children:(0,_.jsx)(A.Z,{trigger:["hover","focus"],overlay:(0,_.jsx)(C.Z,{children:(0,u.KF)(d.validateName(c(e,i.indexOf(e))))}),children:(0,_.jsx)(P.Z,{type:"text",className:"w-100 "+("NAME_OK"===d.validateName(c(e,i.indexOf(e)))?void 0:"is-invalid"),onChange:function(n){return r(i.indexOf(e),n.target.value)},value:c(e,i.indexOf(e))})})}),(0,_.jsx)(R.Z,{xs:3,children:(0,_.jsxs)(j.Z,{direction:"horizontal",gap:1,className:"h-100 align-items-center",children:[(0,_.jsx)("div",{className:"m-1 text-nowrap me-auto",children:n(e,i.indexOf(e))}),(0,_.jsx)(A.Z,{trigger:["hover","focus"],overlay:(0,_.jsx)(C.Z,{children:(0,u.KF)("ACTION_UNSELECT")}),children:(0,_.jsx)(T.Z,{size:"sm",variant:"danger",onClick:function(){return s(e,t)},children:(0,_.jsx)(y.Z,{style:{verticalAlign:"-0.125em"}})})})]})})]})},t)}))})]});return(0,_.jsxs)(g.Z,{children:[(0,_.jsx)(g.Z.Header,{as:"h5",className:"bg-info",children:o}),(0,_.jsx)(g.Z.Body,{children:i.length?Z:m})]})}function M(e){var n=e.projects,r=(0,x.useReducer)((function(e){return(e+1)%7}),0),t=(0,c.Z)(r,2)[1];function s(){return(s=(0,a.Z)((0,i.Z)().mark((function e(r){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.imported=n.imported.filter((function(e){return!r.includes(e)})),e.next=3,p({projects:r});case 3:t();case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,_.jsx)(F,{existing:n.existing,items:n.imported,map:function(e){return e.title},label:function(e){return o.G.Describe.getTitle(e.character)+" (".concat(e.level,")")},title:(0,u.KF)("ACTION_IMPORT_PROJECTS"),placeholder:(0,u.KF)("IMPORT_CHECKING_EMPTY"),onImport:function(e){return s.apply(this,arguments)},onRemove:function(e){n.imported=n.imported.filter((function(n){return n!==e})),t()},onChange:function(e,r){n.imported[e].title=r,t()}})}function k(e){var n=e.rotations,r=(0,x.useReducer)((function(e){return(e+1)%7}),0),t=(0,c.Z)(r,2)[1];function s(){return(s=(0,a.Z)((0,i.Z)().mark((function e(r){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.imported=n.imported.filter((function(e){return!r.includes(e)})),e.next=3,p({rotations:r});case 3:t();case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,_.jsx)(F,{existing:n.existing,items:n.imported,map:function(e){return e.name},label:function(e){var n=e.characterName;return"string"===typeof n&&(n=[n]),n.map((function(e){return o.G.Describe.getTitle(e)})).join(", ")},title:(0,u.KF)("ACTION_IMPORT_ROTATIONS"),placeholder:(0,u.KF)("IMPORT_CHECKING_EMPTY"),onImport:function(e){return s.apply(this,arguments)},onRemove:function(e){n.imported=n.imported.filter((function(n){return n!==e})),t()},onChange:function(e,r){n.imported[e].name=r,t()}})}var b=r(75936),D="import",w=2;function L(){var e=(0,x.useState)(void 0),n=(0,c.Z)(e,2),r=n[0],t=n[1];function o(e){return l.apply(this,arguments)}function l(){return(l=(0,a.Z)((0,i.Z)().mark((function e(n){var r,a,c,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,s.x)(".json");case 2:if(r=e.sent){e.next=7;break}return e.next=6,(0,b.a)({message:(0,u.KF)("IMPORT_ERROR")});case 6:return e.abrupt("return");case 7:return e.next=9,f(r,n);case 9:if(a=e.sent,c=a.error,o=a.compare,!c){e.next=16;break}return e.next=15,(0,b.a)({message:c});case 15:return e.abrupt("return");case 16:t(o);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,_.jsxs)(j.Z,{gap:2,children:[(0,_.jsx)("div",{className:"d-flex justify-content-center",children:(0,_.jsxs)(j.Z,{direction:"horizontal",gap:1,children:[(0,_.jsx)(T.Z,{variant:"warning",className:"text-black",onClick:function(){return o("file")},children:(0,u.KF)("ACTION_LOAD_FROM_FILE")}),(0,_.jsx)(T.Z,{variant:"warning",className:"text-black",onClick:function(){return o("good")},children:(0,u.KF)("ACTION_LOAD_FROM_FILE_GOOD")})]})}),r?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(M,{projects:r.projects}),(0,_.jsx)(k,{rotations:r.rotations}),(0,_.jsx)(I,{artifacts:r.artifacts})]}):null]})}}}]);