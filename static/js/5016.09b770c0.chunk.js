"use strict";(self.webpackChunkgenshin_gui=self.webpackChunkgenshin_gui||[]).push([[5016],{10072:function(n,e,t){t.d(e,{w:function(){return l}});var r=t(1413),i=t(45987),a=t(45043),o=t(79188),s=t(2532),u=t(46417),c=["value","options","onChange","allowAny"];function l(n){var e=n.value,t=n.options,l=n.onChange,d=n.allowAny,h=(0,i.Z)(n,c);function f(n){l(t.find((function(e){return e===n})))}return(0,u.jsxs)(s.Z.Select,(0,r.Z)((0,r.Z)({},h),{},{value:e||-1,onChange:function(n){return f(n.target.value)},children:[d?(0,u.jsx)("option",{value:-1,children:(0,o.KF)("ANY")}):null,t.map((function(n){return(0,u.jsx)("option",{value:n,children:a.G.Describe.getTitle(n)},n)}))]}))}},60850:function(n,e,t){t.d(e,{Z:function(){return g}});var r=t(79188),i=t(48648),a=t(93298),o=t(74308),s=t(1413),u=t(10072),c=t(64919),l=t(45043),d=t(2532),h=t(12014),f=t(46417),v=l.G.Values.ListCharacterStat;function x(n){var e=n.filter,t=n.onChange,r=n.onDelete;function o(n){var r=n;t((0,s.Z)((0,s.Z)({},e),{},{operator:r}))}return(0,f.jsxs)(i.Z,{direction:"horizontal",gap:1,children:[(0,f.jsx)(u.w,{size:"sm",value:e.stat,options:v,onChange:function(n){n&&t((0,s.Z)((0,s.Z)({},e),{},{stat:n}))}}),(0,f.jsxs)(d.Z.Select,{size:"sm",style:{width:72},value:e.operator,onChange:function(n){return o(n.target.value)},children:[(0,f.jsx)("option",{value:"=",children:"="}),(0,f.jsx)("option",{value:">=",children:">="}),(0,f.jsx)("option",{value:"<=",children:"<="}),(0,f.jsx)("option",{value:">",children:">"}),(0,f.jsx)("option",{value:"<",children:"<"})]}),(0,f.jsx)(c.K,{size:"sm",value:e.value,onChange:function(n){void 0!==n&&t((0,s.Z)((0,s.Z)({},e),{},{value:n}))},percent:!l.G.Values.isFlatStat(e.stat),places:l.G.Values.isFlatStat(e.stat)?0:1}),(0,f.jsx)(a.Z,{onClick:r,variant:"danger",size:"sm",children:(0,f.jsx)(h.Z,{style:{verticalAlign:"-0.125em"}})})]})}function g(n){var e=n.filters,t=n.onChange,s=n.onAdd,u=n.onDelete;return(0,f.jsxs)(i.Z,{gap:1,children:[(0,f.jsxs)(a.Z,{onClick:s,children:[(0,f.jsx)(o.Z,{className:"me-1"}),(0,r.KF)("ACTION_ADD_FILTER")]}),null===e||void 0===e?void 0:e.map((function(n,e){return(0,f.jsx)(x,{filter:n,onDelete:function(){return u(e)},onChange:function(n){return t(e,n)}},e)}))]})}},64236:function(n,e,t){t.d(e,{X:function(){return o}});var r=t(92882),i=t(60850),a=t(46417);function o(){var n=(0,r.L)();return(0,a.jsx)(i.Z,{filters:n.getFilters(),onAdd:function(){return n.addFilter({stat:"ATKpercent",operator:">=",value:0})},onDelete:function(e){return n.removeFilter(e)},onChange:function(e,t){return n.setFilter(e,t)}})}},84825:function(n,e,t){t.d(e,{N:function(){return T}});var r=t(45043),i=t(75285),a=t(79188),o=t(65832),s=t(48648),u=t(465),c=t(45987),l=t(64919),d=t(2532),h=t(46417),f=["ranges","stat","values"];function v(n){var e,t,i=n.ranges,a=n.stat,o=n.values,s=(0,c.Z)(n,f);if(!i||!o)return null;var u=r.G.getObjectKeys(i);return(0,h.jsxs)("tr",{children:[(0,h.jsx)("td",{className:"align-middle text-nowrap",children:(0,h.jsx)(d.Z.Check,{type:"checkbox",checked:u.includes(a),onChange:function(n){return s.onCheck(n.target.checked)}})}),(0,h.jsx)("td",{className:"align-middle text-nowrap",children:r.G.Describe.getTitle(a)}),(0,h.jsx)("td",{className:"align-middle text-nowrap",children:(0,r.q)(a,o[a])}),(0,h.jsx)("td",{className:"align-middle",children:(0,h.jsx)(l.K,{size:"sm",value:null===(e=i[a])||void 0===e?void 0:e.min,places:0,onChange:function(n,e){return s.onChangeMin(n,e)}})}),(0,h.jsx)("td",{className:"align-middle",children:(0,h.jsx)(l.K,{size:"sm",value:null===(t=i[a])||void 0===t?void 0:t.max,places:0,onChange:function(n,e){return s.onChangeMax(n,e)}})})]})}var x=t(36687),g=t(93298),p=t(41251),j=t(45624);function Z(){var n,e=[1,2,3,4,"AVERAGE"],t=(0,i.g)();var r=e[null!==(n=t.getTier())&&void 0!==n?n:0];return(0,h.jsxs)(x.Z,{children:[(0,h.jsx)(g.Z,{disabled:!0,children:(0,a.KF)("OPTIMIZER_SUBSTATS_TIER")}),(0,h.jsx)(p.Z,{onSelect:function(n){if(n)if("AVERAGE"===n)t.setTier(4);else{var e=parseInt(n)-1;t.setTier(e)}},as:x.Z,title:"number"===typeof r?r.toString():(0,a.KF)(r),children:e.map((function(n){return(0,h.jsx)(j.Z.Item,{eventKey:n+"",children:"number"===typeof n?n:(0,a.KF)("AVERAGE")},n)}))})]})}var m=t(98698);function C(){var n=(0,i.g)(),e=n.getTotal();return(0,h.jsx)(m.Z,{children:(0,h.jsx)(l.K,{onChange:function(e,t){var r=!1;e<0&&(e=0,r=!0),e>45&&(e=45,r=!0),e=Math.round(e),n.setTotal(e),r&&t()},style:{width:64},value:e,children:(0,h.jsx)(g.Z,{disabled:!0,children:(0,a.KF)("STAT_TOTAL")})})})}function T(){var n=(0,i.g)();function e(e,t){t?function(e){n.addStat(e)}(e):function(e){n.removeStat(e)}(e)}function t(e,t,r,i){var a=!1;t<0&&(t=0,a=!0),t>30&&(t=30,a=!0),t=Math.round(t),"min"===r?n.setStatMin(e,t):n.setStatMax(e,t),a&&(null===i||void 0===i||i())}return(0,h.jsxs)(o.Z,{children:[(0,h.jsx)(o.Z.Header,{as:"h5",className:"bg-info",children:(0,a.KF)("OPTIMIZER_SUBSTATS_SET_SUBS")}),(0,h.jsx)(o.Z.Body,{children:(0,h.jsxs)(s.Z,{gap:1,children:[(0,h.jsxs)(s.Z,{direction:"horizontal",children:[(0,h.jsx)("div",{className:"me-auto",children:(0,h.jsx)(Z,{})}),(0,h.jsx)("div",{children:(0,h.jsx)(C,{})})]}),(0,h.jsxs)(u.Z,{striped:!0,bordered:!0,hover:!0,responsive:!0,children:[(0,h.jsx)("thead",{children:(0,h.jsxs)("tr",{children:[(0,h.jsx)("th",{}),(0,h.jsx)("th",{children:(0,a.KF)("STAT_SHORT")}),(0,h.jsx)("th",{children:(0,a.KF)("STAT_VALUE")}),(0,h.jsx)("th",{children:(0,a.KF)("SHORT_MIN")}),(0,h.jsx)("th",{children:(0,a.KF)("SHORT_MAX")})]})}),(0,h.jsx)("tbody",{children:S.map((function(r,i){return(0,h.jsx)(v,{stat:r,ranges:n.getRange(),values:n.getValues(),onCheck:function(n){return e(r,n)},onChangeMin:function(n,e){return t(r,n,"min",e)},onChangeMax:function(n,e){return t(r,n,"max",e)}},i)}))})]})]})})]})}var S=r.G.ArtifactType.ListSubstats},64919:function(n,e,t){t.d(e,{K:function(){return d}});var r=t(1413),i=t(93324),a=t(45987),o=t(47313),s=t(98698),u=t(2532),c=t(46417),l=["places","percent","value","onChange","children"],d=function(n){var e=n.places,t=void 0===e?1:e,d=n.percent,f=n.value,v=void 0===f?0:f,x=n.onChange,g=n.children,p=(0,a.Z)(n,l);function j(){var n=v;return d&&(n*=100),function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,t=n.toFixed(e).replace(/\.0+$/,"").split(".");if(1===t.length)return t[0];var r=t[1].replace(/0+$/,"");return t[0]+(r.length>0?"."+r:"")}(n,t)}var Z=(0,o.useState)(j()),m=(0,i.Z)(Z,2),C=m[0],T=m[1],S=(0,o.useState)(!1),F=(0,i.Z)(S,2),A=F[0],M=F[1];return(0,o.useEffect)((function(){var n=h(C,t);n=d?n/100:n,Math.abs(n-v)<1e-5||T(j())}),[v,d,t]),(0,c.jsxs)(s.Z,{size:p.size,children:[null!==g&&void 0!==g?g:null,(0,c.jsx)(u.Z.Control,(0,r.Z)((0,r.Z)({},p),{},{value:C,onChange:function(n){var e=n.target.value;T(function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,t=n.split(".");if(1===t.length)return n;var r=t[0],i=t[1];return r&&0!==i.length?"".concat(r,".").concat(i.substring(0,e)):n}(e));var r=h(e,t);Number.isFinite(r)?(!function(n){var e=d?n/100:n;null===x||void 0===x||x(e,(function(){return T(j())}))}(r),A&&M(!1)):A||M(!0)}})),d?(0,c.jsx)(s.Z.Text,{children:"%"}):null]})};function h(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(""===n)return 0;if("0."===n)return 0;if("0"===n)return 0;if(".0"===n)return 0;if("."===n)return 0;if(n=n.replace(/,/g,".").replace(/\.+/g,".").replace(/^\./,"0.").replace(/\.$/,""),!/^[+-]?[0-9]*\.?[0-9]*$/.test(n))return NaN;var t=parseFloat(n);return t=Math.floor(t*Math.pow(10,e))/Math.pow(10,e)}},85016:function(n,e,t){t.r(e),t.d(e,{default:function(){return F},position:function(){return S},title:function(){return T}});var r=t(74165),i=t(1413),a=t(15861),o=t(96103),s=t(64236),u=t(84825),c=t(1836),l=t(92882),d=t(75285),h=t(46323),f=t(79188),v=t(45043),x=t(29447);function g(n,e){var t=performance.now();return n.character instanceof v.G.Character&&(n.character=v.G.CharacterLoader.exportCharacter(n.character)),n.rotation instanceof v.G.Rotation&&(n.rotation=v.G.RotationLoader.exportRotation(n.rotation)),(0,x.HB)().postMessage({id:t,type:"optimizer-substats",data:n}),new Promise((function(n){var r=(0,x.HB)().addMessageListener((function(i){i.id===t&&(!1===i.complete?e(i.result):(n(i.result),(0,x.HB)().removeMessageListener(r)))}))}))}var p=t(47017),j=t(48648),Z=t(93298),m=t(97890),C=t(46417),T="OPTIMIZER_MAINSTAT",S=4;function F(){var n=(0,c.r)(),e=(0,h.a)(),t=(0,m.s0)(),v=(0,d.g)(),x=(0,l.L)();function T(){return(T=(0,a.Z)((0,r.Z)().mark((function a(){var s,u,c,l,d,h,f;return(0,r.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return s=(0,o.vo)(),u=s.character,c=s.rotationId,n.show(),r.next=4,(0,p.q$)({id:c});case 4:return l=r.sent[0],r.next=7,g((0,i.Z)((0,i.Z)({character:u,rotation:l},v.getConfig()),{},{filters:x.getFilters()}),(function(e){n.setCurrent(e[0]),n.setTotal(e[1])}));case 7:d=r.sent,h=d.map((function(n){return n[0]})),f=d.map((function(n){return n[1]})),e.setRows(f),e.setStates(h),n.hide(),t("/editor/optimizer/results");case 14:case"end":return r.stop()}}),a)})))).apply(this,arguments)}return(0,C.jsxs)(j.Z,{gap:1,children:[(0,C.jsx)(Z.Z,{variant:"warning",className:"text-black",onClick:function(){return T.apply(this,arguments)},children:(0,f.KF)("OPTIMIZER_OPTIMIZE")}),(0,C.jsx)(u.N,{}),(0,C.jsx)(s.X,{})]})}},92882:function(n,e,t){t.d(e,{L:function(){return a}});var r=t(10340),i=t(78049);function a(){var n=(0,r.T)(),e=(0,r.C)((function(n){return n.filter}));return{getFilters:function(){return null!==e&&void 0!==e?e:[]},addFilter:function(e){n(i.z.actions.addFilter(e))},removeFilter:function(e){n(i.z.actions.removeFilter(e))},setFilter:function(e,t){n(i.z.actions.setFilter([e,t]))}}}}}]);