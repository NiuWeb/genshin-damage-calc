"use strict";(self.webpackChunkgenshin_gui=self.webpackChunkgenshin_gui||[]).push([[630,4860,6103,7017,3736,720,6474,8734,4919,7829,5278,5878,6122],{96103:function(e,n,t){t.d(n,{Ce:function(){return d},Uw:function(){return p},dn:function(){return h},mW:function(){return u},tl:function(){return f},vo:function(){return l}});var r=t(45043),a=t(79188),i=t(94860),c=[],o=new i.z0,s=c[0];function u(){return c.map((function(e){return e}))}var l=function(){return s},f=function(){return l().character};function d(e){if(!c.includes(e))throw new Error("Trying to set a project that is not loaded in the central.");s=e}function h(e,n){var t,i;if(e=e?o.insertName(e):o.insertName((0,a.KF)("PROJ_Untitled")),n){var s=(i=n instanceof r.G.Character?n:r.G.CharacterLoader.importCharacter(n)).getRotationFactories();if(null===s||void 0===s||!s.length)throw new Error("THERE ARE NO ROTATIONS LOADED FOR THE CHARACTER ".concat(n.name));t=s[0].id}else t=(i=new r.G.Character(r.G.Database.getCharacterFactories()[0])).getRotationFactories()[0].id;var u={title:e,character:i,rotationId:t};return c.splice(0,0,u),d(u),u}function p(e){if(!e)return!1;var n=c.indexOf(e);return!(n<0)&&(c.splice(n,1),o.removeName(e.title),0===c.length?h():d(0===n?c[0]:c[n-1]),!0)}h(void 0,r.G.Character.create("Albedo"))},99719:function(e,n,t){var r;function a(){return r}function i(e){r=e}t.d(n,{$:function(){return i},o:function(){return a}})},30448:function(e,n,t){t.d(n,{c:function(){return u},j:function(){return s}});var r=t(74165),a=t(15861),i=t(93433),c=t(15671),o=t(43144),s=function(){function e(n,t){(0,c.Z)(this,e),this.delay=n,this.callback=t,this.counter=0,this.completed=!0,this.lastParam=void 0,this.onReturn=function(){}}return(0,o.Z)(e,[{key:"internalCall",value:function(e){for(var n=this,t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];this.completed&&(this.completed=!1,setTimeout((function(){n.onReturn(n.callback.apply(n,r)),n.completed=!0,n.counter!==e&&n.lastParam&&n.internalCall.apply(n,[n.counter].concat((0,i.Z)(n.lastParam)))}),this.delay))}},{key:"call",value:function(){this.counter++;for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];this.lastParam=n,this.internalCall.apply(this,[this.counter].concat(n))}}]),e}();function u(e){return l.apply(this,arguments)}function l(){return(l=(0,a.Z)((0,r.Z)().mark((function e(n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){return setTimeout(e,n)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},94860:function(e,n,t){t.d(n,{z0:function(){return c}});var r,a=t(15671),i=t(43144),c=function(){function e(n){(0,a.Z)(this,e),this.names=void 0,n||(n=[]),this.names=n.map((function(n){return e.cleanName(n)}))}return(0,i.Z)(e,[{key:"clear",value:function(){this.names.length=0}},{key:"removeName",value:function(e){this.names.splice(this.names.indexOf(e),1)}},{key:"insertName",value:function(n){n=e.cleanName(n);for(var t=0,r=function(){return n+(0===t?"":" ("+t+")")};this.names.includes(r());)t++;return this.names.push(r()),r()}},{key:"validateName",value:function(n){return(n=n.replace(/^\s*([^\s]?.*[^\s])\s*$/i,"$1")).match(/^\s*$/i)?"NAME_EMPTY":n.length>o?"NAME_LARGE":this.names.includes(n)?"NAME_EXISTING":e.cleanName(n)!==n?"NAME_INVALID":"NAME_OK"}}],[{key:"cleanName",value:function(e){return e=(e=(e=(e=e.replace(/^\s*([^\s]?.*[^\s])\s*$/i,"$1")).replace(/(\n|\r|\t)+/g,"")).replace(/([^a-z0-9.,\xe1\xe9\xed\xf3\xfa\xc1\xc9\xcd\xd3\xda\xf1\xd1:_ \-+?!\xbf\xa1#$%&/()])/gi,"")).slice(0,o+1)}}]),e}();!function(e){e[e.NAME_EMPTY=0]="NAME_EMPTY",e[e.NAME_EXISTING=1]="NAME_EXISTING",e[e.NAME_LARGE=2]="NAME_LARGE",e[e.NAME_INVALID=3]="NAME_INVALID",e[e.NAME_OK=4]="NAME_OK"}(r||(r={}));var o=80},60720:function(e,n,t){function r(e,n,t){"string"===typeof e&&(e=[e]);var r=t?function(e,n){return e===n}:function(e,n){return e.toLowerCase().includes(n.toLowerCase())},a=e;return n.map((function(e,n){return a.some((function(n){return"string"===typeof e?r(e,n):e.some((function(e){return r(e,n)}))}))?n:-1})).filter((function(e){return-1!==e}))}t.d(n,{D:function(){return r}})},66305:function(e,n,t){t.d(n,{y:function(){return h}});var r=t(93433),a=t(45043),i=t(79188),c=t(48648),o=t(36687),s=t(93298),u=t(41251),l=t(45624),f=t(18734),d=t(46417);function h(e){var n=e.aura,t=e.onChange,h=n?"string"===typeof n?[n]:n:[],p=(0,d.jsx)("div",{className:"d-inline-flex align-items-center",children:h.length?(0,d.jsx)(c.Z,{direction:"horizontal",gap:1,children:h.map((function(e){return(0,d.jsx)(f.Z,{width:16,height:16,element:e},e)}))}):a.G.Describe.getTitle("NONE")});function v(e){if(e){var n=e;if(h.includes(n))t(h.filter((function(e){return e!==n})));else{var a=[n].concat((0,r.Z)(h)).filter((function(e,n,t){return t.indexOf(e)===n})).slice(0,2);t(a)}}else t(void 0)}return(0,d.jsxs)(o.Z,{children:[(0,d.jsx)(s.Z,{disabled:!0,className:"text-nowrap",children:(0,i.KF)("EFFECT_AURA")}),(0,d.jsxs)(u.Z,{onSelect:v,as:o.Z,autoClose:"outside",title:p,children:[(0,d.jsx)(l.Z.Item,{eventKey:void 0,children:a.G.Describe.getTitle("NONE")}),a.G.Values.ListElementalAura.map((function(e){return(0,d.jsx)(l.Z.ItemText,{className:[h.includes(e)?"bg-primary":"","hover-cursor-pointer"].join(" "),onClick:function(){return v(e)},children:(0,d.jsxs)("div",{className:"d-flex align-items-center",children:[(0,d.jsx)(f.Z,{element:e}),a.G.Describe.getTitle("Aura."+e)]})},e)}))]})]})}},53933:function(e,n,t){t.d(n,{M:function(){return o}});var r=t(41251),a=t(36687),i=t(45624),c=t(46417);function o(e){var n=e.entity,t=e.onChange,o=e.max,u=void 0===o?5:o;if(1===u)return null;var l=Array.from(Array(u).keys()).map((function(e){return e+1}));return(0,c.jsx)(r.Z,{as:a.Z,onSelect:function(e){if(e){var r=parseInt(e);l.includes(r)&&(n.rank=r,t())}},title:s(n.rank),children:l.map((function(e,t){return(0,c.jsx)(i.Z.Item,{eventKey:e,active:n.rank===e,children:s(e)},t)}))})}function s(e){return"R".concat(e)}},85278:function(e,n,t){t.d(n,{h:function(){return G}});var r=t(1413),a=t(45987),i=t(45043),c=t(65832),o=t(48648),s=t(2532),u=t(31136),l=t(95668),f=t(36687),d=t(70441),h=t(53933),p=t(75936),v=t(79188),m=t(93298),x=t(32773),g=t(93324),Z=t(64919),j=t(47313),y=t(19112),N=t(29400),T=t(18734),E=t(46417);function C(e){var n,t=e.effect,r=e.factory,a=!(t instanceof i.G.Effect)||t.inputsRequested,c=(0,j.useReducer)((function(e){return(e+1)%7}),0),o=(0,g.Z)(c,2)[1];var u=null!==(n=r.inputs)&&void 0!==n?n:[];function l(e){var n,r=t.inputs.find((function(n){return n.name===e.name}));return r?r.value:null!==(n=e.default)&&void 0!==n?n:0}function f(e,n){i.G.Effect.setInput(t,e.name,n),o()}return(0,E.jsxs)("div",{children:[r.auraRequired?(0,E.jsx)("div",{className:"d-flex justify-content-center",children:(0,E.jsxs)(y.Z,{onChange:function(e){t.aura=e,o()},type:"checkbox",value:t.aura,children:[(0,E.jsx)(m.Z,{disabled:!0,children:(0,v.KF)("EFFECT_AURA")}),i.G.Values.ListElementalAura.map((function(e){return(0,E.jsxs)(N.Z,{id:"effect-aura-".concat(t.name,"-").concat(e),variant:t.aura.includes(e)?"success":void 0,value:e,children:[(0,E.jsx)(T.Z,{element:e}),i.G.Describe.getTitle("Aura."+e)]},e)}))]})}):null,a?u.map((function(e,n){return(0,E.jsx)("div",{className:"m-1",children:"BOOLEAN"!==e.type?(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(s.Z.Label,{htmlFor:"".concat(t.name,"-input-").concat(e.name),children:i.G.Describe.getTitle(e.name)}),(0,E.jsx)(Z.K,{percent:"PERCENT"===e.type,id:"".concat(t.name,"-input-").concat(e.name),value:l(e),onChange:function(n){return f(e,n)}})]}):(0,E.jsx)(s.Z.Check,{id:"".concat(t.name,"-input-").concat(e.name),label:i.G.Describe.getTitle(e.name),checked:0!==l(e),onChange:function(n){return f(e,n.target.checked?1:0)}})},n)})):null]})}function A(e){var n=e.effect,t=e.factory,r=e.onChange;if(!t.inputs&&!t.inputsRequested&&!t.auraRequired)return null;if(!t.auraRequired&&n instanceof i.G.Effect&&!n.inputsRequested)return null;return(0,E.jsxs)(m.Z,{variant:"primary",onClick:function(){(0,p.a)({title:(0,v.KF)("EFFECT_INPUTS"),message:(0,E.jsx)(C,{effect:n,factory:t})}).then((function(){r()}))},children:[(0,E.jsx)(x.Z,{className:"me-1",style:{verticalAlign:"-0.125em"}}),(0,v.KF)("STAT_LIST")]})}var b=t(80035),O=t(41251),I=t(45624);function w(e){var n,t=e.effect,r=e.factory,a=e.onChange;return(0,E.jsxs)(f.Z,{children:[(null!==(n=r.maxstacks)&&void 0!==n?n:0)<=5?(0,E.jsx)(_,{effect:t,factory:r,onChange:a}):(0,E.jsx)(D,{effect:t,factory:r,onChange:a}),(0,E.jsx)(M,{effect:t,factory:r,onChange:a})]})}function D(e){var n,t=e.effect,r=e.factory,a=e.onChange,i=null!==(n=r.maxstacks)&&void 0!==n?n:0;if(0===i)return null;var c=Array.from(Array(i+1).keys()).map((function(e){return e}));function o(e){var n=parseInt(e);c.includes(n)&&(t.stacks=n,a())}var l=(0,E.jsxs)(b.Z,{children:[(0,E.jsx)(b.Z.Header,{children:(0,v.KF)("STACKS")}),(0,E.jsx)(b.Z.Body,{children:(0,E.jsx)(s.Z.Control,{type:"number",size:"sm",style:{width:72},value:t.stacks,onChange:function(e){return o(e.target.value)}})})]});return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(m.Z,{disabled:!0,children:(0,v.KF)("STACKS")}),(0,E.jsx)(u.Z,{rootClose:!0,trigger:"click",overlay:l,children:(0,E.jsx)(m.Z,{children:t.stacks})})]})}function _(e){var n,t=e.effect,r=e.factory,a=e.onChange,i=null!==(n=r.maxstacks)&&void 0!==n?n:0;if(0===i)return null;var c=Array.from(Array(i+1).keys()).map((function(e){return e}));return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(m.Z,{disabled:!0,children:(0,v.KF)("STACKS")}),(0,E.jsx)(O.Z,{onSelect:function(e){if(e){var n=parseInt(e);c.includes(n)&&(t.stacks=n,a())}},as:f.Z,title:t.stacks,children:c.map((function(e,n){return(0,E.jsx)(I.Z.Item,{eventKey:e,active:t.stacks===e,children:e},n)}))})]})}function M(e){var n,t=e.effect,r=e.factory,a=e.onChange,c=null!==(n=r.conditions)&&void 0!==n?n:[];if(0===c.length)return null;var o=t.condition?i.G.Describe.getTitle(t.condition):"";return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(m.Z,{disabled:!0,children:(0,v.KF)("EFFECT_CONDITION")}),(0,E.jsx)(O.Z,{onSelect:function(e){if(e){var n=c.find((function(n){return n===e}));n&&(t.condition=n,a())}},title:o,as:f.Z,children:c.map((function(e,n){return(0,E.jsx)(I.Z.Item,{eventKey:e,active:t.condition===e,children:i.G.Describe.getTitle(e)},n)}))})]})}var k=t(25566),F=t.n(k),R=["onChange"];function G(e){var n,t,p,v=e.onChange,m=(0,a.Z)(e,R),x=i.G.Describe.getTitle(m.effect.name),g=i.G.Describe.getDescription(m.effect.name,{rank:m.effect.rank-1});g=g.replace(/\n/g,"\n\n"),m.removeParenthesis&&(x=x.replace(/\(.*\)/,"")),m.replaceTitle&&(x=m.replaceTitle(x));var Z=(null!==(n=m.highlight)&&void 0!==n?n:"").replace(/[^a-z0-9 #]/gi,"").replace(/\s+/gi," ").toLowerCase(),j=(0,r.Z)({},m);return delete j.highlight,delete j.effect,delete j.factory,delete j.hideRank,delete j.hideToggle,delete j.removeParenthesis,delete j.replaceTitle,delete j.hideDescription,(0,E.jsxs)(c.Z,(0,r.Z)((0,r.Z)({},j),{},{children:[(0,E.jsx)(c.Z.Header,{as:"h5",children:(0,E.jsxs)(o.Z,{direction:"horizontal",children:[m.hideToggle?null:(0,E.jsx)(s.Z.Check,{checked:m.effect.enabled,onChange:function(e){return v(e.target.checked)},id:"effect-".concat(m.effect.name),type:"switch"}),(0,E.jsx)("div",{className:"me-auto",children:(0,E.jsx)(u.Z,{rootClose:!0,trigger:["click"],placement:"right",overlay:(0,E.jsx)(l.Z,{children:m.effect.name}),children:(0,E.jsx)("h5",{className:"m-0 d-inline",children:(0,E.jsx)(F(),{autoEscape:!0,searchWords:[Z],textToHighlight:x})})})}),(0,E.jsxs)(f.Z,{children:[(0,E.jsx)(A,{effect:m.effect,factory:m.factory,onChange:function(){return v(m.effect.enabled)}}),m.hideRank?null:(0,E.jsx)(h.M,{max:null!==(t=null===(p=m.factory)||void 0===p?void 0:p.maxrank)&&void 0!==t?t:1,entity:m.effect,onChange:v})]})]})}),(0,E.jsxs)(c.Z.Body,{style:{textAlign:"justify"},children:[(0,E.jsx)("div",{className:"mb-2 d-flex justify-content-center",children:(0,E.jsx)(w,{effect:m.effect,factory:m.factory,onChange:v})}),m.hideDescription?null:(0,E.jsx)(d.D,{components:{p:function(e){return(0,E.jsx)("p",{className:"m-0",children:e.children})},strong:function(e){return(0,E.jsx)("strong",{className:"text-info",children:e.children})},ul:function(e){return(0,E.jsx)("ul",{className:"m-0",children:e.children})},li:function(e){return(0,E.jsx)("li",{className:"m-0",children:e.children})},ol:function(e){return(0,E.jsx)("ol",{className:"m-0",children:e.children})}},children:g})]})]}))}},18734:function(e,n,t){t.d(n,{Z:function(){return p}});var r=t(1413),a=t(45987);t(47313);var i=t.p+"static/media/pyro.babb0a5d6f255ce987686e321062adf8.svg";var c=t.p+"static/media/hydro.dbcf75ab6927f7b73d17f4fb71f621ac.svg";var o=t.p+"static/media/cryo.3bdb562015df89a20e96599718419039.svg";var s=t.p+"static/media/electro.178efeba7aa67dca8d20a69fdcaebfaa.svg";var u=t.p+"static/media/geo.61c55e600f72d666196bdb5307a35bf2.svg";var l=t.p+"static/media/anemo.8fbd12d60899bee429fa3c3fbd9e131b.svg";var f=t.p+"static/media/dendro.97c848cc4e28377348d86edf1d79fb2d.svg",d=t(46417),h=["element","width","height"];function p(e){var n=e.element,t=e.width,p=void 0===t?24:t,v=(e.height,(0,a.Z)(e,h)),m=function(e,n){return(0,d.jsx)("img",(0,r.Z)((0,r.Z)({width:p},v),{},{src:e,alt:n}))};switch(n){case"AnemoDMG":return m(l,"anemo");case"GeoDMG":return m(u,"geo");case"ElectroDMG":return m(s,"electro");case"CryoDMG":case"Frozen":return m(o,"cryo");case"HydroDMG":return m(c,"hydro");case"PyroDMG":return m(i,"pyro");case"DendroDMG":case"Quicken":return m(f,"dendro");default:return null}}},97273:function(e,n,t){t.d(n,{C:function(){return p}});var r=t(74165),a=t(15861),i=t(1413),c=t(15671),o=t(43144),s=t(60136),u=t(27277),l=t(47313),f=t(2304),d=t(80035),h=t(46417),p=function(e){(0,s.Z)(t,e);var n=(0,u.Z)(t);function t(){return(0,c.Z)(this,t),n.apply(this,arguments)}return(0,o.Z)(t,[{key:"render",value:function(){var e=this,n=(0,i.Z)({},this.props);delete n.item,delete n.actions,delete n.onActionFinish,delete n.popover;var t=!1!==this.props.popover,c=(0,h.jsx)(f.Z,{children:this.props.actions.map((function(n,t){return(0,h.jsx)(f.Z.Item,{action:!0,onClick:(0,a.Z)((0,r.Z)().mark((function a(){var i,c,o;return(0,r.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.action(e.props.item);case 2:o=r.sent,null===(i=(c=e.props).onActionFinish)||void 0===i||i.call(c,t,o);case 4:case"end":return r.stop()}}),a)}))),children:n.title},t)}))});return t?(0,h.jsx)(d.Z,(0,i.Z)((0,i.Z)({},n),{},{children:(0,h.jsx)(d.Z.Body,{children:c})})):c}}]),t}(l.Component)},64919:function(e,n,t){t.d(n,{K:function(){return f}});var r=t(1413),a=t(93324),i=t(45987),c=t(47313),o=t(98698),s=t(2532),u=t(46417),l=["places","percent","value","onChange","children"],f=function(e){var n=e.places,t=void 0===n?1:n,f=e.percent,h=e.value,p=void 0===h?0:h,v=e.onChange,m=e.children,x=(0,i.Z)(e,l);function g(){var e=p;return f&&(e*=100),function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,t=e.toFixed(n).replace(/\.0+$/,"").split(".");if(1===t.length)return t[0];var r=t[1].replace(/0+$/,"");return t[0]+(r.length>0?"."+r:"")}(e,t)}var Z=(0,c.useState)(g()),j=(0,a.Z)(Z,2),y=j[0],N=j[1],T=(0,c.useState)(!1),E=(0,a.Z)(T,2),C=E[0],A=E[1];return(0,c.useEffect)((function(){var e=d(y,t);e=f?e/100:e,Math.abs(e-p)<1e-5||N(g())}),[p,f,t]),(0,u.jsxs)(o.Z,{size:x.size,children:[null!==m&&void 0!==m?m:null,(0,u.jsx)(s.Z.Control,(0,r.Z)((0,r.Z)({},x),{},{value:y,onChange:function(e){var n=e.target.value;N(function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,t=e.split(".");if(1===t.length)return e;var r=t[0],a=t[1];return r&&0!==a.length?"".concat(r,".").concat(a.substring(0,n)):e}(n));var r=d(n,t);Number.isFinite(r)?(!function(e){var n=f?e/100:e;null===v||void 0===v||v(n,(function(){return N(g())}))}(r),C&&A(!1)):C||A(!0)}})),f?(0,u.jsx)(o.Z.Text,{children:"%"}):null]})};function d(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(""===e)return 0;if("0."===e)return 0;if("0"===e)return 0;if(".0"===e)return 0;if("."===e)return 0;if(e=e.replace(/,/g,".").replace(/\.+/g,".").replace(/^\./,"0.").replace(/\.$/,""),!/^[+-]?[0-9]*\.?[0-9]*$/.test(e))return NaN;var t=parseFloat(e);return t=Math.floor(t*Math.pow(10,n))/Math.pow(10,n)}},88893:function(e,n,t){t.d(n,{X:function(){return s}});var r=t(1413),a=t(45987),i=t(29162),c=t(46417),o=["options"];function s(e){var n=e.options,t=(0,a.Z)(e,o);return(0,c.jsx)(i.pY,(0,r.Z)((0,r.Z)({},t),{},{options:n||[],multiple:!0}))}},95878:function(e,n,t){t.d(n,{L:function(){return c}});var r=t(93324),a=t(47313),i=t(46417);function c(e){var n,t=e.children,c=(0,a.useReducer)((function(e){return(e+1)%7}),0),o=(0,r.Z)(c,2)[1];return(0,i.jsx)(i.Fragment,{children:null!==(n=t(o))&&void 0!==n?n:null})}},17829:function(e,n,t){t.d(n,{Q:function(){return f}});var r=t(93324),a=t(79188),i=t(47313),c=t(98410),o=t(93298),s=t(76487),u=t(46417);function l(e){var n,t,s,l,f=(0,i.useState)(!0),d=(0,r.Z)(f,2),h=d[0],p=d[1],v=e.props;function m(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];p(!1),e.proceed(n)}var x=null===(n=null===v||void 0===v?void 0:v.closeButton)||void 0===n||n,g=null===(t=e.props)||void 0===t?void 0:t.message,Z=g?"function"===typeof g?g(m):g:"";return(0,u.jsxs)(c.Z,{size:null!==(s=null===v||void 0===v?void 0:v.size)&&void 0!==s?s:"lg",show:h,onHide:m,children:[(0,u.jsx)(c.Z.Header,{closeButton:x,children:(0,u.jsx)(c.Z.Title,{id:"contained-modal-title-vcenter",children:null!==(l=null===v||void 0===v?void 0:v.title)&&void 0!==l?l:(0,a.KF)("DIALOG_CONFIRM")})}),(0,u.jsx)(c.Z.Body,{children:Z}),(0,u.jsxs)(c.Z.Footer,{children:[(0,u.jsx)(o.Z,{variant:"success",onClick:function(){return m(!0)},children:(null===v||void 0===v?void 0:v.accept)||(0,a.KF)("DIALOG_ACCEPT")}),(0,u.jsx)(o.Z,{variant:"danger",onClick:function(){return m(!1)},children:(null===v||void 0===v?void 0:v.cancel)||(0,a.KF)("DIALOG_CANCEL")})]})]})}var f=function(e){return(0,s.LA)((0,s.mP)(l))({props:e})}},56122:function(e,n,t){t.d(n,{m:function(){return h}});var r=t(93324),a=t(79188),i=t(47313),c=t(95491),o=t(2532),s=t(98410),u=t(93298),l=t(76487),f=t(46417);function d(e){var n,t,l,d,h,p,v,m=(0,i.useState)(!0),x=(0,r.Z)(m,2),g=x[0],Z=x[1],j=(0,i.useState)(null!==(n=null===(t=e.props)||void 0===t?void 0:t.defaultValue)&&void 0!==n?n:""),y=(0,r.Z)(j,2),N=y[0],T=y[1],E=(0,i.useState)(void 0),C=(0,r.Z)(E,2),A=C[0],b=C[1];function O(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;Z(!1),e.proceed(n)}(0,i.useEffect)((function(){var n,t=null===(n=e.props)||void 0===n?void 0:n.validate;if(t){var r=t(N);b(!0===r?void 0:r)}}),[N,null===(l=e.props)||void 0===l?void 0:l.validate]);var I=null===(d=e.props)||void 0===d?void 0:d.label,w=null===(h=e.props)||void 0===h?void 0:h.message,D=w?"function"===typeof w?w(O):w:"",_=I?(0,f.jsx)(c.Z,{label:I,className:"mb-3",children:(0,f.jsx)(o.Z.Control,{type:"text",placeholder:I,value:N,onChange:function(e){return T(e.target.value)},className:A?"is-invalid":""})}):(0,f.jsx)(o.Z.Control,{type:"text",value:N,onChange:function(e){return T(e.target.value)},className:A?"is-invalid":""});return(0,f.jsxs)(s.Z,{size:"lg",show:g,onHide:O,children:[(0,f.jsx)(s.Z.Header,{closeButton:!0,children:(0,f.jsx)(s.Z.Title,{id:"contained-modal-title-vcenter",children:null!==(p=null===(v=e.props)||void 0===v?void 0:v.title)&&void 0!==p?p:(0,a.KF)("DIALOG_PROMPT")})}),(0,f.jsxs)(s.Z.Body,{children:[D,_,(0,f.jsx)("div",{className:"text-center",children:(0,f.jsx)(o.Z.Text,{className:"text-danger",children:null!==A&&void 0!==A?A:""})})]}),(0,f.jsx)(s.Z.Footer,{children:(0,f.jsx)(u.Z,{disabled:!!A,onClick:function(){return O(N)},children:(0,a.KF)("DIALOG_ACCEPT")})})]})}var h=function(e){return(0,l.LA)((0,l.mP)(d))({props:e})}},13736:function(e,n,t){t.d(n,{h:function(){return o}});var r=t(93324),a=t(47313),i=t(38804),c=t(46417);function o(e,n){var t=(0,a.useState)(1),o=(0,r.Z)(t,2),s=o[0],u=o[1],l=(0,a.useMemo)((function(){return Math.ceil(e.length/n)}),[e,n]),f=(0,a.useMemo)((function(){var e=Array.from(Array(l).keys()).map((function(e){return e+1}));if(e.length>5){var n=e.length-s,t=Math.min(n,5),r=Math.max(5-t,Math.floor(2.5)),a=Math.max(0,s-r);return e.slice(a,a+5)}return e}),[l,s]);(0,a.useEffect)((function(){s>l&&u(1)}),[l,s]);var d=function(){var e=s-1;e<=0&&(e=l),u(e)},h=function(){var e=s+1;e>l&&(e=1),u(e)},p=(0,a.useMemo)((function(){return e.slice((s-1)*n,s*n)}),[s,e,n]);return{page:s,items:p,Pagination:function(){return(0,c.jsxs)(i.Z,{className:"m-0",children:[(0,c.jsx)(i.Z.Prev,{onClick:d}),f.map((function(e,n){return-1!==e?(0,c.jsx)(i.Z.Item,{active:e===s,onClick:function(){return u(e)},children:e},n):(0,c.jsx)(i.Z.Ellipsis,{},n)})),(0,c.jsx)(i.Z.Next,{onClick:h})]})},gotoNext:h,gotoPrev:d,findItem:function(t){var r=e.indexOf(t)+1;return r<0?-1:Math.ceil(r/n)},setPage:function(e){e<1&&(e=1),e>l&&(e=l),u(e)}}}},46474:function(e,n,t){t.d(n,{R:function(){return c}});var r=t(93324),a=t(60720),i=t(47313);function c(e,n,t){var c=(0,i.useState)(t||""),o=(0,r.Z)(c,2),s=o[0],u=o[1],l=(0,i.useMemo)((function(){return s?(0,a.D)(s,e.map((function(e){return n(e)}))).map((function(n){return e[n]})):e}),[s,e,n]);return(0,i.useEffect)((function(){return u(t||"")}),[t]),{search:s,setSearch:u,items:l}}},90630:function(e,n,t){t.r(n),t.d(n,{default:function(){return He}});var r=t(99719),a=t(93324),i=t(47313),c=(0,i.createContext)({x:0,y:0,rotation:{}}),o=function(){return(0,i.useContext)(c)},s=(0,i.createContext)({rotation:{},update:function(){},save:function(){},readonly:!1,mode:"move",setMode:function(){}}),u=function(){return(0,i.useContext)(s)},l=t(1413),f=t(45987),d=t(46417),h=["rows","columns","map"];function p(e){var n=e.rows,t=e.columns,r=e.map,a=(0,f.Z)(e,h),c=(0,i.useMemo)((function(){return Array.from(Array(n)).map((function(e,n){return n}))}),[n]),o=(0,i.useMemo)((function(){return Array.from(Array(t)).map((function(e,n){return n}))}),[t]);return(0,d.jsx)("table",(0,l.Z)((0,l.Z)({},a),{},{children:(0,d.jsx)("tbody",{children:c.map((function(e){return(0,d.jsx)("tr",{children:o.map((function(n){return(0,d.jsx)("td",{children:r(n,e)},n)}))},e)}))})}))}var v=t(74165),m=t(15861),x=t(95878),g=t(75936),Z=t(45043),j=t(79188),y=t(17829),N=t(48648),T=t(31136),E=t(95668),C=t(93298),A=t(42911),b=t(12014);function O(e){var n=e.characters,t=e.title,r=e.onClick,a=u(),i=a.rotation,c=a.update,s=a.readonly,l=o(),f=l.x,h=l.y;function p(){return(p=(0,m.Z)((0,v.Z)().mark((function e(){var n,t;return(0,v.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,y.Q)({message:(0,j.KF)("ROTATION_ACTION_CONFIRM_DELETE")});case 4:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:if(n=i.actions){e.next=10;break}return e.abrupt("return");case 10:if(t=n[h]){e.next=13;break}return e.abrupt("return");case 13:t[f]=void 0,c();case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,d.jsxs)("div",{className:"cell-header p-1 d-flex justify-content-between align-items-center",children:[(0,d.jsx)(N.Z,{direction:"horizontal",gap:1,children:n.map((function(e,n){var t=Z.G.Describe.getTitle(e);return(0,d.jsx)(T.Z,{trigger:["hover","focus"],overlay:(0,d.jsx)(E.Z,{children:t}),children:(0,d.jsx)("div",{className:"badge bg-warning text-black",children:t[0]})},n)}))}),(0,d.jsx)("div",{className:"text-white",children:t||""}),(0,d.jsxs)(N.Z,{direction:"horizontal",gap:1,children:[(0,d.jsx)(T.Z,{trigger:["hover","focus"],overlay:(0,d.jsx)(E.Z,{children:(0,j.KF)("ACTION_EDIT")}),children:(0,d.jsx)(C.Z,{size:"sm",onClick:r,disabled:s,children:(0,d.jsx)(A.Z,{style:{verticalAlign:"-0.125em"}})})}),(0,d.jsx)(T.Z,{trigger:["hover","focus"],overlay:(0,d.jsx)(E.Z,{children:(0,j.KF)("ACTION_DELETE")}),children:(0,d.jsx)(C.Z,{variant:"danger",size:"sm",onClick:function(){return p.apply(this,arguments)},disabled:s,children:(0,d.jsx)(b.Z,{style:{verticalAlign:"-0.125em"}})})})]})]})}var I=t(85278),w=t(88893),D=t(65832);function _(e,n){return(n.characterName?"string"===typeof n.characterName?[n.characterName]:n.characterName:"string"===typeof e.characterName?[e.characterName]:e.characterName).filter((function(e,n,t){return t.indexOf(e)===n}))}function M(e){var n=e.rotation,t=e.control,r=(0,i.useReducer)((function(e){return(e+1)%7}),0),c=(0,a.Z)(r,2)[1],o=_(n,n).map((function(e){return{id:e,label:Z.G.Describe.getTitle(e)}})),s=_(n,t).map((function(e){return{id:e,label:Z.G.Describe.getTitle(e)}}));return(0,d.jsxs)(D.Z,{children:[(0,d.jsx)(D.Z.Header,{className:"bg-primary",children:(0,j.KF)("ROTATION_ACTION_APPLIES_TO")}),(0,d.jsx)(D.Z.Body,{children:(0,d.jsx)(w.X,{placeholder:(0,j.KF)("ROTATION_ACTION_APPLIES_TO"),id:"control-characters-select",options:o,selected:s,onChange:function(e){var n=e.map((function(e){return e.id+""}));n.length>0&&n.length<=4&&(t.characterName=n),c()}})})]})}var k=t(2532),F=["aura","condition","enabled","inputs","stacks"];function R(e){var n=e.control,t=e.type,r=n.constantProperties,c=(0,i.useReducer)((function(e){return(e+1)%7}),0),o=(0,a.Z)(c,2)[1];function s(e){return!(null!==r&&void 0!==r&&r.includes(e))}var u="weapon"===t?F.filter((function(e){return"enabled"!==e})):F;return(0,d.jsxs)(D.Z,{children:[(0,d.jsx)(D.Z.Header,{className:"bg-primary",children:(0,j.KF)("ROTATION_CONTROLLED_CONFIG")}),(0,d.jsx)(D.Z.Body,{children:(0,d.jsx)(k.Z,{children:u.map((function(e){return(0,d.jsx)(k.Z.Group,{controlId:"prop-controll-"+e,children:(0,d.jsx)(k.Z.Check,{type:"checkbox",checked:s(e),onChange:function(){return function(e){var t=s(e),a=r;a?t?a.push(e):a=a.filter((function(n){return n!==e})):t&&(a=[e]),n.constantProperties=a,o()}(e)},label:(0,j.KF)(e.toUpperCase())})},e)}))})})]})}function G(e){var n=e.rotation,t=e.control,r=e.factory,a=e.type,i=e.onChange,c=t.effect;return(0,d.jsxs)(N.Z,{gap:1,children:[(0,d.jsx)(M,{control:t,rotation:n}),(0,d.jsx)(I.h,{hideRank:!0,hideToggle:"weapon"===a,onChange:function(e){!0===e?c.enabled=!0:!1===e&&(c.enabled=!1),i()},effect:c,factory:r}),(0,d.jsx)(R,{control:t,type:a})]})}var K=t(96103);function S(e){var n=e.control,t=u(),r=t.save,a=t.rotation,c=t.update,s=function(e){var n=o().rotation,t=e.artifact?"artifact":e.weapon?"weapon":"character",r=(0,i.useMemo)((function(){switch(t){case"artifact":if(e.artifact)return Z.G.Database.getArtifactBonusFactory(e.artifact).effects.find((function(n){return n.name===e.effect.name}));break;case"weapon":if(e.weapon)return Z.G.Database.getWeaponFactory(e.weapon).effects.find((function(n){return n.name===e.effect.name}));break;case"character":var n=[];(0,K.tl)().effects.get().forEach((function(e){return n.push(e)})),(0,K.tl)().effects.getExternal().forEach((function(e){return n.push(e)}));var r=n.find((function(n){return n.name===e.effect.name}));return r?r.factory:void 0}}),[e]),a=_(n,e);return{type:t,factory:r,character:a}}(n),l=s.type,f=s.factory,h=s.character;if(!f)return null;function p(){return p=(0,m.Z)((0,v.Z)().mark((function e(){return(0,v.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,g.a)({title:(0,j.KF)("ACTION_EDIT"),message:(0,d.jsx)(x.L,{children:function(e){return(0,d.jsx)(G,{rotation:a,control:n,factory:f,type:l,onChange:function(){e(),r()}})}})});case 4:c();case 5:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}return(0,d.jsxs)("div",{children:[(0,d.jsx)(O,{title:(0,j.KF)(n.weapon?"WEAPON":"EFFECT"),characters:h,onClick:function(){return p.apply(this,arguments)}}),n.weapon?(0,d.jsx)("div",{className:"text-center",children:(0,d.jsx)("strong",{children:Z.G.Describe.getTitle(n.weapon)})}):null,(0,d.jsx)("div",{className:"text-center",children:Z.G.Describe.getTitle(f)})]})}var L=t(18734),P=t(93433);function B(e){var n=Z.G.Database.getCharacterFactories().find((function(n){return n.name===e}));if(!n)throw new Error("Character not found: "+e);return[].concat((0,P.Z)(n.NormalAttacks.map((function(e){return(0,l.Z)((0,l.Z)({},e),{},{group:"DAMAGE_NORMALS"})}))),(0,P.Z)(n.ElementalSkills.map((function(e){return(0,l.Z)((0,l.Z)({},e),{},{group:"DAMAGE_ES"})}))),(0,P.Z)(n.ElementalBursts.map((function(e){return(0,l.Z)((0,l.Z)({},e),{},{group:"DAMAGE_EB"})}))),(0,P.Z)(n.ExtraDamage.map((function(e){return(0,l.Z)((0,l.Z)({},e),{},{group:"DAMAGE_EXTRA"})}))),(0,P.Z)(H.map((function(e){return(0,l.Z)((0,l.Z)({},e),{},{group:"DAMAGE_EXTRA"})}))))}var H=[{name:"Reaction.OverloadDMG",ElementalDMG:"PyroDMG"},{name:"Reaction.ElectrochargeDMG",ElementalDMG:"ElectroDMG"},{name:"Reaction.ShatterDMG",ElementalDMG:"PhysicalDMG"},{name:"Reaction.SuperconductDMG",ElementalDMG:"CryoDMG"},{name:"Reaction.SwirlDMG.CryoDMG",ElementalDMG:"CryoDMG"},{name:"Reaction.SwirlDMG.ElectroDMG",ElementalDMG:"ElectroDMG"},{name:"Reaction.SwirlDMG.HydroDMG",ElementalDMG:"HydroDMG"},{name:"Reaction.SwirlDMG.PyroDMG",ElementalDMG:"PyroDMG"}];function U(e){var n=e.character,t=e.characters,r=e.onChange;return(0,d.jsxs)(D.Z,{children:[(0,d.jsx)(D.Z.Header,{className:"bg-primary",children:(0,j.KF)("ROTATION_ACTION_APPLIES_TO")}),(0,d.jsx)(D.Z.Body,{children:(0,d.jsx)(k.Z,{children:(0,d.jsx)(k.Z.Select,{value:n,onChange:function(e){return r(e.target.value)},children:t.map((function(e){return(0,d.jsx)("option",{value:e,children:Z.G.Describe.getTitle(e)},e)}))})})})]})}var z=t(66305),W=t(64919),$=t(98698),V=t(63849),X=t(31616);function Y(e){var n,t=e.instance,r=e.character,a=e.onChange,c=e.hideChangeInstance,o=(0,i.useMemo)((function(){var e=B(r),n={};e.forEach((function(e){var t=n[e.group];t||(t=n[e.group]=[]),t.push(e.name)}));var t=[];return Object.keys(n).forEach((function(e){t.push([e,n[e]])})),t}),[r]),s=t.instanceName||(null===(n=t.instance)||void 0===n?void 0:n.name);if(!s)return null;function u(e){t.instanceName=e,a()}var l=c?null:(0,d.jsx)(k.Z.Select,{value:s,onChange:function(e){return u(e.target.value)},children:o.map((function(e){return(0,d.jsx)("optgroup",{label:(0,j.KF)(e[0]),children:e[1].map((function(e){return(0,d.jsx)("option",{value:e,children:Z.G.Describe.getTitle(e)},e)}))},e[0])}))});var f=(0,d.jsx)(z.y,{aura:t.affectedBy,onChange:function(e){t.affectedBy=e,a()}});var h=(0,d.jsx)(W.K,{places:0,value:t.count,onChange:function(e,n){t.count=Math.floor(Math.max(0,Math.min(999,e))),e!==t.count&&n(),a()},children:(0,d.jsx)($.Z.Text,{style:{width:96},children:(0,j.KF)("ROTATION_COUNT_SHORT")})});var p=(0,d.jsx)(W.K,{places:1,value:t.multiplier,percent:!0,onChange:function(e,n){t.multiplier=Math.max(0,Math.min(9.99,e)),e!==t.multiplier&&n(),a()},children:(0,d.jsx)($.Z.Text,{style:{width:96},children:(0,j.KF)("ROTATION_AOE")})});var v=(0,d.jsx)(W.K,{places:1,percent:!0,value:t.paura,onChange:function(e,n){t.paura=Math.max(0,Math.min(1,e)),e!==t.paura&&n(),a()},children:(0,d.jsx)($.Z.Text,{style:{width:96},children:(0,j.KF)("ROTATION_AURA_VALUE")})});var m=(0,d.jsx)(W.K,{places:1,percent:!0,value:t.preaction,onChange:function(e,n){t.preaction=Math.max(0,Math.min(t.paura,e)),e!==t.preaction&&n(),a()},children:(0,d.jsx)($.Z.Text,{style:{width:96},children:(0,j.KF)("ROTATION_REACTION_VALUE")})});return(0,d.jsxs)(D.Z,{children:[(0,d.jsx)(D.Z.Header,{className:"bg-primary",children:(0,j.KF)("INSTANCE_EDIT")}),(0,d.jsx)(D.Z.Body,{children:(0,d.jsxs)(V.Z,{className:"gx-1 gy-1",children:[(0,d.jsx)(X.Z,{xs:12,children:(0,d.jsxs)(N.Z,{direction:"horizontal",gap:1,children:[l,f]})}),(0,d.jsx)(X.Z,{md:6,xs:12,children:h}),(0,d.jsx)(X.Z,{md:6,xs:12,children:p}),(0,d.jsx)(X.Z,{md:6,xs:12,children:v}),(0,d.jsx)(X.Z,{md:6,xs:12,children:m})]})})]})}function q(e){var n=e.rotation,t=e.instance,r=e.onChange,a=e.hideChangeInstance,i=_(n,n),c=_(n,t)[0];return(0,d.jsxs)(N.Z,{gap:1,children:[(0,d.jsx)(U,{onChange:function(e){t.characterName=e,t.instanceName=B(e)[0].name,r()},character:c,characters:i}),(0,d.jsx)(Y,{onChange:r,instance:t,hideChangeInstance:a,character:c})]})}function Q(e){var n,t=e.instance,r=e.hideChangeInstance,c=e.onChange,o=u(),s=o.rotation,l=o.save,f=(0,i.useReducer)((function(e){return(e+1)%7}),0),h=(0,a.Z)(f,2)[1],p=_(s,s),v=[_(s,t)[0]],m=p.indexOf(v[0])+1,y=t.instanceName||(null===(n=t.instance)||void 0===n?void 0:n.name);if(!y)return null;var C=t.affectedBy?"string"===typeof t.affectedBy?[t.affectedBy]:t.affectedBy:[];return(0,d.jsxs)("div",{className:"h-100 character-"+m,children:[(0,d.jsx)(O,{title:(0,j.KF)("DAMAGE_INSTANCES"),characters:v,onClick:function(){(0,g.a)({title:(0,j.KF)("ACTION_EDIT"),size:"lg",message:(0,d.jsx)(x.L,{children:function(e){return(0,d.jsx)(q,{hideChangeInstance:r,onChange:function(){null===c||void 0===c||c(),l(),e(),h()},rotation:s,instance:t})}})})}}),(0,d.jsx)("div",{className:"p-1",children:(0,d.jsxs)(N.Z,{gap:1,children:[(0,d.jsx)("div",{className:"d-flex align-items-center justify-content-center text-center",children:(0,d.jsx)("div",{children:Z.G.Describe.getTitle(y)})}),(0,d.jsx)("div",{className:"d-flex justify-content-center",children:(0,d.jsxs)(N.Z,{direction:"horizontal",gap:1,className:"align-items-stretch",children:[(0,d.jsx)(T.Z,{trigger:["hover","focus"],overlay:(0,d.jsx)(E.Z,{children:(0,j.KF)("ROTATION_INSTANCE_COUNT")}),children:(0,d.jsxs)("div",{className:"badge bg-secondary bg-opacity-50 d-flex align-items-center",children:[t.count,"x"]})}),(0,d.jsx)(T.Z,{trigger:["hover","focus"],overlay:(0,d.jsx)(E.Z,{children:(0,j.KF)("ROTATION_INSTANCE_AOE")}),children:(0,d.jsx)("div",{className:"badge bg-secondary bg-opacity-50 d-flex align-items-center",children:Z.G.percent(t.multiplier)})}),t.affectedBy?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(T.Z,{trigger:["hover","focus"],overlay:(0,d.jsx)(E.Z,{children:(0,j.KF)("AURA_N",{aura:Z.G.Describe.getTitle("Aura."+t.affectedBy)})}),children:(0,d.jsxs)("div",{className:"d-flex align-items-center badge bg-secondary bg-opacity-50",children:[(0,d.jsx)(N.Z,{direction:"horizontal",gap:1,children:C.map((function(e){return(0,d.jsx)(L.Z,{element:e,width:16,height:16},e)}))}),Z.G.percent(t.paura)]})}),(0,d.jsx)(T.Z,{trigger:["hover","focus"],overlay:(0,d.jsx)(E.Z,{children:(0,j.KF)("ROTATION_REACTION_UPTIME")}),children:(0,d.jsxs)("div",{className:"d-flex align-items-center badge bg-secondary bg-opacity-50",children:["P=",Z.G.percent(t.preaction)]})})]}):null]})})]})})]})}var J=t(79117),ee=t(73989);function ne(e,n,t){var r,a=e.actions;if(a){var i=null===(r=a[t])||void 0===r?void 0:r[n];if(i)return i}}function te(e,n,t,r){var a=e.actions;a||(a=e.actions=[]);var i=a[t];i||(i=a[t]=[]),i[n]=r}function re(e,n){var t=e.actions;t||(t=e.actions=[]),t.splice(n,0,[])}function ae(e,n){var t=e.actions;t||(t=e.actions=[]),t.forEach((function(e){e&&e.splice(n,0,void 0)}))}function ie(e,n){var t=e.actions;t||(t=e.actions=[]),t.splice(n,1)}function ce(e,n){var t=e.actions;t||(t=e.actions=[]),t.forEach((function(e){e&&e.splice(n,1)}))}var oe=t(97273),se=t(68582),ue=t(46474),le=t(2304),fe=t(25566),de=t.n(fe);function he(e){var n=e.characterName,t=e.onSelect,r=(0,i.useMemo)((function(){var e=Z.G.Database.getCharacterFactories().find((function(e){return e.name===n}));if(!e)throw new Error('Character not found: "'+n+'"');return Z.G.Database.getWeaponFactoriesFor(e.weaponType).filter((function(e){for(var n=0;n<e.effects.length;n++)if(e.effects[n].includeRules)return!0;return!1}))}),[n]),c=(0,i.useMemo)((function(){return Z.G.Database.getArtifactBonusFactories().filter((function(e){for(var n=0;n<e.effects.length;n++)if(e.effects[n].includeRules)return!0;return!1}))}),[]),o=(0,i.useState)(""),s=(0,a.Z)(o,2),u=s[0],l=s[1],f=(0,ue.R)(r,(function(e){return Z.G.Describe.getTitle(e)})),h=(0,ue.R)(c,(function(e){return Z.G.Describe.getTitle(e)}));return(0,i.useEffect)((function(){f.setSearch(u||""),h.setSearch(u||"")}),[u,f,h]),(0,d.jsxs)(N.Z,{gap:1,children:[(0,d.jsx)(k.Z.Control,{type:"text",placeholder:(0,j.KF)("EFFECT_SEARCH_NAME"),value:u,onChange:function(e){return l(e.target.value)}}),(0,d.jsxs)(D.Z,{children:[(0,d.jsx)(D.Z.Header,{className:"bg-info",children:(0,j.KF)("ITEM_WEAPONS")}),(0,d.jsx)(D.Z.Body,{children:(0,d.jsx)(le.Z,{children:f.items.map((function(e,n){return(0,d.jsx)(le.Z.Item,{action:!0,onClick:function(){return t(e.name)},children:(0,d.jsx)(de(),{searchWords:[f.search],textToHighlight:Z.G.Describe.getTitle(e)})},n)}))})})]}),(0,d.jsxs)(D.Z,{children:[(0,d.jsx)(D.Z.Header,{className:"bg-info",children:(0,j.KF)("ITEM_ARTIFACTS")}),(0,d.jsx)(D.Z.Body,{children:(0,d.jsx)(le.Z,{children:h.items.map((function(e,n){return(0,d.jsx)(le.Z.Item,{action:!0,onClick:function(){return t(e.name)},children:(0,d.jsx)(de(),{searchWords:[h.search],textToHighlight:Z.G.Describe.getTitle(e)})},n)}))})})]})]})}var pe=t(13736);function ve(e){var n=e.onSelect,t=(0,K.tl)(),r=(0,i.useMemo)((function(){var e=[];return t.effects.ElementalSkills.forEach((function(n){return e.push([void 0,n.factory,"EFFECT_ES"])})),t.effects.ElementalBursts.forEach((function(n){return e.push([void 0,n.factory,"EFFECT_EB"])})),t.effects.Passives.forEach((function(n){return e.push([void 0,n.factory,"EFFECT_PASSIVE"])})),t.effects.Constellations.forEach((function(n){return e.push([void 0,n.factory,"EFFECT_CONST"])})),t.effects.Party.forEach((function(n){return e.push([void 0,n.factory,"EFFECT_EXTERNAL"])})),t.effects.Enemy.forEach((function(n){return e.push([void 0,n.factory,"EFFECT_EXTERNAL"])})),Z.G.Database.getArtifactBonusFactories().forEach((function(n){n.effects.forEach((function(n){return e.push([void 0,n,"ITEM_ARTIFACTS"])}))})),Z.G.Database.getWeaponFactoriesFor(t.weaponType).forEach((function(n){n.effects.forEach((function(t){return e.push([n.name,t,"EFFECT_CONTROL_WEAPON"])}))})),e}),[t]),c=(0,ue.R)(r,(function(e){return(e[0]?me(e[0])+" ":"")+Z.G.Describe.getTitle(e[1])})),o=c.items,s=c.search,u=c.setSearch,l=(0,pe.h)(o,10);return(0,d.jsxs)(N.Z,{gap:1,children:[(0,d.jsx)(k.Z.Control,{type:"text",placeholder:(0,j.KF)("EFFECT_SEARCH_NAME"),value:s,onChange:function(e){return u(e.target.value)}}),(0,d.jsx)("div",{className:"d-flex justify-content-center",children:(0,d.jsx)(l.Pagination,{})}),(0,d.jsx)(le.Z,{children:l.items.map((function(e,t){var r=(0,a.Z)(e,3),i=r[0],c=r[1],o=r[2];return(0,d.jsxs)(le.Z.Item,{action:!0,onClick:function(){return function(e,t){var r=e.name.split(".")[0],a=t.includes("WEAPON")?"weapon":t.includes("ARTIFACT")?"artifact":void 0;n(e.name,r,a)}(c,o)},children:[i?(0,d.jsx)("div",{children:(0,d.jsx)("strong",{children:(0,d.jsx)(de(),{textToHighlight:me(i),searchWords:[s]})})}):null,(0,d.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,d.jsx)("div",{children:(0,d.jsx)(de(),{textToHighlight:Z.G.Describe.getTitle(c),searchWords:[s]})}),(0,d.jsx)("div",{className:"badge bg-info text-black",children:(0,j.KF)(o)})]})]},t)}))})]})}function me(e){return Z.G.Describe.has(e)?Z.G.Describe.getTitle(e):(0,j.KF)(e)}var xe=t(76487),ge=["item"],Ze=0,je=0;function ye(e){var n=e.item,t=(0,f.Z)(e,ge),r=(0,i.useRef)(null),c=(0,i.useState)(Ze),o=(0,a.Z)(c,2),s=o[0],u=o[1],l=(0,i.useState)(je),h=(0,a.Z)(l,2),p=h[0],v=h[1];(0,i.useEffect)((function(){var e=Ze,n=je,t=window.innerWidth,a=window.innerHeight;if(r.current){var i=r.current.getBoundingClientRect(),c=i.width,o=i.height;e=Math.min(e,t-c),n=Math.min(n,a-o)}u(e),v(n)}),[]);var m=(0,i.useState)(!0),x=(0,a.Z)(m,2),g=x[0],Z=x[1];function j(){Z(!1),t.proceed()}return(0,d.jsxs)("div",{style:{display:g?void 0:"none"},children:[(0,d.jsx)("div",{className:"modal-backdrop opacity-0",onClick:j}),(0,d.jsx)("div",{className:"popover popover-body",style:{left:s,top:p},ref:r,children:n(j)})]})}window.addEventListener("mousemove",(function(e){Ze=e.clientX,je=e.clientY}));function Ne(){var e=u(),n=e.rotation,t=e.update,r=e.readonly,c=e.mode,s=o(),l=s.x,f=s.y,h=(0,se.Z)().language,p=(0,i.useMemo)((function(){return[{title:(0,j.KF)("ROTATION_ADD_INSTANCE"),action:function(e){return(0,m.Z)((0,v.Z)().mark((function n(){var t,r,a,i,c;return(0,v.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.rotation,r=e.x,a=e.y,i=_(t,t)[0],c=B(i)[0].name,te(t,r,a,{type:"instance",instance:{count:1,multiplier:1,instanceName:c,paura:0,preaction:0}}),n.abrupt("return",!0);case 5:case"end":return n.stop()}}),n)})))()}},{title:(0,j.KF)("ROTATION_ADD_CONTROL"),action:function(e){return(0,m.Z)((0,v.Z)().mark((function n(){var t,r,i,c,o,s,u,l,f,h,p;return(0,v.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.rotation,r=e.x,i=e.y,c=new Promise(function(){var e=(0,m.Z)((0,v.Z)().mark((function e(n){return(0,v.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,g.a)({title:(0,j.KF)("ROTATION_ADD_CONTROL"),message:function(e){return(0,d.jsx)(ve,{onSelect:function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];n(r),e()}})},footerButton:!1});case 2:n(void 0);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),n.next=4,c;case 4:if(o=n.sent){n.next=7;break}return n.abrupt("return",!1);case 7:return s=(0,a.Z)(o,3),u=s[0],l=s[1],f=s[2],(p=(h={type:"control",control:{effect:{name:u,enabled:!0,rank:1,stacks:0,aura:[],inputs:[]}}}).control)&&("artifact"===f?p.artifact=l:"weapon"===f&&(p.weapon=l)),te(t,r,i,h),n.abrupt("return",!0);case 13:case"end":return n.stop()}}),n)})))()}},{title:(0,j.KF)("ROTATION_ADD_INCLUDE"),action:function(e){return(0,m.Z)((0,v.Z)().mark((function n(){var t,r,a,i,c,o;return(0,v.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.rotation,r=e.x,a=e.y,i=_(t,t)[0],c=new Promise(function(){var e=(0,m.Z)((0,v.Z)().mark((function e(n){return(0,v.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,g.a)({title:(0,j.KF)("ROTATION_ADD_INCLUDE"),message:function(e){return(0,d.jsx)(he,{onSelect:function(t){n(t),e()},characterName:i})},footerButton:!1});case 2:n(void 0);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),n.next=5,c;case 5:if(o=n.sent){n.next=8;break}return n.abrupt("return",!1);case 8:return te(t,r,a,{type:"includeInstance",includeInstance:{factoryName:o,instance:{instanceName:o,count:1,multiplier:1,paura:0,preaction:0}}}),n.abrupt("return",!0);case 10:case"end":return n.stop()}}),n)})))()}},{title:(0,j.KF)("ROTATION_ADD_COLUMN"),action:function(e){return(0,m.Z)((0,v.Z)().mark((function n(){var t,r;return(0,v.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.rotation,r=e.x,ae(t,r),n.abrupt("return",!0);case 3:case"end":return n.stop()}}),n)})))()}},{title:(0,j.KF)("ROTATION_ADD_ROW"),action:function(e){return(0,m.Z)((0,v.Z)().mark((function n(){var t,r;return(0,v.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.rotation,r=e.y,re(t,r),n.abrupt("return",!0);case 3:case"end":return n.stop()}}),n)})))()}},{title:(0,j.KF)("ROTATION_DELETE_ROW"),action:function(e){return(0,m.Z)((0,v.Z)().mark((function n(){var t,r;return(0,v.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.rotation,r=e.y,n.next=3,(0,y.Q)({message:(0,j.KF)("ROTATION_DELETE_ROW_CONFIRM")});case 3:if(n.sent){n.next=6;break}return n.abrupt("return",!1);case 6:return ie(t,r),n.abrupt("return",!0);case 8:case"end":return n.stop()}}),n)})))()}},{title:(0,j.KF)("ROTATION_DELETE_COLUMN"),action:function(e){return(0,m.Z)((0,v.Z)().mark((function n(){var t,r;return(0,v.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.rotation,r=e.x,n.next=3,(0,y.Q)({message:(0,j.KF)("ROTATION_DELETE_COLUMN_CONFIRM")});case 3:if(n.sent){n.next=6;break}return n.abrupt("return",!1);case 6:return ce(t,r),n.abrupt("return",!0);case 8:case"end":return n.stop()}}),n)})))()}}]}),[h]);var x=(0,ee.L)({accept:Ee,collect:function(e){return{isOver:!!e.isOver()}},drop:function(e){if(!r){var a=ne(n,e.x,e.y);a&&("move"===c?(te(n,e.x,e.y,void 0),te(n,l,f,a)):te(n,l,f,JSON.parse(JSON.stringify(a))),t())}}}),Z=(0,a.Z)(x,2),N=Z[0].isOver,T=Z[1];return(0,d.jsx)("div",{ref:T,className:"grid-cell empty"+(N?" dropping":""),children:(0,d.jsx)("div",{onClick:function(){var e;r||(e=function(e){return(0,d.jsx)(oe.C,{popover:!1,onActionFinish:function(n,r){!function(e){e&&t()}(r),e()},actions:p,item:{x:l,y:f,rotation:n}})},(0,xe.LA)((0,xe.mP)(ye))({item:e}))},className:"h-100 d-flex align-items-center justify-content-center",children:"+"})})}function Te(e){var n=e.include;return(0,d.jsx)(Q,{onChange:function(){n.characterName=n.instance.characterName},hideChangeInstance:!0,instance:n.instance})}var Ee="rotation-grid-cell";function Ce(e){var n=e.x,t=e.y,r=u().rotation,i=(0,J.c)({type:Ee,item:{x:n,y:t},collect:function(e){return{isDragging:!!e.isDragging()}}}),o=(0,a.Z)(i,2),s=o[0].isDragging,l=o[1],f=ne(r,n,t);if(!f)return(0,d.jsx)(c.Provider,{value:{x:n,y:t,rotation:r},children:(0,d.jsx)(Ne,{})});var h=function(){switch(f.type){case"control":return f.control?(0,d.jsx)(S,{control:f.control}):void 0;case"includeInstance":return f.includeInstance?(0,d.jsx)(Te,{include:f.includeInstance}):void 0;case"instance":return f.instance?(0,d.jsx)(Q,{instance:f.instance}):void 0}}();return(0,d.jsx)(c.Provider,{value:{x:n,y:t,rotation:r},children:h?(0,d.jsx)("div",{ref:l,className:"grid-cell action "+f.type+(s?" dragging":""),children:h}):(0,d.jsx)(Ne,{})})}function Ae(){var e=function(e){var n=0,t=0;if(e.actions){for(var r=-1,a=e.actions.length-1;a>=0;a--){var i=e.actions[a];if(i&&0!==i.length){if(0!==i.reduce((function(e,n){return e+(n?1:0)}),0))break;r=a}else r=a}r>=0&&e.actions.splice(r),e.actions.forEach((function(e){if(e){for(var n=-1,t=e.length-1;t>=0&&!e[t];t--)n=t;n>=0&&e.splice(n)}})),e.actions.forEach((function(e,r){e&&(e.length>0&&r+1>t&&(t=r+1),e.forEach((function(e,t){e&&t+1>n&&(n=t+1)})))}))}return n=Math.max(5,n),t=Math.max(10,t),n++,t++,{width:n,height:t}}(u().rotation),n=e.width,t=e.height;return(0,d.jsx)(p,{className:"rotation-editor-grid",columns:n,rows:t,map:function(e,n){return(0,d.jsx)(Ce,{x:e,y:n})}})}var be=t(70441);function Oe(){var e=(0,i.useReducer)((function(e){return(e+1)%7}),0),n=(0,a.Z)(e,2)[1],t=u(),r=t.rotation,c=t.save,o=t.readonly;return(0,d.jsx)("div",{children:(0,d.jsx)("table",{children:(0,d.jsxs)("tbody",{children:[(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{children:(0,j.KF)("ROTATION_DURATION")}),(0,d.jsx)("td",{children:(0,d.jsx)(W.K,{disabled:o,size:"sm",value:r.duration,onChange:function(e){o||(r.duration=e,c(),n())}})})]}),(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{children:(0,d.jsx)("label",{htmlFor:"ROTATION_AUTO_INCLUDE_RULES",children:(0,j.KF)("ROTATION_AUTO_INCLUDE_RULES")})}),(0,d.jsx)("td",{children:(0,d.jsx)("div",{className:"d-flex justify-content-end",children:(0,d.jsx)(k.Z.Check,{type:"checkbox",id:"ROTATION_AUTO_INCLUDE_RULES",disabled:o,onChange:function(e){var t=e.target;o||(r.autoIncludeRules=t.checked,c(),n())},checked:r.autoIncludeRules||!1})})})]}),(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{children:(0,d.jsx)("label",{htmlFor:"ROTATION_IS_DYNAMIC",children:(0,j.KF)("ROTATION_IS_DYNAMIC")})}),(0,d.jsx)("td",{children:(0,d.jsx)("div",{className:"d-flex justify-content-end",children:(0,d.jsx)(k.Z.Check,{type:"checkbox",id:"ROTATION_IS_DYNAMIC",disabled:o,onChange:function(e){var t=e.target;o||(r.dynamic=t.checked,c(),n())},checked:r.dynamic||!1})})})]})]})})})}var Ie=t(36687),we=t(29400);function De(){var e=u(),n=e.mode,t=e.setMode;return(0,d.jsxs)(Ie.Z,{children:[(0,d.jsx)(C.Z,{disabled:!0,children:(0,j.KF)("ROTATION_DRAG_MODE")}),(0,d.jsx)(T.Z,{trigger:["hover","focus"],overlay:(0,d.jsx)(E.Z,{children:(0,j.KF)("ROTATION_ACTION_MOVE_DESCRIPTION")}),children:(0,d.jsx)(we.Z,{checked:"move"===n,variant:"move"===n?"success":"primary",onClick:function(){return t("move")},value:"move",children:(0,j.KF)("ACTION_MOVE")})}),(0,d.jsx)(T.Z,{trigger:["hover","focus"],overlay:(0,d.jsx)(E.Z,{children:(0,j.KF)("ROTATION_ACTION_CLONE_DESCRIPTION")}),children:(0,d.jsx)(we.Z,{checked:"clone"===n,variant:"clone"===n?"success":"primary",onClick:function(){return t("clone")},value:"clone",children:(0,j.KF)("ACTION_CLONE")})})]})}var _e=t(94860),Me=t(56122),ke=t(47017),Fe=t(70654),Re=t(97890);function Ge(){var e=(0,i.useReducer)((function(e){return(e+1)%7}),0),n=(0,a.Z)(e,2)[1],t=u(),r=t.rotation,c=t.save,o=t.readonly,s=(0,Re.s0)();function l(){return(l=(0,m.Z)((0,v.Z)().mark((function e(){var t,a,i;return(0,v.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,ke.q$)();case 4:return t=e.sent.map((function(e){return e.name})),a=new _e.z0(t),e.next=8,(0,Me.m)({title:(0,j.KF)("ACTION_RENAME"),defaultValue:r.name,validate:function(e){var n=a.validateName(e);return"NAME_OK"===n||(0,j.KF)(n)}});case 8:if(i=e.sent){e.next=11;break}return e.abrupt("return");case 11:r.name=i,c(),n();case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(){return(f=(0,m.Z)((0,v.Z)().mark((function e(){return(0,v.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,ke.dO)(r);case 2:e.sent&&s("/editor/rotations");case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(){return(h=(0,m.Z)((0,v.Z)().mark((function e(){return(0,v.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,y.Q)({message:(0,d.jsx)(be.D,{children:(0,j.KF)("ROTATION_CONFIRM_DELETE",{rotation:r.name})})});case 4:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,(0,ke.om)(r);case 9:e.sent&&s("/editor/rotations");case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,d.jsxs)(N.Z,{direction:"horizontal",gap:1,children:[(0,d.jsx)("div",{className:"text-nowrap overflow-auto border border-primary me-auto ps-4 pe-4 pt-2 pb-2",children:r.name}),(0,d.jsxs)(C.Z,{onClick:function(){return l.apply(this,arguments)},disabled:o,children:[(0,d.jsx)(A.Z,{}),(0,j.KF)("ACTION_RENAME")]}),(0,d.jsxs)(C.Z,{onClick:function(){return f.apply(this,arguments)},children:[(0,d.jsx)(Fe.Z,{}),(0,j.KF)("ACTION_DUPLICATE")]}),(0,d.jsxs)(C.Z,{variant:"danger",onClick:function(){return h.apply(this,arguments)},disabled:o,children:[(0,d.jsx)(b.Z,{}),(0,j.KF)("ACTION_DELETE")]})]})}function Ke(){var e=u().readonly;return(0,d.jsxs)("div",{className:"bg-dark",children:[(0,d.jsx)("div",{className:"p-2 d-flex justify-content-center overflow-auto",children:(0,d.jsxs)(N.Z,{gap:1,children:[(0,d.jsx)(Ge,{}),(0,d.jsxs)(N.Z,{direction:"horizontal",gap:1,className:"align-items-start",children:[(0,d.jsx)(Oe,{}),(0,d.jsx)(De,{})]})]})}),e?(0,d.jsx)("div",{className:"m-1 alert border border-danger",children:(0,d.jsx)(be.D,{components:{p:function(e){return(0,d.jsx)("p",(0,l.Z)((0,l.Z)({},e),{},{className:"p-0 m-0"}))}},children:(0,j.KF)("ROTATION_MESSAGE_READONLY")})}):null]})}var Se=t(26246),Le=t(77406),Pe=t(30448);function Be(e){var n=e.rotation,t=!n.custom&&!window.location.href.match(/localhost/i),r=(0,i.useReducer)((function(e){return(e+1)%7}),0),c=(0,a.Z)(r,2)[1],o=(0,i.useMemo)((function(){return new Pe.j(250,(function(){t||(0,ke.L$)(n)}))}),[n,t]);function u(){o.call()}var l=(0,i.useState)("move"),f=(0,a.Z)(l,2),h=f[0],p=f[1];return(0,d.jsx)(s.Provider,{value:{rotation:n,update:function(){c(),u()},save:u,readonly:t,mode:h,setMode:p},children:(0,d.jsxs)("div",{className:"d-flex flex-column",style:{height:"calc(100vh - 158px)"},children:[(0,d.jsx)("div",{className:"position-sticky",children:(0,d.jsx)(Ke,{})}),(0,d.jsx)("div",{className:"overflow-auto",children:(0,d.jsx)(Se.W,{backend:Le.zr,options:{enableMouseEvents:!0,enableHoverOutsideTarget:!1},children:(0,d.jsx)(Ae,{})})})]})})}function He(){var e=(0,r.o)();return e?(0,d.jsx)(Be,{rotation:e}):(0,d.jsx)("div",{className:"m-4 text-center",children:(0,j.KF)("ROTATION_NO_SELECTED")})}},47017:function(e,n,t){t.d(n,{L$:function(){return s},SP:function(){return p},dO:function(){return l},om:function(){return d},q$:function(){return c}});var r=t(74165),a=t(15861),i=t(29447);function c(e){return o.apply(this,arguments)}function o(){return o=(0,a.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=performance.now(),e.abrupt("return",new Promise(function(){var e=(0,a.Z)((0,r.Z)().mark((function e(a,c){var o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=(0,i.HB)().addMessageListener((function(e){"storage-rotations"===e.type&&e.id===t&&(e.error?c(e.error):((0,i.HB)().removeMessageListener(o),a(e.result)))})),(0,i.HB)().postMessage({type:"storage-rotations",id:t,data:{get:n||{}}});case 2:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)}))),o.apply(this,arguments)}function s(e){return u.apply(this,arguments)}function u(){return u=(0,a.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.id){e.next=2;break}return e.abrupt("return",!1);case 2:return t=performance.now(),e.abrupt("return",new Promise(function(){var e=(0,a.Z)((0,r.Z)().mark((function e(a,c){var o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=(0,i.HB)().addMessageListener((function(e){"storage-rotations"===e.type&&e.id===t&&(e.error?c(e.error):((0,i.HB)().removeMessageListener(o),a(e.result)))})),(0,i.HB)().postMessage({type:"storage-rotations",id:t,data:{set:{id:n.id,rotation:n}}});case 2:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()));case 4:case"end":return e.stop()}}),e)}))),u.apply(this,arguments)}function l(e){return f.apply(this,arguments)}function f(){return f=(0,a.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==n.id&&null!==n.id){e.next=2;break}return e.abrupt("return");case 2:return t=performance.now(),e.abrupt("return",new Promise(function(){var e=(0,a.Z)((0,r.Z)().mark((function e(a,c){var o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=(0,i.HB)().addMessageListener((function(e){"storage-rotations"===e.type&&e.id===t&&(e.error?c(e.error):((0,i.HB)().removeMessageListener(o),a(e.result)))})),(0,i.HB)().postMessage({type:"storage-rotations",id:t,data:{duplicate:{id:n.id}}});case 2:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()));case 4:case"end":return e.stop()}}),e)}))),f.apply(this,arguments)}function d(e){return h.apply(this,arguments)}function h(){return h=(0,a.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==n.id&&null!==n.id){e.next=2;break}return e.abrupt("return",!1);case 2:return t=performance.now(),e.abrupt("return",new Promise(function(){var e=(0,a.Z)((0,r.Z)().mark((function e(a,c){var o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=(0,i.HB)().addMessageListener((function(e){"storage-rotations"===e.type&&e.id===t&&(e.error?c(e.error):((0,i.HB)().removeMessageListener(o),a(e.result)))})),(0,i.HB)().postMessage({type:"storage-rotations",id:t,data:{delete:{id:n.id}}});case 2:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()));case 4:case"end":return e.stop()}}),e)}))),h.apply(this,arguments)}function p(e){return v.apply(this,arguments)}function v(){return v=(0,a.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=performance.now(),e.abrupt("return",new Promise(function(){var e=(0,a.Z)((0,r.Z)().mark((function e(a,c){var o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=(0,i.HB)().addMessageListener((function(e){"storage-rotations"===e.type&&e.id===t&&(e.error?c(e.error):((0,i.HB)().removeMessageListener(o),a(e.result)))})),(0,i.HB)().postMessage({type:"storage-rotations",id:t,data:{add:{characterName:n}}});case 2:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)}))),v.apply(this,arguments)}}}]);