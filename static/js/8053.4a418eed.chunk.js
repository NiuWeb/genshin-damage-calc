"use strict";(self.webpackChunkgenshin_gui=self.webpackChunkgenshin_gui||[]).push([[8053],{8053:function(e,n,t){t.r(n),t.d(n,{default:function(){return S},position:function(){return I},title:function(){return F}});var r=t(74165),s=t(15861),a=t(67526),i=t(93324),c=t(26671),o=t(83496),u=t(79188),l=t(10533),p=t(46152),f=t(29447);function h(e){return d.apply(this,arguments)}function d(){return d=(0,s.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=performance.now(),e.abrupt("return",new Promise(function(){var e=(0,s.Z)((0,r.Z)().mark((function e(s,a){var i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=(0,f.HB)().addMessageListener((function(e){"storage-export"===e.type&&e.id===t&&(e.error?a(e.error):((0,f.HB)().removeMessageListener(i),s(e.result)))})),(0,f.HB)().postMessage({type:"storage-export",id:t,data:n});case 2:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}var v=t(47313),x=t(65832),Z=t(48648),T=t(93298),g=t(2532),m=t(46417),j=l.STORAGE_EXPORT_ARTIFACTS;function E(){var e=(0,(0,c.Z)().getFilter)(),n=(0,v.useState)(0),t=(0,i.Z)(n,2),l=t[0],f=t[1],d=(0,v.useState)(0),E=(0,i.Z)(d,2),N=E[0],y=E[1],C=(0,o.i)(),O=C.artifacts,w=C.setArtifacts;function k(){return(k=(0,s.Z)((0,r.Z)().mark((function n(){var t;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h({artifacts:{mode:O,query:e}});case 2:t=n.sent,(0,a.S)("artifacts.json",t);case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return(0,v.useEffect)((function(){function n(){return n=(0,s.Z)((0,r.Z)().mark((function n(){var t,s;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,p.yN)(e);case 2:return t=n.sent.length,n.next=5,(0,p.yN)();case 5:s=n.sent.length,f(t),y(s);case 8:case"end":return n.stop()}}),n)}))),n.apply(this,arguments)}!function(){n.apply(this,arguments)}()}),[e]),(0,m.jsxs)(x.Z,{children:[(0,m.jsx)(x.Z.Header,{as:"h5",className:"bg-info",children:(0,u.KF)("ACTION_EXPORT_ARTIFACTS")}),(0,m.jsx)(x.Z.Body,{children:(0,m.jsxs)(Z.Z,{gap:1,children:[(0,m.jsx)(T.Z,{onClick:function(){return k.apply(this,arguments)},children:(0,u.KF)("ACTION_EXPORT")}),(0,m.jsx)(g.Z.Check,{type:"checkbox",checked:O===j.FILTERED,onChange:function(e){return e.target.checked&&w(j.FILTERED)},id:"ACTION_EXPORT_ARTIFACTS_FILTERED",label:(0,u.KF)("ACTION_EXPORT_ARTIFACTS_FILTERED",{n:l})}),(0,m.jsx)(g.Z.Check,{type:"checkbox",checked:O===j.ALL,onChange:function(e){return e.target.checked&&w(j.ALL)},id:"ACTION_EXPORT_ARTIFACTS_ALL",label:(0,u.KF)("ACTION_EXPORT_ARTIFACTS_ALL",{n:N})}),(0,m.jsx)(g.Z.Check,{type:"checkbox",checked:O===j.NONE,onChange:function(e){return e.target.checked&&w(j.NONE)},id:"ACTION_EXPORT_ARTIFACTS_NONE",label:(0,u.KF)("ACTION_EXPORT_ARTIFACTS_NONE")})]})})]})}var N=t(13736),y=t(31136),C=t(95668),O=t(2304),w=t(12014);function k(e){var n=e.items,t=e.onExport,r=e.map,s=e.onRemove,a=e.title,i=e.placeholder,c=(0,N.h)(n,10),o=c.items,l=c.Pagination,p=(0,m.jsx)("div",{className:"p-1 text-center",children:i});var f=(0,m.jsxs)(Z.Z,{gap:1,children:[(0,m.jsxs)(Z.Z,{direction:"horizontal",gap:1,children:[(0,m.jsx)(l,{}),(0,m.jsxs)(T.Z,{className:"w-100",onClick:function(){t(n)},children:[(0,u.KF)("ACTION_EXPORT")," (",n.length,")"]}),(0,m.jsx)(y.Z,{trigger:["hover","focus"],overlay:(0,m.jsx)(C.Z,{children:(0,u.KF)("ACTION_SELECTED_UNSELECT")}),children:(0,m.jsx)(T.Z,{variant:"danger",onClick:function(){n.forEach((function(e){return s(e)}))},children:(0,m.jsx)(w.Z,{style:{verticalAlign:"-0.125em"}})})})]}),(0,m.jsx)(O.Z,{children:o.map((function(e,t){return(0,m.jsx)(O.Z.Item,{children:(0,m.jsxs)("div",{className:"d-flex align-items-center",children:[(0,m.jsx)("div",{className:"me-auto",children:r(e,n.indexOf(e))}),(0,m.jsx)(y.Z,{trigger:["hover","focus"],overlay:(0,m.jsx)(C.Z,{children:(0,u.KF)("ACTION_UNSELECT")}),children:(0,m.jsx)(T.Z,{size:"sm",variant:"danger",onClick:function(){return s(e)},children:(0,m.jsx)(w.Z,{style:{verticalAlign:"-0.125em"}})})})]})},t)}))})]});return(0,m.jsxs)(x.Z,{children:[(0,m.jsx)(x.Z.Header,{as:"h5",className:"bg-info",children:a}),(0,m.jsx)(x.Z.Body,{children:n.length?f:p})]})}function A(){var e=(0,o.i)(),n=e.projects,t=e.removeProjects;function i(){return i=(0,s.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h({projects:n});case 2:t=e.sent,(0,a.S)("projects.json",t);case 4:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)}return(0,m.jsx)(k,{items:n,onRemove:function(e){return t([e])},onExport:function(e){return i.apply(this,arguments)},map:function(e){return e},title:(0,u.KF)("ACTION_EXPORT_PROJECTS"),placeholder:(0,u.KF)("PROJECTS_EXPORT_EMPTY")})}var _=t(47017);function R(){var e=(0,o.i)(),n=e.rotations,t=e.removeRotations,c=(0,v.useState)([]),l=(0,i.Z)(c,2),p=l[0],f=l[1];function d(){return d=(0,s.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h({rotations:n});case 2:t=e.sent,(0,a.S)("rotations.json",t);case 4:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}return(0,v.useEffect)((function(){function e(){return e=(0,s.Z)((0,r.Z)().mark((function e(){var t,s,a,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],s=0;case 2:if(!(s<n.length)){e.next=11;break}return a=n[s],e.next=6,(0,_.q$)({id:a});case 6:i=e.sent,t.push(i[0].name);case 8:s++,e.next=2;break;case 11:f(t);case 12:case"end":return e.stop()}}),e)}))),e.apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[n]),(0,m.jsx)(k,{items:n,onRemove:function(e){return t([e])},onExport:function(e){return d.apply(this,arguments)},map:function(e,n){return p[n]},title:(0,u.KF)("ACTION_EXPORT_ROTATIONS"),placeholder:(0,u.KF)("ROTATIONS_EXPORT_EMPTY")})}var F="export",I=1;function S(){var e=(0,o.i)(),n=(0,c.Z)().getFilter;function t(){return(t=(0,s.Z)((0,r.Z)().mark((function t(){var s,i,c,o;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=e.projects,i=e.rotations,c=e.artifacts,t.next=3,h({projects:s,rotations:i,artifacts:{mode:c,query:n()}});case 3:o=t.sent,(0,a.S)("storage.json",o);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function i(){return(i=(0,s.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h({all:!0});case 2:n=e.sent,(0,a.S)("storage.json",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,m.jsxs)(Z.Z,{gap:2,children:[(0,m.jsx)("div",{className:"d-flex justify-content-center",children:(0,m.jsxs)(Z.Z,{direction:"horizontal",gap:1,children:[(0,m.jsx)(T.Z,{variant:"warning",className:"text-black",onClick:function(){return i.apply(this,arguments)},children:(0,u.KF)("ACTION_EXPORT_ALL")}),(0,m.jsx)(T.Z,{variant:"warning",className:"text-black",onClick:function(){return t.apply(this,arguments)},children:(0,u.KF)("ACTION_EXPORT_ALL_SELECTED")})]})}),(0,m.jsx)(A,{}),(0,m.jsx)(R,{}),(0,m.jsx)(E,{})]})}},26671:function(e,n,t){t.d(n,{Z:function(){return i}});var r=t(1413),s=t(79931),a=t(10340),i=function(){var e=(0,a.T)(),n=(0,a.C)((function(e){return e.artifactsFilter}));return(0,r.Z)((0,r.Z)({},n),{},{setPiece:function(n){e(s.Nw.setPiece(n))},setBonus:function(n){e(s.Nw.setBonus(n))},setMainstat:function(n){e(s.Nw.setMainstat(n))},setLevel:function(n){e(s.Nw.setLevel(n))},setSubstats:function(n){e(s.Nw.setSubstats(n))},setSubstatsOperator:function(n){e(s.Nw.setSubstatsOperator(n))},setLocked:function(n){e(s.Nw.setLocked(n))},getFilter:function(){return n},getCount:function(){var e,t,r,s,a,i,c,o,u,l=0;return l+=null!==(e=null===(t=n.piece)||void 0===t?void 0:t.length)&&void 0!==e?e:0,l+=null!==(r=null===(s=n.bonus)||void 0===s?void 0:s.length)&&void 0!==r?r:0,l+=null!==(a=null===(i=n.mainstat)||void 0===i?void 0:i.length)&&void 0!==a?a:0,l+=null!==(c=null===(o=n.substats)||void 0===o||null===(u=o.list)||void 0===u?void 0:u.length)&&void 0!==c?c:0,n.level&&(n.level.min>0||n.level.max<20)&&l++,l}})}},46152:function(e,n,t){t.d(n,{hW:function(){return h},rR:function(){return p},yN:function(){return u}});var r=t(1413),s=t(74165),a=t(15861),i=t(29447);function c(e){return o.apply(this,arguments)}function o(){return o=(0,a.Z)((0,s.Z)().mark((function e(n){var t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=performance.now(),e.abrupt("return",new Promise(function(){var e=(0,a.Z)((0,s.Z)().mark((function e(r,a){var c;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=(0,i.HB)().addMessageListener((function(e){"storage-artifacts"===e.type&&e.id===t&&(e.error?a(e.error):((0,i.HB)().removeMessageListener(c),r(e.result)))})),(0,i.HB)().postMessage({type:"storage-artifacts",id:t,data:n});case 2:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)}))),o.apply(this,arguments)}function u(e){return l.apply(this,arguments)}function l(){return(l=(0,a.Z)((0,s.Z)().mark((function e(n){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c({get:(0,r.Z)({},n)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return f.apply(this,arguments)}function f(){return(f=(0,a.Z)((0,s.Z)().mark((function e(n){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c({set:n}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){return d.apply(this,arguments)}function d(){return(d=(0,a.Z)((0,s.Z)().mark((function e(n){var t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.id){e.next=3;break}return e.abrupt("return",!1);case 3:return e.abrupt("return",c({delete:{id:t}}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}}]);