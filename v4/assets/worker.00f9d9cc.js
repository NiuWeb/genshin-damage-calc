(function(){"use strict";var Rt={exports:{}},he={exports:{}},Ra;function PE(){return Ra||(Ra=1,function(e){const a=typeof process<"u"&&{}.TERM_PROGRAM==="Hyper",s=typeof process<"u"&&process.platform==="win32",n=typeof process<"u"&&process.platform==="linux",i={ballotDisabled:"\u2612",ballotOff:"\u2610",ballotOn:"\u2611",bullet:"\u2022",bulletWhite:"\u25E6",fullBlock:"\u2588",heart:"\u2764",identicalTo:"\u2261",line:"\u2500",mark:"\u203B",middot:"\xB7",minus:"\uFF0D",multiplication:"\xD7",obelus:"\xF7",pencilDownRight:"\u270E",pencilRight:"\u270F",pencilUpRight:"\u2710",percent:"%",pilcrow2:"\u2761",pilcrow:"\xB6",plusMinus:"\xB1",question:"?",section:"\xA7",starsOff:"\u2606",starsOn:"\u2605",upDownArrow:"\u2195"},l=Object.assign({},i,{check:"\u221A",cross:"\xD7",ellipsisLarge:"...",ellipsis:"...",info:"i",questionSmall:"?",pointer:">",pointerSmall:"\xBB",radioOff:"( )",radioOn:"(*)",warning:"\u203C"}),E=Object.assign({},i,{ballotCross:"\u2718",check:"\u2714",cross:"\u2716",ellipsisLarge:"\u22EF",ellipsis:"\u2026",info:"\u2139",questionFull:"\uFF1F",questionSmall:"\uFE56",pointer:n?"\u25B8":"\u276F",pointerSmall:n?"\u2023":"\u203A",radioOff:"\u25EF",radioOn:"\u25C9",warning:"\u26A0"});e.exports=s&&!a?l:E,Reflect.defineProperty(e.exports,"common",{enumerable:!1,value:i}),Reflect.defineProperty(e.exports,"windows",{enumerable:!1,value:l}),Reflect.defineProperty(e.exports,"other",{enumerable:!1,value:E})}(he)),he.exports}const BE=e=>e!==null&&typeof e=="object"&&!Array.isArray(e),wE=/[\u001b\u009b][[\]#;?()]*(?:(?:(?:[^\W_]*;?[^\W_]*)\u0007)|(?:(?:[0-9]{1,4}(;[0-9]{0,4})*)?[~0-9=<>cf-nqrtyA-PRZ]))/g,bE=()=>typeof process<"u"?{}.FORCE_COLOR!=="0":!1,Ia=()=>{const e={enabled:bE(),visible:!0,styles:{},keys:{}},a=l=>{let E=l.open=`\x1B[${l.codes[0]}m`,_=l.close=`\x1B[${l.codes[1]}m`,A=l.regex=new RegExp(`\\u001b\\[${l.codes[1]}m`,"g");return l.wrap=(u,S)=>{u.includes(_)&&(u=u.replace(A,_+E));let h=E+u+_;return S?h.replace(/\r*\n/g,`${_}$&${E}`):h},l},s=(l,E,_)=>typeof l=="function"?l(E):l.wrap(E,_),n=(l,E)=>{if(l===""||l==null)return"";if(e.enabled===!1)return l;if(e.visible===!1)return"";let _=""+l,A=_.includes(`
`),u=E.length;for(u>0&&E.includes("unstyle")&&(E=[...new Set(["unstyle",...E])].reverse());u-- >0;)_=s(e.styles[E[u]],_,A);return _},i=(l,E,_)=>{e.styles[l]=a({name:l,codes:E}),(e.keys[_]||(e.keys[_]=[])).push(l),Reflect.defineProperty(e,l,{configurable:!0,enumerable:!0,set(u){e.alias(l,u)},get(){let u=S=>n(S,u.stack);return Reflect.setPrototypeOf(u,e),u.stack=this.stack?this.stack.concat(l):[l],u}})};return i("reset",[0,0],"modifier"),i("bold",[1,22],"modifier"),i("dim",[2,22],"modifier"),i("italic",[3,23],"modifier"),i("underline",[4,24],"modifier"),i("inverse",[7,27],"modifier"),i("hidden",[8,28],"modifier"),i("strikethrough",[9,29],"modifier"),i("black",[30,39],"color"),i("red",[31,39],"color"),i("green",[32,39],"color"),i("yellow",[33,39],"color"),i("blue",[34,39],"color"),i("magenta",[35,39],"color"),i("cyan",[36,39],"color"),i("white",[37,39],"color"),i("gray",[90,39],"color"),i("grey",[90,39],"color"),i("bgBlack",[40,49],"bg"),i("bgRed",[41,49],"bg"),i("bgGreen",[42,49],"bg"),i("bgYellow",[43,49],"bg"),i("bgBlue",[44,49],"bg"),i("bgMagenta",[45,49],"bg"),i("bgCyan",[46,49],"bg"),i("bgWhite",[47,49],"bg"),i("blackBright",[90,39],"bright"),i("redBright",[91,39],"bright"),i("greenBright",[92,39],"bright"),i("yellowBright",[93,39],"bright"),i("blueBright",[94,39],"bright"),i("magentaBright",[95,39],"bright"),i("cyanBright",[96,39],"bright"),i("whiteBright",[97,39],"bright"),i("bgBlackBright",[100,49],"bgBright"),i("bgRedBright",[101,49],"bgBright"),i("bgGreenBright",[102,49],"bgBright"),i("bgYellowBright",[103,49],"bgBright"),i("bgBlueBright",[104,49],"bgBright"),i("bgMagentaBright",[105,49],"bgBright"),i("bgCyanBright",[106,49],"bgBright"),i("bgWhiteBright",[107,49],"bgBright"),e.ansiRegex=wE,e.hasColor=e.hasAnsi=l=>(e.ansiRegex.lastIndex=0,typeof l=="string"&&l!==""&&e.ansiRegex.test(l)),e.alias=(l,E)=>{let _=typeof E=="string"?e[E]:E;if(typeof _!="function")throw new TypeError("Expected alias to be the name of an existing color (string) or a function");_.stack||(Reflect.defineProperty(_,"name",{value:l}),e.styles[l]=_,_.stack=[l]),Reflect.defineProperty(e,l,{configurable:!0,enumerable:!0,set(A){e.alias(l,A)},get(){let A=u=>n(u,A.stack);return Reflect.setPrototypeOf(A,e),A.stack=this.stack?this.stack.concat(_.stack):_.stack,A}})},e.theme=l=>{if(!BE(l))throw new TypeError("Expected theme to be an object");for(let E of Object.keys(l))e.alias(E,l[E]);return e},e.alias("unstyle",l=>typeof l=="string"&&l!==""?(e.ansiRegex.lastIndex=0,l.replace(e.ansiRegex,"")):""),e.alias("noop",l=>l),e.none=e.clear=e.noop,e.stripColor=e.unstyle,e.symbols=PE(),e.define=i,e};Rt.exports=Ia(),Rt.exports.create=Ia;var Le={},Ft={},Da={},kt={};Object.defineProperty(kt,"__esModule",{value:!0}),kt.boolean=void 0;const KE=function(e){switch(Object.prototype.toString.call(e)){case"[object String]":return["true","t","yes","y","on","1"].includes(e.trim().toLowerCase());case"[object Number]":return e.valueOf()===1;case"[object Boolean]":return e.valueOf();default:return!1}};kt.boolean=KE;var Vt={};Object.defineProperty(Vt,"__esModule",{value:!0}),Vt.isBooleanable=void 0;const YE=function(e){switch(Object.prototype.toString.call(e)){case"[object String]":return["true","t","yes","y","on","1","false","f","no","n","off","0"].includes(e.trim().toLowerCase());case"[object Number]":return[0,1].includes(e.valueOf());case"[object Boolean]":return!0;default:return!1}};Vt.isBooleanable=YE,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isBooleanable=e.boolean=void 0;const a=kt;Object.defineProperty(e,"boolean",{enumerable:!0,get:function(){return a.boolean}});const s=Vt;Object.defineProperty(e,"isBooleanable",{enumerable:!0,get:function(){return s.isBooleanable}})}(Da);var xt={};Object.defineProperty(xt,"__esModule",{value:!0}),xt.tokenize=void 0;const FE=/(?:%(?<flag>([+0-]|-\+))?(?<width>\d+)?(?<position>\d+\$)?(?<precision>\.\d+)?(?<conversion>[%BCESb-iosux]))|(\\%)/g,kE=e=>{let a;const s=[];let n=0,i=0,l=null;for(;(a=FE.exec(e))!==null;){a.index>i&&(l={literal:e.slice(i,a.index),type:"literal"},s.push(l));const E=a[0];i=a.index+E.length,E==="\\%"||E==="%%"?l&&l.type==="literal"?l.literal+="%":(l={literal:"%",type:"literal"},s.push(l)):a.groups&&(l={conversion:a.groups.conversion,flag:a.groups.flag||null,placeholder:E,position:a.groups.position?Number.parseInt(a.groups.position,10)-1:n++,precision:a.groups.precision?Number.parseInt(a.groups.precision.slice(1),10):null,type:"placeholder",width:a.groups.width?Number.parseInt(a.groups.width,10):null},s.push(l))}return i<=e.length-1&&(l&&l.type==="literal"?l.literal+=e.slice(i):s.push({literal:e.slice(i),type:"literal"})),s};xt.tokenize=kE,Object.defineProperty(Ft,"__esModule",{value:!0}),Ft.createPrintf=void 0;const Oa=Da,VE=xt,xE=(e,a)=>a.placeholder,UE=e=>{var a;const s=(l,E,_)=>_==="-"?l.padEnd(E," "):_==="-+"?((Number(l)>=0?"+":"")+l).padEnd(E," "):_==="+"?((Number(l)>=0?"+":"")+l).padStart(E," "):_==="0"?l.padStart(E,"0"):l.padStart(E," "),n=(a=e==null?void 0:e.formatUnboundExpression)!==null&&a!==void 0?a:xE,i={};return(l,...E)=>{let _=i[l];_||(_=i[l]=VE.tokenize(l));let A="";for(const u of _)if(u.type==="literal")A+=u.literal;else{let S=E[u.position];if(S===void 0)A+=n(l,u,E);else if(u.conversion==="b")A+=Oa.boolean(S)?"true":"false";else if(u.conversion==="B")A+=Oa.boolean(S)?"TRUE":"FALSE";else if(u.conversion==="c")A+=S;else if(u.conversion==="C")A+=String(S).toUpperCase();else if(u.conversion==="i"||u.conversion==="d")S=String(Math.trunc(S)),u.width!==null&&(S=s(S,u.width,u.flag)),A+=S;else if(u.conversion==="e")A+=Number(S).toExponential();else if(u.conversion==="E")A+=Number(S).toExponential().toUpperCase();else if(u.conversion==="f")u.precision!==null&&(S=Number(S).toFixed(u.precision)),u.width!==null&&(S=s(String(S),u.width,u.flag)),A+=S;else if(u.conversion==="o")A+=(Number.parseInt(String(S),10)>>>0).toString(8);else if(u.conversion==="s")u.width!==null&&(S=s(String(S),u.width,u.flag)),A+=S;else if(u.conversion==="S")u.width!==null&&(S=s(String(S),u.width,u.flag)),A+=String(S).toUpperCase();else if(u.conversion==="u")A+=Number.parseInt(String(S),10)>>>0;else if(u.conversion==="x")S=(Number.parseInt(String(S),10)>>>0).toString(16),u.width!==null&&(S=s(String(S),u.width,u.flag)),A+=S;else throw new Error("Unknown format specifier.")}return A}};Ft.createPrintf=UE,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.printf=e.createPrintf=void 0;const a=Ft;Object.defineProperty(e,"createPrintf",{enumerable:!0,get:function(){return a.createPrintf}}),e.printf=a.createPrintf()}(Le);var fe=function(e,a){return fe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,n){s.__proto__=n}||function(s,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(s[i]=n[i])},fe(e,a)};function ya(e,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");fe(e,a);function s(){this.constructor=e}e.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}function va(e,a){var s=typeof Symbol=="function"&&e[Symbol.iterator];if(!s)return e;var n=s.call(e),i,l=[],E;try{for(;(a===void 0||a-- >0)&&!(i=n.next()).done;)l.push(i.value)}catch(_){E={error:_}}finally{try{i&&!i.done&&(s=n.return)&&s.call(n)}finally{if(E)throw E.error}}return l}function Ha(e,a,s){if(s||arguments.length===2)for(var n=0,i=a.length,l;n<i;n++)(l||!(n in a))&&(l||(l=Array.prototype.slice.call(a,0,n)),l[n]=a[n]);return e.concat(l||Array.prototype.slice.call(a))}var Pa=function(){function e(){this.t=0}return Object.defineProperty(e.prototype,"length",{get:function(){return this.t},enumerable:!1,configurable:!0}),e.prototype.size=function(){return this.t},e.prototype.empty=function(){return this.t===0},e}();(function(e){ya(a,e);function a(){return e!==null&&e.apply(this,arguments)||this}return a})(Pa);var Ba=function(e){ya(a,e);function a(s,n,i){s===void 0&&(s=[]),n===void 0&&(n=function(u,S){return u>S?-1:u<S?1:0}),i===void 0&&(i=!0);var l=e.call(this)||this;if(l.i=n,Array.isArray(s))l.u=i?Ha([],va(s),!1):s;else{l.u=[];var E=l;s.forEach(function(u){E.u.push(u)})}l.t=l.u.length;for(var _=l.t>>1,A=l.t-1>>1;A>=0;--A)l.o(A,_);return l}return a.prototype.h=function(s){for(var n=this.u[s];s>0;){var i=s-1>>1,l=this.u[i];if(this.i(l,n)<=0)break;this.u[s]=l,s=i}this.u[s]=n},a.prototype.o=function(s,n){for(var i=this.u[s];s<n;){var l=s<<1|1,E=l+1,_=this.u[l];if(E<this.t&&this.i(_,this.u[E])>0&&(l=E,_=this.u[E]),this.i(_,i)>=0)break;this.u[s]=_,s=l}this.u[s]=i},a.prototype.clear=function(){this.t=0,this.u.length=0},a.prototype.push=function(s){this.u.push(s),this.h(this.t),this.t+=1},a.prototype.pop=function(){if(this.t!==0){var s=this.u[0],n=this.u.pop();return this.t-=1,this.t&&(this.u[0]=n,this.o(0,this.t>>1)),s}},a.prototype.top=function(){return this.u[0]},a.prototype.find=function(s){return this.u.indexOf(s)>=0},a.prototype.remove=function(s){var n=this.u.indexOf(s);return n<0?!1:(n===0?this.pop():n===this.t-1?(this.u.pop(),this.t-=1):(this.u.splice(n,1,this.u.pop()),this.t-=1,this.h(n),this.o(n,this.t>>1)),!0)},a.prototype.updateItem=function(s){var n=this.u.indexOf(s);return n<0?!1:(this.h(n),this.o(n,this.t>>1),!0)},a.prototype.toArray=function(){return Ha([],va(this.u),!1)},a}(Pa),WE=Object.defineProperty,jE=(e,a)=>{for(var s in a)WE(e,s,{get:a[s],enumerable:!0})},wa={};jE(wa,{Filter:()=>qE,ReduceSearchItem:()=>Ut,Search:()=>zE});function Ut(e){const a=[];if(e===void 0)return a;if(Array.isArray(e))for(const s of e){const n=Ut(s);for(const i of n)a.push(i)}else a.push(e);return a}function zE(e){const a=Ut(e.search),s={values:[],indexes:[],results:[]},n=e.mode||"some";for(let i=0;i<e.values.length;i++){const l=Ut(e.map(e.values[i]));a[n](_=>l.some(A=>typeof _!=typeof A?!1:(e.ignoreCase&&(typeof _=="string"&&(_=_.toLowerCase()),typeof A=="string"&&(A=A.toLowerCase())),e.exact||typeof _=="number"?_===A:typeof A=="string"?A.includes(_):!1)))&&(s.values.push(e.values[i]),s.indexes.push(i),s.results.push({value:e.values[i],index:i}))}return s}function qE(e){const a={values:[],indexes:[],results:[]};return e.values.forEach((s,n)=>{e.filters[e.mode||"some"](l=>l.for?l.for(s)?l.filter(s):!0:l.filter(s))&&(a.values.push(s),a.indexes.push(n),a.results.push({value:s,index:n}))}),a}var ba={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.stringSimilarity=void 0;var a=function(s,n,i,l){if(i===void 0&&(i=2),l===void 0&&(l=!1),l||(s=s.toLowerCase(),n=n.toLowerCase()),s.length<i||n.length<i)return 0;for(var E=new Map,_=0;_<s.length-(i-1);_++){var A=s.substr(_,i);E.set(A,E.has(A)?E.get(A)+1:1)}for(var u=0,S=0;S<n.length-(i-1);S++){var h=n.substr(S,i),L=E.has(h)?E.get(h):0;L>0&&(E.set(h,L-1),u++)}return u*2/(s.length+n.length-(i-1)*2)};e.stringSimilarity=a,e.default=e.stringSimilarity})(ba);var QE=Object.create,Wt=Object.defineProperty,$E=Object.defineProperties,XE=Object.getOwnPropertyDescriptor,JE=Object.getOwnPropertyDescriptors,Ka=Object.getOwnPropertyNames,Ya=Object.getOwnPropertySymbols,ZE=Object.getPrototypeOf,Fa=Object.prototype.hasOwnProperty,tT=Object.prototype.propertyIsEnumerable,d=Math.pow,ka=(e,a,s)=>a in e?Wt(e,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[a]=s,F=(e,a)=>{for(var s in a||(a={}))Fa.call(a,s)&&ka(e,s,a[s]);if(Ya)for(var s of Ya(a))tT.call(a,s)&&ka(e,s,a[s]);return e},it=(e,a)=>$E(e,JE(a)),V=(e,a)=>function(){return a||(0,e[Ka(e)[0]])((a={exports:{}}).exports,a),a.exports},D=(e,a)=>{for(var s in a)Wt(e,s,{get:a[s],enumerable:!0})},eT=(e,a,s,n)=>{if(a&&typeof a=="object"||typeof a=="function")for(let i of Ka(a))!Fa.call(e,i)&&i!==s&&Wt(e,i,{get:()=>a[i],enumerable:!(n=XE(a,i))||n.enumerable});return e},aT=(e,a,s)=>(s=e!=null?QE(ZE(e)):{},eT(a||!e||!e.__esModule?Wt(s,"default",{value:e,enumerable:!0}):s,e)),pt=(e,a,s)=>new Promise((n,i)=>{var l=A=>{try{_(s.next(A))}catch(u){i(u)}},E=A=>{try{_(s.throw(A))}catch(u){i(u)}},_=A=>A.done?n(A.value):Promise.resolve(A.value).then(l,E);_((s=s.apply(e,a)).next())}),Va=V({"node_modules/@bygdle/javascript-lp-solver/src/Tableau/Solution.js"(e,a){function s(n,i,l,E){this.feasible=l,this.evaluation=i,this.bounded=E,this._tableau=n}a.exports=s,s.prototype.generateSolutionSet=function(){for(var n={},i=this._tableau,l=i.varIndexByRow,E=i.variablesPerIndex,_=i.matrix,A=i.rhsColumn,u=i.height-1,S=Math.round(1/i.precision),h=1;h<=u;h+=1){var L=l[h],f=E[L];if(!(f===void 0||f.isSlack===!0)){var N=_[h][A];n[f.id]=Math.round((Number.EPSILON+N)*S)/S}}return n}}}),sT=V({"node_modules/@bygdle/javascript-lp-solver/src/Tableau/MilpSolution.js"(e,a){var s=Va();function n(i,l,E,_,A){s.call(this,i,l,E,_),this.iter=A}a.exports=n,n.prototype=Object.create(s.prototype),n.constructor=n}}),rt=V({"node_modules/@bygdle/javascript-lp-solver/src/Tableau/Tableau.js"(e,a){var s=Va(),n=sT();function i(E){this.model=null,this.matrix=null,this.width=0,this.height=0,this.costRowIndex=0,this.rhsColumn=0,this.variablesPerIndex=[],this.unrestrictedVars=null,this.feasible=!0,this.evaluation=0,this.simplexIters=0,this.varIndexByRow=null,this.varIndexByCol=null,this.rowByVarIndex=null,this.colByVarIndex=null,this.precision=E||1e-8,this.optionalObjectives=[],this.objectivesByPriority={},this.savedState=null,this.availableIndexes=[],this.lastElementIndex=0,this.variables=null,this.nVars=0,this.bounded=!0,this.unboundedVarIndex=null,this.branchAndCutIterations=0}a.exports=i,i.prototype.solve=function(){return this.model.getNumberOfIntegerVariables()>0?this.branchAndCut():this.simplex(),this.updateVariableValues(),this.getSolution()};function l(E,_){this.priority=E,this.reducedCosts=new Array(_);for(var A=0;A<_;A+=1)this.reducedCosts[A]=0}l.prototype.copy=function(){var E=new l(this.priority,this.reducedCosts.length);return E.reducedCosts=this.reducedCosts.slice(),E},i.prototype.setOptionalObjective=function(E,_,A){var u=this.objectivesByPriority[E];if(u===void 0){var S=Math.max(this.width,_+1);u=new l(E,S),this.objectivesByPriority[E]=u,this.optionalObjectives.push(u),this.optionalObjectives.sort(function(h,L){return h.priority-L.priority})}u.reducedCosts[_]=A},i.prototype.initialize=function(E,_,A,u){this.variables=A,this.unrestrictedVars=u,this.width=E,this.height=_;for(var S=new Array(E),h=0;h<E;h++)S[h]=0;this.matrix=new Array(_);for(var L=0;L<_;L++)this.matrix[L]=S.slice();this.varIndexByRow=new Array(this.height),this.varIndexByCol=new Array(this.width),this.varIndexByRow[0]=-1,this.varIndexByCol[0]=-1,this.nVars=E+_-2,this.rowByVarIndex=new Array(this.nVars),this.colByVarIndex=new Array(this.nVars),this.lastElementIndex=this.nVars},i.prototype._resetMatrix=function(){var E=this.model.variables,_=this.model.constraints,A=E.length,u=_.length,S,h,L=this.matrix[0],f=this.model.isMinimization===!0?-1:1;for(S=0;S<A;S+=1){var N=E[S],p=N.priority,M=f*N.cost;p===0?L[S+1]=M:this.setOptionalObjective(p,S+1,M),h=E[S].index,this.rowByVarIndex[h]=-1,this.colByVarIndex[h]=S+1,this.varIndexByCol[S+1]=h}for(var C=1,g=0;g<u;g+=1){var R=_[g],v=R.index;this.rowByVarIndex[v]=C,this.colByVarIndex[v]=-1,this.varIndexByRow[C]=v;var y,H,P,U=R.terms,Q=U.length,tt=this.matrix[C++];if(R.isUpperBound){for(y=0;y<Q;y+=1)H=U[y],P=this.colByVarIndex[H.variable.index],tt[P]=H.coefficient;tt[0]=R.rhs}else{for(y=0;y<Q;y+=1)H=U[y],P=this.colByVarIndex[H.variable.index],tt[P]=-H.coefficient;tt[0]=-R.rhs}}},i.prototype.setModel=function(E){this.model=E;var _=E.nVariables+1,A=E.nConstraints+1;return this.initialize(_,A,E.variables,E.unrestrictedVariables),this._resetMatrix(),this},i.prototype.getNewElementIndex=function(){if(this.availableIndexes.length>0)return this.availableIndexes.pop();var E=this.lastElementIndex;return this.lastElementIndex+=1,E},i.prototype.density=function(){for(var E=0,_=this.matrix,A=0;A<this.height;A++)for(var u=_[A],S=0;S<this.width;S++)u[S]!==0&&(E+=1);return E/(this.height*this.width)},i.prototype.setEvaluation=function(){var E=Math.round(1/this.precision),_=this.matrix[this.costRowIndex][this.rhsColumn],A=Math.round((Number.EPSILON+_)*E)/E;this.evaluation=A,this.simplexIters===0&&(this.bestPossibleEval=A)},i.prototype.getSolution=function(){var E=this.model.isMinimization===!0?this.evaluation:-this.evaluation;return this.model.getNumberOfIntegerVariables()>0?new n(this,E,this.feasible,this.bounded,this.branchAndCutIterations):new s(this,E,this.feasible,this.bounded)}}}),nT=V({"node_modules/@bygdle/javascript-lp-solver/src/Tableau/simplex.js"(){var e=rt();e.prototype.simplex=function(){return this.bounded=!0,this.phase1(),this.feasible===!0&&this.phase2(),this},e.prototype.phase1=function(){for(var s=this.model.checkForCycles,n=[],i=this.matrix,l=this.rhsColumn,E=this.width-1,_=this.height-1,A,u=0;;){for(var S=0,h=-this.precision,L=1;L<=_;L++){A=this.unrestrictedVars[this.varIndexByRow[L]]===!0;var f=i[L][l];f<h&&(h=f,S=L)}if(S===0)return this.feasible=!0,u;for(var N=0,p=-1/0,M=i[0],C=i[S],g=1;g<=E;g++){var R=C[g];if(A=this.unrestrictedVars[this.varIndexByCol[g]]===!0,A||R<-this.precision){var v=-M[g]/R;p<v&&(p=v,N=g)}}if(N===0)return this.feasible=!1,u;if(s){n.push([this.varIndexByRow[S],this.varIndexByCol[N]]);var y=this.checkForCycles(n);if(y.length>0)return this.model.messages.push("Cycle in phase 1"),this.model.messages.push("Start :"+y[0]),this.model.messages.push("Length :"+y[1]),this.feasible=!1,u}this.pivot(S,N),u+=1}},e.prototype.phase2=function(){for(var s=this.model.checkForCycles,n=[],i=this.matrix,l=this.rhsColumn,E=this.width-1,_=this.height-1,A=this.precision,u=this.optionalObjectives.length,S=null,h=0,L,f;;){var N=i[this.costRowIndex];u>0&&(S=[]);for(var p=0,M=A,C=!1,g=1;g<=E;g++){if(L=N[g],f=this.unrestrictedVars[this.varIndexByCol[g]]===!0,u>0&&-A<L&&L<A){S.push(g);continue}if(f&&L<0){-L>M&&(M=-L,p=g,C=!0);continue}L>M&&(M=L,p=g,C=!1)}if(u>0)for(var R=0;p===0&&S.length>0&&R<u;){var v=[],y=this.optionalObjectives[R].reducedCosts;M=A;for(var H=0;H<S.length;H++){if(g=S[H],L=y[g],f=this.unrestrictedVars[this.varIndexByCol[g]]===!0,-A<L&&L<A){v.push(g);continue}if(f&&L<0){-L>M&&(M=-L,p=g,C=!0);continue}L>M&&(M=L,p=g,C=!1)}S=v,R+=1}if(p===0)return this.setEvaluation(),this.simplexIters+=1,h;var P=0,U=1/0;this.varIndexByRow;for(var Q=1;Q<=_;Q++){var tt=i[Q],ot=tt[l],X=tt[p];if(!(-A<X&&X<A)){if(X>0&&A>ot&&ot>-A){U=0,P=Q;break}var mt=C?-ot/X:ot/X;mt>A&&U>mt&&(U=mt,P=Q)}}if(U===1/0)return this.evaluation=-1/0,this.bounded=!1,this.unboundedVarIndex=this.varIndexByCol[p],h;if(s){n.push([this.varIndexByRow[P],this.varIndexByCol[p]]);var Nt=this.checkForCycles(n);if(Nt.length>0)return this.model.messages.push("Cycle in phase 2"),this.model.messages.push("Start :"+Nt[0]),this.model.messages.push("Length :"+Nt[1]),this.feasible=!1,h}this.pivot(P,p,!0),h+=1}};var a=[];e.prototype.pivot=function(s,n){var i=this.matrix,l=i[s][n],E=this.height-1,_=this.width-1,A=this.varIndexByRow[s],u=this.varIndexByCol[n];this.varIndexByRow[s]=u,this.varIndexByCol[n]=A,this.rowByVarIndex[u]=s,this.rowByVarIndex[A]=-1,this.colByVarIndex[u]=-1,this.colByVarIndex[A]=n;for(var S=i[s],h=0,L=0;L<=_;L++)S[L]>=-1e-16&&S[L]<=1e-16?S[L]=0:(S[L]/=l,a[h]=L,h+=1);S[n]=1/l;var f,N,p;this.precision;for(var M=0;M<=E;M++)if(M!==s&&!(i[M][n]>=-1e-16&&i[M][n]<=1e-16)){var C=i[M];if(f=C[n],f>=-1e-16&&f<=1e-16)f!==0&&(C[n]=0);else{for(N=0;N<h;N++)L=a[N],p=S[L],p>=-1e-16&&p<=1e-16?p!==0&&(S[L]=0):C[L]=C[L]-f*p;C[n]=-f/l}}var g=this.optionalObjectives.length;if(g>0)for(var R=0;R<g;R+=1){var v=this.optionalObjectives[R].reducedCosts;if(f=v[n],f!==0){for(N=0;N<h;N++)L=a[N],p=S[L],p!==0&&(v[L]=v[L]-f*p);v[n]=-f/l}}},e.prototype.checkForCycles=function(s){for(var n=0;n<s.length-1;n++)for(var i=n+1;i<s.length;i++){var l=s[n],E=s[i];if(l[0]===E[0]&&l[1]===E[1]){if(i-n>s.length-i)break;for(var _=!0,A=1;A<i-n;A++){var u=s[n+A],S=s[i+A];if(u[0]!==S[0]||u[1]!==S[1]){_=!1;break}}if(_)return[n,i-n]}}return[]}}}),me=V({"node_modules/@bygdle/javascript-lp-solver/src/expressions.js"(e,a){function s(u,S,h,L){this.id=u,this.cost=S,this.index=h,this.value=0,this.priority=L}function n(u,S,h,L){s.call(this,u,S,h,L)}n.prototype.isInteger=!0;function i(u,S){s.call(this,u,0,S,0)}i.prototype.isSlack=!0;function l(u,S){this.variable=u,this.coefficient=S}function E(u,S,h){return h===0||h==="required"?null:(S=S||1,h=h||1,u.isMinimization===!1&&(S=-S),u.addVariable(S,"r"+u.relaxationIndex++,!1,!1,h))}function _(u,S,h,L){this.slack=new i("s"+h,h),this.index=h,this.model=L,this.rhs=u,this.isUpperBound=S,this.terms=[],this.termsByVarIndex={},this.relaxation=null}_.prototype.addTerm=function(u,S){var h=S.index,L=this.termsByVarIndex[h];if(L===void 0)L=new l(S,u),this.termsByVarIndex[h]=L,this.terms.push(L),this.isUpperBound===!0&&(u=-u),this.model.updateConstraintCoefficient(this,S,u);else{var f=L.coefficient+u;this.setVariableCoefficient(f,S)}return this},_.prototype.removeTerm=function(u){return this},_.prototype.setRightHandSide=function(u){if(u!==this.rhs){var S=u-this.rhs;this.isUpperBound===!0&&(S=-S),this.rhs=u,this.model.updateRightHandSide(this,S)}return this},_.prototype.setVariableCoefficient=function(u,S){var h=S.index;if(h===-1){console.warn("[Constraint.setVariableCoefficient] Trying to change coefficient of inexistant variable.");return}var L=this.termsByVarIndex[h];if(L===void 0)this.addTerm(u,S);else if(u!==L.coefficient){var f=u-L.coefficient;this.isUpperBound===!0&&(f=-f),L.coefficient=u,this.model.updateConstraintCoefficient(this,S,f)}return this},_.prototype.relax=function(u,S){this.relaxation=E(this.model,u,S),this._relax(this.relaxation)},_.prototype._relax=function(u){u!==null&&(this.isUpperBound?this.setVariableCoefficient(-1,u):this.setVariableCoefficient(1,u))};function A(u,S){this.upperBound=u,this.lowerBound=S,this.model=u.model,this.rhs=u.rhs,this.relaxation=null}A.prototype.isEquality=!0,A.prototype.addTerm=function(u,S){return this.upperBound.addTerm(u,S),this.lowerBound.addTerm(u,S),this},A.prototype.removeTerm=function(u){return this.upperBound.removeTerm(u),this.lowerBound.removeTerm(u),this},A.prototype.setRightHandSide=function(u){this.upperBound.setRightHandSide(u),this.lowerBound.setRightHandSide(u),this.rhs=u},A.prototype.relax=function(u,S){this.relaxation=E(this.model,u,S),this.upperBound.relaxation=this.relaxation,this.upperBound._relax(this.relaxation),this.lowerBound.relaxation=this.relaxation,this.lowerBound._relax(this.relaxation)},a.exports={Constraint:_,Variable:s,IntegerVariable:n,SlackVariable:i,Equality:A,Term:l}}}),iT=V({"node_modules/@bygdle/javascript-lp-solver/src/Tableau/cuttingStrategies.js"(){var e=rt(),a=me().SlackVariable;e.prototype.addCutConstraints=function(s){for(var n=s.length,i=this.height,l=i+n,E=i;E<l;E+=1)this.matrix[E]===void 0&&(this.matrix[E]=this.matrix[E-1].slice());this.height=l,this.nVars=this.width+this.height-2;for(var _,A=this.width-1,u=0;u<n;u+=1){var S=s[u],h=i+u,L=S.type==="min"?-1:1,f=S.varIndex,N=this.rowByVarIndex[f],p=this.matrix[h];if(N===-1){for(p[this.rhsColumn]=L*S.value,_=1;_<=A;_+=1)p[_]=0;p[this.colByVarIndex[f]]=L}else{var M=this.matrix[N],C=M[this.rhsColumn];for(p[this.rhsColumn]=L*(S.value-C),_=1;_<=A;_+=1)p[_]=-L*M[_]}var g=this.getNewElementIndex();this.varIndexByRow[h]=g,this.rowByVarIndex[g]=h,this.colByVarIndex[g]=-1,this.variablesPerIndex[g]=new a("s"+g,g),this.nVars+=1}},e.prototype._addLowerBoundMIRCut=function(s){if(s===this.costRowIndex)return!1;this.model;var n=this.matrix,i=this.variablesPerIndex[this.varIndexByRow[s]];if(!i.isInteger)return!1;var l=n[s][this.rhsColumn],E=l-Math.floor(l);if(E<this.precision||1-this.precision<E)return!1;var _=this.height;n[_]=n[_-1].slice(),this.height+=1,this.nVars+=1;var A=this.getNewElementIndex();this.varIndexByRow[_]=A,this.rowByVarIndex[A]=_,this.colByVarIndex[A]=-1,this.variablesPerIndex[A]=new a("s"+A,A),n[_][this.rhsColumn]=Math.floor(l);for(var u=1;u<this.varIndexByCol.length;u+=1){var S=this.variablesPerIndex[this.varIndexByCol[u]];if(!S.isInteger)n[_][u]=Math.min(0,n[s][u]/(1-E));else{var h=n[s][u],L=Math.floor(h)+Math.max(0,h-Math.floor(h)-E)/(1-E);n[_][u]=L}}for(var f=0;f<this.width;f+=1)n[_][f]-=n[s][f];return!0},e.prototype._addUpperBoundMIRCut=function(s){if(s===this.costRowIndex)return!1;this.model;var n=this.matrix,i=this.variablesPerIndex[this.varIndexByRow[s]];if(!i.isInteger)return!1;var l=n[s][this.rhsColumn],E=l-Math.floor(l);if(E<this.precision||1-this.precision<E)return!1;var _=this.height;n[_]=n[_-1].slice(),this.height+=1,this.nVars+=1;var A=this.getNewElementIndex();this.varIndexByRow[_]=A,this.rowByVarIndex[A]=_,this.colByVarIndex[A]=-1,this.variablesPerIndex[A]=new a("s"+A,A),n[_][this.rhsColumn]=-E;for(var u=1;u<this.varIndexByCol.length;u+=1){var S=this.variablesPerIndex[this.varIndexByCol[u]],h=n[s][u],L=h-Math.floor(h);S.isInteger?L<=E?n[_][u]=-L:n[_][u]=-(1-L)*E/L:h>=0?n[_][u]=-h:n[_][u]=h*E/(1-E)}return!0},e.prototype.applyMIRCuts=function(){}}}),rT=V({"node_modules/@bygdle/javascript-lp-solver/src/Tableau/dynamicModification.js"(){var e=rt();e.prototype._putInBase=function(a){var s=this.rowByVarIndex[a];if(s===-1){for(var n=this.colByVarIndex[a],i=1;i<this.height;i+=1){var l=this.matrix[i][n];if(l<-this.precision||this.precision<l){s=i;break}}this.pivot(s,n)}return s},e.prototype._takeOutOfBase=function(a){var s=this.colByVarIndex[a];if(s===-1){for(var n=this.rowByVarIndex[a],i=this.matrix[n],l=1;l<this.height;l+=1){var E=i[l];if(E<-this.precision||this.precision<E){s=l;break}}this.pivot(n,s)}return s},e.prototype.updateVariableValues=function(){for(var a=this.variables.length,s=Math.round(1/this.precision),n=0;n<a;n+=1){var i=this.variables[n],l=i.index,E=this.rowByVarIndex[l];if(E===-1)i.value=0;else{var _=this.matrix[E][this.rhsColumn];i.value=Math.round((_+Number.EPSILON)*s)/s}}},e.prototype.updateRightHandSide=function(a,s){var n=this.height-1,i=this.rowByVarIndex[a.index];if(i===-1){for(var l=this.colByVarIndex[a.index],E=0;E<=n;E+=1){var _=this.matrix[E];_[this.rhsColumn]-=s*_[l]}var A=this.optionalObjectives.length;if(A>0)for(var u=0;u<A;u+=1){var S=this.optionalObjectives[u].reducedCosts;S[this.rhsColumn]-=s*S[l]}}else this.matrix[i][this.rhsColumn]-=s},e.prototype.updateConstraintCoefficient=function(a,s,n){if(a.index===s.index)throw new Error("[Tableau.updateConstraintCoefficient] constraint index should not be equal to variable index !");var i=this._putInBase(a.index),l=this.colByVarIndex[s.index];if(l===-1)for(var E=this.rowByVarIndex[s.index],_=0;_<this.width;_+=1)this.matrix[i][_]+=n*this.matrix[E][_];else this.matrix[i][l]-=n},e.prototype.updateCost=function(a,s){var n=a.index,i=this.width-1,l=this.colByVarIndex[n];if(l===-1){var E=this.matrix[this.rowByVarIndex[n]],_;if(a.priority===0){var A=this.matrix[0];for(_=0;_<=i;_+=1)A[_]+=s*E[_]}else{var u=this.objectivesByPriority[a.priority].reducedCosts;for(_=0;_<=i;_+=1)u[_]+=s*E[_]}}else this.matrix[0][l]-=s},e.prototype.addConstraint=function(a){var s=a.isUpperBound?1:-1,n=this.height,i=this.matrix[n];i===void 0&&(i=this.matrix[0].slice(),this.matrix[n]=i);for(var l=this.width-1,E=0;E<=l;E+=1)i[E]=0;i[this.rhsColumn]=s*a.rhs;for(var _=a.terms,A=_.length,u=0;u<A;u+=1){var S=_[u],h=S.coefficient,L=S.variable.index,f=this.rowByVarIndex[L];if(f===-1)i[this.colByVarIndex[L]]+=s*h;else{var N=this.matrix[f];for(N[this.rhsColumn],E=0;E<=l;E+=1)i[E]-=s*h*N[E]}}var p=a.index;this.varIndexByRow[n]=p,this.rowByVarIndex[p]=n,this.colByVarIndex[p]=-1,this.height+=1},e.prototype.removeConstraint=function(a){var s=a.index,n=this.height-1,i=this._putInBase(s),l=this.matrix[n];this.matrix[n]=this.matrix[i],this.matrix[i]=l,this.varIndexByRow[i]=this.varIndexByRow[n],this.varIndexByRow[n]=-1,this.rowByVarIndex[s]=-1,this.availableIndexes[this.availableIndexes.length]=s,a.slack.index=-1,this.height-=1},e.prototype.addVariable=function(a){var s=this.height-1,n=this.width,i=this.model.isMinimization===!0?-a.cost:a.cost,l=a.priority,E=this.optionalObjectives.length;if(E>0)for(var _=0;_<E;_+=1)this.optionalObjectives[_].reducedCosts[n]=0;l===0?this.matrix[0][n]=i:(this.setOptionalObjective(l,n,i),this.matrix[0][n]=0);for(var A=1;A<=s;A+=1)this.matrix[A][n]=0;var u=a.index;this.varIndexByCol[n]=u,this.rowByVarIndex[u]=-1,this.colByVarIndex[u]=n,this.width+=1},e.prototype.removeVariable=function(a){var s=a.index,n=this._takeOutOfBase(s),i=this.width-1;if(n!==i){for(var l=this.height-1,E=0;E<=l;E+=1){var _=this.matrix[E];_[n]=_[i]}var A=this.optionalObjectives.length;if(A>0)for(var u=0;u<A;u+=1){var S=this.optionalObjectives[u].reducedCosts;S[n]=S[i]}var h=this.varIndexByCol[i];this.varIndexByCol[n]=h,this.colByVarIndex[h]=n}this.varIndexByCol[i]=-1,this.colByVarIndex[s]=-1,this.availableIndexes[this.availableIndexes.length]=s,a.index=-1,this.width-=1}}}),lT=V({"node_modules/@bygdle/javascript-lp-solver/src/Tableau/log.js"(){var e=rt();e.prototype.log=function(a,s){console.log("****",a,"****"),console.log("Nb Variables",this.width-1),console.log("Nb Constraints",this.height-1),console.log("Basic Indexes",this.varIndexByRow),console.log("Non Basic Indexes",this.varIndexByCol),console.log("Rows",this.rowByVarIndex),console.log("Cols",this.colByVarIndex);var n=5,i="",l=[" "],E,_,A,u,S,h,L,f,N,p,M;for(_=1;_<this.width;_+=1)S=this.varIndexByCol[_],u=this.variablesPerIndex[S],u===void 0?h="c"+S:h=u.id,L=h.length,f=" ",N="	",L>5?f+=" ":N+="	",l[_]=f,i+=N+h;console.log(i);var C,g=this.matrix[this.costRowIndex],R="	";for(E=1;E<this.width;E+=1)C="	",R+=C,R+=l[E],R+=g[E].toFixed(n);for(C="	",R+=C+l[0]+g[0].toFixed(n),console.log(R+"	Z"),A=1;A<this.height;A+=1){for(p=this.matrix[A],M="	",_=1;_<this.width;_+=1)C="	",M+=C+l[_]+p[_].toFixed(n);C="	",M+=C+l[0]+p[0].toFixed(n),S=this.varIndexByRow[A],u=this.variablesPerIndex[S],u===void 0?h="c"+S:h=u.id,console.log(M+"	"+h)}console.log("");var v=this.optionalObjectives.length;if(v>0){console.log("    Optional objectives:");for(var y=0;y<v;y+=1){var H=this.optionalObjectives[y].reducedCosts,P="";for(E=1;E<this.width;E+=1)C=H[E]<0?"":" ",P+=C,P+=l[E],P+=H[E].toFixed(n);C=H[0]<0?"":" ",P+=C+l[0]+H[0].toFixed(n),console.log(P+" z"+y)}}return console.log("Feasible?",this.feasible),console.log("evaluation",this.evaluation),this}}}),oT=V({"node_modules/@bygdle/javascript-lp-solver/src/Tableau/backup.js"(){var e=rt();e.prototype.copy=function(){var a=new e(this.precision);a.width=this.width,a.height=this.height,a.nVars=this.nVars,a.model=this.model,a.variables=this.variables,a.variablesPerIndex=this.variablesPerIndex,a.unrestrictedVars=this.unrestrictedVars,a.lastElementIndex=this.lastElementIndex,a.varIndexByRow=this.varIndexByRow.slice(),a.varIndexByCol=this.varIndexByCol.slice(),a.rowByVarIndex=this.rowByVarIndex.slice(),a.colByVarIndex=this.colByVarIndex.slice(),a.availableIndexes=this.availableIndexes.slice();for(var s=[],n=0;n<this.optionalObjectives.length;n++)s[n]=this.optionalObjectives[n].copy();a.optionalObjectives=s;for(var i=this.matrix,l=new Array(this.height),E=0;E<this.height;E++)l[E]=i[E].slice();return a.matrix=l,a},e.prototype.save=function(){this.savedState=this.copy()},e.prototype.restore=function(){if(this.savedState!==null){var a=this.savedState,s=a.matrix;this.nVars=a.nVars,this.model=a.model,this.variables=a.variables,this.variablesPerIndex=a.variablesPerIndex,this.unrestrictedVars=a.unrestrictedVars,this.lastElementIndex=a.lastElementIndex,this.width=a.width,this.height=a.height;var n,i;for(n=0;n<this.height;n+=1){var l=s[n],E=this.matrix[n];for(i=0;i<this.width;i+=1)E[i]=l[i]}var _=a.varIndexByRow;for(i=0;i<this.height;i+=1)this.varIndexByRow[i]=_[i];for(;this.varIndexByRow.length>this.height;)this.varIndexByRow.pop();var A=a.varIndexByCol;for(n=0;n<this.width;n+=1)this.varIndexByCol[n]=A[n];for(;this.varIndexByCol.length>this.width;)this.varIndexByCol.pop();for(var u=a.rowByVarIndex,S=a.colByVarIndex,h=0;h<this.nVars;h+=1)this.rowByVarIndex[h]=u[h],this.colByVarIndex[h]=S[h];if(a.optionalObjectives.length>0&&this.optionalObjectives.length>0){this.optionalObjectives=[],this.optionalObjectivePerPriority={};for(var L=0;L<a.optionalObjectives.length;L++){var f=a.optionalObjectives[L].copy();this.optionalObjectives[L]=f,this.optionalObjectivePerPriority[f.priority]=f}}}}}}),cT=V({"node_modules/@bygdle/javascript-lp-solver/src/Tableau/branchingStrategies.js"(){var e=rt();function a(s,n){this.index=s,this.value=n}e.prototype.getMostFractionalVar=function(){for(var s=0,n=null,i=null,l=this.model.integerVariables,E=l.length,_=0;_<E;_++){var A=l[_].index,u=this.rowByVarIndex[A];if(u!==-1){var S=this.matrix[u][this.rhsColumn],h=Math.abs(S-Math.round(S));s<h&&(s=h,n=A,i=S)}}return new a(n,i)},e.prototype.getFractionalVarWithLowestCost=function(){for(var s=1/0,n=null,i=null,l=this.model.integerVariables,E=l.length,_=0;_<E;_++){var A=l[_],u=A.index,S=this.rowByVarIndex[u];if(S!==-1){var h=this.matrix[S][this.rhsColumn];if(Math.abs(h-Math.round(h))>this.precision){var L=A.cost;s>L&&(s=L,n=u,i=h)}}}return new a(n,i)}}}),ET=V({"node_modules/@bygdle/javascript-lp-solver/src/Tableau/integerProperties.js"(){var e=rt();e.prototype.countIntegerValues=function(){for(var a=0,s=1;s<this.height;s+=1)if(this.variablesPerIndex[this.varIndexByRow[s]].isInteger){var n=this.matrix[s][this.rhsColumn];n=n-Math.floor(n),n<this.precision&&-n<this.precision&&(a+=1)}return a},e.prototype.isIntegral=function(){for(var a=this.model.integerVariables,s=a.length,n=0;n<s;n++){var i=this.rowByVarIndex[a[n].index];if(i!==-1){var l=this.matrix[i][this.rhsColumn];if(Math.abs(l-Math.round(l))>this.precision)return!1}}return!0},e.prototype.computeFractionalVolume=function(a){for(var s=-1,n=1;n<this.height;n+=1)if(this.variablesPerIndex[this.varIndexByRow[n]].isInteger){var i=this.matrix[n][this.rhsColumn];i=Math.abs(i);var l=Math.min(i-Math.floor(i),Math.floor(i+1));if(l<this.precision){if(!a)return 0}else s===-1?s=i:s*=i}return s===-1?0:s}}}),TT=V({"node_modules/@bygdle/javascript-lp-solver/src/Tableau/index.js"(e,a){nT(),iT(),rT(),lT(),oT(),cT(),ET(),a.exports=rt()}}),xa=V({"node_modules/@bygdle/javascript-lp-solver/src/Tableau/branchAndCut.js"(){var e=rt();function a(i,l,E){this.type=i,this.varIndex=l,this.value=E}function s(i,l){this.relaxedEvaluation=i,this.cuts=l}function n(i,l){return l.relaxedEvaluation-i.relaxedEvaluation}e.prototype.applyCuts=function(i){if(this.restore(),this.addCutConstraints(i),this.simplex(),this.model.useMIRCuts)for(var l=!0;l;){var E=this.computeFractionalVolume(!0);this.applyMIRCuts(),this.simplex();var _=this.computeFractionalVolume(!0);_>=.9*E&&(l=!1)}},e.prototype.branchAndCut=function(){var i=[],l=0,E=this.model.tolerance,_=!0,A=1e99;this.model.timeout&&(A=Date.now()+this.model.timeout);for(var u=1/0,S=null,h=[],L=0;L<this.optionalObjectives.length;L+=1)h.push(1/0);var f=new s(-1/0,[]),N;for(i.push(f);i.length>0&&_===!0&&Date.now()<A;)if(this.model.isMinimization?N=this.bestPossibleEval*(1+E):N=this.bestPossibleEval*(1-E),E>0&&u<N&&(_=!1),f=i.pop(),!(f.relaxedEvaluation>u)){var p=f.cuts;if(this.applyCuts(p),l++,this.feasible!==!1){var M=this.evaluation;if(!(M>u)){if(M===u){for(var C=!0,g=0;g<this.optionalObjectives.length&&!(this.optionalObjectives[g].reducedCosts[0]>h[g]);g+=1)if(this.optionalObjectives[g].reducedCosts[0]<h[g]){C=!1;break}if(C)continue}if(this.isIntegral()===!0){if(this.__isIntegral=!0,l===1){this.branchAndCutIterations=l;return}S=f,u=M;for(var R=0;R<this.optionalObjectives.length;R+=1)h[R]=this.optionalObjectives[R].reducedCosts[0];if(this.model.keep_solutions){var v=this.model.tableau.getSolution(),y=v.generateSolutionSet();y.result=v.evaluation,this.model.solutions||(this.model.solutions=[]),this.model.solutions.push(y)}}else{l===1&&this.save();for(var H=this.getMostFractionalVar(),P=H.index,U=[],Q=[],tt=p.length,ot=0;ot<tt;ot+=1){var X=p[ot];X.varIndex===P?X.type==="min"?Q.push(X):U.push(X):(U.push(X),Q.push(X))}var mt=Math.ceil(H.value),Nt=Math.floor(H.value),Ca=new a("min",P,mt);U.push(Ca);var Ma=new a("max",P,Nt);Q.push(Ma),i.push(new s(M,U)),i.push(new s(M,Q)),i.sort(n)}}}}S!==null&&this.applyCuts(S.cuts),this.branchAndCutIterations=l}}}),_T=V({"node_modules/@bygdle/javascript-lp-solver/src/Model.js"(e,a){var s=rt();xa();var n=me(),i=n.Constraint,l=n.Equality,E=n.Variable,_=n.IntegerVariable;n.Term;function A(u,S){this.tableau=new s(u),this.name=S,this.variables=[],this.integerVariables=[],this.unrestrictedVariables={},this.constraints=[],this.nConstraints=0,this.nVariables=0,this.isMinimization=!0,this.tableauInitialized=!1,this.relaxationIndex=1,this.useMIRCuts=!1,this.checkForCycles=!0,this.messages=[]}a.exports=A,A.prototype.minimize=function(){return this.isMinimization=!0,this},A.prototype.maximize=function(){return this.isMinimization=!1,this},A.prototype._getNewElementIndex=function(){if(this.availableIndexes.length>0)return this.availableIndexes.pop();var u=this.lastElementIndex;return this.lastElementIndex+=1,u},A.prototype._addConstraint=function(u){var S=u.slack;this.tableau.variablesPerIndex[S.index]=S,this.constraints.push(u),this.nConstraints+=1,this.tableauInitialized===!0&&this.tableau.addConstraint(u)},A.prototype.smallerThan=function(u){var S=new i(u,!0,this.tableau.getNewElementIndex(),this);return this._addConstraint(S),S},A.prototype.greaterThan=function(u){var S=new i(u,!1,this.tableau.getNewElementIndex(),this);return this._addConstraint(S),S},A.prototype.equal=function(u){var S=new i(u,!0,this.tableau.getNewElementIndex(),this);this._addConstraint(S);var h=new i(u,!1,this.tableau.getNewElementIndex(),this);return this._addConstraint(h),new l(S,h)},A.prototype.addVariable=function(u,S,h,L,f){if(typeof f=="string")switch(f){case"required":f=0;break;case"strong":f=1;break;case"medium":f=2;break;case"weak":f=3;break;default:f=0;break}var N=this.tableau.getNewElementIndex();S==null&&(S="v"+N),u==null&&(u=0),f==null&&(f=0);var p;return h?(p=new _(S,u,N,f),this.integerVariables.push(p)):p=new E(S,u,N,f),this.variables.push(p),this.tableau.variablesPerIndex[N]=p,L&&(this.unrestrictedVariables[N]=!0),this.nVariables+=1,this.tableauInitialized===!0&&this.tableau.addVariable(p),p},A.prototype._removeConstraint=function(u){var S=this.constraints.indexOf(u);if(S===-1){console.warn("[Model.removeConstraint] Constraint not present in model");return}this.constraints.splice(S,1),this.nConstraints-=1,this.tableauInitialized===!0&&this.tableau.removeConstraint(u),u.relaxation&&this.removeVariable(u.relaxation)},A.prototype.removeConstraint=function(u){return u.isEquality?(this._removeConstraint(u.upperBound),this._removeConstraint(u.lowerBound)):this._removeConstraint(u),this},A.prototype.removeVariable=function(u){var S=this.variables.indexOf(u);if(S===-1){console.warn("[Model.removeVariable] Variable not present in model");return}return this.variables.splice(S,1),this.tableauInitialized===!0&&this.tableau.removeVariable(u),this},A.prototype.updateRightHandSide=function(u,S){return this.tableauInitialized===!0&&this.tableau.updateRightHandSide(u,S),this},A.prototype.updateConstraintCoefficient=function(u,S,h){return this.tableauInitialized===!0&&this.tableau.updateConstraintCoefficient(u,S,h),this},A.prototype.setCost=function(u,S){var h=u-S.cost;return this.isMinimization===!1&&(h=-h),S.cost=u,this.tableau.updateCost(S,h),this},A.prototype.loadJson=function(u){this.isMinimization=u.opType!=="max";for(var S=u.variables,h=u.constraints,L={},f={},N=Object.keys(h),p=N.length,M=0;M<p;M+=1){var C=N[M],g=h[C],R=g.equal,v=g.weight,y=g.priority,H=v!==void 0||y!==void 0,P,U;if(R===void 0){var Q=g.min;Q!==void 0&&(P=this.greaterThan(Q),L[C]=P,H&&P.relax(v,y));var tt=g.max;tt!==void 0&&(U=this.smallerThan(tt),f[C]=U,H&&U.relax(v,y))}else{P=this.greaterThan(R),L[C]=P,U=this.smallerThan(R),f[C]=U;var ot=new l(P,U);H&&ot.relax(v,y)}}var X=Object.keys(S),mt=X.length;this.tolerance=u.tolerance||0,u.timeout&&(this.timeout=u.timeout),u.options&&(u.options.timeout&&(this.timeout=u.options.timeout),this.tolerance===0&&(this.tolerance=u.options.tolerance||0),u.options.useMIRCuts&&(this.useMIRCuts=u.options.useMIRCuts),typeof u.options.exitOnCycles>"u"?this.checkForCycles=!0:this.checkForCycles=u.options.exitOnCycles,u.options.keep_solutions?this.keep_solutions=u.options.keep_solutions:this.keep_solutions=!1);for(var Nt=u.ints||{},Ca=u.binaries||{},Ma=u.unrestricted||{},IE=u.optimize,da=0;da<mt;da+=1){var Yt=X[da],ga=S[Yt],YN=ga[IE]||0,DE=!!Ca[Yt],FN=!!Nt[Yt]||DE,kN=!!Ma[Yt],Ga=this.addVariable(YN,Yt,FN,kN);DE&&this.smallerThan(1).addTerm(1,Ga);var OE=Object.keys(ga);for(M=0;M<OE.length;M+=1){var Se=OE[M];if(Se!==IE){var yE=ga[Se],vE=L[Se];vE!==void 0&&vE.addTerm(yE,Ga);var HE=f[Se];HE!==void 0&&HE.addTerm(yE,Ga)}}}return this},A.prototype.getNumberOfIntegerVariables=function(){return this.integerVariables.length},A.prototype.solve=function(){return this.tableauInitialized===!1&&(this.tableau.setModel(this),this.tableauInitialized=!0),this.tableau.solve()},A.prototype.isFeasible=function(){return this.tableau.feasible},A.prototype.save=function(){return this.tableau.save()},A.prototype.restore=function(){return this.tableau.restore()},A.prototype.activateMIRCuts=function(u){this.useMIRCuts=u},A.prototype.debug=function(u){this.checkForCycles=u},A.prototype.log=function(u){return this.tableau.log(u)}}}),AT=V({"node_modules/@bygdle/javascript-lp-solver/src/Validation.js"(e){e.CleanObjectiveAttributes=function(a){var s,n,i;if(typeof a.optimize=="string")if(a.constraints[a.optimize]){s=Math.random();for(n in a.variables)a.variables[n][a.optimize]&&(a.variables[n][s]=a.variables[n][a.optimize]);return a.constraints[s]=a.constraints[a.optimize],delete a.constraints[a.optimize],a}else return a;else{for(i in a.optimize)if(a.constraints[i])if(a.constraints[i]==="equal")delete a.optimize[i];else{s=Math.random();for(n in a.variables)a.variables[n][i]&&(a.variables[n][s]=a.variables[n][i]);a.constraints[s]=a.constraints[i],delete a.constraints[i]}return a}}}}),Ne=V({"node_modules/@bygdle/javascript-lp-solver/src/External/lpsolve/Reformat.js"(e,a){function s(i){var l={is_blank:/^\W{0,}$/,is_objective:/(max|min)(imize){0,}\:/i,is_int:/^(?!\/\*)\W{0,}int/i,is_bin:/^(?!\/\*)\W{0,}bin/i,is_constraint:/(\>|\<){0,}\=/i,is_unrestricted:/^\S{0,}unrestricted/i,parse_lhs:/(\-|\+){0,1}\s{0,1}\d{0,}\.{0,}\d{0,}\s{0,}[A-Za-z]\S{0,}/gi,parse_rhs:/(\-|\+){0,1}\d{1,}\.{0,}\d{0,}\W{0,}\;{0,1}$/i,parse_dir:/(\>|\<){0,}\=/gi,parse_int:/[^\s|^\,]+/gi,parse_bin:/[^\s|^\,]+/gi,get_num:/(\-|\+){0,1}(\W|^)\d+\.{0,1}\d{0,}/g,get_word:/[A-Za-z].*/},E={opType:"",optimize:"_obj",constraints:{},variables:{}},_={">=":"min","<=":"max","=":"equal"},A="",u=null,S="",h="",L="",f=0;typeof i=="string"&&(i=i.split(`
`));for(var N=0;N<i.length;N++)if(L="__"+N,A=i[N],u=null,l.is_objective.test(A))E.opType=A.match(/(max|min)/gi)[0],u=A.match(l.parse_lhs).map(function(C){return C.replace(/\s+/,"")}).slice(1),u.forEach(function(C){S=C.match(l.get_num),S===null?C.substr(0,1)==="-"?S=-1:S=1:S=S[0],S=parseFloat(S),h=C.match(l.get_word)[0].replace(/\;$/,""),E.variables[h]=E.variables[h]||{},E.variables[h]._obj=S});else if(l.is_int.test(A))u=A.match(l.parse_int).slice(1),E.ints=E.ints||{},u.forEach(function(C){C=C.replace(";",""),E.ints[C]=1});else if(l.is_bin.test(A))u=A.match(l.parse_bin).slice(1),E.binaries=E.binaries||{},u.forEach(function(C){C=C.replace(";",""),E.binaries[C]=1});else if(l.is_constraint.test(A)){var p=A.indexOf(":"),M=p===-1?A:A.slice(p+1);u=M.match(l.parse_lhs).map(function(C){return C.replace(/\s+/,"")}),u.forEach(function(C){S=C.match(l.get_num),S===null?C.substr(0,1)==="-"?S=-1:S=1:S=S[0],S=parseFloat(S),h=C.match(l.get_word)[0],E.variables[h]=E.variables[h]||{},E.variables[h][L]=S}),f=parseFloat(A.match(l.parse_rhs)[0]),A=_[A.match(l.parse_dir)[0]],E.constraints[L]=E.constraints[L]||{},E.constraints[L][A]=f}else l.is_unrestricted.test(A)&&(u=A.match(l.parse_int).slice(1),E.unrestricted=E.unrestricted||{},u.forEach(function(C){C=C.replace(";",""),E.unrestricted[C]=1}));return E}function n(i){if(!i)throw new Error("Solver requires a model to operate on");var l="",E={max:"<=",min:">=",equal:"="},_=new RegExp("[^A-Za-z0-9_[{}/.&#$%~'@^]","gi");if(i.opType){l+=i.opType+":";for(var A in i.variables)i.variables[A][A]=i.variables[A][A]?i.variables[A][A]:1,i.variables[A][i.optimize]&&(l+=" "+i.variables[A][i.optimize]+" "+A.replace(_,"_"))}else l+="max:";l+=`;

`;for(var u in i.constraints)for(var S in i.constraints[u])if(typeof E[S]<"u"){for(var h in i.variables)typeof i.variables[h][u]<"u"&&(l+=" "+i.variables[h][u]+" "+h.replace(_,"_"));l+=" "+E[S]+" "+i.constraints[u][S],l+=`;
`}if(i.ints){l+=`

`;for(var L in i.ints)l+="int "+L.replace(_,"_")+`;
`}if(i.unrestricted){l+=`

`;for(var f in i.unrestricted)l+="unrestricted "+f.replace(_,"_")+`;
`}return l}a.exports=function(i){return i.length?s(i):n(i)}}}),uT=V({"node_modules/@bygdle/javascript-lp-solver/src/External/lpsolve/main.js"(e){e.reformat=Ne(),e.solve=function(a){return new Promise(function(s,n){typeof window<"u"&&n("Function Not Available in Browser"),Ne()(a),a.external||n("Data for this function must be contained in the 'external' attribute. Not seeing anything there."),a.external.binPath||n("No Executable | Binary path provided in arguments as 'binPath'"),a.external.args||n("No arguments array for cli | bash provided on 'args' attribute"),a.external.tempName||n("No 'tempName' given. This is necessary to produce a staging file for the solver to operate on")})}}}),ST=V({"node_modules/@bygdle/javascript-lp-solver/src/External/main.js"(e,a){a.exports={lpsolve:uT()}}}),Ua=V({"node_modules/@bygdle/javascript-lp-solver/src/Polyopt.js"(e,a){a.exports=function(s,n){var i=n.optimize,l=JSON.parse(JSON.stringify(n.optimize)),E=Object.keys(n.optimize),_,A=0,u={},S="",h={},L=[],f,N,p,M;for(delete n.optimize,f=0;f<E.length;f++)l[E[f]]=0;for(f=0;f<E.length;f++){n.optimize=E[f],n.opType=i[E[f]],_=s.Solve(n,void 0,void 0,!0);for(M in E)if(!n.variables[E[M]]){_[E[M]]=_[E[M]]?_[E[M]]:0;for(p in n.variables)n.variables[p][E[M]]&&_[p]&&(_[E[M]]+=_[p]*n.variables[p][E[M]])}for(S="base",N=0;N<E.length;N++)_[E[N]]?S+="-"+(_[E[N]]*1e3|0)/1e3:S+="-0";if(!u[S]){for(u[S]=1,A++,N=0;N<E.length;N++)_[E[N]]&&(l[E[N]]+=_[E[N]]);delete _.feasible,delete _.result,L.push(_)}}for(f=0;f<E.length;f++)n.constraints[E[f]]={equal:l[E[f]]/A};n.optimize="cheater-"+Math.random(),n.opType="max";for(f in n.variables)n.variables[f].cheater=1;for(f in L)for(p in L[f])h[p]=h[p]||{min:1e99,max:-1e99};for(f in h)for(p in L)L[p][f]?(L[p][f]>h[f].max&&(h[f].max=L[p][f]),L[p][f]<h[f].min&&(h[f].min=L[p][f])):(L[p][f]=0,h[f].min=0);return _=s.Solve(n,void 0,void 0,!0),{midpoint:_,vertices:L,ranges:h}}}}),hT=V({"node_modules/@bygdle/javascript-lp-solver/src/main.js"(e,a){var s=TT(),n=_T(),i=xa(),l=me(),E=AT(),_=l.Constraint,A=l.Variable,u=l.Numeral,S=l.Term,h=ST(),L=function(){this.Model=n,this.branchAndCut=i,this.Constraint=_,this.Variable=A,this.Numeral=u,this.Term=S,this.Tableau=s,this.lastSolvedModel=null,this.External=h,this.ReformatLP=Ne(),this.MultiObjective=function(f){return Ua()(this,f)}};L.prototype.Solve=function(f,N,p,M){if(M)for(var C in E)f=E[C](f);if(!f)throw new Error("Solver requires a model to operate on");if(typeof f.optimize=="object"&&Object.keys(f.optimize>1))return Ua()(this,f);if(f.external){var g=Object.keys(h);if(g=JSON.stringify(g),!f.external.solver)throw new Error("The model you provided has an 'external' object that doesn't have a solver attribute. Use one of the following:"+g);if(!h[f.external.solver])throw new Error("No support (yet) for "+f.external.solver+". Please use one of these instead:"+g);return h[f.external.solver].solve(f)}else{f instanceof n||(f=new n(N).loadJson(f));var R=f.solve();if(R.solutionSet=R.generateSolutionSet(),p)return R;var v={};return v.feasible=R.feasible,v.result=R.evaluation,v.bounded=R.bounded,R._tableau.__isIntegral&&(v.isIntegral=!0),Object.keys(R.solutionSet).forEach(function(y){R.solutionSet[y]!==0&&(v[y]=R.solutionSet[y])}),v}},typeof define=="function"?define([],function(){return new L}):typeof window=="object"?window.solver=new L:typeof self=="object"&&(self.solver=new L),a.exports=new L}}),jt={};D(jt,{Runner:()=>oa,api:()=>ME,artbox:()=>ht,artifact:()=>I,character:()=>Wa,characters:()=>Lt,charbox:()=>G,cmd2:()=>xs,effect:()=>r,effects:()=>oe,enemy:()=>ja,food:()=>gt,foods:()=>Ht,formula:()=>as,instance:()=>Ks,optimizer:()=>SE,resonances:()=>ks,rotation:()=>ne,scaling:()=>o,sets:()=>J,stats:()=>t,store:()=>wt,strings:()=>T,subject:()=>Xa,utils:()=>Kc,weapon:()=>m,weapons:()=>Z,worker:()=>xc});var Wa={};D(Wa,{Character:()=>Pe,Export:()=>ws,Import:()=>bs});var ja={};D(ja,{Enemy:()=>Ja,EnemyConnector:()=>Za,EnemyEvent:()=>_t,Export:()=>Ie,Import:()=>qt});var t={};D(t,{AuraToDmg:()=>Ge,DmgToAtkFlat:()=>Me,DmgToAtkPercent:()=>pe,DmgToAura:()=>mT,DmgToCritDmg:()=>ge,DmgToCritRate:()=>de,DmgToFlatDmg:()=>Ce,DmgToRes:()=>zt,Elements:()=>Ct,FlatStats:()=>Qa,Mainstats:()=>LT,PieceToMainstats:()=>Re,Substats:()=>It,Swirlable:()=>fT,TrToDmg:()=>$a,aura:()=>W,piece:()=>et,region:()=>qa,stat:()=>c,weapon:()=>za});function lt(...e){const a={},s={};let n=0;for(const i of e)a[i]=n,s[n]=i,n++;return it(F({},a),{Get(i){const l=a[i];if(l===void 0)throw new Error(`Stat not found: ${i}`);return l},Name(i){const l=s[i];if(l===void 0)throw new Error(`Stat not found: ${i}`);return l},Has(i){return Object.keys(a).includes(i)},Values(){return Object.values(a)},Length(){return e.length}})}var c=lt("NONE","SHIELDED","ATK","ATK_BASE","ATK_PERCENT","ATK_FLAT","HP_CURRENT","HP","HP_BASE","HP_PERCENT","HP_FLAT","DEF","DEF_BASE","DEF_PERCENT","DEF_FLAT","ENERGY_CURRENT","ELEMENTAL_MASTERY","ENERGY_RECHARGE","HEALING_BONUS","CRIT_RATE","EXTRA_CRIT_RATE","CRIT_DMG","ALL_DMG","DEFIGNORED","DEFREDUCTION","DMG_FLAT","PYRO_DMG","CRYO_DMG","HYDRO_DMG","ELECTRO_DMG","ANEMO_DMG","GEO_DMG","DENDRO_DMG","PHYSICAL_DMG","PYRO_DMG_FLAT","CRYO_DMG_FLAT","HYDRO_DMG_FLAT","ELECTRO_DMG_FLAT","ANEMO_DMG_FLAT","GEO_DMG_FLAT","DENDRO_DMG_FLAT","PHYSICAL_DMG_FLAT","MELT_DMG","VAPORIZE_DMG","SWIRL_DMG","OVERLOAD_DMG","ELECTROCHARGE_DMG","SUPERCONDUCT_DMG","SHATTER_DMG","AGGRAVATE_DMG","SPREAD_DMG","BLOOM_DMG","HYPERBLOOM_DMG","BURGEON_DMG","BURNING_DMG","NORMAL_ATTACK_DMG","CHARGED_ATTACK_DMG","AIMED_SHOT_DMG","CHARGED_AIMED_SHOT_DMG","PLUNGE_ATTACK_DMG","ELEMENTAL_SKILL_DMG","ELEMENTAL_BURST_DMG","NORMAL_ATTACK_DMG_FLAT","CHARGED_ATTACK_DMG_FLAT","AIMED_SHOT_DMG_FLAT","CHARGED_AIMED_SHOT_DMG_FLAT","PLUNGE_ATTACK_DMG_FLAT","ELEMENTAL_SKILL_DMG_FLAT","ELEMENTAL_BURST_DMG_FLAT","NORMAL_ATTACK_LEVEL","ELEMENTAL_SKILL_LEVEL","ELEMENTAL_BURST_LEVEL","NORMAL_ATTACK_LEVEL_UP","ELEMENTAL_SKILL_LEVEL_UP","ELEMENTAL_BURST_LEVEL_UP","NORMAL_ATTACK_ATK_PERCENT","CHARGED_ATTACK_ATK_PERCENT","PLUNGE_ATTACK_ATK_PERCENT","AIMED_SHOT_ATK_PERCENT","CHARGED_AIMED_SHOT_ATK_PERCENT","ELEMENTAL_SKILL_ATK_PERCENT","ELEMENTAL_BURST_ATK_PERCENT","PYRO_ATK_PERCENT","CRYO_ATK_PERCENT","ELECTRO_ATK_PERCENT","HYDRO_ATK_PERCENT","GEO_ATK_PERCENT","ANEMO_ATK_PERCENT","DENDRO_ATK_PERCENT","PHYSICAL_ATK_PERCENT","NORMAL_ATTACK_ATK_FLAT","CHARGED_ATTACK_ATK_FLAT","PLUNGE_ATTACK_ATK_FLAT","AIMED_SHOT_ATK_FLAT","CHARGED_AIMED_SHOT_ATK_FLAT","ELEMENTAL_SKILL_ATK_FLAT","ELEMENTAL_BURST_ATK_FLAT","PYRO_ATK_FLAT","CRYO_ATK_FLAT","ELECTRO_ATK_FLAT","HYDRO_ATK_FLAT","GEO_ATK_FLAT","ANEMO_ATK_FLAT","DENDRO_ATK_FLAT","PHYSICAL_ATK_FLAT","NORMAL_ATTACK_CRIT_RATE","CHARGED_ATTACK_CRIT_RATE","PLUNGE_ATTACK_CRIT_RATE","AIMED_SHOT_CRIT_RATE","CHARGED_AIMED_SHOT_CRIT_RATE","ELEMENTAL_SKILL_CRIT_RATE","ELEMENTAL_BURST_CRIT_RATE","PYRO_CRIT_RATE","CRYO_CRIT_RATE","ELECTRO_CRIT_RATE","HYDRO_CRIT_RATE","GEO_CRIT_RATE","ANEMO_CRIT_RATE","DENDRO_CRIT_RATE","PHYSICAL_CRIT_RATE","NORMAL_ATTACK_CRIT_DMG","CHARGED_ATTACK_CRIT_DMG","PLUNGE_ATTACK_CRIT_DMG","AIMED_SHOT_CRIT_DMG","CHARGED_AIMED_SHOT_CRIT_DMG","ELEMENTAL_SKILL_CRIT_DMG","ELEMENTAL_BURST_CRIT_DMG","PYRO_CRIT_DMG","CRYO_CRIT_DMG","ELECTRO_CRIT_DMG","HYDRO_CRIT_DMG","GEO_CRIT_DMG","ANEMO_CRIT_DMG","DENDRO_CRIT_DMG","PHYSICAL_CRIT_DMG","LEVEL","ASCENSION","PYRO_RES","CRYO_RES","ELECTRO_RES","HYDRO_RES","GEO_RES","ANEMO_RES","DENDRO_RES","PHYSICAL_RES"),W=lt("NONE","PYRO","CRYO","HYDRO","ELECTRO","DENDRO","FROZEN","QUICKEN"),za=lt("SWORD","CLAYMORE","POLEARM","CATALYST","BOW"),et=lt("FLOWER","PLUME","SANDS","GOBLET","CIRCLET"),qa=lt("NONE","MONDSTADT","LIYUE","INAZUMA","SUMERU","FONTAINE","NATLAN","SNEZHNAYA","KHAENRIAH"),Ct=[c.PYRO_DMG,c.CRYO_DMG,c.HYDRO_DMG,c.ELECTRO_DMG,c.ANEMO_DMG,c.GEO_DMG,c.DENDRO_DMG,c.PHYSICAL_DMG],LT=[c.HP_FLAT,c.ATK_FLAT,c.ATK_PERCENT,c.HP_PERCENT,c.DEF_PERCENT,c.ENERGY_RECHARGE,c.ELEMENTAL_MASTERY,c.PYRO_DMG,c.CRYO_DMG,c.HYDRO_DMG,c.ELECTRO_DMG,c.ANEMO_DMG,c.GEO_DMG,c.DENDRO_DMG,c.PHYSICAL_DMG,c.CRIT_RATE,c.CRIT_DMG,c.HEALING_BONUS],It=[c.DEF_FLAT,c.HP_FLAT,c.ATK_FLAT,c.ATK_PERCENT,c.HP_PERCENT,c.DEF_PERCENT,c.ENERGY_RECHARGE,c.ELEMENTAL_MASTERY,c.CRIT_RATE,c.CRIT_DMG],Qa=[c.SHIELDED,c.DEF,c.DEF_BASE,c.DEF_FLAT,c.HP,c.HP_BASE,c.HP_FLAT,c.ATK,c.ATK_BASE,c.ATK_FLAT,c.ELEMENTAL_MASTERY,c.DMG_FLAT,c.LEVEL,c.ASCENSION,c.NORMAL_ATTACK_LEVEL,c.ELEMENTAL_SKILL_LEVEL,c.ELEMENTAL_BURST_LEVEL,c.NORMAL_ATTACK_LEVEL_UP,c.ELEMENTAL_SKILL_LEVEL_UP,c.ELEMENTAL_BURST_LEVEL_UP,c.NORMAL_ATTACK_ATK_FLAT,c.CHARGED_ATTACK_ATK_FLAT,c.PLUNGE_ATTACK_ATK_FLAT,c.AIMED_SHOT_ATK_FLAT,c.CHARGED_AIMED_SHOT_ATK_FLAT,c.ELEMENTAL_SKILL_ATK_FLAT,c.ELEMENTAL_BURST_ATK_FLAT,c.PYRO_ATK_FLAT,c.CRYO_ATK_FLAT,c.ELECTRO_ATK_FLAT,c.HYDRO_ATK_FLAT,c.GEO_ATK_FLAT,c.ANEMO_ATK_FLAT,c.DENDRO_ATK_FLAT,c.PHYSICAL_DMG_FLAT,c.NORMAL_ATTACK_DMG_FLAT,c.CHARGED_ATTACK_DMG_FLAT,c.PLUNGE_ATTACK_DMG_FLAT,c.AIMED_SHOT_DMG_FLAT,c.CHARGED_AIMED_SHOT_DMG_FLAT,c.ELEMENTAL_SKILL_DMG_FLAT,c.ELEMENTAL_BURST_DMG_FLAT,c.PYRO_DMG_FLAT,c.CRYO_DMG_FLAT,c.ELECTRO_DMG_FLAT,c.HYDRO_DMG_FLAT,c.GEO_DMG_FLAT,c.ANEMO_DMG_FLAT,c.DENDRO_DMG_FLAT,c.PHYSICAL_DMG_FLAT],fT=[W.CRYO,W.PYRO,W.HYDRO,W.ELECTRO,W.FROZEN];function pe(e){switch(e){case c.PYRO_DMG:return c.PYRO_ATK_PERCENT;case c.HYDRO_DMG:return c.HYDRO_ATK_PERCENT;case c.CRYO_DMG:return c.CRYO_ATK_PERCENT;case c.ELECTRO_DMG:return c.ELECTRO_ATK_PERCENT;case c.ANEMO_DMG:return c.ANEMO_ATK_PERCENT;case c.GEO_DMG:return c.GEO_ATK_PERCENT;case c.DENDRO_DMG:return c.DENDRO_ATK_PERCENT;case c.PHYSICAL_DMG:return c.PHYSICAL_ATK_PERCENT;case c.NORMAL_ATTACK_DMG:return c.NORMAL_ATTACK_ATK_PERCENT;case c.CHARGED_ATTACK_DMG:return c.CHARGED_ATTACK_ATK_PERCENT;case c.AIMED_SHOT_DMG:return c.AIMED_SHOT_ATK_PERCENT;case c.CHARGED_AIMED_SHOT_DMG:return c.CHARGED_AIMED_SHOT_ATK_PERCENT;case c.PLUNGE_ATTACK_DMG:return c.PLUNGE_ATTACK_ATK_PERCENT;case c.ELEMENTAL_SKILL_DMG:return c.ELEMENTAL_SKILL_ATK_PERCENT;case c.ELEMENTAL_BURST_DMG:return c.ELEMENTAL_BURST_ATK_PERCENT}return c.NONE}function Ce(e){switch(e){case c.PYRO_DMG:return c.PYRO_DMG_FLAT;case c.HYDRO_DMG:return c.HYDRO_DMG_FLAT;case c.CRYO_DMG:return c.CRYO_DMG_FLAT;case c.ELECTRO_DMG:return c.ELECTRO_DMG_FLAT;case c.ANEMO_DMG:return c.ANEMO_DMG_FLAT;case c.GEO_DMG:return c.GEO_DMG_FLAT;case c.DENDRO_DMG:return c.DENDRO_DMG_FLAT;case c.PHYSICAL_DMG:return c.PHYSICAL_DMG_FLAT;case c.NORMAL_ATTACK_DMG:return c.NORMAL_ATTACK_DMG_FLAT;case c.CHARGED_ATTACK_DMG:return c.CHARGED_ATTACK_DMG_FLAT;case c.AIMED_SHOT_DMG:return c.AIMED_SHOT_DMG_FLAT;case c.CHARGED_AIMED_SHOT_DMG:return c.CHARGED_AIMED_SHOT_DMG_FLAT;case c.PLUNGE_ATTACK_DMG:return c.PLUNGE_ATTACK_DMG_FLAT;case c.ELEMENTAL_SKILL_DMG:return c.ELEMENTAL_SKILL_DMG_FLAT;case c.ELEMENTAL_BURST_DMG:return c.ELEMENTAL_BURST_DMG_FLAT}return c.NONE}function Me(e){switch(e){case c.PYRO_DMG:return c.PYRO_ATK_FLAT;case c.HYDRO_DMG:return c.HYDRO_ATK_FLAT;case c.CRYO_DMG:return c.CRYO_ATK_FLAT;case c.ELECTRO_DMG:return c.ELECTRO_ATK_FLAT;case c.ANEMO_DMG:return c.ANEMO_ATK_FLAT;case c.GEO_DMG:return c.GEO_ATK_FLAT;case c.DENDRO_DMG:return c.DENDRO_ATK_FLAT;case c.PHYSICAL_DMG:return c.PHYSICAL_ATK_FLAT;case c.NORMAL_ATTACK_DMG:return c.NORMAL_ATTACK_ATK_FLAT;case c.CHARGED_ATTACK_DMG:return c.CHARGED_ATTACK_ATK_FLAT;case c.AIMED_SHOT_DMG:return c.AIMED_SHOT_ATK_FLAT;case c.CHARGED_AIMED_SHOT_DMG:return c.CHARGED_AIMED_SHOT_ATK_FLAT;case c.PLUNGE_ATTACK_DMG:return c.PLUNGE_ATTACK_ATK_FLAT;case c.ELEMENTAL_SKILL_DMG:return c.ELEMENTAL_SKILL_ATK_FLAT;case c.ELEMENTAL_BURST_DMG:return c.ELEMENTAL_BURST_ATK_FLAT}return c.NONE}function de(e){switch(e){case c.PYRO_DMG:return c.PYRO_CRIT_RATE;case c.HYDRO_DMG:return c.HYDRO_CRIT_RATE;case c.CRYO_DMG:return c.CRYO_CRIT_RATE;case c.ELECTRO_DMG:return c.ELECTRO_CRIT_RATE;case c.ANEMO_DMG:return c.ANEMO_CRIT_RATE;case c.GEO_DMG:return c.GEO_CRIT_RATE;case c.DENDRO_DMG:return c.DENDRO_CRIT_RATE;case c.PHYSICAL_DMG:return c.PHYSICAL_CRIT_RATE;case c.NORMAL_ATTACK_DMG:return c.NORMAL_ATTACK_CRIT_RATE;case c.CHARGED_ATTACK_DMG:return c.CHARGED_ATTACK_CRIT_RATE;case c.AIMED_SHOT_DMG:return c.AIMED_SHOT_CRIT_RATE;case c.CHARGED_AIMED_SHOT_DMG:return c.CHARGED_AIMED_SHOT_CRIT_RATE;case c.PLUNGE_ATTACK_DMG:return c.PLUNGE_ATTACK_CRIT_RATE;case c.ELEMENTAL_SKILL_DMG:return c.ELEMENTAL_SKILL_CRIT_RATE;case c.ELEMENTAL_BURST_DMG:return c.ELEMENTAL_BURST_CRIT_RATE}return c.NONE}function ge(e){switch(e){case c.PYRO_DMG:return c.PYRO_CRIT_DMG;case c.HYDRO_DMG:return c.HYDRO_CRIT_DMG;case c.CRYO_DMG:return c.CRYO_CRIT_DMG;case c.ELECTRO_DMG:return c.ELECTRO_CRIT_DMG;case c.ANEMO_DMG:return c.ANEMO_CRIT_DMG;case c.GEO_DMG:return c.GEO_CRIT_DMG;case c.DENDRO_DMG:return c.DENDRO_CRIT_DMG;case c.PHYSICAL_DMG:return c.PHYSICAL_CRIT_DMG;case c.NORMAL_ATTACK_DMG:return c.NORMAL_ATTACK_CRIT_DMG;case c.CHARGED_ATTACK_DMG:return c.CHARGED_ATTACK_CRIT_DMG;case c.AIMED_SHOT_DMG:return c.AIMED_SHOT_CRIT_DMG;case c.CHARGED_AIMED_SHOT_DMG:return c.CHARGED_AIMED_SHOT_CRIT_DMG;case c.PLUNGE_ATTACK_DMG:return c.PLUNGE_ATTACK_CRIT_DMG;case c.ELEMENTAL_SKILL_DMG:return c.ELEMENTAL_SKILL_CRIT_DMG;case c.ELEMENTAL_BURST_DMG:return c.ELEMENTAL_BURST_CRIT_DMG}return c.NONE}function zt(e){switch(e){case c.PYRO_DMG:return c.PYRO_RES;case c.HYDRO_DMG:return c.HYDRO_RES;case c.CRYO_DMG:return c.CRYO_RES;case c.ELECTRO_DMG:return c.ELECTRO_RES;case c.ANEMO_DMG:return c.ANEMO_RES;case c.GEO_DMG:return c.GEO_RES;case c.DENDRO_DMG:return c.DENDRO_RES;case c.PHYSICAL_DMG:return c.PHYSICAL_RES}return c.NONE}function Ge(e){switch(e){case W.PYRO:return c.PYRO_DMG;case W.HYDRO:return c.HYDRO_DMG;case W.CRYO:return c.CRYO_DMG;case W.FROZEN:return c.CRYO_DMG;case W.ELECTRO:return c.ELECTRO_DMG;case W.DENDRO:return c.DENDRO_DMG;case W.QUICKEN:return c.DENDRO_DMG}return c.NONE}function mT(e){switch(e){case c.PYRO_DMG:return W.PYRO;case c.HYDRO_DMG:return W.HYDRO;case c.CRYO_DMG:return W.CRYO;case c.ELECTRO_DMG:return W.ELECTRO;case c.DENDRO_DMG:return W.DENDRO}return c.NONE}function $a(e){switch(e){case c.OVERLOAD_DMG:return c.PYRO_DMG;case c.ELECTROCHARGE_DMG:return c.ELECTRO_DMG;case c.SUPERCONDUCT_DMG:return c.CRYO_DMG;case c.SHATTER_DMG:return c.PHYSICAL_DMG;case c.BURNING_DMG:return c.PYRO_DMG;case c.BURGEON_DMG:return c.DENDRO_DMG;case c.BLOOM_DMG:return c.DENDRO_DMG;case c.HYPERBLOOM_DMG:return c.DENDRO_DMG}return c.NONE}function Re(e){switch(e){case et.FLOWER:return[c.HP_FLAT];case et.PLUME:return[c.ATK_FLAT];case et.SANDS:return[c.ATK_PERCENT,c.HP_PERCENT,c.DEF_PERCENT,c.ENERGY_RECHARGE,c.ELEMENTAL_MASTERY];case et.GOBLET:return[c.ATK_PERCENT,c.HP_PERCENT,c.DEF_PERCENT,c.ELEMENTAL_MASTERY,...Ct];case et.CIRCLET:return[c.ATK_PERCENT,c.HP_PERCENT,c.DEF_PERCENT,c.ELEMENTAL_MASTERY,c.CRIT_RATE,c.CRIT_DMG,c.HEALING_BONUS]}return[]}var Xa={};D(Xa,{Subject:()=>Et});var Et=class{constructor(e,a){this.Title=a,this.props=new Float64Array(e),this.observers=Array.from(Array(e)).fill(0).map(()=>[])}Length(){return this.props.length}Get(e){const a=this.props[e];if(a===void 0)throw new Error(`Subject property out of bounds: ${e}`);return a}Set(e,a,s){return this.props[e]=a,this.Notify(e,s)}Notify(e,a){for(const s of this.observers[e])s.Enabled()&&s.Notify(a);return this}CreateObserver(e,a){let s=!0;const n={prop:e,Enabled(){return s},Enable(){return s=!0,n},Disable(){return s=!1,n},Remove:()=>this.RemoveObserver(n),Notify(i){return a(i),n}};return this.observers[e].push(n),n}RemoveObserver(e){const a=this.observers[e.prop].indexOf(e);return a===-1?!1:(this.observers[e.prop].splice(a,1),!0)}CreateModifier(e,a){let s=!1;const n={Title:this.Title,Enabled(){return s},Enable:()=>(s||(this.Set(e,this.Get(e)+a,n),s=!0),n),Disable:()=>(s&&(this.Set(e,this.Get(e)-a,n),s=!1),n),GetProp(){return e},GetValue(){return a},SetProp(i){const l=s;return n.Disable(),e=i,l&&n.Enable(),n},SetValue(i){const l=s;return n.Disable(),a=i,l&&n.Enable(),n}};return n.Enable(),n}},_t=lt("CHANGE_AURA","CHANGE_BASE_RES"),Ja=class{constructor(e){this.name=e,this.Event=new Et(_t.Length(),"ENEMY_EVENT"),this.Subject=new Et(c.Length(),"ENEMY_STATS"),this.auras=[],this.baseMods=Ct.map(a=>this.Subject.CreateModifier(zt(a),.1)),this.SetLevel(90)}GetLevel(){return this.Subject.Get(c.LEVEL)}SetLevel(e){return this.Subject.Set(c.LEVEL,e),this}Affected(e){for(const a of this.auras)if(Ge(a)===e)return!0;return!1}HasAura(e){return this.auras.includes(e)}SetAuras(...e){return this.auras=e,this.Event.Notify(_t.CHANGE_AURA),this}GetAuras(){return this.auras}GetBaseRes(e){const a=this.baseMods.find(s=>s.GetProp()===e);if(!a)throw new Error(`Cannot find the given RES: ${e}`);return a.GetValue()}SetBaseRes(e,a){const s=this.baseMods.find(n=>n.GetProp()===e);if(!s)throw new Error(`Cannot find the given RES: ${e}`);return s.SetValue(a),this.Event.Notify(_t.CHANGE_BASE_RES),this}};function Ie(e){const a={level:e.GetLevel(),auras:e.GetAuras(),modifiers:[]};for(const s of Ct){const n=zt(s),i=e.GetBaseRes(n);a.modifiers.push({stat:n,value:i})}return a}function qt(e,a){a.SetLevel(e.level),a.SetAuras(...e.auras);for(const{stat:s,value:n}of e.modifiers)a.SetBaseRes(s,n)}var Za=class{constructor(...e){this.members=new Set,this.observers=new Map,this.updating=!1,e.forEach(a=>this.Add(a))}onChange(e){if(this.updating)return;const a=this.state=Ie(e);this.updating=!0;for(const s of this.members)s!==e&&qt(a,s);this.updating=!1}Add(e){if(this.members.has(e))return!1;const a=this.members.size===0;this.members.add(e),!a&&this.state&&qt(this.state,e);const s=()=>this.onChange(e);return this.observers.set(e,[e.Subject.CreateObserver(c.LEVEL,s),e.Event.CreateObserver(_t.CHANGE_AURA,s),e.Event.CreateObserver(_t.CHANGE_BASE_RES,s)]),!0}Remove(e){this.members.delete(e);const a=this.observers.get(e);!a||(a.forEach(s=>s.Remove()),this.observers.delete(e))}},Dt=[20,40,50,60,70,80,90];function Qt(e){e<0?e=0:e>90&&(e=90);for(let a=0;a<Dt.length;a++){const s=Dt[a];if(e<=s)return a}return 0}function Mt(e){e<0?e=0:e>90&&(e=90);for(let a=0;a<Dt.length;a++){const s=Dt[a];if(e===s){let n=a+1;return n>6&&(n=6),n}else if(e<=s)return a}return 0}function ts(e){return e<0?e=0:e>6&&(e=6),Dt[e]}var es={[c.PYRO_DMG]:3,[c.CRYO_DMG]:2,[c.ELECTRO_DMG]:1};function NT(e){return[...e].sort((s,n)=>{const i=s.Max?1/0:es[s.Element]||0;return(n.Max?1/0:es[n.Element]||0)-i}).filter(s=>s.Enabled)[0]}var as={};D(as,{AmpBonus:()=>Gs,AmpType:()=>Os,CritAvg:()=>Ms,CritType:()=>Ds,Damage:()=>Ps,DamageOptions:()=>Hs,DamageStats:()=>vs,Def:()=>gs,QuickenBonus:()=>He,QuickenType:()=>ys,Res:()=>ds,Rotation:()=>Bs,TotalStat:()=>vt,TrBase:()=>$t,TrBonus:()=>Rs,TrMultiplier:()=>Is});var o={};D(o,{ASCENSION_MULTIPLIER:()=>rs,AddCharacterScaling:()=>cs,AddTalentScaling:()=>Ts,BONUS_ASCENSION_MULTIPLIER:()=>De,BONUS_STAT_4:()=>ls,BONUS_STAT_5:()=>os,CHARACTER_ATTRIBUTE_4:()=>ns,CHARACTER_ATTRIBUTE_5:()=>is,GetMainstatValue:()=>ps,GetMaxRolls:()=>RT,GetSubstatMax:()=>ve,GetSubstatMaxRolls:()=>ye,GetSubstatValue:()=>at,GetWeaponAtkBase:()=>ms,GetWeaponSubstat:()=>Ns,SubstatTier:()=>Cs,TRANSFORMATIVE:()=>ss,TalentScaling:()=>Es,WEAPON_ATK_BASE:()=>As,WEAPON_ATK_BASE_ASCENSION_3:()=>us,WEAPON_ATK_BASE_ASCENSION_4:()=>Ss,WEAPON_ATK_BASE_ASCENSION_5:()=>hs,WEAPON_SUBSTAT_INITIAL:()=>fs,WEAPON_SUBSTAT_SCALING:()=>Ls,WeaponScaling:()=>_s});function pT(e){return e}var ss=[8.5828025,9.267524,9.952427,10.6374515,11.3227,12.3248065,13.3203215,14.4342935,15.6838395,17.0716715,18.6005,20.33,22.223334,24.2817595,26.87424,29.5409485,32.2100235,34.8622275,37.5615685,40.2923875,43.056014,45.851871,48.622314,51.406322,54.2047815,56.600847,59.051453,61.489659,64.863665,68.146455,71.335425,74.5145145,77.7084935,80.9127475,84.5531565,88.2590385,92.0363705,95.854759,99.778454,103.691021,107.69945,112.0828335,116.75108,121.6752865,128.0315335,134.2717465,140.7630375,147.506824,154.533594,161.8007985,168.378771,175.265156,182.2413525,189.3095905,199.3002085,208.199127,217.193498,226.4755255,236.3031085,246.442445,256.7842715,269.551599,282.7552815,296.2693765,312.2217135,325.735074,339.748415,353.89703,368.335711,382.8201155,397.3867015,412.3386985,425.5788905,438.871045,457.1145615,473.373376,489.705693,505.611511,522.395873,538.721834,554.99877,571.4883075,588.1847415,605.0921965,626.9178295,644.4764005,662.742046,681.728464,702.5486885,723.426729,744.1077735,764.2222835,790.1839555,815.423764,855.5988925,890.2269705,923.6614045,955.7371545,986.432171,1015.035904],ns=[1,1.083,1.165,1.248,1.33,1.413,1.495,1.578,1.661,1.743,1.826,1.908,1.991,2.073,2.156,2.239,2.321,2.404,2.486,2.569,2.651,2.734,2.817,2.899,2.982,3.064,3.147,3.229,3.312,3.394,3.477,3.56,3.642,3.725,3.807,3.89,3.972,4.055,4.138,4.22,4.303,4.385,4.468,4.55,4.633,4.716,4.798,4.881,4.963,5.046,5.128,5.211,5.294,5.376,5.459,5.541,5.624,5.706,5.789,5.872,5.954,6.037,6.119,6.202,6.284,6.367,6.45,6.532,6.615,6.697,6.78,6.862,6.945,7.028,7.11,7.193,7.275,7.358,7.44,7.523,7.606,7.688,7.771,7.853,7.936,8.018,8.101,8.183,8.266,8.349],is=[1,1.083,1.166,1.25,1.333,1.417,1.5,1.584,1.668,1.751,1.835,1.919,2.003,2.088,2.172,2.256,2.341,2.425,2.51,2.594,2.679,2.764,2.849,2.934,3.019,3.105,3.19,3.275,3.361,3.446,3.532,3.618,3.704,3.789,3.875,3.962,4.048,4.134,4.22,4.307,4.393,4.48,4.567,4.653,4.74,4.827,4.914,5.001,5.089,5.176,5.263,5.351,5.438,5.526,5.614,5.702,5.79,5.878,5.966,6.054,6.142,6.23,6.319,6.407,6.496,6.585,6.673,6.762,6.851,6.94,7.029,7.119,7.208,7.297,7.387,7.476,7.566,7.656,7.746,7.836,7.926,8.016,8.106,8.196,8.286,8.377,8.467,8.558,8.649,8.739],rs=[38/182,65/182,101/182,128/182,155/182,1],De=[0,1,2,2,3,4],ls={[c.ATK_PERCENT]:.06,[c.HP_PERCENT]:.06,[c.DEF_PERCENT]:.075,[c.PHYSICAL_DMG]:.075,[c.ENERGY_RECHARGE]:.067,[c.ELEMENTAL_MASTERY]:24,[c.PYRO_DMG]:.06,[c.CRYO_DMG]:.06,[c.HYDRO_DMG]:.06,[c.ELECTRO_DMG]:.06,[c.ANEMO_DMG]:.06,[c.GEO_DMG]:.06,[c.DENDRO_DMG]:.06,[c.PHYSICAL_DMG]:.06},os={[c.ATK_PERCENT]:.072,[c.HP_PERCENT]:.072,[c.PHYSICAL_DMG]:0,[c.ENERGY_RECHARGE]:.08,[c.ELEMENTAL_MASTERY]:28.8,[c.HEALING_BONUS]:.055,[c.CRIT_RATE]:.048,[c.CRIT_DMG]:.096,[c.PYRO_DMG]:.072,[c.CRYO_DMG]:.072,[c.HYDRO_DMG]:.072,[c.ELECTRO_DMG]:.072,[c.ANEMO_DMG]:.072,[c.GEO_DMG]:.072,[c.DENDRO_DMG]:.072,[c.PHYSICAL_DMG]:.072};function cs(e,a){const s=e.CreateModifier(c.ATK_BASE,0),n=e.CreateModifier(c.DEF_BASE,0),i=e.CreateModifier(c.HP_BASE,0),l=e.CreateModifier(a.StatBonus,0);a.Scaling||(e.Options.Stars===4?a.Scaling=ns:a.Scaling=is);const E=a.Scaling,_=()=>{s.SetValue(Oe(E,a.AtkBase[0],a.AtkBase[1],e.GetLevel(),e.GetAscension())),n.SetValue(Oe(E,a.DefBase[0],a.DefBase[1],e.GetLevel(),e.GetAscension())),i.SetValue(Oe(E,a.HpBase[0],a.HpBase[1],e.GetLevel(),e.GetAscension())),l.SetValue(dT(e.Options.Stars,a.StatBonus,e.GetAscension()))};return _(),e.CreateObserver(c.LEVEL,_),e.CreateObserver(c.ASCENSION,_),e}function CT(e,a){return e[a-1]}function MT(e){const a=e-1;return a<0?0:rs[a]}function Oe(e,a,s,n,i){return a*CT(e,n)+s*MT(i)}function dT(e,a,s){const n=s-1;return n<0?0:e===4?ls[a]*De[n]:os[a]*De[n]}var Es={NONE:Array.from(Array(15)).fill(1),PHYSICAL_1:[1,1.081,1.163,1.279,1.36,1.453,1.581,1.709,1.837,1.977,2.116,2.256,2.395,2.535,2.674],PHYSICAL_1A:[1,1.081,1.163,1.279,1.36,1.453,1.581,1.709,1.837,1.977,2.137,2.325,2.513,2.701,2.906],PHYSICAL_2:[1,1.068,1.136,1.227,1.295,1.375,1.477,1.58,1.682,1.784,1.886,1.989,2.091,2.193,2.295],ELEMENTAL_1:[1,1.075,1.15,1.25,1.325,1.4,1.5,1.6,1.7,1.8,1.9,2,2.125,2.25,2.375],ELEMENTAL_1A:[1,1.075,1.15,1.25,1.325,1.4,1.5,1.6,1.7,1.8,1.904,2.04,2.176,2.312,2.448],ELEMENTAL_2:[1,1.06,1.12,1.198,1.257,1.317,1.395,1.473,1.551,1.629,1.707,1.784,1.862,1.94,2.018],FLAT_1:[1,1.1,1.208,1.325,1.45,1.583,1.725,1.875,2.033,2.2,2.375,2.559,2.75,2.95,3.159]};function Ts(e,a){const s=[],n=e.Base.CreateMv(a.Stat,0),i=()=>{let E=e.Get(a.Talent);E<1?E=1:E>15&&(E=15),n.Value=a.Initial*a.Scaling[E-1]};i();const l=e.Character;switch(s.push(l.CreateObserver(a.Talent,i)),a.Talent){case c.NORMAL_ATTACK_LEVEL:s.push(l.CreateObserver(c.NORMAL_ATTACK_LEVEL_UP,i));break;case c.ELEMENTAL_SKILL_LEVEL:s.push(l.CreateObserver(c.ELEMENTAL_SKILL_LEVEL_UP,i));break;case c.ELEMENTAL_BURST_LEVEL:s.push(l.CreateObserver(c.ELEMENTAL_BURST_LEVEL_UP,i));break}return s}var _s=(e=>(e[e.TYPE_38=0]="TYPE_38",e[e.TYPE_39=1]="TYPE_39",e[e.TYPE_40=2]="TYPE_40",e[e.TYPE_39b=3]="TYPE_39b",e[e.TYPE_41=4]="TYPE_41",e[e.TYPE_42=5]="TYPE_42",e[e.TYPE_44=6]="TYPE_44",e[e.TYPE_45=7]="TYPE_45",e[e.TYPE_44b=8]="TYPE_44b",e[e.TYPE_46=9]="TYPE_46",e[e.TYPE_48=10]="TYPE_48",e[e.TYPE_49=11]="TYPE_49",e))(_s||{}),As={[0]:[37.6075,40.13116315789474,42.65482631578948,45.17848947368421,47.70215263157895,50.225815789473685,52.749478947368424,55.27314210526316,57.79680526315789,60.32046842105264,62.84413157894737,65.36779473684211,67.89145789473685,70.41512105263158,72.93878421052631,75.46244736842105,77.9861105263158,80.50977368421053,83.03343684210526,85.5571,87.86808,90.17906,92.49004000000001,94.80102000000001,97.11200000000001,99.42298000000001,101.73396,104.04494,106.35592,108.6669,110.97788,113.28886,115.59984,117.91082,120.2218,122.53278,124.84376,127.15474,129.46572,131.7767,133.97050000000002,136.1643,138.3581,140.5519,142.7457,144.9395,147.1333,149.3271,151.52089999999998,153.7147,155.86208,158.00946,160.15684,162.30422,164.45159999999998,166.59898,168.74636,170.89374,173.04112,175.1885,177.28829000000002,179.38808,181.48787,183.58766,185.68745,187.78724,189.88702999999998,191.98682,194.08661,196.1864,198.26233,200.33826,202.41419,204.49012,206.56605,208.64198,210.71791,212.79384,214.86977,216.9457,218.98907,221.03243999999998,223.07581,225.11918,227.16255,229.20592,231.24929,233.29266,235.33603,237.3794],[1]:[38.7413,41.636700000000005,44.5321,47.4275,50.322900000000004,53.2183,56.1137,59.009100000000004,61.9045,64.79990000000001,67.6953,70.5907,73.4861,76.3815,79.27690000000001,82.1723,85.0677,87.9631,90.85849999999999,93.7539,96.5549,99.3559,102.15690000000001,104.9579,107.7589,110.5599,113.3609,116.1619,118.96289999999999,121.7639,124.5649,127.3659,130.1669,132.9679,135.7689,138.5699,141.3709,144.1719,146.97289999999998,149.7739,152.50678,155.23966,157.97254,160.70542,163.4383,166.17118,168.90406,171.63694,174.36982,177.1027,179.81459,182.52648,185.23837,187.95026,190.66215,193.37403999999998,196.08593,198.79782,201.50970999999998,204.2216,206.90025,209.5789,212.25755,214.9362,217.61485,220.2935,222.97215,225.6508,228.32945,231.0081,233.68512,236.36214,239.03916,241.71618,244.3932,247.07022,249.74724,252.42426,255.10128,257.7783,260.42983,263.08136,265.73289,268.38442000000003,271.03595,273.68748,276.33901000000003,278.99054,281.64207000000005,284.2936],[2]:[39.8751,43.142757894736846,46.41041578947369,49.67807368421053,52.945731578947374,56.21338947368422,59.48104736842105,62.748705263157895,66.01636315789474,69.28402105263157,72.55167894736843,75.81933684210526,79.0869947368421,82.35465263157894,85.62231052631579,88.88996842105263,92.15762631578947,95.42528421052631,98.69294210526316,101.9606,105.248305,108.53601,111.82371499999999,115.11142,118.399125,121.68683,124.974535,128.26224,131.549945,134.83765,138.125355,141.41306,144.700765,147.98847,151.276175,154.56387999999998,157.851585,161.13929,164.426995,167.7147,170.99041,174.26612,177.54183,180.81754,184.09325,187.36896000000002,190.64467,193.92038,197.19609,200.4718,203.74953,207.02726,210.30499,213.58272,216.86045000000001,220.13818,223.41591,226.69364,229.97137,233.2491,236.51284,239.77658,243.04032,246.30406,249.5678,252.83154000000002,256.09528,259.35902,262.62276,265.8865,269.15626000000003,272.42602,275.69578,278.96554,282.2353,285.50506,288.77482,292.04458,295.31433999999996,298.5841,301.84785,305.1116,308.37534999999997,311.6391,314.90285,318.1666,321.43035000000003,324.6941,327.95785,331.2216],[3]:[38.7413,41.636700000000005,44.5321,47.4275,50.322900000000004,53.2183,56.1137,59.009100000000004,61.9045,64.79990000000001,67.6953,70.5907,73.4861,76.3815,79.27690000000001,82.1723,85.0677,87.9631,90.85849999999999,93.7539,96.5549,99.3559,102.15690000000001,104.9579,107.7589,110.5599,113.3609,116.1619,118.96289999999999,121.7639,124.5649,127.3659,130.1669,132.9679,135.7689,138.5699,141.3709,144.1719,146.97289999999998,149.7739,152.52678,155.27966,158.03253999999998,160.78542,163.5383,166.29118,169.04406,171.79693999999998,174.54981999999998,177.3027,180.01459,182.72647999999998,185.43837,188.15026,190.86214999999999,193.57404,196.28593,198.99782000000002,201.70971,204.4216,207.11025,209.7989,212.48755,215.1762,217.86485,220.55349999999999,223.24215,225.9308,228.61945,231.3081,233.99512,236.68214,239.36916,242.05617999999998,244.7432,247.43022,250.11723999999998,252.80425999999997,255.49128,258.1783,260.83983,263.50136,266.16289,268.82442,271.48595,274.14748000000003,276.80901,279.47054,282.13207,284.7936],[4]:[41.0671,44.129842105263165,47.19258421052632,50.255326315789475,53.31806842105264,56.3808105263158,59.44355263157895,62.50629473684211,65.56903684210528,68.63177894736843,71.69452105263159,74.75726315789476,77.8200052631579,80.88274736842106,83.94548947368422,87.00823157894737,90.07097368421054,93.13371578947368,96.19645789473685,99.2592,102.18523,105.11126,108.03729000000001,110.96332000000001,113.88935000000001,116.81538,119.74141,122.66744,125.59347,128.5195,131.44553,134.37156,137.29759,140.22361999999998,143.14965,146.07568,149.00171,151.92774,154.85377,157.7798,160.65627999999998,163.53276,166.40924,169.28572,172.16219999999998,175.03868,177.91516000000001,180.79164,183.66812,186.5446,189.38234,192.22008,195.05782,197.89556,200.73329999999999,203.57103999999998,206.40878,209.24652,212.08426,214.922,217.7351,220.5482,223.3613,226.1744,228.9875,231.8006,234.6137,237.4268,240.2399,243.053,245.86377,248.67454,251.48531,254.29608000000002,257.10685,259.91762,262.72839,265.53916000000004,268.34993000000003,271.1607,273.94095000000004,276.7212,279.50145,282.2817,285.06195,287.8422,290.62244999999996,293.4027,296.18295,298.9632],[5]:[42.401,45.90243157894737,49.40386315789474,52.90529473684211,56.40672631578948,59.908157894736846,63.40958947368421,66.91102105263158,70.41245263157894,73.91388421052632,77.41531578947368,80.91674736842106,84.41817894736842,87.91961052631578,91.42104210526315,94.92247368421053,98.42390526315789,101.92533684210525,105.42676842105263,108.9282,112.42840000000001,115.9286,119.4288,122.929,126.42920000000001,129.9294,133.4296,136.9298,140.43,143.9302,147.4304,150.9306,154.4308,157.93099999999998,161.4312,164.9314,168.4316,171.9318,175.432,178.9322,182.44453,185.95686,189.46919,192.98152,196.49385,200.00618,203.51851,207.03083999999998,210.54317,214.0555,217.55782,221.06014,224.56246,228.06477999999998,231.56709999999998,235.06941999999998,238.57174,242.07406,245.57638,249.0787,252.57677999999999,256.07486,259.57294,263.07102,266.5691,270.06718,273.56526,277.06334000000004,280.56142,284.0595,287.57182,291.08414,294.59646000000004,298.10878,301.6211,305.13342,308.64574,312.15806000000003,315.67038,319.1827,322.68503,326.18736,329.68969000000004,333.19202,336.69435,340.19668,343.69901000000004,347.20134,350.70367,354.206],[6]:[43.7349,47.67334210526316,51.61178421052632,55.55022631578947,59.48866842105264,63.42711052631579,67.36555263157895,71.30399473684211,75.24243684210526,79.18087894736843,83.11932105263159,87.05776315789474,90.99620526315789,94.93464736842105,98.87308947368422,102.81153157894738,106.74997368421053,110.68841578947368,114.62685789473684,118.5653,122.64139499999999,126.71749,130.793585,134.86968,138.945775,143.02187,147.097965,151.17406,155.250155,159.32625000000002,163.402345,167.47844,171.554535,175.63063,179.706725,183.78282000000002,187.858915,191.93501,196.011105,200.0872,204.23452,208.38183999999998,212.52916,216.67648,220.8238,224.97111999999998,229.11844,233.26576,237.41307999999998,241.5604,245.72395999999998,249.88752,254.05108,258.21464000000003,262.3782,266.54176,270.70532000000003,274.86888,279.03244,283.196,287.38581000000005,291.57562,295.76543000000004,299.95524,304.14505,308.33486000000005,312.52467,316.71448000000004,320.90429,325.0941,329.30702,333.51994,337.73286,341.94578,346.1587,350.37162,354.58454,358.79746,363.01038,367.2233,371.43934,375.65538,379.87142,384.08745999999996,388.3035,392.51954,396.73557999999997,400.95162,405.16765999999996,409.3837],[7]:[45.0687,49.44510526315789,53.82151052631579,58.19791578947368,62.574321052631575,66.95072631578947,71.32713157894736,75.70353684210527,80.07994210526316,84.45634736842105,88.83275263157896,93.20915789473685,97.58556315789474,101.96196842105263,106.33837368421052,110.71477894736842,115.09118421052631,119.4675894736842,123.84399473684209,128.2204,132.87149000000002,137.52258,142.17367000000002,146.82476,151.47585,156.12694,160.77803,165.42912,170.08021,174.7313,179.38239,184.03348,188.68457,193.33566000000002,197.98675,202.63783999999998,207.28893,211.94002,216.59111000000001,221.2422,226.02498,230.80776,235.59054,240.37332,245.15609999999998,249.93887999999998,254.72165999999999,259.50444,264.28722,269.07,273.89686,278.72372,283.55057999999997,288.37744,293.2043,298.03116,302.85802,307.68487999999996,312.51174,317.3386,322.21052,327.08243999999996,331.95436,336.82628,341.6982,346.57012,351.44203999999996,356.31396,361.18588,366.0578,370.97578,375.89376,380.81174,385.72972,390.6477,395.56568,400.48366,405.40164,410.31962,415.2376,420.17714,425.11668,430.05622,434.99575999999996,439.9353,444.87484,449.81437999999997,454.75392,459.69345999999996,464.633],[8]:[44.3358,47.80099473684211,51.26618947368421,54.731384210526315,58.196578947368415,61.66177368421052,65.12696842105262,68.59216315789473,72.05735789473684,75.52255263157895,78.98774736842105,82.45294210526315,85.91813684210526,89.38333157894735,92.84852631578946,96.31372105263156,99.77891578947367,103.24411052631578,106.70930526315789,110.1745,113.601655,117.02881,120.45596499999999,123.88311999999999,127.31027499999999,130.73743,134.164585,137.59174,141.018895,144.44605,147.87320499999998,151.30036,154.72751499999998,158.15467,161.581825,165.00898,168.436135,171.86329,175.290445,178.7176,182.17136,185.62512,189.07888,192.53264000000001,195.9864,199.44016,202.89392,206.34768,209.80144,213.2552,216.74556,220.23592,223.72628,227.21664,230.707,234.19736,237.68772,241.17808000000002,244.66844,248.1588,251.6835,255.2082,258.73290000000003,262.2576,265.7823,269.307,272.8317,276.3564,279.8811,283.4058,286.97039,290.53498,294.09956999999997,297.66416,301.22875,304.79334,308.35793,311.92251999999996,315.48711,319.0517,322.66951,326.28731999999997,329.90513,333.52294,337.14075,340.75856,344.37637,347.99418000000003,351.61199,355.2298],[9]:[45.9364,49.92561578947368,53.914831578947364,57.90404736842105,61.89326315789474,65.88247894736841,69.8716947368421,73.86091052631579,77.85012631578947,81.83934210526316,85.82855789473683,89.81777368421052,93.80698947368421,97.79620526315789,101.78542105263158,105.77463684210525,109.76385263157894,113.75306842105263,117.74228421052632,121.7315,125.849695,129.96789,134.086085,138.20428,142.322475,146.44067,150.558865,154.67706,158.795255,162.91345,167.031645,171.14984,175.268035,179.38623,183.50442500000003,187.62262,191.740815,195.85901,199.97720500000003,204.0954,208.30777,212.52014,216.73251000000002,220.94488,225.15725,229.36962,233.58199,237.79435999999998,242.00673,246.2191,250.51037,254.80164,259.09291,263.38418,267.67545,271.96672,276.25799,280.54926,284.84053,289.1318,293.47739,297.82298,302.16857,306.51416,310.85974999999996,315.20534,319.55093,323.89652,328.24210999999997,332.5877,337.00219,341.41668,345.83117,350.24566,354.66015,359.07464,363.48913,367.90362,372.31811,376.7326,381.2068,385.681,390.1552,394.6294,399.10360000000003,403.5778,408.052,412.5262,417.0004,421.4746],[10]:[47.537,52.05051052631579,56.564021052631574,61.077531578947365,65.59104210526316,70.10455263157894,74.61806315789474,79.13157368421052,83.6450842105263,88.1585947368421,92.6721052631579,97.18561578947367,101.69912631578947,106.21263684210527,110.72614736842104,115.23965789473684,119.75316842105264,124.2666789473684,128.7801894736842,133.2937,138.10207,142.91044,147.71881,152.52718,157.33555,162.14391999999998,166.95229,171.76066,176.56903,181.3774,186.18577,190.99414,195.80250999999998,200.61088,205.41924999999998,210.22762,215.03598999999997,219.84436,224.65273,229.4611,234.43822,239.41534,244.39246,249.36957999999998,254.3467,259.32382,264.30094,269.27806,274.25518,279.2323,284.31925,289.4062,294.49315,299.5801,304.66705,309.754,314.84095,319.9279,325.01485,330.1018,335.27383000000003,340.44586000000004,345.61789,350.78992,355.96195,361.13398,366.30601,371.47803999999996,376.65006999999997,381.8221,387.07493999999997,392.32777999999996,397.58062,402.83346,408.0863,413.33914,418.59198,423.84482,429.09766,434.3505,439.6889,445.0273,450.3657,455.70410000000004,461.0425,466.3809,471.71930000000003,477.0577,482.39610000000005,487.7345],[11]:[49.1377,54.17819473684211,59.218689473684215,64.25918421052631,69.29967894736842,74.34017368421053,79.38066842105263,84.42116315789474,89.46165789473685,94.50215263157895,99.54264736842106,104.58314210526316,109.62363684210527,114.66413157894738,119.70462631578948,124.74512105263159,129.7856157894737,134.8261105263158,139.8666052631579,144.9071,150.40315,155.8992,161.39525,166.8913,172.38735000000003,177.8834,183.37945000000002,188.87550000000002,194.37155,199.8676,205.36365,210.8597,216.35575,221.85180000000003,227.34785,232.84390000000002,238.33995,243.836,249.33205,254.8281,260.56738,266.30666,272.04594,277.78522,283.5245,289.26378,295.00306,300.74233999999996,306.48161999999996,312.2209,318.10776999999996,323.99464,329.88151,335.76838,341.65525,347.54212,353.42899,359.31586,365.20273000000003,371.0896,377.07949,383.06938,389.05927,395.04916000000003,401.03905,407.02894000000003,413.01883,419.00872,424.99861,430.9885,437.09139999999996,443.1943,449.2972,455.4001,461.503,467.6059,473.7088,479.8117,485.9146,492.0175,498.21376999999995,504.41004,510.60631,516.80258,522.99885,529.19512,535.39139,541.5876599999999,547.7839299999999,553.9802]},us=19.5,Ss=25.9,hs=31.1,Ls=[1,1.040341234845879,1.0806824696917579,1.1210237045376368,1.1613649393835157,1.2017061742293946,1.2420474090752736,1.2823886439211527,1.3227298787670316,1.3630711136129106,1.4034123484587895,1.4437535833046684,1.4840948181505473,1.5244360529964263,1.5647772878423054,1.6051185226881843,1.6454597575340633,1.6858009923799422,1.7261422272258211,1.7664834620717,1.806904148964199,1.847324835856698,1.887745522749197,1.928166209641696,1.968586896534195,2.009007583426694,2.049428270319193,2.089848957211692,2.130269644104191,2.17069033099669,2.211111017889189,2.251531704781688,2.291952391674187,2.332373078566686,2.372793765459185,2.413214452351684,2.453635139244183,2.494055826136682,2.534476513029181,2.57489719992168,2.615292358123214,2.655687516324748,2.696082674526282,2.7364778327278163,2.77687299092935,2.817268149130884,2.8576633073324182,2.898058465533952,2.9384536237354864,2.97884878193702,3.0192357768865152,3.0596227718360103,3.1000097667855053,3.1403967617350004,3.1807837566844954,3.22117075163399,3.261557746583485,3.30194474153298,3.342331736482475,3.38271873143197,3.423020746682514,3.463322761933058,3.503624777183602,3.543926792434146,3.58422880768469,3.624530822935234,3.664832838185778,3.705134853436322,3.745436868686866,3.78573888393741,3.82613895285716,3.86653902177691,3.90693909069666,3.94733915961641,3.98773922853616,4.02813929745591,4.06853936637566,4.10893943529541,4.14933950421516,4.18973957313491,4.230135108674366,4.270530644213822,4.310926179753277,4.351321715292734,4.3917172508321904,4.432112786371646,4.472508321911102,4.512903857450558,4.553299392990015,4.59369492852947],fs={[0]:{[c.ATK_PERCENT]:.10213,[c.HP_PERCENT]:.10213,[c.DEF_PERCENT]:.12747,[c.ELEMENTAL_MASTERY]:40.8,[c.ENERGY_RECHARGE]:.11333,[c.CRIT_RATE]:.068,[c.CRIT_DMG]:.136,[c.PHYSICAL_DMG]:.12747},[1]:{[c.ATK_PERCENT]:.0766,[c.HP_PERCENT]:.0766,[c.DEF_PERCENT]:.0956,[c.ELEMENTAL_MASTERY]:30.6,[c.ENERGY_RECHARGE]:.085,[c.CRIT_RATE]:.051,[c.CRIT_DMG]:.102,[c.PHYSICAL_DMG]:.0956},[3]:{[c.ATK_PERCENT]:.0766,[c.HP_PERCENT]:.0766,[c.DEF_PERCENT]:.0956,[c.ELEMENTAL_MASTERY]:30.6,[c.ENERGY_RECHARGE]:.085,[c.CRIT_RATE]:.051,[c.CRIT_DMG]:.102,[c.PHYSICAL_DMG]:.0956},[2]:{[c.ATK_PERCENT]:.05107,[c.HP_PERCENT]:.05107,[c.DEF_PERCENT]:.06373,[c.ELEMENTAL_MASTERY]:20.4,[c.ENERGY_RECHARGE]:.05667,[c.CRIT_RATE]:.034,[c.CRIT_DMG]:.068,[c.PHYSICAL_DMG]:.06373},[4]:{[c.ATK_PERCENT]:.12,[c.HP_PERCENT]:.12,[c.DEF_PERCENT]:.15013,[c.ELEMENTAL_MASTERY]:48,[c.ENERGY_RECHARGE]:.13333,[c.CRIT_RATE]:.08,[c.CRIT_DMG]:.16,[c.PHYSICAL_DMG]:.15013},[5]:{[c.ATK_PERCENT]:.09,[c.HP_PERCENT]:.09,[c.DEF_PERCENT]:.1126,[c.ELEMENTAL_MASTERY]:36,[c.ENERGY_RECHARGE]:.1,[c.CRIT_RATE]:.06,[c.CRIT_DMG]:.12,[c.PHYSICAL_DMG]:.1126},[6]:{[c.ATK_PERCENT]:.06,[c.HP_PERCENT]:.06,[c.DEF_PERCENT]:.0751,[c.ELEMENTAL_MASTERY]:24,[c.ENERGY_RECHARGE]:.0667,[c.CRIT_RATE]:.04,[c.CRIT_DMG]:.08,[c.PHYSICAL_DMG]:.0751},[8]:{[c.ATK_PERCENT]:.144,[c.HP_PERCENT]:.144,[c.DEF_PERCENT]:.18,[c.ELEMENTAL_MASTERY]:57.6,[c.ENERGY_RECHARGE]:.16,[c.CRIT_RATE]:.096,[c.CRIT_DMG]:.192,[c.PHYSICAL_DMG]:.18},[7]:{[c.ATK_PERCENT]:.03,[c.HP_PERCENT]:.03,[c.DEF_PERCENT]:.03753,[c.ELEMENTAL_MASTERY]:12,[c.ENERGY_RECHARGE]:.03333,[c.CRIT_RATE]:.02,[c.CRIT_DMG]:.04,[c.PHYSICAL_DMG]:.03753},[9]:{[c.ATK_PERCENT]:.108,[c.HP_PERCENT]:.108,[c.DEF_PERCENT]:.135,[c.ELEMENTAL_MASTERY]:43.2,[c.ENERGY_RECHARGE]:.12,[c.CRIT_RATE]:.072,[c.CRIT_DMG]:.144,[c.PHYSICAL_DMG]:.135},[10]:{[c.ATK_PERCENT]:.072,[c.HP_PERCENT]:.072,[c.DEF_PERCENT]:.09,[c.ELEMENTAL_MASTERY]:28.8,[c.ENERGY_RECHARGE]:.08,[c.CRIT_RATE]:.048,[c.CRIT_DMG]:.096,[c.PHYSICAL_DMG]:.09},[11]:{[c.ATK_PERCENT]:.036,[c.HP_PERCENT]:.036,[c.DEF_PERCENT]:.045,[c.ELEMENTAL_MASTERY]:14.4,[c.ENERGY_RECHARGE]:.04,[c.CRIT_RATE]:.024,[c.CRIT_DMG]:.048,[c.PHYSICAL_DMG]:.045}};function ms(e,a,s,n){if(s<1||s>90)throw new Error("Weapon level must be between 1 and 90");if(n<0||n>6)throw new Error("Weapon ascension must be between 0 and 6");let i;if(e===5)i=hs;else if(e===4)i=Ss;else if(e===3)i=us;else throw new Error("Weapon stars must be 3, 4 or 5.");return As[a][s-1]+i*n}function Ns(e,a,s){const n=Ls[a-1];return(fs[e][s]||0)*n}function ps(e,a,s){return e===5?gT[a][s]:GT[a][s]}var gT={[c.HP_FLAT]:[717,920,1123,1326,1530,1733,1936,2139,2342,2545,2749,2952,3155,3358,3561,3764,3967,4171,4374,4577,4780],[c.HP_PERCENT]:[.07,.09,.11,.129,.149,.169,.189,.209,.228,.248,.268,.288,.308,.328,.347,.367,.387,.407,.427,.446,.466],[c.ATK_FLAT]:[47,60,73,86,100,113,126,139,152,166,179,192,205,219,232,245,258,272,285,298,311],[c.ATK_PERCENT]:[.07,.09,.11,.129,.149,.169,.189,.209,.228,.248,.268,.288,.308,.328,.347,.367,.387,.407,.427,.446,.466],[c.DEF_PERCENT]:[.087,.112,.137,.162,.186,.211,.236,.261,.286,.31,.335,.36,.385,.409,.434,.459,.484,.508,.533,.558,.583],[c.CRIT_RATE]:[.047,.06,.073,.086,.099,.113,.126,.139,.152,.166,.179,.192,.205,.218,.232,.245,.258,.271,.284,.298,.311],[c.CRIT_DMG]:[.093,.12,.146,.173,.199,.225,.252,.278,.305,.331,.357,.384,.41,.437,.463,.49,.516,.542,.569,.595,.622],[c.ENERGY_RECHARGE]:[.078,.1,.122,.144,.166,.188,.21,.232,.254,.276,.298,.32,.342,.364,.386,.408,.43,.452,.474,.496,.518],[c.HEALING_BONUS]:[.054,.069,.084,.1,.115,.13,.145,.161,.176,.191,.206,.221,.237,.252,.267,.282,.298,.313,.328,.343,.359],[c.ELEMENTAL_MASTERY]:[28,35.9,43.8,51.8,59.7,67.6,75.5,83.5,91.4,99.3,107.2,115.2,123.1,131,138.9,146.9,154.8,162.7,170.6,178.6,186.5],[c.ANEMO_DMG]:[.07,.09,.11,.129,.149,.169,.189,.209,.228,.248,.268,.288,.308,.328,.347,.367,.387,.407,.427,.446,.466],[c.GEO_DMG]:[.07,.09,.11,.129,.149,.169,.189,.209,.228,.248,.268,.288,.308,.328,.347,.367,.387,.407,.427,.446,.466],[c.CRYO_DMG]:[.07,.09,.11,.129,.149,.169,.189,.209,.228,.248,.268,.288,.308,.328,.347,.367,.387,.407,.427,.446,.466],[c.PYRO_DMG]:[.07,.09,.11,.129,.149,.169,.189,.209,.228,.248,.268,.288,.308,.328,.347,.367,.387,.407,.427,.446,.466],[c.HYDRO_DMG]:[.07,.09,.11,.129,.149,.169,.189,.209,.228,.248,.268,.288,.308,.328,.347,.367,.387,.407,.427,.446,.466],[c.ELECTRO_DMG]:[.07,.09,.11,.129,.149,.169,.189,.209,.228,.248,.268,.288,.308,.328,.347,.367,.387,.407,.427,.446,.466],[c.DENDRO_DMG]:[.07,.09,.11,.129,.149,.169,.189,.209,.228,.248,.268,.288,.308,.328,.347,.367,.387,.407,.427,.446,.466],[c.PHYSICAL_DMG]:[.087,.112,.137,.162,.186,.211,.236,.261,.286,.31,.335,.36,.385,.409,.434,.459,.484,.508,.533,.558,.583]},GT={[c.HP_FLAT]:[645,828,1011,1194,1377,1559,1742,1925,2108,2291,2474,2657,2839,3022,3205,3388,3571],[c.HP_PERCENT]:[.063,.081,.099,.116,.134,.152,.17,.188,.206,.223,.241,.259,.277,.295,.313,.33,.348],[c.ATK_FLAT]:[42,54,66,78,90,102,113,125,137,149,161,173,185,197,209,221,232],[c.ATK_PERCENT]:[.063,.081,.099,.116,.134,.152,.17,.188,.206,.223,.241,.259,.277,.295,.313,.33,.348],[c.DEF_PERCENT]:[.079,.101,.123,.146,.168,.19,.212,.235,.257,.279,.302,.324,.346,.368,.391,.413,.435],[c.CRIT_RATE]:[.042,.054,.066,.078,.09,.101,.113,.125,.137,.149,.161,.173,.185,.197,.208,.22,.232],[c.CRIT_DMG]:[.084,.108,.131,.155,.179,.203,.227,.25,.274,.298,.322,.345,.369,.393,.417,.441,.464],[c.ENERGY_RECHARGE]:[.07,.09,.11,.129,.149,.169,.189,.209,.228,.248,.268,.288,.308,.328,.347,.367,.387],[c.HEALING_BONUS]:[.048,.062,.076,.09,.103,.117,.131,.144,.158,.172,.186,.199,.213,.227,.24,.254,.268],[c.ELEMENTAL_MASTERY]:[25.2,32.3,39.4,46.6,53.7,60.8,68,75.1,82.2,89.4,96.5,103.6,110.8,117.9,125,132.2,139.3],[c.ANEMO_DMG]:[.063,.081,.099,.116,.134,.152,.17,.188,.206,.223,.241,.259,.277,.295,.313,.33,.348],[c.CRYO_DMG]:[.063,.081,.099,.116,.134,.152,.17,.188,.206,.223,.241,.259,.277,.295,.313,.33,.348],[c.ELECTRO_DMG]:[.063,.081,.099,.116,.134,.152,.17,.188,.206,.223,.241,.259,.277,.295,.313,.33,.348],[c.GEO_DMG]:[.063,.081,.099,.116,.134,.152,.17,.188,.206,.223,.241,.259,.277,.295,.313,.33,.348],[c.HYDRO_DMG]:[.063,.081,.099,.116,.134,.152,.17,.188,.206,.223,.241,.259,.277,.295,.313,.33,.348],[c.PYRO_DMG]:[.063,.081,.099,.116,.134,.152,.17,.188,.206,.223,.241,.259,.277,.295,.313,.33,.348],[c.DENDRO_DMG]:[.063,.081,.099,.116,.134,.152,.17,.188,.206,.223,.241,.259,.277,.295,.313,.33,.348],[c.PHYSICAL_DMG]:[.079,.101,.123,.146,.168,.19,.212,.235,.257,.279,.302,.324,.346,.368,.391,.413,.435]},Cs=(e=>(e[e.ROLL_1=0]="ROLL_1",e[e.ROLL_2=1]="ROLL_2",e[e.ROLL_3=2]="ROLL_3",e[e.ROLL_4=3]="ROLL_4",e[e.ROLL_AVG=4]="ROLL_AVG",e[e.ROLL_MIN=0]="ROLL_MIN",e[e.ROLL_MAX=3]="ROLL_MAX",e))(Cs||{});function at(e,a,s){return e===4?s===4?(yt[a][0]+yt[a][1]+yt[a][2]+yt[a][3])/4:yt[a][s]:e===5?s===4?(Ot[a][0]+Ot[a][1]+Ot[a][2]+Ot[a][3])/4:Ot[a][s]:0}function ye(e){return e===4?4:e===5?6:0}function RT(e){return e===4?7:e===5?9:0}function ve(e,a){return ye(e)*at(e,a,3)}var Ot={[c.HP_FLAT]:[209.13,239,268.88,298.75],[c.HP_PERCENT]:[.0408,.0466,.0525,.0583],[c.ATK_FLAT]:[13.62,15.56,17.51,19.45],[c.ATK_PERCENT]:[.0408,.0466,.0525,.0583],[c.PYRO_DMG]:[.0408,.0466,.0525,.0583],[c.CRYO_DMG]:[.0408,.0466,.0525,.0583],[c.HYDRO_DMG]:[.0408,.0466,.0525,.0583],[c.ELECTRO_DMG]:[.0408,.0466,.0525,.0583],[c.ANEMO_DMG]:[.0408,.0466,.0525,.0583],[c.GEO_DMG]:[.0408,.0466,.0525,.0583],[c.DENDRO_DMG]:[.0408,.0466,.0525,.0583],[c.PHYSICAL_DMG]:[.051,.0583,.0656,.0729],[c.HEALING_BONUS]:[.03143,.03589799019607843,.040443014705882345,.044911004901960774],[c.DEF_FLAT]:[16.2,18.52,20.83,23.15],[c.DEF_PERCENT]:[.051,.0583,.0656,.0729],[c.CRIT_RATE]:[.0272,.0311,.035,.0389],[c.CRIT_DMG]:[.0544,.0622,.0699,.0777],[c.ENERGY_RECHARGE]:[.0453,.0518,.0583,.0648],[c.ELEMENTAL_MASTERY]:[16.32,18.65,20.98,23.31]},yt={[c.HP_FLAT]:[167.3,191.2,215.1,239],[c.HP_PERCENT]:[.0326,.0373,.042,.0466],[c.ATK_FLAT]:[10.89,12.45,14,15.56],[c.ATK_PERCENT]:[.0326,.0373,.042,.0466],[c.PYRO_DMG]:[.0326,.0373,.042,.0466],[c.CRYO_DMG]:[.0326,.0373,.042,.0466],[c.HYDRO_DMG]:[.0326,.0373,.042,.0466],[c.ELECTRO_DMG]:[.0326,.0373,.042,.0466],[c.ANEMO_DMG]:[.0326,.0373,.042,.0466],[c.GEO_DMG]:[.0326,.0373,.042,.0466],[c.DENDRO_DMG]:[.0326,.0373,.042,.0466],[c.PHYSICAL_DMG]:[.0408,.0466,.0525,.0583],[c.HEALING_BONUS]:[.0251,.02866813725490196,.032297794117647056,.035865931372549016],[c.DEF_FLAT]:[12.96,14.82,16.67,18.52],[c.DEF_PERCENT]:[.0408,.0466,.0525,.0583],[c.CRIT_RATE]:[.0218,.0249,.028,.0311],[c.CRIT_DMG]:[.0435,.0497,.056,.0622],[c.ENERGY_RECHARGE]:[.0363,.0414,.0466,.0518],[c.ELEMENTAL_MASTERY]:[13.06,14.92,16.79,18.65]};function vt(e,a,s){return e*(1+a)+s}function Ms(e,a){return e>1?e=1:e<0&&(e=0),1+e*a}function ds(e){return e<0?1-e/2:e<.75?1-e:1/(4*e+1)}function gs(e,a,s,n){return(e+100)/((1-s)*(1-n)*(a+100)+e+100)}function Gs(e){return 2.78*e/(e+1400)}function Rs(e){return 16*e/(e+2e3)}function He(e){return 5*e/(e+1200)}function $t(e){return ss[e-1]}function Is(e){switch(e){case c.BURGEON_DMG:return 6;case c.HYPERBLOOM_DMG:return 6;case c.OVERLOAD_DMG:return 4;case c.BLOOM_DMG:return 4;case c.SHATTER_DMG:return 3;case c.ELECTROCHARGE_DMG:return 2.4;case c.SWIRL_DMG:return 1.2;case c.SUPERCONDUCT_DMG:return 1;case c.BURNING_DMG:return .5;case c.AGGRAVATE_DMG:return 2.3;case c.SPREAD_DMG:return 2.5}return 0}var Ds=(e=>(e[e.NO_CRIT=0]="NO_CRIT",e[e.CRIT=1]="CRIT",e[e.CRIT_AVG=2]="CRIT_AVG",e))(Ds||{}),Os=(e=>(e[e.AMP_STRONG=2]="AMP_STRONG",e[e.AMP_WEAK=1.5]="AMP_WEAK",e[e.AMP_NONE=0]="AMP_NONE",e))(Os||{}),ys=(e=>(e[e.QUICKEN_STRONG=2.5]="QUICKEN_STRONG",e[e.QUICKEN_WEAK=2.3]="QUICKEN_WEAK",e[e.QUICKEN_NONE=0]="QUICKEN_NONE",e))(ys||{});function vs(e){return F({Char:0,Enemy:0,Base:0,Dmg:0,Critrate:0,Critdmg:0,Em:0,Res:0,Ignored:0,Reduced:0,Quicken:0,Amp:0,Tr:0},e)}function Hs(e){return F({Base:!1,Def:!1,Res:!1,Dmg:!1,Crit:0,Quicken:0,Tr:0,Amp:0},e)}function Ps(e,a){let s=0;a.Base&&(s=e.Base);const n=Is(a.Tr);return s+=n*$t(e.Char),n===0&&a.Quicken>0&&(s+=a.Quicken*$t(e.Char)*(1+He(e.Em)+e.Quicken)),a.Dmg&&(s*=1+e.Dmg),n>0&&(s*=1+Rs(e.Em)+e.Tr,a.Quicken>0&&(s+=a.Quicken*$t(e.Char)*(1+He(e.Em)+e.Quicken))),a.Crit===1?s*=1+e.Critdmg:a.Crit===2&&(s*=Ms(e.Critrate,e.Critdmg)),a.Def&&(s*=gs(e.Char,e.Enemy,e.Ignored,e.Reduced)),a.Res&&(s*=ds(e.Res)),a.Amp>0&&(s*=a.Amp*(1+Gs(e.Em)+e.Amp)),s}function Bs(e,a,s,n,i,l){const E=i;let _=0;i>0&&(_=l/i);let A=e*(1-E)*(1-_);return A+=a*(1-E)*_,A+=s*E*(1-_),A+=n*E*_,A}function IT(e,a){switch(a){case c.ATK:return vt(e.Get(c.ATK_BASE),e.Get(c.ATK_PERCENT),e.Get(c.ATK_FLAT));case c.HP:return vt(e.Get(c.HP_BASE),e.Get(c.HP_PERCENT),e.Get(c.HP_FLAT));case c.DEF:return vt(e.Get(c.DEF_BASE),e.Get(c.DEF_PERCENT),e.Get(c.DEF_FLAT));case c.NORMAL_ATTACK_LEVEL:return e.Get(c.NORMAL_ATTACK_LEVEL)+e.Get(c.NORMAL_ATTACK_LEVEL_UP);case c.ELEMENTAL_SKILL_LEVEL:return e.Get(c.ELEMENTAL_SKILL_LEVEL)+e.Get(c.ELEMENTAL_SKILL_LEVEL_UP);case c.ELEMENTAL_BURST_LEVEL:return e.Get(c.ELEMENTAL_BURST_LEVEL)+e.Get(c.ELEMENTAL_BURST_LEVEL_UP);case c.CHARGED_AIMED_SHOT_DMG:return e.Get(c.CHARGED_AIMED_SHOT_DMG)+e.Get(c.CHARGED_ATTACK_DMG)+e.Get(c.AIMED_SHOT_DMG);case c.CHARGED_AIMED_SHOT_ATK_FLAT:return e.Get(c.CHARGED_AIMED_SHOT_ATK_FLAT)+e.Get(c.CHARGED_ATTACK_ATK_FLAT)+e.Get(c.AIMED_SHOT_ATK_FLAT);case c.CHARGED_AIMED_SHOT_ATK_PERCENT:return e.Get(c.CHARGED_AIMED_SHOT_ATK_PERCENT)+e.Get(c.CHARGED_ATTACK_ATK_PERCENT)+e.Get(c.AIMED_SHOT_ATK_PERCENT);case c.CHARGED_AIMED_SHOT_CRIT_DMG:return e.Get(c.CHARGED_AIMED_SHOT_CRIT_DMG)+e.Get(c.CHARGED_ATTACK_CRIT_DMG)+e.Get(c.AIMED_SHOT_CRIT_DMG);case c.CHARGED_AIMED_SHOT_CRIT_RATE:return e.Get(c.CHARGED_AIMED_SHOT_CRIT_RATE)+e.Get(c.CHARGED_ATTACK_CRIT_RATE)+e.Get(c.AIMED_SHOT_CRIT_RATE);case c.CHARGED_AIMED_SHOT_DMG_FLAT:return e.Get(c.CHARGED_AIMED_SHOT_DMG_FLAT)+e.Get(c.CHARGED_ATTACK_DMG_FLAT)+e.Get(c.AIMED_SHOT_DMG_FLAT);default:return e.Get(a)}}function DT(e,a,s){let n,i,l,E;switch(a){case c.ATK:throw new Error("Cannot set Total ATK directly.");case c.HP:throw new Error("Cannot set Total HP directly.");case c.DEF:throw new Error("Cannot set Total DEF directly");case c.NORMAL_ATTACK_LEVEL:s=Math.max(1,Math.floor(s)),e.Set(c.NORMAL_ATTACK_LEVEL,s-e.Get(c.NORMAL_ATTACK_LEVEL_UP));break;case c.ELEMENTAL_SKILL_LEVEL:s=Math.max(1,Math.floor(s)),e.Set(c.ELEMENTAL_SKILL_LEVEL,s-e.Get(c.ELEMENTAL_SKILL_LEVEL_UP));break;case c.ELEMENTAL_BURST_LEVEL:s=Math.max(1,Math.floor(s)),e.Set(c.ELEMENTAL_BURST_LEVEL,s-e.Get(c.ELEMENTAL_BURST_LEVEL_UP));break;case c.LEVEL:s>90?s=90:s<1&&(s=1),s=Math.floor(s),i=Qt(s),l=Mt(s),E=e.Get(c.ASCENSION),E<i?E=i:E>l&&(E=l),e.Set(c.ASCENSION,E),e.Set(c.LEVEL,s);break;case c.ASCENSION:n=e.Get(c.LEVEL),i=Qt(n),l=Mt(n),E=Math.floor(s),E<i?E=i:E>l&&(E=l),e.Set(c.ASCENSION,E);break;default:e.Set(a,s);break}}var Pe=class{constructor(e){if(this.Subject=new Et(c.Length(),"CHARACTER_STATS"),this.infusions=[],this.MapCritRate=a=>a,e.Stars!==4&&e.Stars!==5)throw new Error("Character stars must be 4 or 5.");this.Options=e,this.Subject.Set(c.LEVEL,1),this.Subject.Set(c.ASCENSION,0),this.Subject.Set(c.ENERGY_RECHARGE,1),this.Subject.Set(c.CRIT_RATE,.05),this.Subject.Set(c.CRIT_DMG,.5),this.Subject.Set(c.NORMAL_ATTACK_LEVEL,1),this.Subject.Set(c.ELEMENTAL_SKILL_LEVEL,1),this.Subject.Set(c.ELEMENTAL_BURST_LEVEL,1),this.Subject.Set(c.HP_CURRENT,1),this.Subject.Set(c.ENERGY_CURRENT,1),this.enemy=new Ja(e.Name)}GetEnemy(){return this.enemy}IsShielded(){return this.Subject.Get(c.SHIELDED)===1}SetShield(e){return this.Subject.Set(c.SHIELDED,e===!0?1:0),this}GetLevel(){return this.Subject.Get(c.LEVEL)}SetLevel(e){return this.Set(c.LEVEL,e)}GetAscension(){return this.Subject.Get(c.ASCENSION)}SetAscension(e){return this.Set(c.ASCENSION,e)}IsAscended(){return this.GetAscension()===Mt(this.GetLevel())}Set(e,a){return DT(this.Subject,e,a),this}CreateModifier(e,a){return this.Subject.CreateModifier(e,a)}CreateObserver(e,a){return this.Subject.CreateObserver(e,a)}Get(e){return IT(this.Subject,e)}AddInfusion(e,a){const s={Enabled:!0,Element:e,Max:a,Remove:()=>this.RemoveInfusion(s)};return this.infusions.push(s),s}RemoveInfusion(e){const a=this.infusions.indexOf(e);return a===-1?!1:(this.infusions.splice(a,1),!0)}GetInfusion(){return NT(this.infusions)}};function ws(e){return{level:e.GetLevel(),ascension:e.GetAscension(),hp:e.Get(c.HP_CURRENT),energy:e.Get(c.ENERGY_CURRENT),shielded:e.Get(c.SHIELDED)===1,talents:[e.Get(c.NORMAL_ATTACK_LEVEL),e.Get(c.ELEMENTAL_SKILL_LEVEL),e.Get(c.ELEMENTAL_BURST_LEVEL)],enemy:Ie(e.GetEnemy())}}function bs(e,a){a.SetLevel(e.level),a.SetAscension(e.ascension),a.Set(c.NORMAL_ATTACK_LEVEL,e.talents[0]),a.Set(c.ELEMENTAL_SKILL_LEVEL,e.talents[1]),a.Set(c.ELEMENTAL_BURST_LEVEL,e.talents[2]),a.Set(c.HP_CURRENT,e.hp),a.Set(c.ENERGY_CURRENT,e.energy),a.Set(c.SHIELDED,e.shielded?1:0),qt(e.enemy,a.GetEnemy())}var G={};D(G,{Charbox:()=>Xt,CharboxEvent:()=>At,Export:()=>xn,ExportParty:()=>Wn,Factory:()=>vT,Import:()=>Un,ImportParty:()=>Qe,Party:()=>XT});var At=lt("CHANGE_PARTY"),q=class{constructor(e){this.getName=e,this.list=[],this.map=new Map}AddList(e){for(const a of e)this.Add(a)}Add(e){const a=this.getName(e).toLowerCase();return this.map.has(a)?!1:(this.list.push(e),this.map.set(a,e),!0)}Has(e){return this.map.has(this.getName(e).toLowerCase())}Remove(e){const a=this.getName(e).toLowerCase(),s=this.list.indexOf(e);return s>=0&&this.list.splice(s,1),this.map.delete(a)}Clear(){this.list.splice(0,this.list.length),this.map.clear()}Find(e){return this.map.get(e.toLowerCase())}Get(){return this.list}},Xt=class{constructor(e){this.character=e,this.normals=new q(a=>a.Options.Name),this.skills=new q(a=>a.Options.Name),this.bursts=new q(a=>a.Options.Name),this.tr=new q(a=>a.Options.Name),this.extra=new q(a=>a.Options.Name),this.effects=new q(a=>a.Options.Name),this.modifiers=[],this.Event=new Et(At.Length(),"CHARBOX_EVENT")}static create(e){const a=new Xt(e.character);return a.normals.AddList(e.normals),a.skills.AddList(e.skills),a.bursts.AddList(e.bursts),a.tr.AddList(e.tr),a.extra.AddList(e.extra),a.effects.AddList(e.effects),a}GetParty(){return this.party}SetParty(e){this.party=e}GetWeapon(){return this.weapon}SetWeapon(e){return this.weapon&&this.weapon.Unequip(),e?this.weapon=e(this):this.weapon=void 0,this}GetCharacter(){return this.character}GetNormals(){return this.normals.Get()}FindNormal(e){return this.normals.Find(e)}AddNormal(e){return this.normals.Add(e)}RemoveNormal(e){return this.normals.Remove(e)}GetSkills(){return this.skills.Get()}FindSkill(e){return this.skills.Find(e)}AddSkill(e){return this.skills.Add(e)}RemoveSkill(e){return this.skills.Remove(e)}GetBursts(){return this.bursts.Get()}FindBurst(e){return this.bursts.Find(e)}AddBurst(e){return this.bursts.Add(e)}RemoveBurst(e){return this.bursts.Remove(e)}GetTr(){return this.tr.Get()}FindTr(e){return this.tr.Find(e)}GetExtra(){return this.extra.Get()}FindExtra(e){return this.extra.Find(e)}AddExtra(e){return this.extra.Add(e)}RemoveExtra(e){return this.extra.Remove(e)}AddInstance(e,a){switch(e){case"Extra":return this.AddExtra(a);case"Normal":return this.AddNormal(a);case"Skill":return this.AddSkill(a);case"Burst":return this.AddBurst(a)}}RemoveInstance(e,a){switch(e){case"Extra":return this.RemoveExtra(a);case"Normal":return this.RemoveNormal(a);case"Skill":return this.RemoveSkill(a);case"Burst":return this.RemoveBurst(a)}}GetInstances(){return[...this.normals.Get(),...this.skills.Get(),...this.bursts.Get(),...this.tr.Get(),...this.extra.Get()]}FindInstance(e){for(const a of[this.normals,this.skills,this.bursts,this.tr,this.extra]){const s=a.Find(e);if(s)return s}}GetEffects(){var e,a;return[...((e=this.weapon)==null?void 0:e.GetEffects())||[],...((a=this.artifacts)==null?void 0:a.GetEffects())||[],...this.effects.Get()]}GetGroupedEffects(){const e=[],{weapon:a,artifacts:s,party:n}=this;a&&e.push(["WEAPON",a.GetEffects()]),s&&e.push(["ARTIFACTS",s.GetEffects()]);const i=[],l=[],E=new Set(this.effects.Get());for(const _ of E){const A=_.Options.Name;if(A.match(/C\d+$/))i.push(_);else if(A.match(/A\d+$/))l.push(_);else continue;E.delete(_)}return e.push(["TALENTS",Array.from(E)]),e.push(["PASSIVES",l]),e.push(["CONSTELLATIONS",i]),n&&e.push(["RESONANCES",n.GetResonances()]),e}FindEffect(e){let a=this.effects.Find(e);if(a||this.weapon&&(a=this.weapon.FindEffect(e),a)||this.artifacts&&(a=this.artifacts.FindEffect(e),a))return a}AddEffect(e){return this.effects.Add(e)}GetArtifacts(){return this.artifacts}SetArtifacts(e){return this.artifacts&&this.artifacts.Remove(),this.artifacts=e,this}AddModifier(e){return this.modifiers.unshift(e),this}RemoveModifier(e){const a=this.modifiers.indexOf(e);return a>=0&&(e.Disable(),this.modifiers.splice(a,1)),this}GetModifiers(){return this.modifiers}ClearModifiers(){return this.modifiers.forEach(e=>e.Disable()),this.modifiers.splice(0,this.modifiers.length),this}},Ks={};D(Ks,{BaseDamage:()=>Ys,Instance:()=>we,Normal:()=>be,NormalTalent:()=>dt,Transformative:()=>b});var Ys=class{constructor(e){this.instance=e,this.motions=[],this.multipliers=[]}CreateMv(e,a){const s={Enabled:!0,Stat:e,Value:a};return this.motions.push(s),s}AddMv(e){return this.motions.includes(e)?!1:(this.motions.push(e),!0)}RemoveMv(e){const a=this.motions.indexOf(e);return a===-1?!1:(this.motions.splice(a,1),!0)}GetMvs(){return this.motions}CreateMultiplier(e){const a={Enabled:!0,Value:e};return this.multipliers.push(a),a}AddMultiplier(e){return this.multipliers.includes(e)?!1:(this.multipliers.push(e),!0)}RemoveMultiplier(e){const a=this.multipliers.indexOf(e);return a===-1?!1:(this.multipliers.splice(a,1),!0)}GetMultipliers(){return this.multipliers}Compute(){let e=0;for(const a of this.motions)a.Enabled&&(e+=this.instance.Get(a.Stat)*a.Value);for(const a of this.multipliers)a.Enabled&&Math.abs(a.Value)>1e-6&&(e*=a.Value);return e}};function OT(e,a){return e===c.HYDRO_DMG&&a.Affected(c.PYRO_DMG)?[c.VAPORIZE_DMG,2]:e===c.PYRO_DMG&&a.Affected(c.CRYO_DMG)?[c.MELT_DMG,2]:e===c.PYRO_DMG&&a.Affected(c.HYDRO_DMG)?[c.VAPORIZE_DMG,1.5]:e===c.CRYO_DMG&&a.Affected(c.PYRO_DMG)?[c.MELT_DMG,1.5]:[c.NONE,0]}function yT(e,a){return a.HasAura(W.QUICKEN)?e===c.ELECTRO_DMG?[c.AGGRAVATE_DMG,2.3]:e===c.DENDRO_DMG?[c.SPREAD_DMG,2.5]:[c.NONE,0]:[c.NONE,0]}function Fs(e,a,s){const n=e.GetElement(),i=e.Options.Talent,l=e.Character.GetEnemy(),[E,_]=yT(n,l),[A,u]=OT(n,l),S=vs({Char:e.Character.Get(c.LEVEL),Enemy:l.Subject.Get(c.LEVEL),Base:e.Base.Compute()+e.Get(c.DMG_FLAT),Dmg:e.Get(n)+e.Get(i)+e.Get(c.ALL_DMG),Critrate:Math.max(0,Math.min(1,e.Get(c.CRIT_RATE))),Critdmg:e.Get(c.CRIT_DMG),Em:e.Get(c.ELEMENTAL_MASTERY),Res:l.Subject.Get(zt(n)),Ignored:e.Get(c.DEFIGNORED)+l.Subject.Get(c.DEFIGNORED),Reduced:e.Get(c.DEFREDUCTION)+l.Subject.Get(c.DEFREDUCTION),Quicken:e.Get(E),Amp:e.Get(A),Tr:e.Get(e.Options.Tr)}),h=Hs({Base:e.Options.Base,Def:e.Options.Def,Res:e.Options.Res,Dmg:e.Options.Dmg,Crit:s,Quicken:_,Tr:e.Options.Tr,Amp:u});return a||(S.Quicken=0,S.Amp=0,h.Quicken=0,h.Amp=0),e.Options.Amp||(h.Amp=0),e.Options.Quicken||(h.Quicken=0),e.Options.Crit||(h.Crit=0),{stats:S,options:h}}function Be(e,a,s){const{stats:n,options:i}=Fs(e,a,s);return Ps(n,i)}var Y=c,we=class{constructor(e,a){this.Character=e,this.Options=a,this.Base=new Ys(this),this.fixed=new Uint8Array(c.Length()),this.Subject=new Et(c.Length(),"INSTANCE_"+this.Options.Name)}GetElement(){if(this.Options.Override){if(this.Options.OverrideElement!==c.NONE)return this.Options.OverrideElement;if(this.Options.Infusion){const e=this.Character.GetInfusion();if(e)return e.Element}}return this.Options.Element}Fix(e){return this.fixed[e]=1,this}Unfix(e){return this.fixed[e]=0,this}Get(e){if(e===Y.ATK){const a=this.GetElement(),s=pe(a),n=Me(a),i=this.Options.Talent,l=pe(i),E=Me(i),_=this.Get(Y.ATK_BASE);let A=this.Get(Y.ATK_PERCENT),u=this.Get(Y.ATK_FLAT);return s!==Y.NONE&&(A+=this.Get(s)),l!==Y.NONE&&(A+=this.Get(l)),n!==Y.NONE&&(u+=this.Get(n)),E!==Y.NONE&&(u+=this.Get(E)),vt(_,A,u)}else if(e===Y.CRIT_RATE){const a=this.GetElement(),s=this.Options.Talent,n=de(a),i=de(s);let l=0;return l+=this.Subject.Get(Y.CRIT_RATE),l+=this.Subject.Get(Y.EXTRA_CRIT_RATE),this.fixed[Y.CRIT_RATE]||(l+=this.Character.Get(Y.CRIT_RATE)),this.fixed[Y.EXTRA_CRIT_RATE]||(l+=this.Character.Get(Y.EXTRA_CRIT_RATE)),l+=this.Get(n)+this.Get(i),this.Character.MapCritRate(l)}else if(e===Y.CRIT_DMG){const a=this.GetElement(),s=this.Options.Talent,n=ge(a),i=ge(s);let l=this.Subject.Get(Y.CRIT_DMG);return this.fixed[Y.CRIT_DMG]||(l+=this.Character.Get(Y.CRIT_DMG)),l+=this.Get(n)+this.Get(i),l}else if(e===Y.DMG_FLAT){const a=this.GetElement(),s=this.Options.Talent,n=Ce(a),i=Ce(s);let l=this.Subject.Get(Y.DMG_FLAT);return this.fixed[Y.DMG_FLAT]||(l+=this.Character.Get(Y.DMG_FLAT)),l+=this.Get(n)+this.Get(i),l}else return this.fixed[e]?this.Subject.Get(e):this.Character.Get(e)+this.Subject.Get(e)}DmgNoCrit(e){return Be(this,e,0)}DmgCrit(e){return Be(this,e,1)}DmgAvg(e){return Be(this,e,2)}Params(e,a){return Fs(this,e,a)}};function be(e,a){return new we(a,{Name:e,Element:c.PHYSICAL_DMG,Talent:c.NONE,Override:!0,OverrideElement:c.NONE,Infusion:!1,Base:!0,Def:!0,Res:!0,Dmg:!0,Crit:!0,Quicken:!0,Amp:!0,Tr:c.NONE})}function b(e,a,s){const n=new we(s,{Name:"HIT_"+c.Name(e).replace(/_DMG/g,""),Element:c.PHYSICAL_DMG,Talent:c.NONE,Override:!1,OverrideElement:c.NONE,Infusion:!1,Base:!1,Def:!1,Res:!0,Dmg:!1,Crit:!0,Quicken:!1,Amp:!1,Tr:e});if(n.Fix(c.CRIT_RATE),n.Fix(c.CRIT_DMG),e===c.SWIRL_DMG){if(!a)throw new Error("Swirl transformative damage must have an element");n.Options.Quicken=!0,n.Options.Amp=!0,n.Options.Name="HIT_"+(c.Name(e)+"_"+c.Name(a)).replace(/_DMG/g,""),n.Options.Element=a}else n.Options.Element=$a(e);return n}function dt(e,a){const s=be(a.Name,e),n=[];if(s.Options.Talent=a.Talent,s.Options.Element=a.Element,a.Scaling)for(const i of a.Scaling)n.push(...Ts(s,i));return[s,n]}function vT(e){return Object.assign(function(){const s=new Pe(e);cs(s,e);const n=Xt.create({character:s,normals:e.Normals.map(i=>dt(s,Ke(i,c.NORMAL_ATTACK_LEVEL))[0]),skills:e.Skills.map(i=>dt(s,Ke(i,c.ELEMENTAL_SKILL_LEVEL))[0]),bursts:e.Bursts.map(i=>dt(s,Ke(i,c.ELEMENTAL_BURST_LEVEL))[0]),tr:HT(s),extra:e.Extra.map(i=>dt(s,it(F({},i),{Scaling:void 0}))[0]),effects:[]});return n.GetNormals().forEach(i=>i.Options.Infusion=!0),e.Effects.forEach(i=>{const l=i(n);l.Apply(n),n.AddEffect(l)}),n},e)}function Ke(e,a){var s;return it(F({},e),{Scaling:(s=e.Scaling)==null?void 0:s.map(n=>it(F({},n),{Talent:a}))})}function HT(e){const a=e.Options.Element,s=[];switch(a){case c.PYRO_DMG:s.push(b(c.OVERLOAD_DMG,void 0,e)),s.push(b(c.BURGEON_DMG,void 0,e)),s.push(b(c.BURNING_DMG,void 0,e));break;case c.HYDRO_DMG:s.push(b(c.ELECTROCHARGE_DMG,void 0,e)),s.push(b(c.BLOOM_DMG,void 0,e));break;case c.CRYO_DMG:s.push(b(c.SUPERCONDUCT_DMG,void 0,e));break;case c.ELECTRO_DMG:s.push(b(c.SUPERCONDUCT_DMG,void 0,e)),s.push(b(c.ELECTROCHARGE_DMG,void 0,e)),s.push(b(c.OVERLOAD_DMG,void 0,e)),s.push(b(c.HYPERBLOOM_DMG,void 0,e));break;case c.DENDRO_DMG:s.push(b(c.BLOOM_DMG,void 0,e));break;case c.GEO_DMG:s.push(b(c.SHATTER_DMG,void 0,e));break;case c.ANEMO_DMG:s.push(b(c.SWIRL_DMG,c.PYRO_DMG,e)),s.push(b(c.SWIRL_DMG,c.HYDRO_DMG,e)),s.push(b(c.SWIRL_DMG,c.CRYO_DMG,e)),s.push(b(c.SWIRL_DMG,c.ELECTRO_DMG,e)),s.push(b(c.SUPERCONDUCT_DMG,void 0,e)),s.push(b(c.ELECTROCHARGE_DMG,void 0,e)),s.push(b(c.OVERLOAD_DMG,void 0,e)),s.push(b(c.HYPERBLOOM_DMG,void 0,e)),s.push(b(c.BLOOM_DMG,void 0,e)),s.push(b(c.BURGEON_DMG,void 0,e));break}return a!==c.GEO_DMG&&e.Options.Weapon===za.CLAYMORE&&s.push(b(c.SHATTER_DMG,void 0,e)),s}var ks={};D(ks,{Cryo:()=>Tn,Dendro:()=>An,FindByElement:()=>Ln,Geo:()=>_n,GetList:()=>hn,Hydro:()=>En,Pyro:()=>cn});var r={};D(r,{Builder:()=>St,Effect:()=>nn,EffectEvent:()=>z,Export:()=>We,Factory:()=>ut,Import:()=>je});function w(e,a){let s=e.toFixed(a);return s=s.replace(/\.([0-9]*)([1-9])0+$/,".$1$2"),s=s.replace(/\.0+$/,""),s}function Vs(e){switch(e.type){case 0:return wT(e.object);case 1:return bT(e.object);case 2:return KT(e.object);case 3:return BT(e.object);case 4:return PT(e.object)}}function PT(e){return"Damage instance: "+e.Options.Name}function BT(e){return`Infusion (${e.Enabled?"Enabled":"Disabled"}): `+Ye(e.Element)}function wT(e){const a=e.Enabled()?"Enabled":"Disabled";return`Modifier (${e.Title}) (${a}): `+Ye(e.GetProp())+" += "+w(e.GetValue(),4)}function bT(e){let s=`Multiplier (${e.object.Enabled?"Enabled":"Disabled"}): `+w(e.object.Value,4)+`
`;s+=`	For instances:
`;for(const n of e.instances)s+="		"+n.Options.Name+`
`;return s}function KT(e){let s=`MV (${e.object.Enabled?"Enabled":"Disabled"}): `+w(e.object.Value,4)+"*"+Ye(e.object.Stat)+`
`;s+=`	For instances:
`;for(const n of e.instances)s+="		"+n.Options.Name+`
`;return s}function Ye(e){try{return c.Name(e)}catch{return"unknown stat"}}var YT=class{constructor(){this.modifiers=new Set,this.observers=new Set,this.infusions=new Set,this.multipliers=new Set,this.mtins=new Set,this.mvs=new Set,this.mvins=new Set,this.instances=new Set,this.queryPool=[],this.queryGroups=new Map,this.nextQuery={}}GetModifiers(){return Array.from(this.modifiers)}Modifier(e){return this.modifiers.add(e),this.queryPool.push({type:0,object:e}),e}Observer(e){return this.observers.add(e),e}Infusion(e){return this.infusions.add(e),this.queryPool.push({type:3,object:e}),e}Multiplier(e,...a){return this.multipliers.add(e),a.forEach(s=>{s.Base.AddMultiplier(e),this.mtins.add(s)}),this.queryPool.push({type:1,object:{instances:a,object:e}}),e}Mv(e,...a){return this.mvs.add(e),a.forEach(s=>{s.Base.AddMv(e),this.mvins.add(s)}),this.queryPool.push({type:2,object:{instances:a,object:e}}),e}Instance(e,a,s){const n=[e,a,s];return this.instances.add(n),this.queryPool.push({type:4,object:s}),n}Enable(){return this.observers.forEach(e=>e.Enable().Notify()),this.modifiers.forEach(e=>e.Enable()),this.infusions.forEach(e=>e.Enabled=!0),this.mvs.forEach(e=>e.Enabled=!0),this.multipliers.forEach(e=>e.Enabled=!0),this.instances.forEach(([e,a,s])=>e.AddInstance(a,s)),this}DisableObs(){return this.observers.forEach(e=>e.Notify().Disable()),this}Disable(){return this.modifiers.forEach(e=>e.Disable()),this.DisableObs(),this.infusions.forEach(e=>e.Enabled=!1),this.mvs.forEach(e=>e.Enabled=!1),this.multipliers.forEach(e=>e.Enabled=!1),this.instances.forEach(([e,a,s])=>e.RemoveInstance(a,s)),this}Remove(){return this.Disable(),this.observers.forEach(e=>e.Remove()),this.infusions.forEach(e=>e.Remove()),this.mvins.forEach(e=>this.mvs.forEach(a=>e.Base.RemoveMv(a))),this.mtins.forEach(e=>this.multipliers.forEach(a=>e.Base.RemoveMultiplier(a))),this.instances.forEach(([e,a,s])=>e.RemoveInstance(a,s)),this}StartQuery(e){this.nextQuery=e}EndQuery(){this.queryGroups.set(this.nextQuery,[...this.queryPool]),this.queryPool=[]}String(){let e="";for(const[a,s]of this.queryGroups){e+="QUERY: "+JSON.stringify(a)+`
`;for(const n of s)e+=Vs(n)+`
`;e+="=".repeat(32)+`
`}this.queryGroups.size===0&&(e+="=".repeat(32)+`
`);for(const a of this.queryPool)e+=Vs(a)+`
`;return e}},z=lt("ENABLE","DISABLE","CHANGE_RANK","CHANGE_TARGET","CHANGE_STACKS","CHANGE_AURAS","CHANGE_CONDITIONS");function Tt(...e){const a=[],s=[];let n=0;e.forEach((l,E)=>{a[E]=l.split(`
`),a[E].forEach(_=>{_.length>(s[E]||0)&&(s[E]=_.length)}),a[E].length>n&&(n=a[E].length)});const i=[];return a.forEach((l,E)=>{for(let _=0;_<n;_++){let A;for(_<l.length?A=l[_]:A="";A.length<s[E];)A+=" ";i[_]===void 0&&(i[_]=""),i[_]+=A}}),i.join(`
`)}var xs={};D(xs,{CRLF_EXP:()=>Qs,ColorizeArgs:()=>Ws,CommandHelp:()=>xe,CommandListHelp:()=>Ue,DEFINE_CASE_EXP:()=>Xs,DEFINE_CONST_EXP:()=>zs,FindCommand:()=>Fe,FindConstants:()=>Js,INLINE_COMMENT_EXP:()=>ke,LogString:()=>Us,Logger:()=>k,MULT_COMMENT_EXP:()=>$s,ParseLine:()=>tn,ParseLines:()=>en,Program:()=>Zt,REPLACE_CONST_EXP:()=>qs,RemoveComments:()=>Ve,ReplaceConstants:()=>Zs,SplitCases:()=>Jt}),Rt.exports.enabled=!0;var FT={Log:"green",Warn:"yellow",Error:"red"};function Us(e,a,s){let n=s.msg;if(e){let i=`[Line ${s.line}] [${s.type}]`;a&&(i=Rt.exports[FT[s.type]](i)),n=i+" "+n}return n}function Ws(e,a){return a.replace(/%([.0-9]*[a-z]+)/g,s=>Rt.exports[e](s))}var js=class{constructor(){this.Line=1,this.SaveLogs=!0,this.Colorize=!0,this.Prefix=!0,this.logs=[],this.Out=e=>console.log(this.LogString(e))}send(e,a){const s={type:e,msg:a,line:this.Line};return this.SaveLogs&&this.logs.push(s),this.Out(s),s}format(e,a){return this.Colorize?Le.printf(Ws("cyan",e),...a):Le.printf(e,...a)}GetLog(){return this.logs}Clear(){this.logs.splice(0,this.logs.length)}Log(e){return this.send("Log",e)}Logf(e,...a){return this.send("Log",this.format(e,a))}Warn(e){return this.send("Warn",e)}Warnf(e,...a){return this.send("Warn",this.format(e,a))}Error(e){return this.send("Error",e)}Errorf(e,...a){return this.send("Error",this.format(e,a))}Throw(e){const{msg:a}=this.send("Error",e);throw a}Throwf(e,...a){const{msg:s}=this.send("Error",this.format(e,a));throw s}String(){return this.logs.map(e=>this.LogString(e)).join(`
`)}toString(){return this.String()}LogString(e){return Us(this.Prefix,this.Colorize,e)}},k=js;k.Global=new js;function Fe(e,a){for(let s=0;s<a.length;s++){const n=a[s],i=e[n];if(!i)throw new Error("Command not found: `"+a.slice(0,s+1).join(" ")+"`");if(!i.children||s===a.length-1)return[i,a.slice(s+1),a.slice(0,s+1)];e=i.children}throw new Error("Command not found: "+a.join(" "))}var zs=/^ *const +\$([a-z_](?:\w|\.)*) *(.*)$/img,qs=/\$([a-z_](?:\w|\.)*)/ig,Qs=/(\r\n|\n\r)/g,ke=/(#|\/\/).*$/gm,$s=/\/\*((?:.|\n|\r)*?)\*\//gm,Xs=/case([^:]*):/g;function Ve(e){return e.replace(Qs,`
`).replace($s,a=>a.replace(/[^\n]/g," ")).replace(ke,"")}function Js(e,a={}){return e=e.replace(zs,(s,n,i)=>(i=i.replace(ke,""),a[String(n).valueOf().toLowerCase()]=i,"")),[e,a]}function Zs(e,a={}){return e=e.replace(qs,(s,n)=>{const i=a[String(n).valueOf().toLowerCase()];if(!i)throw new Error("Cannot find constant: $"+n);return i}),e}function tn(e){return e.trim().split(/\s+/).filter(a=>!a.match(/^\s*$/))}function en(e){return e.split(`
`).map((a,s)=>({text:a,line:s})).filter(({text:a})=>a.trim()!=="")}function Jt(e){e=Ve(e);const a=new Map,s=Array.from(e.matchAll(Xs));s.forEach((i,l)=>{var E;const _=i[0],A=i[1];if(!_||!A)return;const u=A.split(/\s|,|;/).map(f=>f.trim()).filter(f=>!!f),S=(i.index||0)+_.length,h=((E=s[l+1])==null?void 0:E.index)||e.length,L=e.slice(0,S).replace(/[^\n]/g,"")+e.slice(S,h).trim()+e.slice(h,e.length).replace(/[^\n]/g,"");for(let f of u){f=f.toLowerCase();let N=a.get(f);N||a.set(f,N=[]),N.push(L)}});const n=a.get("all");if(n)for(const i of a.values())i.unshift(...n);return a}function xe(e,a){const s=new k;s.Out=()=>{},s.Colorize=!1,s.Prefix=!1;const n=(a.arguments||["args..."]).map(l=>"["+l+"]");let i=a.description.split(`
`).join(`
`);return a.example&&(i+=`

**Example:**
\`\`\`
`+a.example+"\n```\n"),a.children&&(i+=`

Type \`help ${e}\` to show more about this subcommand`),s.Logf("### Command `"+e+" %s".repeat(n.length)+`\`:

`+i+`

`,...n),s.String()}function Ue(e,a){let s="";for(const[n,i]of Object.entries(a))s+=xe(e+" "+n,i)+`

`;return s}function an(e,a){return Object.assign(a,{String(){return e},toString(){return e}})}function sn(e){return e.forEach((a,s)=>e[s]=a.toLowerCase()),e}function kT(e){let a=0,s=1/0;if(e){s=e.length;for(const n of e)n.includes("...")?s=1/0:a++}return[a,s]}function VT(e,a={},s=k.Global){const n=[];e=Ve(e);const[i,l]=Js(e,a==null?void 0:a.constants),E=s.Line;return en(i).forEach(({text:A,line:u})=>{s.Line=u+1;try{A=Zs(A,l)}catch(h){throw s.Error(String(h).valueOf()),s.Line=E,h}const S=tn(A);!S.length||n.push({cmd:S,line:s.Line})}),s.Line=E,n}var Zt=class{constructor(e){this.Value=e,this.commands={},this.Log=k.Global,this.IgnoreCase=!0,this.Catch=!0}Set(e){return this.commands=e,this}Get(){return this.commands}Compile(e,a){const s=this.Log.Line,n=(a==null?void 0:a.line)||s;this.Log.Line=n;const i=l=>{if(this.Log.Line=n,typeof l=="string"?(this.Log.Line=s,l=new Error(l)):(this.Log.Error(String(l).valueOf()),this.Log.Line=s),!this.Catch)throw l;return l};try{this.IgnoreCase&&sn(e);const[l,E,_]=Fe(this.commands,e),A=_.join(" ");if(!l.compile){const{msg:L}=this.Log.Errorf("Command `%s` is defined but has no `.compile()` method",A);throw L}const[u,S]=kT(l.arguments);if(E.length<u){const{msg:L}=this.Log.Errorf("Command `%s` requires at least %d arguments, but %d were provided.",A,u,E.length);throw L}if(E.length>S){const{msg:L}=this.Log.Errorf("Command `%s` requires at most %d arguments, but %d were provided.",A,S,E.length);throw L}const h=l.compile(this,E);return this.Log.Line=s,an(e.join(" "),()=>{const L=this.Log.Line;this.Log.Line=n;try{h()}catch(f){i(f)}this.Log.Line=L})}catch(l){throw i(l)}}CompileString(e,a){const s=VT(e,a,this.Log),n=[];for(const{cmd:l,line:E}of s){const _=this.Compile(l,{line:E});n.push(_)}const i=n.map(l=>l.String()).join(`
`);return an(i,()=>n.forEach(l=>l()))}Help(e){if(!e.length||e[0].trim()==="")return Ue("",this.commands);this.IgnoreCase&&sn(e);const[a,,s]=Fe(this.commands,e);let n=xe(s.join(" "),a);return a.children&&(n+=`

`+Ue(s.join(" "),a.children)),n}GetCommands(){const e=[];function a(s,n){for(const[i,l]of Object.entries(s)){const E=[...n,i];e.push(E.join(" ")),l.children&&a(l.children,E)}}return a(this.commands,[]),e}},nn=class{constructor(e,a){this.Options=e,this.Owner=a,this.targets=new Set,this.register=new Map,this.onUnapply=new Map,this.enabled=!1,this.rank=1,this.stacks=0,this.conditions=new Set,this.auras=new Set,this.Event=new Et(z.Length(),"EFFECT_EVENT")}CreateObserver(e,a){return this.Event.CreateObserver(e,a)}Enabled(){return this.enabled}Enable(){this.enabled=!0;for(const[,e]of this.register)e.Enable();return this.Event.Notify(z.ENABLE),this}Disable(){this.enabled=!1;for(const[,e]of this.register)e.Disable();return this.Event.Notify(z.DISABLE),this}GetTargets(){return Array.from(this.targets.values())}Lock(e){const a=this.register.get(e);return a?(a.DisableObs(),this):(k.Global.Warnf("Cannot lock effect %s for target %s because its not applied.",this.Options.Name,e.GetCharacter().Options.Name),this)}ApplyMultiple(e){const a=new Set(e);if(!this.Options.ApplyOther){const n=a.has(this.Owner),i=a.size;a.clear(),n&&(a.add(this.Owner),i>1&&k.Global.Warnf('Effect "%s" can only be applied to its owner: "%s"',this.Options.Name,this.Owner.GetCharacter().Options.Name))}if(this.Options.ApplySelf||(a.delete(this.Owner),k.Global.Warnf('Effect "%s" CANNOT be applied to its owner: "%s"',this.Options.Name,this.Owner.GetCharacter().Options.Name)),this.Options.MaxTargets>0){let n=0;for(let i=0;i<e.length&&a.size>this.Options.MaxTargets;i++)a.delete(e[i]),n++;n>0&&k.Global.Warnf('Effect "%s" maximum targets is %d.',this.Options.Name,this.Options.MaxTargets)}this.UnapplyAll();let s=0;for(const n of a)this.Apply(n)&&s++;return s}Apply(e){if(!this.Options.StackSelf){const n=e.GetParty();if(n&&n.GetAppliedEffects(e).find(l=>l.Options.Name===this.Options.Name))return k.Global.Warnf('Cannot apply effect "%s" to target "%s". Another instance of this effect is already applied to the target',this.Options.Name,e.GetCharacter().Options.Name),!1}if(!this.Options.ApplySelf&&e===this.Owner)return k.Global.Warnf('Cannot apply effect "%s" to target "%s". Effect CANNOT be applied to its owner: "%s"',this.Options.Name,e.GetCharacter().Options.Name,this.Owner.GetCharacter().Options.Name),!1;if(!this.Options.ApplyOther&&e!==this.Owner)return k.Global.Warnf('Cannot apply effect "%s" to target "%s". Effect can only be applied to its owner: "%s"',this.Options.Name,e.GetCharacter().Options.Name,this.Owner.GetCharacter().Options.Name),!1;if(this.Options.MaxTargets>0&&this.targets.size>=this.Options.MaxTargets)return k.Global.Warnf('Cannot apply effect "%s" to target "%s". Effect is applied to its maximum number of targets: %d',this.Options.Name,e.GetCharacter().Options.Name,this.Options.MaxTargets),!1;if(this.targets.has(e))return k.Global.Warnf('Cannot apply effect "%s" to target "%s". Effect is applied to this target',this.Options.Name,e.GetCharacter().Options.Name),!1;this.targets.add(e);const a=new YT;this.register.set(e,a);const s=this.Options.OnApply(e,this,a);return this.onUnapply.set(e,s),this.Enabled()?a.Enable():a.Disable(),this.Event.Notify(z.CHANGE_TARGET),!0}Unapply(e){var a,s;return this.targets.has(e)?(this.targets.delete(e),(a=this.register.get(e))==null||a.Remove(),this.register.delete(e),(s=this.onUnapply.get(e))==null||s(),this.onUnapply.delete(e),this.Event.Notify(z.CHANGE_TARGET),!0):!1}UnapplyAll(){return this.targets.forEach(e=>this.Unapply(e)),this}GetRank(){return this.rank}GetStacks(){return this.stacks}SetRank(e){return e=Math.floor(e),e>this.Options.MaxRank&&(e=this.Options.MaxRank),e<1&&(e=1),this.rank=e,this.Event.Notify(z.CHANGE_RANK),this}SetStacks(e){return e>this.Options.MaxStacks&&(e=this.Options.MaxStacks),e<0&&(e=0),this.stacks=e,this.Event.Notify(z.CHANGE_STACKS),this}HasCondition(e){return this.conditions.has(e.toUpperCase())}SetConditions(...e){this.conditions.clear();for(let a of e)a=a.toUpperCase(),this.Options.Conditions.includes(a)&&this.conditions.size<this.Options.MaxConditions&&this.conditions.add(a);return this.Event.Notify(z.CHANGE_CONDITIONS),this}GetConditions(){return Array.from(this.conditions)}HasAura(e){return this.auras.has(e)}SetAuras(...e){const a=this.Options.ValidAuras;this.auras.clear();for(const s of e)this.auras.size<this.Options.MaxAuras&&(a.length===0||a.length>0&&a.includes(s))&&this.auras.add(s);return this.Event.Notify(z.CHANGE_AURAS),this}GetAuras(){return Array.from(this.auras)}Affected(e){for(const a of this.auras)if(Ge(a)===e)return!0;return!1}TargetRegister(e){const a=this.register.get(e);if(!!a)return a.String()}Register(){const e=this.GetTargets().map(s=>s.GetCharacter().Options.Name+`
`+this.TargetRegister(s)||""),a=[];for(let s=0;s<e.length;s++)a[2*s]=e[s],a[2*s+1]=" ".repeat(4);return Tt(...a)}};function ut(e){const a=F({ApplySelf:!0,ApplyOther:!1,StackSelf:!1,MaxTargets:0,Conditions:[],MaxConditions:0,MaxAuras:0,ValidAuras:[],MaxRank:1,MaxStacks:0},e);return a.Conditions=a.Conditions.map(s=>s.toUpperCase()),Object.assign(function(n){return new nn(a,n)},it(F({},e),{Options:e}))}function rn(e,a){return!(Number.isFinite(a.g)&&!(e>(a.g||0))||Number.isFinite(a.geq)&&!(e>=(a.geq||0))||Number.isFinite(a.l)&&!(e<(a.l||0))||Number.isFinite(a.leq)&&!(e<=(a.leq||0)))}function ln(e,a,s){if(s.name){if(typeof s.name=="string"){if(e.Options.Name.toLowerCase()!==s.name.toLowerCase())return!1}else if(!e.Options.Name.match(s.name))return!1}if(e.GetAscension()<(s.ascension||0)||s.weapon&&s.weapon.length>0&&!s.weapon.some(E=>e.Options.Weapon===E))return!1;const n=e.Get(c.HP_CURRENT),i=e.Get(c.ENERGY_CURRENT);return!(s.hp&&!rn(n,s.hp)||s.energy&&!rn(i,s.energy)||s.shielded!==void 0&&e.IsShielded()!==s.shielded||s.isOwner!==void 0&&e===a!==s.isOwner)}function on(e,a){return!(a.affected&&a.affected.length>0&&e.Affected&&!a.affected.some(n=>{var i;return(i=e.Affected)==null?void 0:i.call(e,n)})||a.aura&&a.aura.length>0&&!a.aura.some(n=>e.HasAura(n)))}function xT(e,a,s,n){return!(e.target&&!ln(s,a,e.target)||e.owner&&!ln(a,a,e.owner)||e.enemy&&!on(s.GetEnemy(),e.enemy)||e.effect&&(!on(n,e.effect)||e.effect.conditions&&e.effect.conditions.length>0&&!e.effect.conditions.some(l=>n.HasCondition(l))))}function UT(e,a,s,n){if(typeof e=="function")return e(s,a,n);{let i=xT(e,a.GetCharacter(),s.GetCharacter(),n);return e.not&&(i=!i),i}}var WT=class{constructor(e){this.builder=e,this.target=[],this.owner=[],this.party=!1}Target(...e){return this.target=e,this.builder}Owner(...e){return this.owner=e,this.builder}Party(e){return this.party=e,this.builder}getTarget(){return this.target}getOwner(){return this.owner}getParty(){return this.party}},te=class{constructor(e){this.builder=e}Next(){return this.builder.Next()}Build(){return this.builder.Build()}Where(e){return this.builder.Where(e),this}};function ee(e,a){const s=[];for(const n of a)typeof n=="string"?e.filter(l=>l.Options.Name.toLowerCase()===n.toLowerCase()).forEach(l=>s.push(l)):typeof n=="function"?e.filter(l=>n(l)).forEach(l=>s.push(l)):e.filter(l=>l.Options.Name.match(n)).forEach(l=>s.push(l));return s}var jT=class extends te{constructor(){super(...arguments),this.instances=[],this.mods=new Map,this.stat=[],this.target=0,this.usestacks=!1,this.values=[]}MapStat(e){return this.mapStatFn=e,this}Char(...e){return this.stat=e,this.target=0,this}Enemy(...e){return this.stat=e,this.target=1,this}Instance(...e){return this.instances=e,this.target=2,this}Values(...e){return this.usestacks=!1,this.values=e.map(a=>[a]),this}Stacks(...e){return this.usestacks=!0,e.length>0&&(this.values=e),this}Rank(e){return this.rankFn=e,this}Map(e){return this.mapFn=e,this}onBuild(e,a,s){const n=[];this.mapStatFn&&(this.stat=this.mapStatFn(e,a,s));const i=this.target===2?ee(e.GetInstances(),this.instances):[];switch(this.target){case 0:for(const l of this.stat)n.push(s.Modifier(e.GetCharacter().CreateModifier(l,0)));break;case 1:for(const l of this.stat)n.push(s.Modifier(e.GetCharacter().GetEnemy().Subject.CreateModifier(l,0)));break;case 2:for(const l of this.stat)for(const E of i)n.push(s.Modifier(E.Subject.CreateModifier(l,0)));break;default:throw new Error("Cannot create the modifier. Unknown target "+String(this.target).valueOf())}this.mods.set(e,n)}onEnable(e,a,s){const n=this.mods.get(e);if(!n)return;if(this.values.length===0){n.forEach(_=>_.SetValue(0));return}let i;this.rankFn?i=this.rankFn(e,a,s):i=a.GetRank(),i>this.values.length&&(i=this.values.length);const l=this.values[i-1];let E=zT(this.usestacks,l,a.GetStacks());this.mapFn&&(E=this.mapFn(E,e,a,s));for(const _ of n)_.GetValue()!==E&&_.SetValue(E)}onDisable(e){const a=this.mods.get(e);!a||a.forEach(s=>s.SetValue(0))}};function zT(e,a,s){if(e){const n=a.length;return n===1?a[0]*s:n>1?(s>n-1&&(s=n-1),a[s]):0}else return a[0]}var qT=class extends te{constructor(){super(...arguments),this.infusions=new Map,this.element=c.NONE,this.max=!1}Set(e,a){return this.element=e,this.max=a,this}onBuild(e,a,s){if(this.element!==c.NONE){const n=s.Infusion(e.GetCharacter().AddInfusion(this.element,this.max));this.infusions.set(e,n)}}onEnable(e,a){const s=this.infusions.get(e);s&&(s.Enabled=a.Enabled())}onDisable(e){const a=this.infusions.get(e);a&&(a.Enabled=!1)}},QT=class extends te{constructor(){super(...arguments),this.mvs=new Map,this.mults=new Map,this.type="mv",this.stat=c.NONE,this.value=0,this.instances=[]}Mv(e,a,...s){return this.stat=e,this.value=a,this.instances=s,this.type="mv",this}Multiplier(e,...a){return this.value=e,this.type="mult",this.instances=a,this}Map(e){return this.mapFn=e,this}onBuild(e,a,s){const n=ee(e.GetInstances(),this.instances);if(this.type==="mv"&&this.stat!==c.NONE&&this.value>0){const i=s.Mv({Enabled:!1,Stat:this.stat,Value:this.value},...n);this.mvs.set(e,i)}else if(this.type==="mult"&&this.value>0){const i=s.Multiplier({Enabled:!1,Value:this.value},...n);this.mults.set(e,i)}}onEnable(e,a,s){let n=this.mvs.get(e),i=this.mults.get(e);!n&&!i&&(this.onBuild(e,a,s),n=this.mvs.get(e),i=this.mults.get(e)),n&&(this.mapFn?n.Value=this.mapFn(this.value,e,a,s):n.Value=this.value),i&&(this.mapFn?i.Value=this.mapFn(this.value,e,a,s):i.Value=this.value)}onDisable(e){const a=this.mvs.get(e),s=this.mults.get(e);a&&(a.Value=0),s&&(s.Value=1)}},$T=class extends te{constructor(){super(...arguments),this.store=new Map,this.location="Extra"}Location(e){return this.location=e,this}Options(e){return this.options=e,this}Basic(e){return this.builder.instance.Options({Name:e.Name,Element:e.Element,Talent:e.Talent||c.NONE,Scaling:[{Initial:0,Stat:c.NONE,Talent:c.NONE,Scaling:Es.NONE}]}).Next().mv.Mv(e.Stat,e.Values[0],e.Name).Map((a,s,n)=>{const i=Math.max(1,Math.min(e.Values.length,n.GetRank()))-1;return e.Values[i]}),this}onBuild(e,a,s){if(!this.options)return;const n=dt(e.GetCharacter(),this.options);n[1].forEach(i=>s.Observer(i)),s.Instance(e,this.location,n[0]),this.store.set(e,n)}onEnable(e){const a=this.store.get(e);!a||(a[1].forEach(s=>s.Notify()),e.AddInstance(this.location,a[0]))}onDisable(e){const a=this.store.get(e);!a||e.RemoveInstance(this.location,a[0])}},St=class{constructor(){this.query={},this.container=[this],this.observe=new WT(this),this.stat=new jT(this),this.infusion=new qT(this),this.mv=new QT(this),this.instance=new $T(this),this.parts=[this.stat,this.infusion,this.mv,this.instance]}innerBuild(...[e,a,s]){s.StartQuery(this.query);const n=this.parts;n.forEach(_=>_.onBuild(e,a,s));const i=()=>n.forEach(_=>_.onEnable(e,a,s)),l=()=>n.forEach(_=>_.onDisable(e,a,s)),E=()=>{a.Enabled()&&UT(this.query,a.Owner,e,a)?i():l()};E();for(const _ of this.observe.getTarget())s.Observer(e.GetCharacter().CreateObserver(_,E));for(const _ of this.observe.getOwner())s.Observer(a.Owner.GetCharacter().CreateObserver(_,E));return this.observe.getParty()&&s.Observer(e.Event.CreateObserver(At.CHANGE_PARTY,E)),s.EndQuery(),E}Build(){return(...[e,a,s])=>{const n=this.container.map(A=>A.innerBuild(e,a,s)),i=()=>n.forEach(A=>A());i();const l=e.GetCharacter(),E=a.Owner.GetCharacter(),_=l.GetEnemy();for(const A of[z.CHANGE_RANK,z.CHANGE_STACKS,z.CHANGE_CONDITIONS,z.CHANGE_AURAS,z.ENABLE,z.DISABLE])s.Observer(a.CreateObserver(A,i));for(const A of[c.LEVEL,c.ASCENSION,c.HP_CURRENT,c.ENERGY_CURRENT,c.SHIELDED])s.Observer(l.CreateObserver(A,i)),s.Observer(E.CreateObserver(A,i));return s.Observer(_.Event.CreateObserver(_t.CHANGE_AURA,i)),()=>0}}Next(){const e=new St;return e.container=this.container,this.container.push(e),e}Where(e){return this.query=e,this}};function We(e){return{enabled:e.Enabled(),rank:e.GetRank(),stacks:e.GetStacks(),auras:e.GetAuras(),conditions:e.GetConditions()}}function je(e,a){e.enabled?a.Enable():a.Disable(),a.SetRank(e.rank),a.SetStacks(e.stacks),a.SetAuras(...e.auras),a.SetConditions(...e.conditions)}var cn=[ut({Name:"ResonancePyro",ApplyOther:!0,OnApply:new St().stat.Char(c.ATK_PERCENT).Values(.25).Build()})],En=[ut({Name:"ResonanceHydro",ApplyOther:!0,OnApply:new St().stat.Char(c.HP_PERCENT).Values(.25).Build()})],Tn=[ut({Name:"ResonanceCryo",ApplyOther:!0,OnApply:new St().stat.Char(c.EXTRA_CRIT_RATE).Where({enemy:{affected:[c.CRYO_DMG]}}).Values(.15).Build()})],_n=[ut({Name:"ResonanceGeo",ApplyOther:!0,OnApply:new St().stat.Enemy(c.GEO_RES).Values(-.15).Next().Where({target:{shielded:!0}}).stat.Char(c.ALL_DMG).Values(.15).Build()})],An=[ut({Name:"ResonanceDendro",ApplyOther:!0,Conditions:["BURNING","QUICKEN","BLOOM","AGGRAVATE","SPREAD","HYPERBLOOM","BURGEON"],MaxConditions:7,OnApply:new St().stat.Char(c.ELEMENTAL_MASTERY).Values(50).Next().stat.Char(c.ELEMENTAL_MASTERY).Values(30).Where({effect:{conditions:["BURNING","QUICKEN","BLOOM"]}}).Next().stat.Char(c.ELEMENTAL_MASTERY).Values(20).Where({effect:{conditions:["AGGRAVATE","SPREAD","HYPERBLOOM","BURGEON"]}}).Build()})],un={[c.PYRO_DMG]:cn,[c.HYDRO_DMG]:En,[c.CRYO_DMG]:Tn,[c.GEO_DMG]:_n,[c.DENDRO_DMG]:An},Sn=[];for(const e of Object.values(un))e.forEach(a=>Sn.push(a));function hn(){return Sn}function Ln(e){return un[e]}var gt={};D(gt,{Factory:()=>Nn,Food:()=>mn,FoodType:()=>fn,Foodbox:()=>pn});var fn=(e=>(e[e.OFFENSIVE=0]="OFFENSIVE",e[e.DEFENSIVE=1]="DEFENSIVE",e[e.STAMINA=2]="STAMINA",e[e.ELEMENTAL=3]="ELEMENTAL",e))(fn||{}),mn=class{constructor(e,a){this.Options=e,this.Effect=a,this.Name=e.Name,this.Type=e.Type,this.Stars=e.Stars}GetRank(){return this.Effect.GetRank()}SetRank(e){e=Math.max(1,Math.min(3,e)),this.Effect.SetRank(e)}Unapply(){this.Effect.Disable(),this.Effect.UnapplyAll()}};function Nn(e){const a=e.Effects,s=ut({Name:e.Name,ApplyOther:!0,MaxRank:3,OnApply(n,i,l){const E=a.map(([A])=>l.Modifier(n.GetCharacter().CreateModifier(A,0))),_=()=>{const A=i.GetRank();for(let u=0;u<a.length;u++){const[,S,h]=a[u],L=S+(h-S)*(A-1)/2;E[u].SetValue(L)}};return _(),l.Observer(i.Event.CreateObserver(z.CHANGE_RANK,_)),l.Observer(n.Event.CreateObserver(At.CHANGE_PARTY,()=>{const A=n.GetParty();if(!A)return;const u=i.GetTargets(),S=A.GetMembers();for(const h of S)u.includes(h)||i.Apply(h)})),()=>0}});return Object.assign(function(i){const l=s(i);l.Enable(),l.Apply(i);const E=i.GetParty();if(E)for(const _ of E.GetMembers())_!==i&&l.Apply(_);return new mn(e,l)},it(F({},e),{Options:e}))}var pn=class{constructor(e){this.target=e,this.byName=new q(a=>a.Name),this.byType=new Map}Add(e){const a=this.byType.get(e.Type);a&&(a.Unapply(),this.Remove(a.Name));const s=e(this.target);return this.byName.Add(s),this.byType.set(e.Type,s),s}Remove(e){const a=this.byName.Find(e);!a||(this.byName.Remove(a),this.byType.delete(a.Type),a.Unapply())}Clear(){for(const e of this.byName.Get())e.Unapply();this.byName.Clear(),this.byType.clear()}Get(e){return this.byName.Find(e)}GetByType(e){return this.byType.get(e)}GetAll(){return this.byName.Get()}},XT=class{constructor(...e){this.members=new q(a=>a.GetCharacter().Options.Name),this.resonances=[],this.enemies=new Za,this.handler=new Xt(new Pe({Name:"__party__",Region:qa.NONE,Stars:4,Element:0,Weapon:0,BurstCost:0})),this.handler.SetParty(this),this.foods=new pn(this.handler),e.forEach(a=>this.Add(a))}GetAppliedEffects(e){return this.GetAllEffects().filter(a=>a.GetTargets().includes(e))}GetResonances(){return this.resonances}GetAllEffects(){const e=[];return this.members.Get().forEach(a=>a.GetEffects().forEach(s=>e.push(s))),this.resonances.forEach(a=>e.push(a)),e}FindEffects(e){return e=e.toLowerCase(),this.GetAllEffects().filter(a=>a.Options.Name.toLowerCase()===e)}Add(e){if(this.members.Get().length>=4||this.members.Has(e))return!1;const a=e.GetParty();return a&&a.Remove(e),e.SetParty(this),this.members.Add(e),this.updateResonances(),this.members.Get().forEach(s=>s.Event.Notify(At.CHANGE_PARTY)),this.enemies.Add(e.GetCharacter().GetEnemy()),!0}Remove(e){return this.members.Remove(e),e.SetParty(void 0),this.updateResonances(),this.members.Get().forEach(a=>a.Event.Notify(At.CHANGE_PARTY)),e.Event.Notify(At.CHANGE_PARTY),this.enemies.Remove(e.GetCharacter().GetEnemy()),!0}GetMembers(){return this.members.Get()}FindMember(e){return this.members.Find(e)}GetFoods(){return this.foods}updateResonances(){if(this.resonances.forEach(n=>n.Disable().UnapplyAll()),this.resonances=[],this.members.Get().length<4)return;const e={};Ct.forEach(n=>e[n]=0),this.members.Get().forEach(n=>e[n.GetCharacter().Options.Element]++);const a=[];Ct.forEach(n=>{e[n]>=2&&a.push(n)}),a.map(n=>Ln(n)).filter(n=>!!n).forEach(n=>n==null?void 0:n.forEach(i=>{const l=i(this.handler);l.Enable(),this.members.Get().forEach(E=>l.Apply(E)),this.resonances.push(l)}))}},m={};D(m,{Export:()=>Mn,Factory:()=>JT,Import:()=>dn,Weapon:()=>Cn});var Cn=class{constructor(e,a){this.Options=e,this.effects=new q(s=>s.Options.Name),this.level=1,this.ascension=0,this.rank=1,this.effects.AddList(a)}Equip(e){return this.target&&this.Unequip(),this.target=e,this.effects.Get().forEach(a=>a.Enable().Apply(e)),this.atkMod=e.GetCharacter().CreateModifier(c.ATK_BASE,0),this.subMod=e.GetCharacter().CreateModifier(this.Options.Substat,0),this.setMods(),this}Unequip(){var e,a;return this.effects.Get().forEach(s=>s.Disable().UnapplyAll()),(e=this.atkMod)==null||e.Disable(),(a=this.subMod)==null||a.Disable(),this.atkMod=void 0,this.subMod=void 0,this.target=void 0,this}GetLevel(){return this.level}GetAscension(){return this.ascension}IsAscended(){return this.GetAscension()===Mt(this.level)}GetRank(){return this.rank}GetSubstat(){return this.Options.Substat}GetAtkBase(){return ms(this.Options.Stars,this.Options.Scaling,this.level,this.ascension)}GetSubstatValue(){return Ns(this.Options.Scaling,this.level,this.Options.Substat)}GetEffects(){return this.effects.Get()}FindEffect(e){return this.effects.Find(e)}SetLevel(e){e=Math.max(1,Math.min(90,Math.floor(e)));const a=Qt(e),s=Mt(e);let n=this.ascension;return n<a?n=a:n>s&&(n=s),this.ascension=n,this.level=e,this.setMods(),this}SetAscension(e){const a=Qt(this.level),s=Mt(this.level);let n=e;return n<a?n=a:n>s&&(n=s),this.ascension=Math.floor(n),this.setMods(),this}SetRank(e){return e=Math.max(1,Math.min(5,Math.floor(e))),this.rank=e,this.effects.Get().forEach(a=>a.SetRank(e)),this}setMods(){var e,a;const s=this.GetAtkBase(),n=this.GetSubstatValue();(e=this.atkMod)==null||e.SetValue(s),(a=this.subMod)==null||a.SetValue(n)}};function JT(e){return Object.assign(function(s){const n=e.Effects.map(i=>i(s).Enable());return new Cn(e,n).Equip(s)},e)}function Mn(e){return{level:e.GetLevel(),ascension:e.GetAscension(),rank:e.GetRank()}}function dn(e,a){a.SetLevel(e.level),a.SetAscension(e.ascension),a.SetRank(e.rank)}var I={};D(I,{Artifact:()=>vn,Export:()=>Hn,Import:()=>Pn,Set:()=>ZT,rolls:()=>bn,transform:()=>Bn});function ZT(e){return e}var j=lt("CHANGE_LEVEL","CHANGE_PIECE","CHANGE_STARS","CHANGE_SET","CHANGE_MAINSTAT","CHANGE_SUBSTAT"),gn={};D(gn,{CountRolls:()=>On,FormatRolls:()=>yn});function Gn(e,a,s,n){const i=a;function*l(E,_,A,u){let S=0;if(A===e-1)S=i-u;else if(A===e){u===i&&(yield E);return}s[A]>S&&(S=s[A]);let h=_;n[A]<h&&(h=n[A]);const L=_-S;for(let f=S;f<=h;f++){const N=[...E,f];yield*l(N,L,A+1,u+f)}}return l([],i,0,0)}var st=class{constructor(e){this.queue=new Ba([],(a,s)=>s.priority-a.priority,!1),e?(this.mirror=new Ba([],(a,s)=>a.priority-s.priority,!1),this.maxSize=e):this.maxSize=1/0}Length(){return this.queue.length}Top(){const e=this.queue.top();if(!e)throw new Error("Priority queue is empty");return[e.item,e.priority]}Push(e,a){const s={item:e,priority:a};if(this.queue.push(s),this.mirror&&(this.mirror.push(s),this.queue.length>this.maxSize)){const n=this.mirror.pop();n&&this.queue.remove(n)}}Pop(){const e=this.queue.pop();if(!e)throw new Error("Priority queue is empty");return[e.item,e.priority]}Extract(){const e=[];for(;this.queue.length>0;)e.push(this.Pop()[0]);return e}};function Rn(e){const a=[];for(const[s,n]of e.substats){if(s===0)continue;const i=t_(e.stars,s,n);a.push([s,i])}return a}function t_(e,a,s){if(s===0)return[];const n=[];for(let E=0;E<4;E++)n.push(at(e,a,E));const i=new st;In.forEach(E=>{const _=E.map((u,S)=>u*n[S]).reduce((u,S)=>u+S,0),A=Math.floor(100*(Math.abs(_-s)/s));i.Push(E,-A)});const[l]=i.Pop();return l||[]}var e_=6,In=[];for(let e=0;e<=e_;e++)for(const a of Gn(4,e,[0,0,0,0],[6,6,6,6]))In.push(a);var a_=aT(hT()),Gt=class{constructor(e){this.variables=e,this.ConstraintPrefix="_c_",this.ObjectivePrefix="_obj_",this._ints=[],this.objective={},this.constraints=[]}Ints(e){this._ints=e}Objective(e){return this.objective=e,e}Constraint(e,a){return this.constraints.push({left:e,right:a}),e}Format(){const e={},a={},s={};this.variables.forEach(n=>{const i=this.objective[n]||0;e[n]={[this.ObjectivePrefix]:i}}),this.constraints.forEach((n,i)=>{const l=this.ConstraintPrefix+i;a[l]={max:n.right},this.variables.forEach(E=>{const _=n.left[E];Number.isFinite(_)&&(e[E][l]=_)})});for(const n of this._ints)s[n]=!0;return{variables:e,constraints:a,ints:s}}Solve(e){const a=(0,a_.Solve)(F({optimize:this.ObjectivePrefix,opType:e},this.Format()));for(const s of this.variables)a[s]||(a[s]=0);return a}toString(){return this.String()}String(){let e=this.variables.map(s=>"var "+s+(this._ints.includes(s)?" integer":"")+";").join(`
`);const a=this.Matrix();e+=`

maximize z: `+this.strExpr(a.c)+`;

`;for(let s=0;s<a.A.length;s++)e+="subject to c"+s+": "+this.strExpr(a.A[s])+" <= "+a.b[s]+`;
`;return e}Matrix(){const e={c:[],A:[],b:[]};this.putIndex(e.c,this.objective);for(const{left:a,right:s}of this.constraints){e.b.push(s);const n=Array.from(Array(this.variables.length)).fill(0);this.putIndex(n,a),e.A.push(n)}return e}putIndex(e,a){for(const s in a){const n=a[s],i=this.variables.indexOf(s);i!==-1&&(e[i]=n)}}strExpr(e){return this.variables.map((a,s)=>e[s]===0?"":e[s]+"*"+a).filter(a=>a!=="").join(" + ").replace(/\+\s*-/g,"-")}static Vars(e,a){const s={};return e.forEach((n,i)=>{const l=a(n,i);if(!l)return;const[E,_]=l;!Number.isFinite(_)||(s[E]=_)}),s}};function ze(e,a,s){return e+"_"+a+"_"+s}function Dn(e){const{level:a,stars:s}=e;if(a<0||a>20)throw new Error("Level must be between 0 and 20");if(s!==4&&s!==5)throw new Error("Stars must be 4 or 5");if(e.substats.length>4)throw new Error("Stats must be less or equal than 4");for(;e.substats.length<4;)e.substats.push([0,0]);const n=Math.floor(e.level/4),i=e.stars-2+n,l=i+1,E=e.substats.map(([C])=>C),_=e.substats.map(([,C])=>C),A=e.substats.map(([C])=>Qa.includes(C)?.5:.001),u=ye(e.stars),S=[];for(let C=0;C<4;C++)for(let g=0;g<4;g++)S.push(ze("R",C,g));const h=new Gt(S);h.Ints(S);const L=h.Objective({});for(const C of S)L[C]=1;const f=h.Constraint({},l),N=h.Constraint({},-i);for(let C=0;C<4;C++){const g=h.Constraint({},u),R=h.Constraint({},_[C]+A[C]),v=h.Constraint({},-_[C]+A[C]);for(let y=0;y<4;y++){const H=ze("R",C,y);g[H]=1,f[H]=1,N[H]=-1,R[H]=at(s,E[C],y),v[H]=-R[H]}}const p=h.Solve("min");if(!p.feasible)throw new Error("[LP] Cannot find a feasible solution");const M=[];for(let C=0;C<4;C++){if(E[C]===0)continue;const g=[E[C],[]];for(let R=0;R<4;R++){const v=ze("R",C,R),y=p[v]||0;g[1].push(y)}M.push(g)}return M}function On(e,a="auto"){switch(a){case"auto":try{return Dn(e)}catch{return Rn(e)}case"lp":return Dn(e);case"brute":return Rn(e)}}function yn(e,a){const s=[];for(const[n,i]of a){const l=[];for(let E=0;E<4;E++){const _=at(e,n,E);for(let A=0;A<i[E];A++)l.push(_)}s.push([n,l])}return s}var s_=0,vn=class{constructor(e){this.piece=e,this.Locked=!1,this.Id=s_++,this.Event=new Et(j.Length(),"ARTIFACT_EVENT"),this.enabled=!0,this.stars=4,this.level=0,this.substats=[],this.modifiers=[],this.observers=[],this.mainstat=Re(e)[0]}GetPiece(){return this.piece}GetLevel(){return this.level}SetLevel(e){return this.stars===4?e=Math.min(16,e):this.stars===5&&(e=Math.min(20,e)),e<0&&(e=0),this.level=Math.floor(e),this.Event.Notify(j.CHANGE_LEVEL),this.Event.Notify(j.CHANGE_MAINSTAT),this}GetStars(){return this.stars}SetStars(e){if(e===4)this.GetLevel()>16&&this.SetLevel(16);else if(e===5)this.GetLevel()>20&&this.SetLevel(20);else throw new Error("Artifact stars must be 4 or 5");return this.stars=e,this.Event.Notify(j.CHANGE_STARS),this.Event.Notify(j.CHANGE_MAINSTAT),this}GetMainstat(){return this.mainstat}SetMainstat(e){if(Re(this.piece).includes(e)){const s=this.substats.findIndex(l=>l.Stat===e),n=It.filter(l=>!this.substats.find((E,_)=>_!==s&&E.Stat===l)),i=n.includes(this.mainstat)?this.mainstat:n[0];this.mainstat=e,s!==-1&&i&&this.SetSubstat(s,i),this.Event.Notify(j.CHANGE_MAINSTAT)}return this}GetMainstatValue(){return this.enabled?ps(this.stars,this.mainstat,this.level):0}GetSet(){return this.set}SetSet(e){return this.set=e,this.Event.Notify(j.CHANGE_SET),this}SubstatsLength(){return this.substats.length}AddSubstat(e,a){if(this.substats.length===4||!It.includes(e)||[this.mainstat,...this.substats.map(i=>i.Stat)].includes(e))return!1;const n=ve(this.stars,e);return a=Math.max(0,Math.min(n,a)),this.substats.push({Stat:e,Value:a}),this.Event.Notify(j.CHANGE_SUBSTAT),!0}GetSubstat(e){return this.substats[e].Stat}SetSubstat(e,a){if(this.mainstat===a||!It.includes(a))return!1;const s=this.substats.findIndex((l,E)=>E!==e&&l.Stat===a),n=at(this.stars,this.substats[e].Stat,1),i=at(this.stars,a,1);return s>-1&&(this.substats[s].Stat=this.substats[e].Stat,this.substats[s].Value*=n/i),this.substats[e].Stat=a,this.substats[e].Value*=i/n,this.Event.Notify(j.CHANGE_SUBSTAT),!0}GetSubstatValue(e){return this.enabled?this.substats[e].Value:0}SetSubstatValue(e,a){const s=ve(this.stars,this.substats[e].Stat);return a=Math.max(0,Math.min(s,a)),this.substats[e].Value=a,this.Event.Notify(j.CHANGE_SUBSTAT),this}ClearSubstats(){return this.substats.forEach(e=>e.Value=0),this.Event.Notify(j.CHANGE_SUBSTAT),this}FillSubstats(){const e=It.filter(a=>a!==this.GetMainstat());for(let a=0;a<e.length;a++)this.AddSubstat(e[a],0);return this}FindSubstat(e){return this.substats.findIndex(a=>a.Stat===e)}Enable(){return this.enabled=!0,this.Event.Notify(j.CHANGE_MAINSTAT),this.Event.Notify(j.CHANGE_SUBSTAT),this}Disable(){return this.enabled=!1,this.Event.Notify(j.CHANGE_MAINSTAT),this.Event.Notify(j.CHANGE_SUBSTAT),this}Enabled(){return this.enabled}Unequip(){return this.character=void 0,this.modifiers.forEach(e=>e.Disable()),this.observers.forEach(e=>e.Remove()),this.modifiers=[],this.observers=[],this}Equip(e){this.character&&this.Unequip(),this.character=e;const a=e.CreateModifier(this.mainstat,this.GetMainstatValue()),s=this.Event.CreateObserver(j.CHANGE_MAINSTAT,()=>{a.SetProp(this.mainstat),a.SetValue(this.GetMainstatValue())}),n=[];for(let l=0;l<4;l++)n.push(e.CreateModifier(c.ATK_FLAT,0));const i=this.Event.CreateObserver(j.CHANGE_SUBSTAT,()=>{for(let l=0;l<4;l++)l<this.SubstatsLength()?(n[l].SetProp(this.GetSubstat(l)),n[l].SetValue(this.GetSubstatValue(l))):n[l].SetValue(0)});return i.Notify(),this.modifiers=[a,...n],this.observers=[s,i],this}Rolls(e="auto"){const a=this.substats.map(n=>[n.Stat,n.Value]);return On({level:this.GetLevel(),stars:this.GetStars(),substats:a},e)}FormatRolls(){return yn(this.GetStars(),this.Rolls())}};function Hn(e){const a={locked:e.Locked,piece:e.GetPiece(),stars:e.GetStars(),level:e.GetLevel(),set:e.GetSet(),mainstat:e.GetMainstat(),substats:[]};for(let s=0;s<e.SubstatsLength();s++)a.substats.push({stat:e.GetSubstat(s),value:e.GetSubstatValue(s)});return a}function Pn(e,a){if(e.piece!==a.GetPiece())throw new Error(`Cannot import artifacts with incompatible pieces ${et.Name(e.piece)} -> ${et.Name(a.GetPiece())}`);a.Locked=!!e.locked,a.SetStars(e.stars),a.SetLevel(e.level),a.SetSet(e.set),a.SetMainstat(e.mainstat),e.substats.forEach(({stat:s,value:n},i)=>{if(!Number.isFinite(n)||n<0)throw new Error(`Invalid substat ${i} value: ${n}`);i<a.SubstatsLength()?(a.SetSubstat(i,s),a.SetSubstatValue(i,n)):a.AddSubstat(s,n)})}var Bn={};D(Bn,{Downgrade:()=>n_,Scale:()=>wn});function n_(e){e.GetStars()!==4&&(wn(e,4),e.SetStars(4))}function wn(e,a){const s=e.GetStars();for(let n=0;n<e.SubstatsLength();n++){const i=e.GetSubstat(n),l=e.GetSubstatValue(n),E=at(s,i,0),_=at(a,i,0),A=l*_/E;e.SetSubstatValue(n,A)}}var bn={};D(bn,{count:()=>gn,equip:()=>Kn});var Kn={};D(Kn,{EquipRolls:()=>Yn});function nt(e,a,s,n){return e+"_"+a+"_"+s+"_"+n}function i_(e){const a=e.substats.length;for(let L=0;L<5-a;L++)e.substats.push([c.NONE,0]);const s=[c.HP_FLAT,c.ATK_FLAT,...e.mainstats],n=e.substats.map(([L])=>L),i=e.substats.map(([,L])=>L),l=n.length;function E(L,f){return n[L]!==s[f]}const _=[],A=new Gt(_),u=A.Objective({});for(let L=0;L<5;L++)for(let f=0;f<l;f++)for(let N=0;N<6;N++)_.push(nt("S",f,L,N)),u[nt("S",f,L,N)]=N+1,A.Constraint({[nt("S",f,L,N)]:1},1);A.Ints(_);for(let L=0;L<5;L++){const f=A.Constraint({},9);for(let N=0;N<l;N++){const p=A.Constraint({},6),M=A.Constraint({[nt("S",N,L,0)]:-5},0);for(let C=0;C<6;C++)p[nt("S",N,L,C)]=1,f[nt("S",N,L,C)]=1,E(N,L)||A.Constraint({[nt("S",N,L,C)]:1},0);for(let C=1;C<6;C++)M[nt("S",N,L,C)]=1}for(let N=0;N<6;N++){const p=A.Constraint({},4);for(let M=0;M<l;M++)p[nt("S",M,L,N)]=1}}for(let L=0;L<l;L++){const f=A.Constraint({},-i[L]);for(let N=0;N<5;N++)for(let p=0;p<6;p++)f[nt("S",L,N,p)]=-1}const S=A.Solve("min");if(!S.feasible)throw new Error("[LP] Cannot find a feasible solution");const h=[];for(let L=0;L<5;L++){const f=[];for(let N=0;N<l;N++){let p=0;for(let M=0;M<6;M++)p+=S[nt("S",N,L,M)]||0;p>0&&f.push([n[N],p])}h.push(f)}return h}function Yn(e){const a=i_(e);for(const s of a)for(const n of s){const i=at(e.stars,n[0],e.tier);n[1]*=i}return a}var Ht={};D(Ht,{FindByName:()=>Vn,GetByType:()=>o_,GetList:()=>l_});var r_=[{Name:"SakuraShrimpCrackers",Type:1,Effects:[[c.HP_PERCENT,.2,.25]],Stars:3},{Name:"PileEmUp",Type:0,Effects:[[c.CRIT_RATE,.1,.2]],Stars:3},{Name:"AdeptusTemptation",Type:0,Effects:[[c.ATK_FLAT,260,372],[c.CRIT_RATE,.08,.12]],Stars:5},{Name:"AdventurersBreakfastSandwich",Type:0,Effects:[[c.ATK_FLAT,160,228]],Stars:3},{Name:"AlmondTofu",Type:0,Effects:[[c.ATK_FLAT,66,95]],Stars:2},{Name:"Baklava",Type:0,Effects:[[c.CRIT_RATE,.1,.2]],Stars:3},{Name:"BerryMintBurst",Type:0,Effects:[[c.CRIT_RATE,.16,.16]],Stars:2},{Name:"Biryani",Type:1,Effects:[[c.DEF_FLAT,215,308],[c.HEALING_BONUS,.06,.1]],Stars:4},{Name:"BountifulYear",Type:0,Effects:[[c.ATK_FLAT,224,320],[c.CRIT_RATE,.06,.1]],Stars:4},{Name:"BraisedMeat",Type:0,Effects:[[c.PHYSICAL_DMG,.2,.4]],Stars:3},{Name:"ButterChicken",Type:0,Effects:[[c.ATK_FLAT,160,228]],Stars:3},{Name:"ButterCrab",Type:1,Effects:[[c.DEF_FLAT,215,308],[c.HEALING_BONUS,.06,.1]],Stars:4},{Name:"CallaLilySeafoodSoup",Type:1,Effects:[[c.DEF_FLAT,165,235]],Stars:3},{Name:"CandiedAjilenakhNut",Type:1,Effects:[[c.DEF_FLAT,165,235]],Stars:3},{Name:"ChickenTofuPudding",Type:0,Effects:[[c.ATK_FLAT,224,320],[c.CRIT_RATE,.06,.1]],Stars:4},{Name:"ColdCutPlatter",Type:0,Effects:[[c.PHYSICAL_DMG,.2,.4]],Stars:3},{Name:"ComeandGetIt",Type:0,Effects:[[c.CRIT_RATE,.1,.2]],Stars:3},{Name:"CrabRoeKourayaki",Type:0,Effects:[[c.ATK_FLAT,66,95]],Stars:2},{Name:"CrocodileJerky",Type:0,Effects:[[c.ATK_FLAT,114,114]],Stars:2},{Name:"CuredPorkDryHotpot",Type:0,Effects:[[c.CRIT_RATE,.1,.2]],Stars:3},{Name:"DragonBeardNoodles",Type:0,Effects:[[c.ATK_FLAT,160,228]],Stars:3},{Name:"FishermansToast",Type:1,Effects:[[c.DEF_FLAT,88,126]],Stars:2},{Name:"FlamingEssentialOil",Type:3,Effects:[[c.PYRO_DMG,.25,.25]],Stars:3},{Name:"ForestEssentialOil",Type:3,Effects:[[c.DENDRO_DMG,.25,.25]],Stars:3},{Name:"FragrantMashedPotatoes",Type:0,Effects:[[c.ATK_FLAT,160,228]],Stars:3},{Name:"FriedRadishBalls",Type:0,Effects:[[c.ATK_FLAT,66,95]],Stars:2},{Name:"FrostingEssentialOil",Type:3,Effects:[[c.CRYO_DMG,.25,.25]],Stars:3},{Name:"FruitsoftheFestival",Type:1,Effects:[[c.HEALING_BONUS,.15,.2]],Stars:3},{Name:"GoldenCrab",Type:1,Effects:[[c.DEF_FLAT,215,308],[c.HEALING_BONUS,.06,.1]],Stars:4},{Name:"GoldenFriedChicken",Type:0,Effects:[[c.ATK_FLAT,224,320],[c.CRIT_RATE,.06,.1]],Stars:4},{Name:"GushingEssentialOil",Type:3,Effects:[[c.ANEMO_DMG,.25,.25]],Stars:3},{Name:"ImportedPoultry",Type:0,Effects:[[c.CRIT_RATE,.1,.2]],Stars:3},{Name:"JadeParcels",Type:0,Effects:[[c.ATK_FLAT,224,320],[c.CRIT_RATE,.06,.1]],Stars:4},{Name:"JewelrySoup",Type:1,Effects:[[c.DEF_FLAT,88,126]],Stars:2},{Name:"JueyunChiliChicken",Type:0,Effects:[[c.CRIT_RATE,.06,.12]],Stars:2},{Name:"JueyunGuoba",Type:0,Effects:[[c.PHYSICAL_DMG,.2,.4]],Stars:3},{Name:"KatsuSandwich",Type:0,Effects:[[c.ATK_FLAT,66,95]],Stars:2},{Name:"LanternRiteSpecialComeandGetIt",Type:0,Effects:[[c.CRIT_RATE,.2,.2]],Stars:3},{Name:"LanternRiteSpecialFriedRadishBalls",Type:0,Effects:[[c.ATK_FLAT,95,95]],Stars:2},{Name:"LanternRiteSpecialJewelrySoup",Type:1,Effects:[[c.DEF_FLAT,126,126]],Stars:2},{Name:"LotusFlowerCrisp",Type:1,Effects:[[c.DEF_FLAT,165,235]],Stars:3},{Name:"MasalaCheeseBalls",Type:0,Effects:[[c.CRIT_RATE,.06,.12]],Stars:2},{Name:"MeatLoversMushroomPizza",Type:0,Effects:[[c.ATK_FLAT,224,320],[c.CRIT_RATE,.06,.1]],Stars:4},{Name:"MintSalad",Type:0,Effects:[[c.ATK_FLAT,66,95]],Stars:2},{Name:"MoonPie",Type:1,Effects:[[c.DEF_FLAT,165,235]],Stars:4},{Name:"MoreandMore",Type:0,Effects:[[c.PHYSICAL_DMG,.2,.4]],Stars:3},{Name:"MushroomHodgepodge",Type:1,Effects:[[c.DEF_FLAT,88,126]],Stars:2},{Name:"QingceStirFry",Type:0,Effects:[[c.ATK_FLAT,160,228]],Stars:3},{Name:"RadishandFishStew",Type:0,Effects:[[c.CRIT_RATE,.06,.12]],Stars:2},{Name:"RiceCakeSoup",Type:1,Effects:[[c.DEF_FLAT,165,235]],Stars:3},{Name:"SashimiPlatter",Type:0,Effects:[[c.ATK_FLAT,224,320],[c.CRIT_RATE,.06,.1]],Stars:4},{Name:"SatisfyingSalad",Type:0,Effects:[[c.CRIT_RATE,.06,.12]],Stars:2},{Name:"SautedMatsutake",Type:0,Effects:[[c.ATK_FLAT,160,228]],Stars:3},{Name:"ShawarmaWrap",Type:0,Effects:[[c.ATK_FLAT,66,95]],Stars:2},{Name:"ShockingEssentialOil",Type:3,Effects:[[c.ELECTRO_DMG,.25,.25]],Stars:3},{Name:"StoneHarborDelicacies",Type:0,Effects:[[c.CRIT_RATE,.06,.12]],Stars:2},{Name:"StreamingEssentialOil",Type:3,Effects:[[c.HYDRO_DMG,.25,.25]],Stars:3},{Name:"SunsetBerryTea",Type:0,Effects:[[c.ATK_FLAT,160,228]],Stars:3},{Name:"TandooriRoastChicken",Type:0,Effects:[[c.ATK_FLAT,224,320],[c.CRIT_RATE,.06,.1]],Stars:4},{Name:"TianshuMeat",Type:0,Effects:[[c.PHYSICAL_DMG,.25,.45],[c.CRIT_RATE,.06,.1]],Stars:4},{Name:"TriFlavoredSkewer",Type:0,Effects:[[c.ATK_FLAT,160,228]],Stars:3},{Name:"UnagiChazuke",Type:1,Effects:[[c.HEALING_BONUS,.15,.2]],Stars:3},{Name:"UnmovingEssentialOil",Type:3,Effects:[[c.GEO_DMG,.25,.25]],Stars:3},{Name:"Wakatakeni",Type:1,Effects:[[c.DEF_FLAT,88,126]],Stars:2},{Name:"WolfhookJuice",Type:0,Effects:[[c.ATK_FLAT,114,114]],Stars:2},{Name:"OnceUponaTimeinMondstadt",Type:0,Effects:[[c.CRIT_RATE,.2,.2],[c.CRIT_DMG,.2,.2]],Stars:3},{Name:"SweetDream",Type:0,Effects:[[c.ATK_FLAT,114,114]],Stars:2},{Name:"APrizeCatch",Type:1,Effects:[[c.DEF_FLAT,282,282]],Stars:3},{Name:"DerWeisheitLetzterSchlussLife",Type:0,Effects:[[c.CRIT_RATE,.16,.16]],Stars:2},{Name:"DieHeiligeSinfonie",Type:0,Effects:[[c.PHYSICAL_DMG,.55,.55]],Stars:3},{Name:"FishFlavoredToast",Type:1,Effects:[[c.DEF_FLAT,151,151]],Stars:2},{Name:"ForestWatchersChoice",Type:1,Effects:[[c.DEF_FLAT,151,151]],Stars:2},{Name:"Halvamazd",Type:1,Effects:[[c.DEF_FLAT,282,282]],Stars:3},{Name:"HeartstringNoodles",Type:0,Effects:[[c.ATK_FLAT,274,274]],Stars:3},{Name:"NoTomorrow",Type:0,Effects:[[c.CRIT_RATE,.2,.2],[c.CRIT_DMG,.2,.2]],Stars:3},{Name:"QingceHouseholdDish",Type:0,Effects:[[c.ATK_FLAT,274,274]],Stars:3},{Name:"RockinRiffinChicken",Type:0,Effects:[[c.CRIT_RATE,.16,.16]],Stars:2},{Name:"ShimiChazuke",Type:1,Effects:[[c.HEALING_BONUS,.25,.25]],Stars:3},{Name:"ShowMetheMora",Type:0,Effects:[[c.ATK_FLAT,274,274]],Stars:3},{Name:"TheOnlyTruth",Type:0,Effects:[[c.ATK_FLAT,114,114]],Stars:2}],qe=[...r_].sort((e,a)=>e.Stars===a.Stars?e.Name.localeCompare(a.Name):a.Stars-e.Stars).map(e=>Nn(e)),Fn=new q(e=>e.Name);Fn.AddList(qe);var ae=new Map,kn;for(const e of qe)ae.has(e.Type)||ae.set(e.Type,[]),(kn=ae.get(e.Type))==null||kn.push(e);function l_(){return qe}function Vn(e){return Fn.Find(e)}function o_(e){return ae.get(e)||[]}function xn(e){const a={},s={},n={};for(const _ of e.GetEffects())s[_.Options.Name]=We(_);const i=e.GetWeapon();i&&(a[i.Options.Name]=Mn(i));const l=e.GetArtifacts();l&&et.Values().forEach(_=>n[_]=Hn(l.Get(_)));const E=e.GetModifiers().map(_=>({stat:_.GetProp(),value:_.GetValue()}));return{character:ws(e.GetCharacter()),weapon:a,effects:s,artifacts:n,modifiers:E}}function Un(e,a){const s=a.GetWeapon();if(s){const i=e.weapon[s.Options.Name];i&&dn(i,s)}const n=a.GetArtifacts();n&&et.Values().forEach(i=>{const l=e.artifacts[i];l&&Pn(l,n.Get(i))});for(const i of a.GetEffects()){const l=e.effects[i.Options.Name];!l||je(l,i)}a.ClearModifiers();for(const{stat:i,value:l}of e.modifiers)a.AddModifier(a.GetCharacter().CreateModifier(i,l));bs(e.character,a.GetCharacter())}function Wn(e){const a={};for(const l of e.GetMembers())a[l.GetCharacter().Options.Name]=xn(l);const s={};for(const l of e.GetResonances())s[l.Options.Name]=We(l);const n={};for(const l of e.GetAllEffects()){const E=l.Owner.GetCharacter().Options.Name;n[E]||(n[E]={}),n[E][l.Options.Name]=l.GetTargets().map(_=>_.GetCharacter().Options.Name)}const i=e.GetFoods().GetAll().map(l=>[l.Name,l.GetRank()]);return{characters:a,resonances:s,targets:n,foods:i}}function Qe(e,a){const s=a.GetMembers();for(const n of s){const i=e.characters[n.GetCharacter().Options.Name];i&&Un(i,n)}for(const n of a.GetResonances()){const i=e.resonances[n.Options.Name];i&&je(i,n)}for(const n of a.GetAllEffects()){const i=n.Owner.GetCharacter().Options.Name,l=n.Options.Name,E=e.targets[i];if(!E)continue;const _=E[l];if(!_)continue;const A=[];for(const u of s)_.includes(u.GetCharacter().Options.Name)&&A.push(u);n.ApplyMultiple(A)}if(a.GetFoods().Clear(),e.foods)for(const[n,i]of e.foods){const l=Vn(n);if(!l)continue;a.GetFoods().Add(l).SetRank(i)}}var ht={};D(ht,{Artbox:()=>__});var J={};D(J,{ArchaicPetra:()=>Di,Berserker:()=>Oi,BlizzardStrayer:()=>yi,BloodstainedChivalry:()=>hi,BraveHeart:()=>Li,CrimsonWitchOfFlames:()=>di,DeepwoodMemories:()=>Ii,DefenderWill:()=>fi,DesertPavilionChronicle:()=>Jn,EchoesOfAnOffering:()=>mi,EmblemOfSeveredFate:()=>Ci,FindByName:()=>se,FlowerOfParadiseLost:()=>Xn,Gambler:()=>Si,GetList:()=>vi,GildedDreams:()=>ui,GladiatorsFinale:()=>gi,GoldenTroupe:()=>qn,HeartOfDepth:()=>Ai,HuskOfOpulentDreams:()=>_i,Instructor:()=>pi,Lavawalker:()=>Ti,MaidenBeloved:()=>Ei,MarechausseeHunter:()=>zn,MartialArtist:()=>ci,NoblesseOblige:()=>Ni,NymphsDream:()=>$n,OceanHuedClam:()=>oi,PaleFlame:()=>li,ResolutionOfSojourner:()=>ri,RetracingBolide:()=>ii,Scholar:()=>ni,ShimenawasReminiscence:()=>Gi,TenacityOfTheMillelith:()=>si,TheExile:()=>ai,ThunderingFury:()=>ei,Thundersoother:()=>ti,VermillionHereafter:()=>Zn,ViridescentVenerer:()=>Ri,VourukashasGlow:()=>Qn,WanderersTroupe:()=>Mi});var jn={};D(jn,{ArchaicPetra:()=>Di,Berserker:()=>Oi,BlizzardStrayer:()=>yi,BloodstainedChivalry:()=>hi,BraveHeart:()=>Li,CrimsonWitchOfFlames:()=>di,DeepwoodMemories:()=>Ii,DefenderWill:()=>fi,DesertPavilionChronicle:()=>Jn,EchoesOfAnOffering:()=>mi,EmblemOfSeveredFate:()=>Ci,FlowerOfParadiseLost:()=>Xn,Gambler:()=>Si,GildedDreams:()=>ui,GladiatorsFinale:()=>gi,GoldenTroupe:()=>qn,HeartOfDepth:()=>Ai,HuskOfOpulentDreams:()=>_i,Instructor:()=>pi,Lavawalker:()=>Ti,MaidenBeloved:()=>Ei,MarechausseeHunter:()=>zn,MartialArtist:()=>ci,NoblesseOblige:()=>Ni,NymphsDream:()=>$n,OceanHuedClam:()=>oi,PaleFlame:()=>li,ResolutionOfSojourner:()=>ri,RetracingBolide:()=>ii,Scholar:()=>ni,ShimenawasReminiscence:()=>Gi,TenacityOfTheMillelith:()=>si,TheExile:()=>ai,ThunderingFury:()=>ei,Thundersoother:()=>ti,VermillionHereafter:()=>Zn,ViridescentVenerer:()=>Ri,VourukashasGlow:()=>Qn,WanderersTroupe:()=>Mi});var zn=I.Set({Name:"MarechausseeHunter",Stars:5,Piece2:[r.Factory({Name:"MarechausseeHunter2",OnApply:new r.Builder().stat.Char(t.stat.NORMAL_ATTACK_DMG,t.stat.CHARGED_ATTACK_DMG).Values(.15).Build()})],Piece4:[r.Factory({Name:"MarechausseeHunter4",MaxStacks:3,OnApply:new r.Builder().stat.Char(t.stat.CRIT_RATE).Values(.12).Stacks().Build()})]}),qn=I.Set({Name:"GoldenTroupe",Stars:5,Piece2:[r.Factory({Name:"GoldenTroupe2",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_SKILL_DMG).Values(.2).Build()})],Piece4:[r.Factory({Name:"GoldenTroupe4",MaxConditions:1,Conditions:["OFF_FIELD","ON_FIELD"],OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_SKILL_DMG).Values(.25).Next().Where({effect:{conditions:["OFF_FIELD"]}}).stat.Char(t.stat.ELEMENTAL_SKILL_DMG).Values(.25).Build()})]}),Qn=I.Set({Name:"VourukashasGlow",Stars:5,Piece2:[r.Factory({Name:"VourukashasGlow2",OnApply:new r.Builder().stat.Char(t.stat.HP_PERCENT).Values(.2).Build()})],Piece4:[r.Factory({Name:"VourukashasGlow4",MaxStacks:5,OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_SKILL_DMG).Values(.1).Next().stat.Char(t.stat.ELEMENTAL_BURST_DMG).Values(.1).Next().stat.Char(t.stat.ELEMENTAL_SKILL_DMG).Values(.08).Stacks().Next().stat.Char(t.stat.ELEMENTAL_BURST_DMG).Values(.08).Stacks().Next().Build()})]}),$n=I.Set({Name:"NymphsDream",Stars:5,Piece2:[r.Factory({Name:"NymphsDream2",OnApply:new r.Builder().stat.Char(t.stat.HYDRO_DMG).Values(.15).Build()})],Piece4:[r.Factory({Name:"NymphsDream4",MaxStacks:3,OnApply:new r.Builder().stat.Char(t.stat.ATK_PERCENT).Stacks([0,.07,.16,.25]).Next().stat.Char(t.stat.HYDRO_DMG).Stacks([0,.04,.09,.15]).Build()})]}),Xn=I.Set({Name:"FlowerOfParadiseLost",Stars:5,Piece2:[r.Factory({Name:"FlowerOfParadiseLost2",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_MASTERY).Values(80).Build()})],Piece4:[r.Factory({Name:"FlowerOfParadiseLost4",MaxStacks:4,OnApply:new r.Builder().stat.Char(t.stat.BLOOM_DMG,t.stat.HYPERBLOOM_DMG,t.stat.BURGEON_DMG).Values(.4).Next().stat.Char(t.stat.BLOOM_DMG,t.stat.HYPERBLOOM_DMG,t.stat.BURGEON_DMG).Values(.4*.25).Stacks().Next().Build()})]}),Jn=I.Set({Name:"DesertPavilionChronicle",Stars:5,Piece2:[r.Factory({Name:"DesertPavilionChronicle2",OnApply:new r.Builder().stat.Char(t.stat.ANEMO_DMG).Values(.15).Build()})],Piece4:[r.Factory({Name:"DesertPavilionChronicle4",OnApply:new r.Builder().stat.Char(t.stat.NORMAL_ATTACK_DMG,t.stat.CHARGED_ATTACK_DMG,t.stat.PLUNGE_ATTACK_DMG).Values(.4).Build()})]}),Zn=I.Set({Name:"VermillionHereafter",Stars:5,Piece2:[r.Factory({Name:"VermillionHereafter2",OnApply:new r.Builder().stat.Char(t.stat.ATK_PERCENT).Values(.18).Build()})],Piece4:[r.Factory({Name:"VermillionHereafter4",MaxStacks:4,OnApply:new r.Builder().stat.Char(t.stat.ATK_PERCENT).Values(.08).Next().stat.Char(t.stat.ATK_PERCENT).Values(.1).Stacks().Build()})]}),ti=I.Set({Name:"Thundersoother",Stars:5,Piece2:[],Piece4:[r.Factory({Name:"Thundersoother4",OnApply:new r.Builder().Where({enemy:{affected:[t.stat.ELECTRO_DMG]}}).stat.Char(t.stat.ALL_DMG).Values(.35).Build()})]}),ei=I.Set({Name:"ThunderingFury",Stars:5,Piece2:[r.Factory({Name:"ThunderingFury2",OnApply:new r.Builder().stat.Char(t.stat.ELECTRO_DMG).Values(.15).Build()})],Piece4:[r.Factory({Name:"ThunderingFury4",OnApply:new r.Builder().stat.Char(t.stat.OVERLOAD_DMG,t.stat.ELECTROCHARGE_DMG,t.stat.SUPERCONDUCT_DMG,t.stat.HYPERBLOOM_DMG).Values(.4).Next().stat.Char(t.stat.AGGRAVATE_DMG).Values(.2).Build()})]}),ai=I.Set({Name:"TheExile",Stars:4,Piece2:[r.Factory({Name:"TheExile2",OnApply:new r.Builder().stat.Char(t.stat.ENERGY_RECHARGE).Values(.2).Build()})],Piece4:[]}),si=I.Set({Name:"TenacityOfTheMillelith",Stars:5,Piece2:[r.Factory({Name:"TenacityOfTheMillelith2",OnApply:new r.Builder().stat.Char(t.stat.HP_PERCENT).Values(.2).Build()})],Piece4:[r.Factory({Name:"TenacityOfTheMillelith4",ApplyOther:!0,OnApply:new r.Builder().stat.Char(t.stat.ATK_PERCENT).Values(.2).Build()})]}),ni=I.Set({Name:"Scholar",Stars:4,Piece2:[r.Factory({Name:"Scholar2",OnApply:new r.Builder().stat.Char(t.stat.ENERGY_RECHARGE).Values(.2).Build()})],Piece4:[]}),ii=I.Set({Name:"RetracingBolide",Stars:5,Piece2:[],Piece4:[r.Factory({Name:"RetracingBolide4",OnApply:new r.Builder().Where({target:{shielded:!0}}).stat.Char(t.stat.NORMAL_ATTACK_DMG,t.stat.CHARGED_ATTACK_DMG).Values(.4).Build()})]}),ri=I.Set({Name:"ResolutionOfSojourner",Stars:4,Piece2:[r.Factory({Name:"ResolutionOfSojourner2",OnApply:new r.Builder().stat.Char(t.stat.ATK_PERCENT).Values(.18).Build()})],Piece4:[r.Factory({Name:"ResolutionOfSojourner4",OnApply:new r.Builder().stat.Char(t.stat.CHARGED_ATTACK_CRIT_RATE).Values(.3).Build()})]}),li=I.Set({Name:"PaleFlame",Stars:5,Piece2:[r.Factory({Name:"PaleFlame2",OnApply:new r.Builder().stat.Char(t.stat.PHYSICAL_DMG).Values(.25).Build()})],Piece4:[r.Factory({Name:"PaleFlame4",MaxStacks:2,OnApply:new r.Builder().stat.Char(t.stat.ATK_PERCENT).Values(.09).Stacks().Next().stat.Char(t.stat.PHYSICAL_DMG).Stacks([0,0,.25]).Build()})]}),oi=I.Set({Name:"OceanHuedClam",Stars:5,Piece2:[r.Factory({Name:"OceanHuedClam2",OnApply:new r.Builder().stat.Char(t.stat.HEALING_BONUS).Values(.15).Build()})],Piece4:[r.Factory({Name:"OceanHuedClam4",MaxStacks:3e4,OnApply(e,a,s){const[,,n]=s.Instance(e,"Extra",be("HIT_OceanHuedClam",e.GetCharacter()));n.Options.Def=!1,n.Options.Crit=!1,n.Options.Dmg=!1;const i=s.Modifier(n.Subject.CreateModifier(t.stat.DMG_FLAT,0));function l(){const E=a.GetStacks()*.9;i.SetValue(E)}return l(),s.Observer(a.CreateObserver(r.EffectEvent.CHANGE_STACKS,l)),()=>0}})]}),ci=I.Set({Name:"MartialArtist",Stars:4,Piece2:[r.Factory({Name:"MartialArtist2",OnApply:new r.Builder().stat.Char(t.stat.NORMAL_ATTACK_DMG,t.stat.CHARGED_ATTACK_DMG).Values(.15).Build()})],Piece4:[r.Factory({Name:"MartialArtist4",OnApply:new r.Builder().stat.Char(t.stat.NORMAL_ATTACK_DMG,t.stat.CHARGED_ATTACK_DMG).Values(.25).Build()})]}),Ei=I.Set({Name:"MaidenBeloved",Stars:5,Piece2:[r.Factory({Name:"MaidenBeloved2",OnApply:new r.Builder().stat.Char(t.stat.HEALING_BONUS).Values(.15).Build()})],Piece4:[]}),Ti=I.Set({Name:"Lavawalker",Stars:5,Piece2:[],Piece4:[r.Factory({Name:"Lavawalker4",OnApply:new r.Builder().Where({enemy:{affected:[t.stat.PYRO_DMG]}}).stat.Char(t.stat.ALL_DMG).Values(.35).Build()})]}),_i=I.Set({Name:"HuskOfOpulentDreams",Stars:5,Piece2:[r.Factory({Name:"HuskOfOpulentDreams2",OnApply:new r.Builder().stat.Char(t.stat.DEF_PERCENT).Values(.3).Build()})],Piece4:[r.Factory({Name:"HuskOfOpulentDreams4",MaxStacks:4,OnApply:new r.Builder().stat.Char(t.stat.DEF_PERCENT,t.stat.GEO_DMG).Values(.06).Stacks().Build()})]}),Ai=I.Set({Name:"HeartOfDepth",Stars:5,Piece2:[r.Factory({Name:"HeartOfDepth2",OnApply:new r.Builder().stat.Char(t.stat.HYDRO_DMG).Values(.15).Build()})],Piece4:[r.Factory({Name:"HeartOfDepth4",OnApply:new r.Builder().stat.Char(t.stat.NORMAL_ATTACK_DMG,t.stat.CHARGED_ATTACK_DMG).Values(.3).Build()})]}),ui=I.Set({Name:"GildedDreams",Stars:5,Piece2:[r.Factory({Name:"GildedDreams2",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_MASTERY).Values(80).Build()})],Piece4:[r.Factory({Name:"GildedDreams4",OnApply(e,a,s){const n=e.GetCharacter(),i=n.Options.Element,l=s.Modifier(n.CreateModifier(t.stat.ELEMENTAL_MASTERY,0)),E=s.Modifier(n.CreateModifier(t.stat.ATK_PERCENT,0));function _(){const A=e.GetParty();if(!A){l.SetValue(0),E.SetValue(0);return}let u=0,S=0;for(const h of A.GetMembers())h!==e&&(h.GetCharacter().Options.Element===i?u++:S++);u=Math.min(3,u),S=Math.min(3,S),E.SetValue(.14*u),l.SetValue(50*S)}return _(),s.Observer(e.Event.CreateObserver(G.CharboxEvent.CHANGE_PARTY,_)),()=>0}})]}),Si=I.Set({Name:"Gambler",Stars:4,Piece2:[r.Factory({Name:"Gambler2",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_SKILL_DMG).Values(.2).Build()})],Piece4:[]}),hi=I.Set({Name:"BloodstainedChivalry",Stars:5,Piece2:[r.Factory({Name:"BloodstainedChivalry2",OnApply:new r.Builder().stat.Char(t.stat.PHYSICAL_DMG).Values(.25).Build()})],Piece4:[r.Factory({Name:"BloodstainedChivalry4",OnApply:new r.Builder().stat.Char(t.stat.CHARGED_ATTACK_DMG).Values(.5).Build()})]}),Li=I.Set({Name:"BraveHeart",Stars:4,Piece2:[r.Factory({Name:"BraveHeart2",OnApply:new r.Builder().stat.Char(t.stat.ATK_PERCENT).Values(.18).Build()})],Piece4:[r.Factory({Name:"BraveHeart4",OnApply:new r.Builder().stat.Char(t.stat.ALL_DMG).Values(.3).Build()})]}),fi=I.Set({Name:"DefendersWill",Stars:4,Piece2:[r.Factory({Name:"DefendersWill2",OnApply:new r.Builder().stat.Char(t.stat.DEF_PERCENT).Values(.3).Build()})],Piece4:[]}),mi=I.Set({Name:"EchoesOfAnOffering",Stars:5,Piece2:[r.Factory({Name:"EchoesOfAnOffering2",OnApply:new r.Builder().stat.Char(t.stat.ATK_PERCENT).Values(.18).Build()})],Piece4:[r.Factory({Name:"EchoesOfAnOffering4",Conditions:["AVERAGE","MAXIMUM"],MaxConditions:1,OnApply:new r.Builder().Where({effect:{conditions:["MAXIMUM"]}}).mv.Mv(t.stat.ATK,.7,e=>e.Options.Talent===t.stat.NORMAL_ATTACK_DMG).Next().Where({effect:{conditions:["AVERAGE"]}}).mv.Mv(t.stat.ATK,.7*.502,e=>e.Options.Talent===t.stat.NORMAL_ATTACK_DMG).Build()})]}),Ni=I.Set({Name:"NoblesseOblige",Stars:5,Piece2:[r.Factory({Name:"NoblesseOblige2",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_BURST_DMG).Values(.2).Build()})],Piece4:[r.Factory({Name:"NoblesseOblige4",ApplyOther:!0,OnApply:new r.Builder().stat.Char(t.stat.ATK_PERCENT).Values(.2).Build()})]}),pi=I.Set({Name:"Instructor",Stars:4,Piece2:[r.Factory({Name:"Instructor2",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_MASTERY).Values(80).Build()})],Piece4:[r.Factory({Name:"Instructor4",ApplyOther:!0,OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_MASTERY).Values(120).Build()})]}),Ci=I.Set({Name:"EmblemOfSeveredFate",Stars:5,Piece2:[r.Factory({Name:"EmblemOfSeveredFate2",OnApply:new r.Builder().stat.Char(t.stat.ENERGY_RECHARGE).Values(.2).Build()})],Piece4:[r.Factory({Name:"EmblemOfSeveredFate4",OnApply:new r.Builder().observe.Target(t.stat.ENERGY_RECHARGE).stat.Char(t.stat.ELEMENTAL_BURST_DMG).Values(.25).Map((e,a)=>Math.max(0,Math.min(.75,e*a.GetCharacter().Get(t.stat.ENERGY_RECHARGE)))).Build()})]}),Mi=I.Set({Name:"WanderersTroupe",Stars:5,Piece2:[r.Factory({Name:"WanderersTroupe2",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_MASTERY).Values(80).Build()})],Piece4:[r.Factory({Name:"WanderersTroupe4",OnApply:new r.Builder().stat.Where({target:{weapon:[t.weapon.BOW,t.weapon.CATALYST]}}).Char(t.stat.CHARGED_ATTACK_DMG).Values(.35).Build()})]}),di=I.Set({Name:"CrimsonWitchOfFlames",Stars:5,Piece2:[r.Factory({Name:"CrimsonWitchOfFlames2",OnApply:new r.Builder().stat.Char(t.stat.PYRO_DMG).Values(.15).Build()})],Piece4:[r.Factory({Name:"CrimsonWitchOfFlames4",MaxStacks:3,OnApply:new r.Builder().stat.Char(t.stat.VAPORIZE_DMG,t.stat.MELT_DMG).Values(.15).Next().stat.Char(t.stat.OVERLOAD_DMG,t.stat.BURGEON_DMG,t.stat.BURNING_DMG).Values(.4).Next().stat.Char(t.stat.PYRO_DMG).Values(.075).Stacks().Build()})]}),gi=I.Set({Name:"GladiatorsFinale",Stars:5,Piece2:[r.Factory({Name:"GladiatorsFinale2",OnApply:new r.Builder().stat.Char(t.stat.ATK_PERCENT).Values(.18).Build()})],Piece4:[r.Factory({Name:"GladiatorsFinale4",OnApply:new r.Builder().Where({target:{weapon:[t.weapon.CLAYMORE,t.weapon.SWORD,t.weapon.POLEARM]}}).stat.Char(t.stat.NORMAL_ATTACK_DMG).Values(.35).Build()})]}),Gi=I.Set({Name:"ShimenawasReminiscence",Stars:5,Piece2:[r.Factory({Name:"ShimenawasReminiscence2",OnApply:new r.Builder().stat.Char(t.stat.ATK_PERCENT).Values(.18).Build()})],Piece4:[r.Factory({Name:"ShimenawasReminiscence4",OnApply:new r.Builder().stat.Char(t.stat.NORMAL_ATTACK_DMG,t.stat.CHARGED_ATTACK_DMG,t.stat.PLUNGE_ATTACK_DMG).Values(.5).Build()})]}),Ri=I.Set({Name:"ViridescentVenerer",Stars:5,Piece2:[r.Factory({Name:"ViridescentVenerer2",OnApply:new r.Builder().stat.Char(t.stat.ANEMO_DMG).Values(.15).Build()})],Piece4:[r.Factory({Name:"ViridescentVenerer4_1",OnApply:new r.Builder().stat.Char(t.stat.SWIRL_DMG).Values(.6).Build()}),r.Factory({Name:"ViridescentVenerer4",ApplyOther:!0,ValidAuras:t.Swirlable,MaxAuras:5,OnApply(e,a,s){const n=e.GetCharacter().GetEnemy(),i=E_.map(E=>s.Modifier(n.Subject.CreateModifier(E,0)));function l(){if(a.Owner.GetCharacter().Options.Element!==t.stat.ANEMO_DMG)return;const E=a.GetAuras().map(_=>t.DmgToRes(t.AuraToDmg(_)));for(const _ of i)E.includes(_.GetProp())?_.SetValue(c_):_.SetValue(0)}return l(),s.Observer(a.CreateObserver(r.EffectEvent.CHANGE_AURAS,l)),()=>0}})]}),c_=-.4,E_=t.Elements.filter(e=>e!==t.stat.PHYSICAL_DMG).map(e=>t.DmgToRes(e)),Ii=I.Set({Name:"DeepwoodMemories",Stars:5,Piece2:[r.Factory({Name:"DeepwoodMemories2",OnApply:new r.Builder().stat.Char(t.stat.DENDRO_DMG).Values(.15).Build()})],Piece4:[r.Factory({Name:"DeepwoodMemories4",ApplyOther:!0,OnApply:new r.Builder().stat.Enemy(t.stat.DENDRO_RES).Values(-.3).Build()})]}),Di=I.Set({Name:"ArchaicPetra",Stars:5,Piece2:[r.Factory({Name:"ArchaicPetra2",OnApply:new r.Builder().stat.Char(t.stat.GEO_DMG).Values(.15).Build()})],Piece4:[r.Factory({Name:"ArchaicPetra4",MaxAuras:1,ApplyOther:!0,ValidAuras:t.Swirlable,OnApply(e,a,s){const n=e.GetCharacter(),i=t.Elements.filter(E=>E!==t.stat.PHYSICAL_DMG).map(E=>s.Modifier(n.CreateModifier(E,0)));function l(){const E=a.GetAuras().map(_=>t.AuraToDmg(_));for(const _ of i)E.includes(_.GetProp())?_.SetValue(.4):_.SetValue(0)}return s.Observer(a.CreateObserver(r.EffectEvent.CHANGE_AURAS,l)),()=>0}})]}),Oi=I.Set({Name:"Berserker",Stars:4,Piece2:[r.Factory({Name:"Berserker2",OnApply:new r.Builder().stat.Char(t.stat.CRIT_RATE).Values(.12).Build()})],Piece4:[r.Factory({Name:"Berserker4",OnApply:new r.Builder().Where({target:{hp:{leq:.7}}}).stat.Char(t.stat.CRIT_RATE).Values(.24).Build()})]}),yi=I.Set({Name:"BlizzardStrayer",Stars:5,Piece2:[r.Factory({Name:"BlizzardStrayer2",OnApply:new r.Builder().stat.Char(t.stat.CRYO_DMG).Values(.15).Build()})],Piece4:[r.Factory({Name:"BlizzardStrayer4",OnApply:new r.Builder().Where({enemy:{affected:[t.stat.CRYO_DMG]}}).stat.Char(t.stat.EXTRA_CRIT_RATE).Values(.2).Next().Where({enemy:{aura:[t.aura.FROZEN]}}).stat.Char(t.stat.EXTRA_CRIT_RATE).Values(.2).Next().Build()})]}),T_=Object.values(jn).sort((e,a)=>e.Stars===a.Stars?e.Name.localeCompare(a.Name):e.Stars-a.Stars),$e=new q(e=>e.Name);$e.AddList(T_);function vi(){return $e.Get()}function se(e){return $e.Find(e)}function Xe(e){const a=[];for(const i of e){if(!i)continue;const l=a.find(E=>E[0].toLowerCase()===i.toLowerCase());l?l[1]++:a.push([i.toLowerCase(),1])}const s=[],n=[];for(const i of a)i[1]>=4?(s.push([i[0],4]),n.push(i[0]),n.push(i[0])):i[1]>=2&&(s.push([i[0],2]),n.push(i[0]));return[s,n]}var __=class{constructor(e){this.target=e,this.effects=new q(a=>a.Options.Name),this.sets=[],this.artifacts=et.Values().map(a=>{const s=new vn(a).Equip(e.GetCharacter());return s.Event.CreateObserver(j.CHANGE_SET,()=>this.onChangeSet()),s})}GetArtifacts(){return this.artifacts}GetActiveSets(){return this.sets}onChangeSet(){const[e,a]=Xe(this.artifacts.map(s=>s.GetSet()||""));this.effects.Get().forEach(s=>s.Disable().UnapplyAll()),this.effects.Clear(),this.sets=a;for(const[s,n]of e){if(!s)continue;const i=se(s);!i||(n>=2&&i.Piece2.map(l=>{const E=l(this.target).Enable();return E.Apply(this.target),E}).forEach(l=>this.effects.Add(l)),n>=4&&i.Piece4.map(l=>{const E=l(this.target).Enable();return E.Apply(this.target),E}).forEach(l=>this.effects.Add(l)))}}UnequipAll(){return this.artifacts.forEach(e=>e.Unequip()),this}EquipAll(){return this.artifacts.forEach(e=>e.Equip(this.target.GetCharacter())),this}GetEffects(){return this.effects.Get()}FindEffect(e){return this.effects.Find(e)}Get(e){return this.artifacts[e]}Remove(){this.UnequipAll(),this.effects.Get().forEach(e=>e.Disable().UnapplyAll())}EquipRolls(e){try{const a=Yn(F({stars:5,mainstats:[this.artifacts[2].GetMainstat(),this.artifacts[3].GetMainstat(),this.artifacts[4].GetMainstat()]},e));return this.artifacts.forEach((s,n)=>{const i=a[n];s.ClearSubstats(),i.forEach(([l,E],_)=>{s.SubstatsLength()<=_?s.AddSubstat(l,E):(s.SetSubstat(_,l),s.SetSubstatValue(_,E))})}),!0}catch(a){return console.error("[EQUIP SUBSTATS]",a),!1}}RollSummary(){const e=Hi(),a=[],s={};for(const n of this.artifacts){const i=n.Rolls();for(const[l,E]of i){s[l]===void 0&&(s[l]=a.length,a.push([l,Hi()]));const[,_]=a[s[l]];for(let A=0;A<4;A++)_[A]+=E[A]||0,e[A]+=E[A]||0,_[4]+=E[A]||0,e[4]+=E[A]||0}for(let l=0;l<n.SubstatsLength();l++){const E=n.GetSubstat(l),_=n.GetSubstatValue(l),A=Math.round(_/at(n.GetStars(),E,4));e[5]+=A,a[s[E]][1][5]+=A}}return{result:a,total:e}}},Hi=()=>[0,0,0,0,0,0],ne={};D(ne,{Rotation:()=>A_});var A_=class{constructor(){this.characters=new q(e=>e.GetCharacter().Options.Name),this.actions=[],this.damage=0,this.Duration=NaN,this.details=[]}SetCharacters(...e){return this.characters.Clear(),this.characters.AddList(e),this}Run(){let e=-1;return this.Log&&(e=this.Log.Line),this.damage=0,this.details=[],this.actions.forEach(a=>this.runAction(a)),this.Log&&(this.Log.Line=e),this.damage}AddFn(e,a){return this.actions.push({fn:e,line:a}),this}AddHit(e,a,s,n,i,l){return i=Math.max(0,Math.min(1,i)),n=Math.max(0,Math.min(i,n)),this.actions.push({hit:{charname:e,hitname:a,multiplier:s,aura:i,reaction:n},line:l}),this}Clear(){return this.actions=[],this}GetDetails(){const e={};return this.details.forEach((a,s)=>{e[a.charname]||(e[a.charname]=[]),e[a.charname][s]=a}),e}GetSummary(){const e={damage:this.damage,dps:this.damage/this.Duration,duration:this.Duration,characters:{}};for(const a of this.characters.Get())e.characters[a.GetCharacter().Options.Name]={relative:0,damage:0,dps:0,elements:{},talents:{},instances:{}};for(const{charname:a,hitname:s,talent:n,element:i,damage:l}of this.details){const E=e.characters[a];E.damage+=l,E.elements[i]||(E.elements[i]={damage:0,relative:0}),E.elements[i].damage+=l,E.talents[n]||(E.talents[n]={damage:0,relative:0}),E.talents[n].damage+=l,E.instances[s]||(E.instances[s]={damage:0,relative:0}),E.instances[s].damage+=l}for(const a in e.characters){const s=e.characters[a];s.dps=s.damage/this.Duration,s.relative=s.damage/this.damage;for(const n in s.instances)s.instances[n].relative=s.instances[n].damage/s.damage;for(const n in s.talents)s.talents[n].relative=s.talents[n].damage/s.damage;for(const n in s.elements)s.elements[n].relative=s.elements[n].damage/s.damage}return e}getCharacter(e){const a=this.characters.Find(e);return a||this.Log&&this.Log.Errorf("Character not found: %s",e),a}getInstance(e,a){const s=this.getCharacter(e);if(!s)return;const n=s.FindInstance(a);return n||this.Log&&this.Log.Errorf("Instance %s not found in character %s",a,e),n}addDamage(e){this.damage+=e.damage,this.Log&&this.details.push(e)}runAction(e){if(e.line&&this.Log&&(this.Log.Line=e.line),e.fn){e.fn();return}if(!e.hit)return;const{hit:a}=e,s=this.getCharacter(a.charname);if(!s)return;const n=this.getInstance(a.charname,a.hitname);if(!n)return;const i=s.GetCharacter().Options.Name,l=n.Options.Name,E=s.GetCharacter().GetEnemy(),_=E.GetAuras(),A=n.DmgAvg(!0),u=n.DmgAvg(!1);E.SetAuras();const S=n.DmgAvg(!1),h=S;E.SetAuras(..._);const L=Bs(S,h,u,A,a.aura,a.reaction),f=a.multiplier*L;this.addDamage({charname:i,hitname:l,talent:n.Options.Talent,element:n.GetElement(),damage:f,single_damage:L,multiplier:a.multiplier,auras:_,noaura_noreaction:S,noaura_yesreaction:h,yesaura_noreaction:u,yesaura_yesreaction:A,aura:a.aura,reaction:a.reaction}),this.Log&&this.Log.Logf("%s hit %s did (%.2f * %.2f) = %.2f damage",i,l,a.multiplier,L,f)}},Lt={};D(Lt,{Albedo:()=>mr,Alhaitham:()=>fr,Amber:()=>Lr,Ayaka:()=>lr,Ayato:()=>rr,Beidou:()=>Nr,Bennett:()=>Gr,Chongyun:()=>Sr,Collei:()=>ur,Cyno:()=>Ar,Dehya:()=>Ki,Diluc:()=>_r,Eula:()=>Tr,Faruzan:()=>Yi,FindByName:()=>Z1,Fischl:()=>Rr,Ganyu:()=>Er,GetList:()=>yr,Gorou:()=>cr,HuTao:()=>Cr,Itto:()=>hr,Jean:()=>or,Kazuha:()=>Ir,Keqing:()=>ir,Klee:()=>nr,Kokomi:()=>Zi,Mika:()=>bi,Mona:()=>sr,Nahida:()=>Or,Neuvillette:()=>wi,Nilou:()=>ki,Ningguang:()=>ar,Noelle:()=>er,Raiden:()=>gr,Rosaria:()=>tr,Sara:()=>Dr,Shenhe:()=>Ji,Sucrose:()=>Xi,Tartaglia:()=>$i,Venti:()=>Qi,Wanderer:()=>qi,Xiangling:()=>zi,Xiao:()=>ji,Xingqiu:()=>pr,Yae:()=>Wi,Yanfei:()=>Ui,Yelan:()=>Mr,Yoimiya:()=>xi,Yunjin:()=>Vi,Zhongli:()=>dr});var Pi={};D(Pi,{Albedo:()=>mr,Alhaitham:()=>fr,Amber:()=>Lr,Ayaka:()=>lr,Ayato:()=>rr,Beidou:()=>Nr,Bennett:()=>Gr,Chongyun:()=>Sr,Collei:()=>ur,Cyno:()=>Ar,Dehya:()=>Ki,Diluc:()=>_r,Eula:()=>Tr,Faruzan:()=>Yi,Fischl:()=>Rr,Ganyu:()=>Er,Gorou:()=>cr,HuTao:()=>Cr,Itto:()=>hr,Jean:()=>or,Kazuha:()=>Ir,Keqing:()=>ir,Klee:()=>nr,Kokomi:()=>Zi,Mika:()=>bi,Mona:()=>sr,Nahida:()=>Or,Neuvillette:()=>wi,Nilou:()=>ki,Ningguang:()=>ar,Noelle:()=>er,Raiden:()=>gr,Rosaria:()=>tr,Sara:()=>Dr,Shenhe:()=>Ji,Sucrose:()=>Xi,Tartaglia:()=>$i,Venti:()=>Qi,Wanderer:()=>qi,Xiangling:()=>zi,Xiao:()=>ji,Xingqiu:()=>pr,Yae:()=>Wi,Yanfei:()=>Ui,Yelan:()=>Mr,Yoimiya:()=>xi,Yunjin:()=>Vi,Zhongli:()=>dr});var T={};D(T,{ArrObjTable:()=>d_,Artifact:()=>N_,ArtifactRolls:()=>C_,Character:()=>h_,Effect:()=>f_,EffectDetail:()=>m_,Enemy:()=>g_,Food:()=>D_,Horizontal:()=>Tt,Instance:()=>S_,ObjArrTable:()=>M_,Rotation:()=>R_,Table:()=>K,hits:()=>u_,labels:()=>O});var K=class{constructor(...e){this.DecimalPlaces=2,this.HeaderLine=!0,this.rows=[e],this.n_cols=e.length}AddRow(...e){for(;e.length<this.n_cols;)e.push("");return this.rows.push(e),this}GetHeaders(){return this.rows[0]}GetRows(){return this.rows.slice(1)}toString(){return this.String()}String(){const e=this.n_cols,a=this.rows.length,s=[],n=[];for(let l=0;l<e;l++){let E=0;for(let _=0;_<a;_++){const A=this.rows[_][l];let u;typeof A=="number"?u=A.toFixed(this.DecimalPlaces):u=(A==null?void 0:A.toString())||"",u.length>E&&(E=u.length),s[_*e+l]=u}n[l]=E}for(let l=0;l<e;l++)for(let E=0;E<a;E++){const _=n[l];for(;s[E*e+l].length<_;)s[E*e+l]+=" "}let i="";for(let l=0;l<a;l++){for(let E=0;E<e;E++)i+=s[l*e+E]+" | ";if(this.HeaderLine&&l===0){i+=`
`;const E=i.length;for(let _=0;_<E;_++)i+="-"}i+=`
`}return i}RemoveColumn(e){for(const a of this.rows)a.splice(e,1);return this.n_cols--,this}RemoveColumns(...e){e.sort((a,s)=>s-a);for(const a of e)this.RemoveColumn(a);return this}RemoveEmptyColumns(){const e=this.n_cols;for(let a=e-1;a>=0;a--){let s=!0;for(let n=1;n<this.rows.length;n++)if(this.rows[n][a]){s=!1;break}s&&this.RemoveColumn(a)}return this}};function Bi(...e){const a={};return e.forEach(s=>{if(typeof s=="string")a[s]=s;else for(const n in s)a[n]=n}),a}var u_=Bi("HIT_N1","HIT_N1_1","HIT_N1_2","HIT_N1_3","HIT_N1_4","HIT_N2","HIT_N2_1","HIT_N2_2","HIT_N2_3","HIT_N2_4","HIT_N3","HIT_N3_1","HIT_N3_2","HIT_N3_3","HIT_N3_4","HIT_N4","HIT_N4_1","HIT_N4_2","HIT_N4_3","HIT_N4_4","HIT_N5","HIT_N5_1","HIT_N5_2","HIT_N5_3","HIT_N5_4","HIT_N6","HIT_N6_1","HIT_N6_2","HIT_N6_3","HIT_N6_4","HIT_CHARGED","HIT_CHARGED_1","HIT_CHARGED_2","HIT_CHARGED_3","HIT_CHARGED_4","HIT_CHARGED_SPIN","HIT_CHARGED_FINAL","HIT_PLUNGE","HIT_PLUNGE_LOW","HIT_PLUNGE_HIGH","HIT_AIMED_NORMAL","HIT_AIMED_CHARGED","HIT_E","HIT_E_PRESS","HIT_E_HOLD","HIT_E_DOT","HIT_E_1","HIT_E_1_1","HIT_E_1_2","HIT_E_2","HIT_E_2_1","HIT_E_2_2","HIT_E_3","HIT_E_3_1","HIT_E_3_2","HIT_E_4","HIT_E_EXPLOSION","HIT_Q","HIT_Q_EXPLOSION","HIT_Q_DOT","HIT_Q_1","HIT_Q_2","HIT_Q_3","HIT_WEAPON_HIT","HIT_WEAPON_HIT_N1","HIT_WEAPON_HIT_N2","HIT_WEAPON_HIT_N3","HIT_WEAPON_HIT_N4","HIT_WEAPON_HIT_N5","HIT_WEAPON_HIT_N6","HIT_OVERLOAD","HIT_SHATTER","HIT_SUPERCONDUCT","HIT_ELECTROCHARGE","HIT_SWIRL_PYRO","HIT_SWIRL_HYDRO","HIT_SWIRL_CRYO","HIT_SWIRL_ELECTRO","HIT_BLOOM","HIT_HYPERBLOOM","HIT_BURNING","HIT_BURGEON"),O=Bi("REGION","NONE","NAME","MV","STAT","HIT","ELEMENT","TALENT","VALUE","NO_CRIT","CRIT","AVG","STAT_BASE","STAT_FLAT","STAT_PERCENT","STAT_TOTAL","SET","PIECE","LEVEL","BONUS","STARS","CHARACTER","ASCENDED","CURRENT","WEAPON","ARTIFACT","EFFECT","ENABLED","STACKS","AURA","TARGET","CONDITION","DAMAGE","MIN","MAX","HIT","OWNER","RELATIVE","BENEFIT","ROTATION_DAMAGE","DPS");function S_(...e){const a=new K(O.HIT,O.ELEMENT,O.TALENT,O.NO_CRIT,O.CRIT,O.AVG);return e.forEach(s=>a.AddRow(s.Options.Name,t.stat.Name(s.GetElement()),t.stat.Name(s.Options.Talent),s.DmgNoCrit(!0),s.DmgCrit(!0),s.DmgAvg(!0))),a.String()}function h_(...e){const a=[];for(let s=0;s<e.length;s++)a[2*s]=L_(e[s]),a[2*s+1]=" ".repeat(4);return Tt(...a)}function L_(e){var a;const s=e.GetCharacter();let n;s.IsAscended()?n="+":n="";let i=`(${s.Options.Stars}*) ${s.Options.Name} ${s.GetLevel()}${n}`;i+=` (${s.Get(t.stat.NORMAL_ATTACK_LEVEL)}/${s.Get(t.stat.ELEMENTAL_SKILL_LEVEL)}/${s.Get(t.stat.ELEMENTAL_BURST_LEVEL)})
`;const l=e.GetWeapon();l?(l.IsAscended()?n="+":n="",i+=`(${l.Options.Stars}*) ${l.Options.Name} ${l.GetLevel()}${n} (R${l.GetRank()})
`):i+=`(No weapon)
`;const E=(a=e.GetArtifacts())==null?void 0:a.GetActiveSets();if(E&&E.length>0){const u=E.map(S=>{var h;return(h=se(S))==null?void 0:h.Name});u[0]===u[1]?i+=u[0]+` (4)
`:u.forEach(S=>{S&&S!==""&&(i+=S+` (2)
`)})}const _=new K(O.STAT,O.VALUE);_.DecimalPlaces=4,_.AddRow(t.stat.Name(t.stat.ATK),s.Get(t.stat.ATK)),_.AddRow(t.stat.Name(t.stat.DEF),s.Get(t.stat.DEF)),_.AddRow(t.stat.Name(t.stat.HP),s.Get(t.stat.HP)),_.AddRow(t.stat.Name(t.stat.CRIT_RATE),s.Get(t.stat.CRIT_RATE)),_.AddRow(t.stat.Name(t.stat.CRIT_DMG),s.Get(t.stat.CRIT_DMG)),_.AddRow(t.stat.Name(t.stat.ENERGY_RECHARGE),s.Get(t.stat.ENERGY_RECHARGE)),_.AddRow(t.stat.Name(t.stat.ELEMENTAL_MASTERY),s.Get(t.stat.ELEMENTAL_MASTERY));const A=s.Options.Element;return _.AddRow(t.stat.Name(A),s.Get(A)),i+=_.String(),i}function f_(...e){const a=new K(O.NAME,O.ENABLED,O.STACKS,O.OWNER,O.TARGET);for(const s of e){const n=s.GetTargets().map(i=>i.GetCharacter().Options.Name);a.AddRow(s.Options.Name,s.Enabled(),s.GetStacks(),s.Owner.GetCharacter().Options.Name,n.join(", "))}return a.String()}function m_(e){let a=e.Options.Name+`
`;const s=new K(O.OWNER,O.ENABLED,O.STACKS);s.AddRow(e.Owner.GetCharacter().Options.Name,e.Enabled(),e.GetStacks()+"/"+e.Options.MaxStacks),a+=s.String()+`
`;const n=new K(O.TARGET);for(const E of e.GetTargets())n.AddRow(E.GetCharacter().Options.Name);const i=new K(O.CONDITION);for(const E of e.Options.Conditions)i.AddRow(E+" ("+e.HasCondition(E)+")");const l=new K(O.AURA);for(const E of t.aura.Values())e.HasAura(E)&&l.AddRow(t.aura.Name(E));return a+=Tt(n.String(),i.String(),l.String()),a}function N_(...e){const a=[];for(let s=0;s<e.length;s++)a[2*s]=p_(e[s]),a[2*s+1]=" ".repeat(4);return Tt(...a)}function p_(e){let a=`(${e.GetStars()}*) ${t.piece.Name(e.GetPiece())} (+${e.GetLevel()})
`;const s=e.GetSet();if(s){const i=se(s);i?a+=O.SET+": "+i.Name+`
`:a+=O.SET+": "+O.NONE+`
`}else a+=O.SET+": "+O.NONE+`
`;const n=new K(O.STAT,O.VALUE);n.DecimalPlaces=4,n.AddRow(t.stat.Name(e.GetMainstat()),e.GetMainstatValue());for(let i=0;i<e.SubstatsLength();i++)n.AddRow(t.stat.Name(e.GetSubstat(i)),e.GetSubstatValue(i));return a+=n.String(),a}function C_(e){const a=e.FormatRolls(),s=new K(O.STAT,"","","","","","");return a.forEach(([n,i])=>s.AddRow(t.stat.Name(n),...i)),s.DecimalPlaces=4,`${t.piece.Name(e.GetPiece())}
`+s}function M_(e){const a=Object.keys(e),s=new K(...a),n=Math.max(...a.map(i=>e[i].length));for(let i=0;i<n;i++){const l=[];for(const E of a)i<e[E].length?l.push(e[E][i]):l.push(void 0);s.AddRow(...l)}return s}function d_(e){const a=[];for(const n of e){const i=Object.keys(n);for(const l of i)a.includes(l)||a.push(l)}const s=new K(...a);for(const n of e)s.AddRow(...a.map(i=>n[i]));return s}function g_(...e){const a=[];for(let s=0;s<e.length;s++)a[2*s]=G_(e[s]),a[2*s+1]=" ".repeat(4);return Tt(...a)}function G_(e){const a=new K(O.STAT,O.STAT_BASE,O.STAT_TOTAL);a.AddRow(O.LEVEL,"",e.GetLevel());for(const n of t.Elements){const i=t.DmgToRes(n);a.AddRow(t.stat.Name(i),e.GetBaseRes(i),e.Subject.Get(i))}const s=new K(O.AURA);for(const n of t.aura.Values())e.HasAura(n)&&s.AddRow(t.aura.Name(n));return a.DecimalPlaces=4,e.name+`
`+Tt(a.String(),s.String())}function R_(e){const a=Object.keys(e.characters).map(n=>n+`
`+I_(n,e.characters[n])),s=[];for(let n=0;n<a.length;n++)s[2*n]=a[n],s[2*n+1]=" ".repeat(4);return`${O.ROTATION_DAMAGE}: ${e.damage.toFixed(2)}

${O.DPS}: ${e.dps.toFixed(2)}

`+Tt(...s)}function I_(e,a){const s=new K(O.NAME,O.DAMAGE,O.RELATIVE);s.AddRow(e,a.damage,ie(a.relative));for(const n in a.elements){const i=parseInt(n);s.AddRow(t.stat.Name(i),a.elements[n].damage,ie(a.elements[n].relative))}for(const n in a.talents){const i=parseInt(n);s.AddRow(t.stat.Name(i),a.talents[n].damage,ie(a.talents[n].relative))}for(const n in a.instances)s.AddRow(n,a.instances[n].damage,ie(a.instances[n].relative));return s.toString()}var ie=e=>e*100;function D_(...e){const a=new K("NAME","STARS","TYPE","EFFECTS");for(const s of e){const n=(()=>{if(s instanceof gt.Food){const i=s.GetRank();return s.Options.Effects.map(([l,E,_])=>{const A=E+(_-E)*(i-1)/2;return`${t.stat.Name(l)}: ${A}`}).join(", ")}else return s.Effects.map(([i,l,E])=>`${t.stat.Name(i)}: ${l}-${E}`).join(", ")})();a.AddRow(s.Name,s.Stars,s.Type,n)}return a.String()}var O_=[{Name:T.hits.HIT_N1,Element:t.stat.HYDRO_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Stat:t.stat.ATK,Scaling:o.TalentScaling.ELEMENTAL_1,Initial:.5458}]},{Name:T.hits.HIT_N2,Element:t.stat.HYDRO_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Stat:t.stat.ATK,Scaling:o.TalentScaling.ELEMENTAL_1,Initial:.4625}]},{Name:T.hits.HIT_N3,Element:t.stat.HYDRO_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Stat:t.stat.ATK,Scaling:o.TalentScaling.ELEMENTAL_1,Initial:.7234}]},{Name:T.hits.HIT_CHARGED,Element:t.stat.HYDRO_DMG,Talent:t.stat.CHARGED_ATTACK_DMG,Scaling:[{Stat:t.stat.ATK,Scaling:o.TalentScaling.ELEMENTAL_1A,Initial:1.368}]},{Name:T.hits.HIT_CHARGED_2,Element:t.stat.HYDRO_DMG,Talent:t.stat.CHARGED_ATTACK_DMG,Scaling:[{Stat:t.stat.HP,Scaling:o.TalentScaling.PHYSICAL_1,Initial:.0732}]},{Name:T.hits.HIT_CHARGED+"_C6",Element:t.stat.HYDRO_DMG,Talent:t.stat.CHARGED_ATTACK_DMG,Scaling:[{Stat:t.stat.HP,Scaling:o.TalentScaling.NONE,Initial:.1}]},{Name:T.hits.HIT_PLUNGE,Element:t.stat.HYDRO_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Stat:t.stat.ATK,Scaling:o.TalentScaling.ELEMENTAL_1,Initial:.5683}]},{Name:T.hits.HIT_PLUNGE_LOW,Element:t.stat.HYDRO_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Stat:t.stat.ATK,Scaling:o.TalentScaling.ELEMENTAL_1,Initial:1.1363}]},{Name:T.hits.HIT_PLUNGE_HIGH,Element:t.stat.HYDRO_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Stat:t.stat.ATK,Scaling:o.TalentScaling.ELEMENTAL_1,Initial:1.4193}]}],y_=[{Name:T.hits.HIT_E,Element:t.stat.HYDRO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.HP,Initial:.1286}]},{Name:T.hits.HIT_E_DOT,Element:t.stat.HYDRO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:.208}]}],v_=[{Name:T.hits.HIT_Q,Element:t.stat.HYDRO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.HP,Initial:.2226}]},{Name:T.hits.HIT_Q_DOT,Element:t.stat.HYDRO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.HP,Initial:.0911}]}],H_=r.Factory({Name:"NeuvilletteA1",MaxStacks:3,OnApply:new r.Builder().Where({target:{ascension:1}}).mv.Multiplier(1,"HIT_CHARGED_2","HIT_CHARGED_C6").Map((e,a,s)=>[0,1.1,1.25,1.6][s.GetStacks()]).Build()}),P_=r.Factory({Name:"NeuvilletteA4",OnApply:new r.Builder().Where({target:{ascension:4}}).observe.Target(t.stat.HP_CURRENT).stat.Char(t.stat.HYDRO_DMG).Values(1).Map((e,a)=>Math.min(.3,.6*Math.max(0,a.GetCharacter().Get(t.stat.HP_CURRENT)-.3))).Build()}),B_=r.Factory({Name:"NeuvilletteC2",OnApply(e,a,s){const n=e.FindEffect("NeuvilletteA1");if(!n)throw new Error("NeuvilletteC2: Could not find NeuvilletteA1");const i=e.FindInstance("HIT_CHARGED_2"),l=e.FindInstance("HIT_CHARGED_C6");if(!i)throw new Error("NeuvilletteC2: Could not find HIT_CHARGED_2");if(!l)throw new Error("NeuvilletteC2: Could not find HIT_CHARGED_C6");const E=s.Modifier(i.Subject.CreateModifier(t.stat.CRIT_DMG,0)),_=s.Modifier(l.Subject.CreateModifier(t.stat.CRIT_DMG,0)),A=()=>{if(e.GetCharacter().GetAscension()<1){E.SetValue(0),_.SetValue(0);return}const u=n.GetStacks();E.SetValue(.14*u),_.SetValue(.14*u)};return A(),s.Observer(n.CreateObserver(r.EffectEvent.CHANGE_STACKS,A)),s.Observer(e.GetCharacter().CreateObserver(t.stat.LEVEL,A)),s.Observer(e.GetCharacter().CreateObserver(t.stat.ASCENSION,A)),()=>0}}),w_=r.Factory({Name:"NeuvilletteC3",OnApply:new r.Builder().stat.Char(t.stat.NORMAL_ATTACK_LEVEL_UP).Values(3).Build()}),b_=r.Factory({Name:"NeuvilletteC5",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_BURST_LEVEL_UP).Values(3).Build()}),wi=G.Factory({Name:"Neuvillette",Stars:5,Element:t.stat.HYDRO_DMG,Weapon:t.weapon.CATALYST,StatBonus:t.stat.CRIT_DMG,BurstCost:70,Region:t.region.FONTAINE,HpBase:[1143.984,4697.8169],AtkBase:[16.218,66.595],DefBase:[44.8725,184.275],Normals:O_,Skills:y_,Bursts:v_,Extra:[],Effects:[H_,P_,B_,w_,b_]}),K_=r.Factory({Name:"MikaC3",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_BURST_LEVEL_UP).Values(3).Build()}),Y_=r.Factory({Name:"MikaC5",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_SKILL_LEVEL_UP).Values(3).Build()}),F_=r.Factory({Name:"MikaC6",ApplyOther:!0,MaxTargets:1,OnApply:new r.Builder().stat.Char(t.stat.PHYSICAL_CRIT_DMG).Values(.6).Build()}),k_=[{Name:T.hits.HIT_N1,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.4326}]},{Name:T.hits.HIT_N2,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.415}]},{Name:T.hits.HIT_N3,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.545}]},{Name:T.hits.HIT_N4,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.2761}]},{Name:T.hits.HIT_N5,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.7087}]},{Name:T.hits.HIT_CHARGED,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.CHARGED_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.1275}]},{Name:T.hits.HIT_PLUNGE,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.6393}]},{Name:T.hits.HIT_PLUNGE_LOW,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.2784}]},{Name:T.hits.HIT_PLUNGE_HIGH,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.5968}]}],V_=r.Factory({Name:"MikaA1",MaxStacks:4,ApplyOther:!0,OnApply:new r.Builder().Where({owner:{ascension:1}}).stat.Char(t.stat.PHYSICAL_DMG).Values(.1).Stacks().Build()}),x_=[{Name:T.hits.HIT_E_PRESS,Element:t.stat.CRYO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:.672}]},{Name:T.hits.HIT_E_HOLD,Element:t.stat.CRYO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:.84}]},{Name:T.hits.HIT_E_DOT,Element:t.stat.CRYO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:.252}]}],bi=G.Factory({Name:"Mika",Element:t.stat.CRYO_DMG,Stars:4,Weapon:t.weapon.POLEARM,StatBonus:t.stat.HP_PERCENT,BurstCost:70,Region:t.region.MONDSTADT,HpBase:[1048.5597,3751.7275],AtkBase:[18.6984,66.90411],DefBase:[59.800125,213.96375],Normals:k_,Skills:x_,Bursts:[],Extra:[],Effects:[V_,K_,Y_,F_]}),U_=[{Name:T.hits.HIT_N1+"_Q",Element:t.stat.PYRO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:.987},{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.HP,Initial:.0169}]},{Name:T.hits.HIT_Q,Element:t.stat.PYRO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:1.393},{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:.0239}]}],W_=r.Factory({Name:"DehyaC1",OnApply:new r.Builder().stat.Char(t.stat.HP_PERCENT).Values(.2).Next().mv.Mv(t.stat.HP,.036,e=>e.Options.Talent===t.stat.ELEMENTAL_SKILL_DMG).Next().mv.Mv(t.stat.HP,.06,e=>e.Options.Talent===t.stat.ELEMENTAL_BURST_DMG).Build()}),j_=r.Factory({Name:"DehyaC2",OnApply:new r.Builder().stat.Char(t.stat.ALL_DMG).Instance("HIT_E_DOT").Values(.5).Build()}),z_=r.Factory({Name:"DehyaC3",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_BURST_LEVEL_UP).Values(3).Build()}),q_=r.Factory({Name:"DehyaC5",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_SKILL_LEVEL_UP).Values(3).Build()}),Q_=r.Factory({Name:"DehyaC6",MaxStacks:4,OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_BURST_CRIT_RATE).Values(.1).Next().stat.Char(t.stat.ELEMENTAL_BURST_CRIT_DMG).Values(.15).Stacks().Build()}),$_=[{Name:T.hits.HIT_N1,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.6212}]},{Name:T.hits.HIT_N2,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.6171}]},{Name:T.hits.HIT_N3,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.7663}]},{Name:T.hits.HIT_N4,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.9529}]},{Name:T.hits.HIT_CHARGED_SPIN,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.5633}]},{Name:T.hits.HIT_CHARGED_FINAL,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.0182}]},{Name:T.hits.HIT_PLUNGE,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.7459}]},{Name:T.hits.HIT_PLUNGE_LOW,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.4914}]},{Name:T.hits.HIT_PLUNGE_HIGH,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.8629}]}],X_=[{Name:T.hits.HIT_E_1,Element:t.stat.PYRO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:1.1288}]},{Name:T.hits.HIT_E_2,Element:t.stat.PYRO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:1.328}]},{Name:T.hits.HIT_E_DOT,Element:t.stat.PYRO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:.602},{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.HP,Initial:.0103}]}],Ki=G.Factory({Name:"Dehya",Stars:5,Element:t.stat.PYRO_DMG,Weapon:t.weapon.CLAYMORE,StatBonus:t.stat.HP_PERCENT,Region:t.region.SUMERU,BurstCost:70,HpBase:[1220.2496,5011.0044],AtkBase:[20.6682,84.8686],DefBase:[48.88111,200.7369],Normals:$_,Skills:X_,Bursts:U_,Extra:[],Effects:[W_,j_,z_,q_,Q_]}),J_=[{Name:T.hits.HIT_Q,Element:t.stat.ANEMO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:3.776}]}],Z_=r.Factory({Name:"FaruzanQ",ApplyOther:!0,OnApply:new r.Builder().stat.Enemy(t.stat.ANEMO_RES).Values(-.3).Next().observe.Owner(t.stat.ELEMENTAL_BURST_LEVEL,t.stat.ELEMENTAL_BURST_LEVEL_UP).stat.Char(t.stat.ANEMO_DMG).Values(...o.TalentScaling.ELEMENTAL_1).Rank((e,a)=>a.Owner.GetCharacter().Get(t.stat.ELEMENTAL_BURST_LEVEL)).Map(e=>e*.18).Build()}),tA=r.Factory({Name:"FaruzanC3",ApplyOther:!0,OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_SKILL_LEVEL_UP).Values(3).Build()}),eA=r.Factory({Name:"FaruzanC5",ApplyOther:!0,OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_BURST_LEVEL_UP).Values(3).Build()}),aA=r.Factory({Name:"FaruzanC6",ApplyOther:!0,OnApply:new r.Builder().stat.Char(t.stat.ANEMO_CRIT_DMG).Values(.4).Build()}),sA=[{Name:T.hits.HIT_N1,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.4473}]},{Name:T.hits.HIT_N2,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.4219}]},{Name:T.hits.HIT_N3,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.5316}]},{Name:T.hits.HIT_N4,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.7062}]},{Name:T.hits.HIT_AIMED_NORMAL,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.AIMED_SHOT_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.4386}]},{Name:T.hits.HIT_AIMED_CHARGED,Element:t.stat.ANEMO_DMG,Talent:t.stat.CHARGED_AIMED_SHOT_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:1.24}]},{Name:T.hits.HIT_PLUNGE,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.5683}]},{Name:T.hits.HIT_PLUNGE_LOW,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.1363}]},{Name:T.hits.HIT_PLUNGE_HIGH,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.4193}]}],nA=r.Factory({Name:"FaruzanA4",ApplyOther:!0,OnApply:new r.Builder().Where({owner:{ascension:4}}).observe.Owner(t.stat.ATK_BASE).stat.Char(t.stat.ANEMO_DMG_FLAT).Values(.32).Map((e,a,s)=>s.Owner.GetCharacter().Get(t.stat.ATK_BASE)*e).Build()}),iA=[{Name:T.hits.HIT_E,Element:t.stat.ANEMO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:1.488}]},{Name:T.hits.HIT_E_2,Element:t.stat.ANEMO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:1.08}]}],Yi=G.Factory({Name:"Faruzan",Stars:4,Element:t.stat.ANEMO_DMG,Weapon:t.weapon.BOW,StatBonus:t.stat.ATK_PERCENT,BurstCost:80,Region:t.region.SUMERU,HpBase:[802.3761,2870.8872],AtkBase:[16.4724,58.939335],DefBase:[52.647,188.37],Normals:sA,Skills:iA,Bursts:J_,Extra:[],Effects:[Z_,nA,tA,eA,aA]}),rA=[{Name:T.hits.HIT_Q,Element:t.stat.HYDRO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.HP,Initial:.1843}]},{Name:T.hits.HIT_Q_2,Element:t.stat.HYDRO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.HP,Initial:.2253}]}],lA=r.Factory({Name:"NilouC1",OnApply:new r.Builder().stat.Char(t.stat.ALL_DMG).Instance("HIT_E_3_1").Values(.65).Build()}),oA=r.Factory({Name:"NilouC2",ApplyOther:!0,Conditions:["BLOOM"],MaxConditions:1,OnApply:new r.Builder().Where({owner:{ascension:1}}).stat.Enemy(t.stat.HYDRO_RES).Values(-.35).Next().Where({owner:{ascension:1},effect:{conditions:["BLOOM"]}}).stat.Enemy(t.stat.DENDRO_RES).Values(-.35).Build()}),cA=r.Factory({Name:"NilouC3",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_BURST_LEVEL_UP).Values(3).Build()}),EA=r.Factory({Name:"NilouC4",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_BURST_DMG).Values(.5).Build()}),TA=r.Factory({Name:"NilouC5",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_SKILL_LEVEL_UP).Values(3).Build()}),_A=r.Factory({Name:"NilouC6",OnApply:new r.Builder().observe.Target(t.stat.HP_PERCENT,t.stat.HP_BASE,t.stat.HP_FLAT).stat.Char(t.stat.CRIT_RATE).Values(.6/100).Map((e,a)=>Math.max(0,Math.min(.3,e*a.GetCharacter().Get(t.stat.HP)/1e3))).Next().observe.Target(t.stat.HP_PERCENT,t.stat.HP_BASE,t.stat.HP_FLAT).stat.Char(t.stat.CRIT_DMG).Values(1.2/100).Map((e,a)=>Math.max(0,Math.min(.6,e*a.GetCharacter().Get(t.stat.HP)/1e3))).Build()}),AA=[{Name:T.hits.HIT_N1,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.5031}]},{Name:T.hits.HIT_N2,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.4544}]},{Name:T.hits.HIT_N3,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.7035}]},{Name:T.hits.HIT_CHARGED_1,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.CHARGED_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.5022}]},{Name:T.hits.HIT_CHARGED_2,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.CHARGED_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.5444}]},{Name:T.hits.HIT_PLUNGE,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.6393}]},{Name:T.hits.HIT_PLUNGE_LOW,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.2784}]},{Name:T.hits.HIT_PLUNGE_HIGH,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.5968}]}];function Fi(e){const a=e.GetParty();if(!a)return!1;let s=!1,n=!1;for(const i of a.GetMembers()){const l=i.GetCharacter().Options.Element;if(l===t.stat.DENDRO_DMG)s=!0;else if(l===t.stat.HYDRO_DMG)n=!0;else return!1}return s&&n}var uA=r.Factory({Name:"NilouA1",ApplyOther:!0,OnApply:new r.Builder().Where((e,a)=>a.GetCharacter().GetAscension()<1?!1:Fi(e)).observe.Party(!0).stat.Char(t.stat.ELEMENTAL_MASTERY).Values(100).Build()}),SA=r.Factory({Name:"NilouA4",ApplyOther:!0,OnApply:new r.Builder().Where((e,a)=>a.GetCharacter().GetAscension()<4?!1:Fi(e)).observe.Party(!0).observe.Owner(t.stat.HP_FLAT,t.stat.HP_BASE,t.stat.HP_PERCENT).stat.Char(t.stat.BLOOM_DMG).Values(.09).Map((e,a,s)=>Math.max(0,Math.min(4,(s.Owner.GetCharacter().Get(t.stat.HP)-3e4)*e/1e3))).Build()}),hA=[{Name:T.hits.HIT_E,Element:t.stat.HYDRO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.HP,Initial:.0334}]},{Name:T.hits.HIT_E_1+"_1",Element:t.stat.HYDRO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.HP,Initial:.0455}]},{Name:T.hits.HIT_E_1+"_2",Element:t.stat.HYDRO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.HP,Initial:.0326}]},{Name:T.hits.HIT_E_2+"_1",Element:t.stat.HYDRO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.HP,Initial:.0514}]},{Name:T.hits.HIT_E_2+"_2",Element:t.stat.HYDRO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.HP,Initial:.0396}]},{Name:T.hits.HIT_E_3+"_1",Element:t.stat.HYDRO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.HP,Initial:.0717}]},{Name:T.hits.HIT_E_3+"_2",Element:t.stat.HYDRO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.HP,Initial:.0506}]}],ki=G.Factory({Name:"Nilou",Stars:5,Element:t.stat.HYDRO_DMG,Weapon:t.weapon.SWORD,StatBonus:t.stat.HP_PERCENT,Region:t.region.SUMERU,BurstCost:70,HpBase:[1182.1168,4854.4106],AtkBase:[17.8752,73.39987],DefBase:[56.71884,232.9236],Normals:AA,Skills:hA,Bursts:rA,Extra:[],Effects:[uA,SA,lA,oA,cA,EA,TA,_A]}),Je=new Set,Ze=[.025,.05,.075,.115];function LA(e){const a=e.FindEffect("YunjinA4");if(!a||!a.Enabled()||e.GetCharacter().GetAscension()<4)return 0;const s=e.GetParty();if(!s)return Ze[0];Je.clear();for(const i of s.GetMembers()){const l=i.GetCharacter().Options.Element;Je.add(l)}const n=Math.max(1,Math.min(Ze.length,Je.size));return Ze[n-1]}var fA=r.Factory({Name:"YunjinA4",OnApply(e,a,s){const n=e.FindEffect("YunjinQ");if(!n)throw new Error("Yunjin Burst effect not found");const i=n;function l(){i.Enabled()&&(i.Disable(),i.Enable())}return l(),s.Observer(a.CreateObserver(r.EffectEvent.ENABLE,l)),s.Observer(a.CreateObserver(r.EffectEvent.DISABLE,l)),s.Observer(a.CreateObserver(r.EffectEvent.CHANGE_TARGET,l)),()=>0}}),mA=[{Name:T.hits.HIT_Q,Element:t.stat.GEO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:2.44}]}],NA=r.Factory({Name:"YunjinQ",ApplyOther:!0,OnApply:new r.Builder().observe.Party(!0).observe.Owner(t.stat.DEF_PERCENT,t.stat.DEF_BASE,t.stat.DEF_FLAT,t.stat.ELEMENTAL_BURST_LEVEL,t.stat.ELEMENTAL_BURST_LEVEL_UP).stat.Char(t.stat.NORMAL_ATTACK_DMG_FLAT).Values(...o.TalentScaling.ELEMENTAL_1).Rank((e,a)=>a.Owner.GetCharacter().Get(t.stat.ELEMENTAL_BURST_LEVEL)).Map((e,a,s)=>(.3216*e+LA(s.Owner))*s.Owner.GetCharacter().Get(t.stat.DEF)).Build()}),pA=r.Factory({Name:"YunjinC2",ApplyOther:!0,OnApply:new r.Builder().stat.Char(t.stat.NORMAL_ATTACK_DMG).Values(.15).Build()}),CA=r.Factory({Name:"YunjinC3",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_BURST_LEVEL_UP).Values(3).Build()}),MA=r.Factory({Name:"YunjinC4",OnApply:new r.Builder().stat.Char(t.stat.DEF_PERCENT).Values(.2).Build()}),dA=r.Factory({Name:"YunjinC5",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_SKILL_LEVEL_UP).Values(3).Build()}),gA=[{Name:T.hits.HIT_N1,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.4051}]},{Name:T.hits.HIT_N2,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.4025}]},{Name:T.hits.HIT_N3_1,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.2296}]},{Name:T.hits.HIT_N3_2,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.2752}]},{Name:T.hits.HIT_N4_1,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.2399}]},{Name:T.hits.HIT_N4_2,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.2881}]},{Name:T.hits.HIT_N5,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.6734}]},{Name:T.hits.HIT_CHARGED,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.CHARGED_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.2169}]},{Name:T.hits.HIT_PLUNGE,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.6393}]},{Name:T.hits.HIT_PLUNGE_LOW,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.2784}]},{Name:T.hits.HIT_PLUNGE_HIGH,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.5968}]}],GA=[{Name:T.hits.HIT_E_PRESS,Element:t.stat.GEO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:1.4912}]},{Name:T.hits.HIT_E_1,Element:t.stat.GEO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:2.6096}]},{Name:T.hits.HIT_E_2,Element:t.stat.GEO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:3.728}]}],Vi=G.Factory({Name:"Yunjin",Stars:4,Weapon:t.weapon.POLEARM,Element:t.stat.GEO_DMG,StatBonus:t.stat.ENERGY_RECHARGE,Region:t.region.LIYUE,BurstCost:60,HpBase:[893.5552,3197.1245],AtkBase:[16.0272,57.34638],DefBase:[61.5741,220.311],Normals:gA,Skills:GA,Bursts:mA,Extra:[],Effects:[NA,fA,pA,CA,MA,dA]}),RA=[{Name:T.hits.HIT_Q,Element:t.stat.PYRO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:1.272}]},{Name:T.hits.HIT_Q_DOT,Element:t.stat.PYRO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:1.22}]}],IA=r.Factory({Name:"YoimiyaC1",OnApply:new r.Builder().stat.Char(t.stat.ATK_PERCENT).Values(.2).Build()}),DA=r.Factory({Name:"YoimiyaC2",OnApply:new r.Builder().stat.Char(t.stat.PYRO_DMG).Values(.25).Build()}),OA=r.Factory({Name:"YoimiyaC3",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_SKILL_LEVEL_UP).Values(3).Build()}),yA=r.Factory({Name:"YoimiyaC5",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_BURST_LEVEL_UP).Values(3).Build()}),vA=r.Factory({Name:"YoimiyaC6",OnApply:new r.Builder().instance.Location("Normal").Options({Name:"HIT_C6",Element:t.stat.PYRO_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Talent:t.stat.NORMAL_ATTACK_LEVEL,Initial:.164*.6}]}).Build()}),HA=[{Name:T.hits.HIT_N1,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.3564}]},{Name:T.hits.HIT_N2,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.6838}]},{Name:T.hits.HIT_N3,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.8889}]},{Name:T.hits.HIT_N4,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.4642}]},{Name:T.hits.HIT_N5,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.0586}]},{Name:T.hits.HIT_AIMED_NORMAL,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.AIMED_SHOT_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.4386}]},{Name:T.hits.HIT_AIMED_CHARGED,Element:t.stat.PYRO_DMG,Talent:t.stat.CHARGED_AIMED_SHOT_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:1.24}]},{Name:"HIT_KindlingArrow",Element:t.stat.PYRO_DMG,Talent:t.stat.CHARGED_AIMED_SHOT_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:.164}]},{Name:T.hits.HIT_PLUNGE,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.5683}]},{Name:T.hits.HIT_PLUNGE_LOW,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.1363}]},{Name:T.hits.HIT_PLUNGE_HIGH,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.4193}]}],PA=r.Factory({Name:"YoimiyaA1",MaxStacks:10,OnApply:new r.Builder().Where({target:{ascension:1}}).stat.Char(t.stat.PYRO_DMG).Values(.02).Stacks().Build()}),BA=r.Factory({Name:"YoimiyaA4",ApplyOther:!0,ApplySelf:!1,OnApply(e,a,s){const n=e.GetCharacter(),i=a.Owner.GetCharacter(),l=a.Owner.FindEffect("YoimiyaA1");if(!l)throw new Error("Cannot find Yoimiya A1");const E=s.Modifier(n.CreateModifier(t.stat.ATK_PERCENT,0)),_=()=>{if(i.GetAscension()<4){E.SetValue(0);return}E.SetValue(.1+.01*l.GetStacks())};return _(),s.Observer(i.CreateObserver(t.stat.LEVEL,_)),s.Observer(i.CreateObserver(t.stat.ASCENSION,_)),s.Observer(l.CreateObserver(r.EffectEvent.CHANGE_STACKS,_)),()=>0}}),wA=r.Factory({Name:"YoimiyaE",OnApply:new r.Builder().infusion.Set(t.stat.PYRO_DMG,!0).Next().observe.Target(t.stat.ELEMENTAL_SKILL_LEVEL,t.stat.ELEMENTAL_SKILL_LEVEL_UP).mv.Multiplier(.3791,/hit_n\d/i).Map((e,a)=>1+e*o.TalentScaling.ELEMENTAL_2[a.GetCharacter().Get(t.stat.ELEMENTAL_SKILL_LEVEL)-1]).Build()}),xi=G.Factory({Name:"Yoimiya",Stars:5,Weapon:t.weapon.BOW,Element:t.stat.PYRO_DMG,StatBonus:t.stat.CRIT_RATE,Region:t.region.INAZUMA,BurstCost:60,HpBase:[791.2556,3249.3232],AtkBase:[25.137,103.21857],DefBase:[47.864,196.56],Normals:HA,Skills:[],Bursts:RA,Extra:[],Effects:[wA,PA,BA,IA,DA,OA,yA,vA]}),bA=[{Name:T.hits.HIT_Q,Element:t.stat.PYRO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:1.824}]}],KA=r.Factory({Name:"YanfeiQ",OnApply:new r.Builder().observe.Target(t.stat.ELEMENTAL_BURST_LEVEL,t.stat.ELEMENTAL_BURST_LEVEL_UP).stat.Char(t.stat.CHARGED_ATTACK_DMG).Values(...o.TalentScaling.ELEMENTAL_2).Rank(e=>e.GetCharacter().Get(t.stat.ELEMENTAL_BURST_LEVEL)).Map(e=>.334*e).Build()}),YA=r.Factory({Name:"YanfeiC2",OnApply:new r.Builder().stat.Char(t.stat.CHARGED_ATTACK_CRIT_RATE).Values(.2).Build()}),FA=r.Factory({Name:"YanfeiC3",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_SKILL_LEVEL_UP).Values(3).Build()}),kA=r.Factory({Name:"YanfeiC5",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_BURST_LEVEL_UP).Values(3).Build()}),VA=[{Name:T.hits.HIT_N1,Element:t.stat.PYRO_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Stat:t.stat.ATK,Scaling:o.TalentScaling.ELEMENTAL_1,Initial:.5834}]},{Name:T.hits.HIT_N2,Element:t.stat.PYRO_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Stat:t.stat.ATK,Scaling:o.TalentScaling.ELEMENTAL_1,Initial:.5213}]},{Name:T.hits.HIT_N3,Element:t.stat.PYRO_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Stat:t.stat.ATK,Scaling:o.TalentScaling.ELEMENTAL_1,Initial:.7601}]},{Name:T.hits.HIT_CHARGED,Element:t.stat.PYRO_DMG,Talent:t.stat.CHARGED_ATTACK_DMG,Scaling:[{Stat:t.stat.ATK,Scaling:o.TalentScaling.ELEMENTAL_2,Initial:.9823}]},{Name:T.hits.HIT_PLUNGE,Element:t.stat.PYRO_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Stat:t.stat.ATK,Scaling:o.TalentScaling.ELEMENTAL_1,Initial:.5683}]},{Name:T.hits.HIT_PLUNGE_LOW,Element:t.stat.PYRO_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Stat:t.stat.ATK,Scaling:o.TalentScaling.ELEMENTAL_1,Initial:1.1363}]},{Name:T.hits.HIT_PLUNGE_HIGH,Element:t.stat.PYRO_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Stat:t.stat.ATK,Scaling:o.TalentScaling.ELEMENTAL_1,Initial:1.4193}]}],xA=r.Factory({Name:"YanfeiA1",OnApply(e,a,s){const n=e.GetCharacter(),i=e.FindEffect("YanfeiSeal");if(!i)throw new Error("Cannot find Yanfei Scarlet Seals");const l=s.Modifier(n.CreateModifier(t.stat.PYRO_DMG,0)),E=()=>{if(n.GetAscension()<1){l.SetValue(0);return}l.SetValue(i.GetStacks()*.05)};return E(),s.Observer(i.CreateObserver(r.EffectEvent.CHANGE_STACKS,E)),s.Observer(n.CreateObserver(t.stat.LEVEL,E)),s.Observer(n.CreateObserver(t.stat.ASCENSION,E)),()=>0}}),UA=r.Factory({Name:"YanfeiA4",OnApply:new r.Builder().Where({target:{ascension:4}}).instance.Location("Normal").Options({Name:"HIT_A4",Element:t.stat.PYRO_DMG,Talent:t.stat.CHARGED_ATTACK_DMG,Scaling:[{Stat:t.stat.ATK,Initial:.8,Scaling:o.TalentScaling.NONE,Talent:t.stat.NONE}]}).Build()}),WA=r.Factory({Name:"YanfeiSeal",MaxStacks:4,OnApply:new r.Builder().observe.Target(t.stat.NORMAL_ATTACK_LEVEL,t.stat.NORMAL_ATTACK_LEVEL_UP).mv.Mv(t.stat.ATK,.1733,"HIT_CHARGED").Map((e,a,s)=>e*s.GetStacks()*o.TalentScaling.ELEMENTAL_2[a.GetCharacter().Get(t.stat.NORMAL_ATTACK_LEVEL)-1]).Build()}),jA=[{Name:T.hits.HIT_E,Element:t.stat.PYRO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:1.696}]}],Ui=G.Factory({Name:"Yanfei",Stars:4,Element:t.stat.PYRO_DMG,StatBonus:t.stat.PYRO_DMG,Weapon:t.weapon.CATALYST,Region:t.region.LIYUE,BurstCost:80,HpBase:[784.14026,2805.64],AtkBase:[20.12304,72.001564],DefBase:[49.2135,176.085],Normals:VA,Skills:jA,Bursts:bA,Extra:[],Effects:[WA,KA,xA,UA,YA,FA,kA]}),zA=[{Name:T.hits.HIT_Q,Element:t.stat.ELECTRO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:2.6}]},{Name:T.hits.HIT_Q_DOT,Element:t.stat.ELECTRO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:3.3382}]}],qA=r.Factory({Name:"YaeC3",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_SKILL_LEVEL_UP).Values(3).Build()}),QA=r.Factory({Name:"YaeC4",ApplyOther:!0,OnApply:new r.Builder().stat.Char(t.stat.ELECTRO_DMG).Values(.2).Build()}),$A=r.Factory({Name:"YaeC5",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_BURST_LEVEL_UP).Values(3).Build()}),XA=r.Factory({Name:"YaeC6",OnApply:new r.Builder().stat.Char(t.stat.DEFIGNORED).Instance(/HIT_E_\d/i).Values(.6).Build()}),JA=[{Name:T.hits.HIT_N1,Element:t.stat.ELECTRO_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Stat:t.stat.ATK,Scaling:o.TalentScaling.ELEMENTAL_1,Initial:.3966}]},{Name:T.hits.HIT_N2,Element:t.stat.ELECTRO_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Stat:t.stat.ATK,Scaling:o.TalentScaling.ELEMENTAL_1,Initial:.3852}]},{Name:T.hits.HIT_N3,Element:t.stat.ELECTRO_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Stat:t.stat.ATK,Scaling:o.TalentScaling.ELEMENTAL_1,Initial:.5689}]},{Name:T.hits.HIT_CHARGED,Element:t.stat.ELECTRO_DMG,Talent:t.stat.CHARGED_ATTACK_DMG,Scaling:[{Stat:t.stat.ATK,Scaling:o.TalentScaling.ELEMENTAL_1,Initial:1.4289}]},{Name:T.hits.HIT_PLUNGE,Element:t.stat.ELECTRO_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Stat:t.stat.ATK,Scaling:o.TalentScaling.ELEMENTAL_1,Initial:.5683}]},{Name:T.hits.HIT_PLUNGE_LOW,Element:t.stat.ELECTRO_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Stat:t.stat.ATK,Scaling:o.TalentScaling.ELEMENTAL_1,Initial:1.1363}]},{Name:T.hits.HIT_PLUNGE_HIGH,Element:t.stat.ELECTRO_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Stat:t.stat.ATK,Scaling:o.TalentScaling.ELEMENTAL_1,Initial:1.4193}]}],ZA=r.Factory({Name:"YaeA4",OnApply:new r.Builder().observe.Target(t.stat.ELEMENTAL_MASTERY).Where({target:{ascension:4}}).stat.Char(t.stat.ELEMENTAL_SKILL_DMG).Values(.15/100).Map((e,a)=>e*a.GetCharacter().Get(t.stat.ELEMENTAL_MASTERY)).Build()}),tu=[{Name:T.hits.HIT_E_1,Element:t.stat.ELECTRO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:.6067}]},{Name:T.hits.HIT_E_2,Element:t.stat.ELECTRO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:.7584}]},{Name:T.hits.HIT_E_3,Element:t.stat.ELECTRO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:.948}]},{Name:T.hits.HIT_E_4,Element:t.stat.ELECTRO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:1.185}]}],Wi=G.Factory({Name:"Yae",Stars:5,Element:t.stat.ELECTRO_DMG,StatBonus:t.stat.CRIT_RATE,Weapon:t.weapon.CATALYST,Region:t.region.INAZUMA,BurstCost:90,HpBase:[807.46204,3315.8757],AtkBase:[26.4404,108.57064],DefBase:[44.2742,181.818],Normals:JA,Skills:tu,Bursts:zA,Extra:[],Effects:[ZA,qA,QA,$A,XA]}),eu=r.Factory({Name:"XiaoQ",OnApply:new r.Builder().infusion.Set(t.stat.ANEMO_DMG,!0).Next().observe.Target(t.stat.ELEMENTAL_BURST_LEVEL,t.stat.ELEMENTAL_BURST_LEVEL_UP).stat.Char(t.stat.NORMAL_ATTACK_DMG,t.stat.CHARGED_ATTACK_DMG,t.stat.PLUNGE_ATTACK_DMG).Values(...o.TalentScaling.ELEMENTAL_2).Rank(e=>e.GetCharacter().Get(t.stat.ELEMENTAL_BURST_LEVEL)).Map(e=>.5845*e).Build()}),au=r.Factory({Name:"XiaoC2",OnApply:new r.Builder().stat.Char(t.stat.ENERGY_RECHARGE).Values(.25).Build()}),su=r.Factory({Name:"XiaoC3",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_SKILL_LEVEL_UP).Values(3).Build()}),nu=r.Factory({Name:"XiaoC4",OnApply:new r.Builder().Where({target:{hp:{leq:.5}}}).stat.Char(t.stat.DEF_PERCENT).Values(1).Build()}),iu=r.Factory({Name:"XiaoC5",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_BURST_LEVEL_UP).Values(3).Build()}),ru=[{Name:T.hits.HIT_N1,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_2,Stat:t.stat.ATK,Initial:.2754}]},{Name:T.hits.HIT_N2,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_2,Stat:t.stat.ATK,Initial:.5694}]},{Name:T.hits.HIT_N3,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_2,Stat:t.stat.ATK,Initial:.6855}]},{Name:T.hits.HIT_N4,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_2,Stat:t.stat.ATK,Initial:.3766}]},{Name:T.hits.HIT_N5,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_2,Stat:t.stat.ATK,Initial:.7154}]},{Name:T.hits.HIT_N6,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_2,Stat:t.stat.ATK,Initial:.9583}]},{Name:T.hits.HIT_CHARGED,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.CHARGED_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_2,Stat:t.stat.ATK,Initial:1.2109}]},{Name:T.hits.HIT_PLUNGE,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.8183}]},{Name:T.hits.HIT_PLUNGE_LOW,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.6363}]},{Name:T.hits.HIT_PLUNGE_HIGH,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:2.0439}]}],lu=r.Factory({Name:"XiaoA1",MaxStacks:5,OnApply:new r.Builder().Where({target:{ascension:1}}).stat.Char(t.stat.ALL_DMG).Values(.05).Stacks().Build()}),ou=r.Factory({Name:"XiaoA4",MaxStacks:3,OnApply:new r.Builder().Where({target:{ascension:4}}).stat.Char(t.stat.ELEMENTAL_SKILL_DMG).Values(.15).Stacks().Build()}),cu=[{Name:T.hits.HIT_E,Element:t.stat.ANEMO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:2.528}]}],ji=G.Factory({Name:"Xiao",Stars:5,Element:t.stat.ANEMO_DMG,StatBonus:t.stat.CRIT_RATE,Weapon:t.weapon.POLEARM,Region:t.region.LIYUE,BurstCost:70,HpBase:[991.4528,4071.4412],AtkBase:[27.1852,111.628975],DefBase:[62.2232,255.528],Normals:ru,Skills:cu,Bursts:[],Extra:[],Effects:[eu,lu,ou,au,su,nu,iu]}),Eu=[{Name:T.hits.HIT_Q_1,Element:t.stat.PYRO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:.72}]},{Name:T.hits.HIT_Q_2,Element:t.stat.PYRO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:.88}]},{Name:T.hits.HIT_Q_3,Element:t.stat.PYRO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:1.096}]},{Name:"HIT_PYRONADO",Element:t.stat.PYRO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:1.12}]}],Tu=r.Factory({Name:"XianglingC1",ApplyOther:!0,OnApply:new r.Builder().stat.Enemy(t.stat.PYRO_RES).Values(-.15).Build()}),_u=r.Factory({Name:"XianglingC2",OnApply:new r.Builder().instance.Options({Name:"HIT_C2",Element:t.stat.PYRO_DMG,Talent:t.stat.NONE,Scaling:[{Stat:t.stat.ATK,Initial:.75,Scaling:o.TalentScaling.NONE,Talent:t.stat.NONE}]}).Build()}),Au=r.Factory({Name:"XianglingC3",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_BURST_LEVEL_UP).Values(3).Build()}),uu=r.Factory({Name:"XianglingC5",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_SKILL_LEVEL_UP).Values(3).Build()}),Su=r.Factory({Name:"XianglingC6",ApplyOther:!0,OnApply:new r.Builder().stat.Char(t.stat.PYRO_DMG).Values(.15).Build()}),hu=[{Name:T.hits.HIT_N1,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Stat:t.stat.ATK,Initial:.4205}]},{Name:T.hits.HIT_N2,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Stat:t.stat.ATK,Initial:.4214}]},{Name:T.hits.HIT_N3,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Stat:t.stat.ATK,Initial:.2606}]},{Name:T.hits.HIT_N4,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Stat:t.stat.ATK,Initial:.141}]},{Name:T.hits.HIT_N5,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Stat:t.stat.ATK,Initial:.7104}]},{Name:T.hits.HIT_CHARGED,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.CHARGED_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Stat:t.stat.ATK,Initial:1.2169}]},{Name:T.hits.HIT_PLUNGE,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.6393}]},{Name:T.hits.HIT_PLUNGE_LOW,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.2784}]},{Name:T.hits.HIT_PLUNGE_HIGH,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.5968}]}],Lu=r.Factory({Name:"XianglingA4",ApplyOther:!0,OnApply:new r.Builder().Where({owner:{ascension:4}}).stat.Char(t.stat.ATK_PERCENT).Values(.1).Build()}),fu=[{Name:T.hits.HIT_E,Element:t.stat.PYRO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:1.1128}]}],zi=G.Factory({Name:"Xiangling",Stars:4,Element:t.stat.PYRO_DMG,StatBonus:t.stat.ELEMENTAL_MASTERY,Weapon:t.weapon.POLEARM,Region:t.region.LIYUE,BurstCost:80,HpBase:[911.791,3262.3718],AtkBase:[18.87648,67.54129],DefBase:[56.0805,200.655],Normals:hu,Skills:fu,Bursts:Eu,Extra:[],Effects:[Lu,Tu,_u,Au,uu,Su]}),mu=[{Name:T.hits.HIT_Q,Element:t.stat.ANEMO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:1.472}]}],Nu=r.Factory({Name:"WandererC1",OnApply(e,a,s){if(!e.FindEffect("WandererA4"))throw new Error("Cannot find Wanderer A4");let i;const l=()=>{const E=e.FindInstance("HIT_A4");!E||i||(i=s.Mv({Stat:t.stat.ATK,Value:.25,Enabled:!0},E))};return l(),s.Observer(e.GetCharacter().CreateObserver(t.stat.LEVEL,l)),s.Observer(e.GetCharacter().CreateObserver(t.stat.ASCENSION,l)),s.Observer(a.CreateObserver(r.EffectEvent.ENABLE,l)),s.Observer(a.CreateObserver(r.EffectEvent.DISABLE,l)),()=>0}}),pu=r.Factory({Name:"WandererC2",MaxStacks:120,OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_BURST_DMG).Values(.04).Stacks().Map(e=>Math.min(2,e)).Build()}),Cu=r.Factory({Name:"WandererC3",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_BURST_LEVEL_UP).Values(3).Build()}),Mu=r.Factory({Name:"WandererC5",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_SKILL_LEVEL_UP).Values(3).Build()}),du=[{Name:T.hits.HIT_N1,Element:t.stat.ANEMO_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Stat:t.stat.ATK,Scaling:o.TalentScaling.ELEMENTAL_1,Initial:.6871}]},{Name:T.hits.HIT_N2,Element:t.stat.ANEMO_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Stat:t.stat.ATK,Scaling:o.TalentScaling.ELEMENTAL_1,Initial:.6502}]},{Name:T.hits.HIT_N3,Element:t.stat.ANEMO_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Stat:t.stat.ATK,Scaling:o.TalentScaling.ELEMENTAL_1,Initial:.4764}]},{Name:T.hits.HIT_CHARGED,Element:t.stat.ANEMO_DMG,Talent:t.stat.CHARGED_ATTACK_DMG,Scaling:[{Stat:t.stat.ATK,Scaling:o.TalentScaling.ELEMENTAL_1A,Initial:1.3208}]},{Name:T.hits.HIT_PLUNGE,Element:t.stat.ANEMO_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Stat:t.stat.ATK,Scaling:o.TalentScaling.ELEMENTAL_1,Initial:.5683}]},{Name:T.hits.HIT_PLUNGE_LOW,Element:t.stat.ANEMO_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Stat:t.stat.ATK,Scaling:o.TalentScaling.ELEMENTAL_1,Initial:1.1363}]},{Name:T.hits.HIT_PLUNGE_HIGH,Element:t.stat.ANEMO_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Stat:t.stat.ATK,Scaling:o.TalentScaling.ELEMENTAL_1,Initial:1.4193}]},{Name:T.hits.HIT_N1+"_C6",Element:t.stat.ANEMO_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Stat:t.stat.ATK,Scaling:o.TalentScaling.ELEMENTAL_1,Initial:.6871*.4}]},{Name:T.hits.HIT_N2+"_C6",Element:t.stat.ANEMO_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Stat:t.stat.ATK,Scaling:o.TalentScaling.ELEMENTAL_1,Initial:.6502*.4}]},{Name:T.hits.HIT_N3+"_C6",Element:t.stat.ANEMO_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Stat:t.stat.ATK,Scaling:o.TalentScaling.ELEMENTAL_1,Initial:.4764*.4}]}],gu=r.Factory({Name:"WandererA1",MaxAuras:1,ValidAuras:t.Swirlable,OnApply:new r.Builder().Where({target:{ascension:1},effect:{affected:[t.stat.PYRO_DMG]}}).stat.Char(t.stat.ATK_PERCENT).Values(.3).Next().Where({target:{ascension:1},effect:{affected:[t.stat.CRYO_DMG]}}).stat.Char(t.stat.CRIT_RATE).Values(.2).Build()}),Gu=r.Factory({Name:"WandererA4",OnApply:new r.Builder().Where({target:{ascension:4}}).instance.Options({Name:"HIT_A4",Element:t.stat.ANEMO_DMG,Talent:t.stat.NONE,Scaling:[{Stat:t.stat.ATK,Initial:.35,Scaling:o.TalentScaling.NONE,Talent:t.stat.NONE}]}).Build()}),Ru=[{Name:T.hits.HIT_E,Element:t.stat.ANEMO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:.952}]}],Iu=r.Factory({Name:"WandererE",OnApply:new r.Builder().observe.Target(t.stat.ELEMENTAL_SKILL_LEVEL,t.stat.ELEMENTAL_SKILL_LEVEL_UP).mv.Multiplier(.3298,/hit_n\d/i).Map((e,a)=>1+e*o.TalentScaling.ELEMENTAL_2[a.GetCharacter().Get(t.stat.ELEMENTAL_SKILL_LEVEL)-1]).Next().observe.Target(t.stat.ELEMENTAL_SKILL_LEVEL,t.stat.ELEMENTAL_SKILL_LEVEL_UP).mv.Multiplier(.2639,/hit_charged/i).Map((e,a)=>1+e*o.TalentScaling.ELEMENTAL_2[a.GetCharacter().Get(t.stat.ELEMENTAL_SKILL_LEVEL)-1]).Build()}),qi=G.Factory({Name:"Wanderer",Stars:5,Weapon:t.weapon.CATALYST,Element:t.stat.ANEMO_DMG,StatBonus:t.stat.CRIT_RATE,Region:t.region.SUMERU,BurstCost:60,HpBase:[791.2556,3249.3232],AtkBase:[25.5094,104.747734],DefBase:[47.2657,194.103],Normals:du,Skills:Ru,Bursts:mu,Extra:[],Effects:[Iu,gu,Gu,Nu,pu,Cu,Mu]}),Du=[{Name:T.hits.HIT_Q_DOT,Element:t.stat.ANEMO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:.376}]}],Ou=r.Factory({Name:"VentiQ",MaxAuras:1,ValidAuras:t.Swirlable,OnApply(e,a,s){yu(e,a,s);function n(){const i=e.FindBurst(T.hits.HIT_Q+"_ADDITIONAL");if(!i)return;const l=a.GetAuras()[0];!l||(i.Options.Element=t.AuraToDmg(l))}return n(),s.Observer(a.CreateObserver(r.EffectEvent.CHANGE_AURAS,n)),s.Observer(a.CreateObserver(r.EffectEvent.ENABLE,n)),()=>0}}),yu=new r.Builder().instance.Location("Burst").Options({Name:T.hits.HIT_Q+"_ADDITIONAL",Element:t.stat.PYRO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:.188,Talent:t.stat.ELEMENTAL_BURST_LEVEL}]}).Build(),vu=r.Factory({Name:"VentiC1",OnApply:new r.Builder().instance.Location("Normal").Options({Name:"HIT_C1",Element:t.stat.PHYSICAL_DMG,Talent:t.stat.AIMED_SHOT_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Talent:t.stat.NORMAL_ATTACK_LEVEL,Stat:t.stat.ATK,Initial:.4386*.33}]}).Next().instance.Location("Normal").Options({Name:"HIT_CHARGED_C1",Element:t.stat.ANEMO_DMG,Talent:t.stat.CHARGED_AIMED_SHOT_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Talent:t.stat.NORMAL_ATTACK_LEVEL,Stat:t.stat.ATK,Initial:1.24*.33}]}).Next().Build()}),Hu=r.Factory({Name:"VentiC2",ApplyOther:!0,Conditions:["AIRBORNE","NO_AIRBORNE"],MaxConditions:1,OnApply:new r.Builder().stat.Enemy(t.stat.ANEMO_RES,t.stat.PHYSICAL_RES).Values(-.12).Next().Where({effect:{conditions:["AIRBORNE"]}}).stat.Enemy(t.stat.ANEMO_RES,t.stat.PHYSICAL_RES).Values(-.12).Build()}),Pu=r.Factory({Name:"VentiC3",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_BURST_LEVEL_UP).Values(3).Build()}),Bu=r.Factory({Name:"VentiC4",OnApply:new r.Builder().stat.Char(t.stat.ANEMO_DMG).Values(.25).Build()}),wu=r.Factory({Name:"VentiC5",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_SKILL_LEVEL_UP).Values(3).Build()}),bu=r.Factory({Name:"VentiC6",ApplyOther:!0,OnApply(e,a,s){const n=e.GetCharacter().GetEnemy(),i=a.Owner.FindEffect("VentiQ");if(!i)throw new Error("Venti Q not found");s.Modifier(n.Subject.CreateModifier(t.stat.ANEMO_RES,-.2));const l=s.Modifier(n.Subject.CreateModifier(t.stat.ANEMO_RES,0)),E=()=>{const _=i.GetAuras();if(!_.length||_[0]===t.aura.NONE)l.SetValue(0);else{const A=t.DmgToRes(t.AuraToDmg(_[0]));l.SetValue(-.2),l.SetProp(A)}};return E(),s.Observer(i.CreateObserver(r.EffectEvent.CHANGE_AURAS,E)),()=>0}}),Ku=[{Name:T.hits.HIT_N1,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Stat:t.stat.ATK,Initial:.2038}]},{Name:T.hits.HIT_N2,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Stat:t.stat.ATK,Initial:.4438}]},{Name:T.hits.HIT_N3,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Stat:t.stat.ATK,Initial:.5237}]},{Name:T.hits.HIT_N4,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Stat:t.stat.ATK,Initial:.2606}]},{Name:T.hits.HIT_N5,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Stat:t.stat.ATK,Initial:.5065}]},{Name:T.hits.HIT_N6,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Stat:t.stat.ATK,Initial:.7095}]},{Name:T.hits.HIT_AIMED_NORMAL,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.AIMED_SHOT_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Stat:t.stat.ATK,Initial:.4386}]},{Name:T.hits.HIT_AIMED_CHARGED,Element:t.stat.ANEMO_DMG,Talent:t.stat.CHARGED_AIMED_SHOT_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Stat:t.stat.ATK,Initial:1.24}]},{Name:T.hits.HIT_PLUNGE,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.5683}]},{Name:T.hits.HIT_PLUNGE_LOW,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.1363}]},{Name:T.hits.HIT_PLUNGE_HIGH,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.4193}]}],Yu=[{Name:T.hits.HIT_E_PRESS,Element:t.stat.ANEMO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:2.76}]},{Name:T.hits.HIT_E_HOLD,Element:t.stat.ANEMO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:3.8}]}],Qi=G.Factory({Name:"Venti",Stars:5,Element:t.stat.ANEMO_DMG,StatBonus:t.stat.ENERGY_RECHARGE,Weapon:t.weapon.BOW,Region:t.region.MONDSTADT,BurstCost:60,HpBase:[819.8552,3366.7688],AtkBase:[20.482,84.10402],DefBase:[52.0521,213.759],Normals:Ku,Skills:Yu,Bursts:Du,Extra:[],Effects:[Ou,vu,Hu,Pu,Bu,wu,bu]}),Fu=[{Name:T.hits.HIT_Q+"_MELEE",Element:t.stat.HYDRO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:4.64}]},{Name:T.hits.HIT_Q+"_RANGED",Element:t.stat.HYDRO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:3.784}]},{Name:"HIT_RiptideBlast",Element:t.stat.HYDRO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:1.2}]}],ku=r.Factory({Name:"TartagliaC3",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_SKILL_LEVEL_UP).Values(3).Build()}),Vu=r.Factory({Name:"TartagliaC5",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_BURST_LEVEL_UP).Values(3).Build()}),xu=[{Name:T.hits.HIT_N1,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.4128}]},{Name:T.hits.HIT_N2,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.4627}]},{Name:T.hits.HIT_N3,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.5538}]},{Name:T.hits.HIT_N4,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.5702}]},{Name:T.hits.HIT_N5,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.6089}]},{Name:T.hits.HIT_N6,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.7276}]},{Name:T.hits.HIT_AIMED_NORMAL,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.AIMED_SHOT_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.4386}]},{Name:T.hits.HIT_AIMED_CHARGED,Element:t.stat.HYDRO_DMG,Talent:t.stat.CHARGED_AIMED_SHOT_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:1.24}]},{Name:"HIT_RiptideFlash",Element:t.stat.HYDRO_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:.124}]},{Name:"HIT_RiptideBurst",Element:t.stat.HYDRO_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:.62}]},{Name:T.hits.HIT_PLUNGE,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.6393}]},{Name:T.hits.HIT_PLUNGE_LOW,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.2784}]},{Name:T.hits.HIT_PLUNGE_HIGH,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.5968}]}],Uu=r.Factory({Name:"TartagliaA0",ApplyOther:!0,OnApply:new r.Builder().stat.Char(t.stat.NORMAL_ATTACK_LEVEL_UP).Values(1).Build()}),Wu=[{Name:T.hits.HIT_E,Element:t.stat.HYDRO_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:.72}]},{Name:T.hits.HIT_N1+"_E",Element:t.stat.HYDRO_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.3887}]},{Name:T.hits.HIT_N2+"_E",Element:t.stat.HYDRO_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.4162}]},{Name:T.hits.HIT_N3+"_E",Element:t.stat.HYDRO_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.5633}]},{Name:T.hits.HIT_N4+"_E",Element:t.stat.HYDRO_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.5994}]},{Name:T.hits.HIT_N5+"_E",Element:t.stat.HYDRO_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.553}]},{Name:T.hits.HIT_N6_1+"_E",Element:t.stat.HYDRO_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.3543}]},{Name:T.hits.HIT_N6_2+"_E",Element:t.stat.HYDRO_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.3767}]},{Name:T.hits.HIT_CHARGED_1+"_E",Element:t.stat.HYDRO_DMG,Talent:t.stat.CHARGED_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.602}]},{Name:T.hits.HIT_CHARGED_2+"_E",Element:t.stat.HYDRO_DMG,Talent:t.stat.CHARGED_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.7198}]},{Name:"HIT_RiptideSlash",Element:t.stat.HYDRO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.602}]}],$i=G.Factory({Name:"Tartaglia",Stars:5,Weapon:t.weapon.BOW,Element:t.stat.HYDRO_DMG,StatBonus:t.stat.HYDRO_DMG,Region:t.region.SNEZHNAYA,BurstCost:60,HpBase:[1020.0524,4188.8867],AtkBase:[23.4612,96.33733],DefBase:[63.4198,260.442],Normals:xu,Skills:Wu,Bursts:Fu,Extra:[],Effects:[Uu,ku,Vu]}),ju=[{Name:T.hits.HIT_Q_DOT,Element:t.stat.ANEMO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:1.48}]}],zu=r.Factory({Name:"SucroseQ",MaxAuras:1,ValidAuras:t.Swirlable,OnApply(e,a,s){qu(e,a,s);function n(){const i=e.FindBurst(T.hits.HIT_Q+"_ADDITIONAL");if(!i)return;const l=a.GetAuras()[0];!l||(i.Options.Element=t.AuraToDmg(l))}return n(),s.Observer(a.CreateObserver(r.EffectEvent.CHANGE_AURAS,n)),s.Observer(a.CreateObserver(r.EffectEvent.ENABLE,n)),()=>0}}),qu=new r.Builder().instance.Location("Burst").Options({Name:T.hits.HIT_Q+"_ADDITIONAL",Element:t.stat.PYRO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:.44,Talent:t.stat.ELEMENTAL_BURST_LEVEL}]}).Build(),Qu=r.Factory({Name:"SucroseC3",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_SKILL_LEVEL_UP).Values(3).Build()}),$u=r.Factory({Name:"SucroseC5",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_BURST_LEVEL_UP).Values(3).Build()}),Xu=r.Factory({Name:"SucroseC6",ApplyOther:!0,OnApply(e,a,s){const n=a.Owner.FindEffect("SucroseQ"),i=e.GetCharacter();if(!n)throw new Error("Cannot find Sucrose Q");const l=s.Modifier(i.CreateModifier(t.stat.PYRO_DMG,0)),E=()=>{const _=n.GetAuras();(!_.length||_[0]===t.aura.NONE)&&l.SetValue(0);const A=t.AuraToDmg(_[0]);l.SetProp(A),l.SetValue(.2)};return E(),s.Observer(n.CreateObserver(r.EffectEvent.CHANGE_AURAS,E)),()=>0}}),Ju=[{Name:T.hits.HIT_N1,Element:t.stat.ANEMO_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Stat:t.stat.ATK,Scaling:o.TalentScaling.ELEMENTAL_1,Initial:.3346}]},{Name:T.hits.HIT_N2,Element:t.stat.ANEMO_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Stat:t.stat.ATK,Scaling:o.TalentScaling.ELEMENTAL_1,Initial:.3062}]},{Name:T.hits.HIT_N3,Element:t.stat.ANEMO_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Stat:t.stat.ATK,Scaling:o.TalentScaling.ELEMENTAL_1,Initial:.3845}]},{Name:T.hits.HIT_N4,Element:t.stat.ANEMO_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Stat:t.stat.ATK,Scaling:o.TalentScaling.ELEMENTAL_1,Initial:.4792}]},{Name:T.hits.HIT_CHARGED,Element:t.stat.ANEMO_DMG,Talent:t.stat.CHARGED_ATTACK_DMG,Scaling:[{Stat:t.stat.ATK,Scaling:o.TalentScaling.ELEMENTAL_1,Initial:1.2016}]},{Name:T.hits.HIT_PLUNGE,Element:t.stat.ANEMO_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Stat:t.stat.ATK,Scaling:o.TalentScaling.ELEMENTAL_1,Initial:.5683}]},{Name:T.hits.HIT_PLUNGE_LOW,Element:t.stat.ANEMO_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Stat:t.stat.ATK,Scaling:o.TalentScaling.ELEMENTAL_1,Initial:1.1363}]},{Name:T.hits.HIT_PLUNGE_HIGH,Element:t.stat.ANEMO_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Stat:t.stat.ATK,Scaling:o.TalentScaling.ELEMENTAL_1,Initial:1.4193}]}],Zu=r.Factory({Name:"SucroseA1",ApplySelf:!1,ApplyOther:!0,OnApply:new r.Builder().Where({owner:{ascension:1}}).stat.Char(t.stat.ELEMENTAL_MASTERY).Values(50).Build()}),tS=r.Factory({Name:"SucroseA4",ApplySelf:!1,ApplyOther:!0,OnApply:new r.Builder().observe.Owner(t.stat.ELEMENTAL_MASTERY).Where({owner:{ascension:1}}).stat.Char(t.stat.ELEMENTAL_MASTERY).Values(.2).Map((e,a,s)=>e*s.Owner.GetCharacter().Get(t.stat.ELEMENTAL_MASTERY)).Build()}),eS=[{Name:T.hits.HIT_E,Element:t.stat.ANEMO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:2.112}]}],Xi=G.Factory({Name:"Sucrose",Stars:4,Element:t.stat.ANEMO_DMG,StatBonus:t.stat.ANEMO_DMG,Weapon:t.weapon.CATALYST,Region:t.region.MONDSTADT,BurstCost:80,HpBase:[775.02234,2773.016],AtkBase:[14.2464,50.97456],DefBase:[58.94175,210.8925],Normals:Ju,Skills:eS,Bursts:ju,Extra:[],Effects:[zu,Zu,tS,Qu,$u,Xu]}),aS=r.Factory({Name:"ShenheA1",ApplyOther:!0,OnApply:new r.Builder().Where({owner:{ascension:1}}).stat.Char(t.stat.CRYO_DMG).Values(.15).Build()}),sS=r.Factory({Name:"ShenheA4",ApplyOther:!0,Conditions:["PRESS","HOLD"],MaxConditions:1,OnApply:new r.Builder().Where({owner:{ascension:4},effect:{conditions:["PRESS"]}}).stat.Char(t.stat.ELEMENTAL_SKILL_DMG,t.stat.ELEMENTAL_BURST_DMG).Values(.15).Next().Where({owner:{ascension:4},effect:{conditions:["HOLD"]}}).stat.Char(t.stat.NORMAL_ATTACK_DMG,t.stat.CHARGED_ATTACK_DMG,t.stat.PLUNGE_ATTACK_DMG).Values(.15).Build()}),nS=[{Name:T.hits.HIT_Q,Element:t.stat.CRYO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:1.008}]},{Name:T.hits.HIT_Q_DOT,Element:t.stat.CRYO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:.3312}]}],iS=r.Factory({Name:"ShenheQ",ApplyOther:!0,OnApply:new r.Builder().observe.Owner(t.stat.ELEMENTAL_BURST_LEVEL,t.stat.ELEMENTAL_BURST_LEVEL_UP).stat.Enemy(t.stat.CRYO_RES,t.stat.PHYSICAL_RES).Values(-.06,-.07,-.08,-.09,-.1,-.11,-.12,-.13,-.14,-.15).Rank((e,a)=>a.Owner.GetCharacter().Get(t.stat.ELEMENTAL_BURST_LEVEL)).Build()}),rS=[{Name:T.hits.HIT_N1,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.4326}]},{Name:T.hits.HIT_N2,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.4025}]},{Name:T.hits.HIT_N3,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.5332}]},{Name:T.hits.HIT_N4,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.2632}]},{Name:T.hits.HIT_N5,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.6562}]},{Name:T.hits.HIT_CHARGED,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.CHARGED_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.1067}]},{Name:T.hits.HIT_PLUNGE,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.6393}]},{Name:T.hits.HIT_PLUNGE_LOW,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.2784}]},{Name:T.hits.HIT_PLUNGE_HIGH,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.5968}]}],lS=[{Name:T.hits.HIT_E_PRESS,Element:t.stat.CRYO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:1.392}]},{Name:T.hits.HIT_E_HOLD,Element:t.stat.CRYO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:1.888}]}],oS=r.Factory({Name:"ShenheE",ApplyOther:!0,OnApply:new r.Builder().observe.Owner(t.stat.ELEMENTAL_SKILL_LEVEL,t.stat.ELEMENTAL_SKILL_LEVEL_UP,t.stat.ATK_PERCENT,t.stat.ATK_BASE,t.stat.ATK_FLAT).stat.Char(t.stat.CRYO_DMG_FLAT).Values(...o.TalentScaling.ELEMENTAL_1).Rank((e,a)=>a.Owner.GetCharacter().Get(t.stat.ELEMENTAL_SKILL_LEVEL)).Map((e,a,s)=>.4566*e*s.Owner.GetCharacter().Get(t.stat.ATK)).Build()}),cS=r.Factory({Name:"ShenheC2",ApplyOther:!0,OnApply:new r.Builder().stat.Char(t.stat.CRYO_CRIT_DMG).Values(.15).Build()}),ES=r.Factory({Name:"ShenheC3",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_SKILL_LEVEL_UP).Values(3).Build()}),TS=r.Factory({Name:"ShenheC4",MaxStacks:50,OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_SKILL_DMG).Values(.05).Stacks().Build()}),_S=r.Factory({Name:"ShenheC5",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_BURST_LEVEL_UP).Values(3).Build()}),Ji=G.Factory({Name:"Shenhe",Stars:5,Element:t.stat.CRYO_DMG,Weapon:t.weapon.POLEARM,StatBonus:t.stat.ATK_PERCENT,Region:t.region.LIYUE,BurstCost:80,HpBase:[1011.47253,4153.653],AtkBase:[23.6474,97.10191],DefBase:[64.6164,265.356],Normals:rS,Skills:lS,Bursts:nS,Extra:[],Effects:[oS,iS,aS,sS,cS,ES,TS,_S]}),AS=[{Name:T.hits.HIT_Q,Element:t.stat.HYDRO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.HP,Initial:.1042}]}],uS=r.Factory({Name:"KokomiQ",OnApply:new r.Builder().observe.Target(t.stat.ELEMENTAL_BURST_LEVEL,t.stat.ELEMENTAL_BURST_LEVEL_UP).mv.Mv(t.stat.HP,.0484,/HIT_N\d/i).Map((e,a)=>e*o.TalentScaling.ELEMENTAL_1[a.GetCharacter().Get(t.stat.ELEMENTAL_BURST_LEVEL)-1]).Next().observe.Target(t.stat.ELEMENTAL_BURST_LEVEL,t.stat.ELEMENTAL_BURST_LEVEL_UP).mv.Mv(t.stat.HP,.0678,/charged/i).Map((e,a)=>e*o.TalentScaling.ELEMENTAL_1[a.GetCharacter().Get(t.stat.ELEMENTAL_BURST_LEVEL)-1]).Next().observe.Target(t.stat.ELEMENTAL_BURST_LEVEL,t.stat.ELEMENTAL_BURST_LEVEL_UP).mv.Mv(t.stat.HP,.071,/HIT_E$/i).Map((e,a)=>e*o.TalentScaling.ELEMENTAL_1[a.GetCharacter().Get(t.stat.ELEMENTAL_BURST_LEVEL)-1]).Build()}),SS=r.Factory({Name:"KokomiC1",OnApply:new r.Builder().instance.Options({Name:"HIT_C1",Element:t.stat.HYDRO_DMG,Talent:t.stat.NONE,Scaling:[{Stat:t.stat.HP,Initial:.3,Talent:t.stat.NONE,Scaling:o.TalentScaling.NONE}]}).Build()}),hS=r.Factory({Name:"KokomiC3",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_BURST_LEVEL_UP).Values(3).Build()}),LS=r.Factory({Name:"KokomiC5",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_SKILL_LEVEL_UP).Values(3).Build()}),fS=r.Factory({Name:"KokomiC6",OnApply:new r.Builder().stat.Char(t.stat.HYDRO_DMG).Values(.4).Build()}),mS=[{Name:T.hits.HIT_N1,Element:t.stat.HYDRO_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Stat:t.stat.ATK,Scaling:o.TalentScaling.ELEMENTAL_1,Initial:.6838}]},{Name:T.hits.HIT_N2,Element:t.stat.HYDRO_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Stat:t.stat.ATK,Scaling:o.TalentScaling.ELEMENTAL_1,Initial:.6154}]},{Name:T.hits.HIT_N3,Element:t.stat.HYDRO_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Stat:t.stat.ATK,Scaling:o.TalentScaling.ELEMENTAL_1,Initial:.9431}]},{Name:T.hits.HIT_CHARGED,Element:t.stat.HYDRO_DMG,Talent:t.stat.CHARGED_ATTACK_DMG,Scaling:[{Stat:t.stat.ATK,Scaling:o.TalentScaling.ELEMENTAL_1,Initial:1.4832}]},{Name:T.hits.HIT_PLUNGE,Element:t.stat.HYDRO_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Stat:t.stat.ATK,Scaling:o.TalentScaling.ELEMENTAL_1,Initial:.5683}]},{Name:T.hits.HIT_PLUNGE_LOW,Element:t.stat.HYDRO_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Stat:t.stat.ATK,Scaling:o.TalentScaling.ELEMENTAL_1,Initial:1.1363}]},{Name:T.hits.HIT_PLUNGE_HIGH,Element:t.stat.HYDRO_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Stat:t.stat.ATK,Scaling:o.TalentScaling.ELEMENTAL_1,Initial:1.4193}]}],NS=r.Factory({Name:"KokomiA1",OnApply:new r.Builder().Where({target:{ascension:1}}).stat.Char(t.stat.HEALING_BONUS).Values(.25).Next().Where({target:{ascension:1}}).stat.Char(t.stat.CRIT_RATE).Values(-1).Next().Build()}),pS=r.Factory({Name:"KokomiA4",OnApply(e,a,s){const n=e.GetCharacter(),i=e.FindEffect("KokomiQ");if(!i)throw new Error("Kokomi Q effect not found");const l=ee(e.GetNormals(),[/HIT_N\d/i]),E=ee(e.GetNormals(),[/charged/i]),_=s.Mv({Stat:t.stat.HP,Value:0,Enabled:!0},...l),A=s.Mv({Stat:t.stat.HP,Value:0,Enabled:!0},...E),u=()=>{(!i.Enabled()||n.GetAscension()<4)&&(_.Value=0,A.Value=0);const S=n.Get(t.stat.HEALING_BONUS);_.Value=A.Value=.15*S};return u(),s.Observer(n.CreateObserver(t.stat.HEALING_BONUS,u)),s.Observer(i.CreateObserver(r.EffectEvent.ENABLE,u)),s.Observer(i.CreateObserver(r.EffectEvent.DISABLE,u)),()=>0}}),CS=[{Name:T.hits.HIT_E,Element:t.stat.HYDRO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:1.0919}]}],Zi=G.Factory({Name:"Kokomi",Stars:5,Weapon:t.weapon.CATALYST,Element:t.stat.HYDRO_DMG,StatBonus:t.stat.HYDRO_DMG,Region:t.region.INAZUMA,BurstCost:70,HpBase:[1048.652,4306.332],AtkBase:[18.2476,74.92904],DefBase:[51.15465,210.0735],Normals:mS,Skills:CS,Bursts:AS,Extra:[],Effects:[uS,NS,pS,SS,hS,LS,fS]}),MS=[{Name:T.hits.HIT_Q_1,Element:t.stat.CRYO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:1.04}]},{Name:T.hits.HIT_Q_2,Element:t.stat.CRYO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:1.52}]},{Name:T.hits.HIT_Q_DOT,Element:t.stat.CRYO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:1.32}]}],dS=r.Factory({Name:"RosariaC1",OnApply:new r.Builder().stat.Char(t.stat.NORMAL_ATTACK_DMG).Values(.1).Build()}),gS=r.Factory({Name:"RosariaC3",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_SKILL_LEVEL_UP).Values(3).Build()}),GS=r.Factory({Name:"RosariaC5",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_BURST_LEVEL_UP).Values(3).Build()}),RS=r.Factory({Name:"RosariaC6",ApplyOther:!0,OnApply:new r.Builder().stat.Enemy(t.stat.PHYSICAL_RES).Values(-.2).Build()}),IS=[{Name:T.hits.HIT_N1,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.5246}]},{Name:T.hits.HIT_N2,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.516}]},{Name:T.hits.HIT_N3,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.3182}]},{Name:T.hits.HIT_N4,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.6966}]},{Name:T.hits.HIT_N5_1,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.4162}]},{Name:T.hits.HIT_N5_2,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.43}]},{Name:T.hits.HIT_CHARGED,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.CHARGED_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:1.3674}]},{Name:T.hits.HIT_PLUNGE,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.6393}]},{Name:T.hits.HIT_PLUNGE_LOW,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.2784}]},{Name:T.hits.HIT_PLUNGE_HIGH,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.5968}]}],DS=r.Factory({Name:"RosariaA1",OnApply:new r.Builder().Where({target:{ascension:1}}).stat.Char(t.stat.CRIT_RATE).Values(.12).Build()}),OS=r.Factory({Name:"RosariaA4",ApplySelf:!1,ApplyOther:!0,OnApply:new r.Builder().observe.Owner(t.stat.CRIT_RATE).Where({owner:{ascension:4}}).stat.Char(t.stat.CRIT_RATE).Values(.15).Map((e,a,s)=>Math.max(0,Math.min(1,e*s.Owner.GetCharacter().Get(t.stat.CRIT_RATE)))).Build()}),yS=[{Name:T.hits.HIT_E_1,Element:t.stat.CRYO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:.584}]},{Name:T.hits.HIT_E_2,Element:t.stat.CRYO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:1.36}]}],tr=G.Factory({Name:"Rosaria",Stars:4,Weapon:t.weapon.POLEARM,Element:t.stat.CRYO_DMG,Region:t.region.MONDSTADT,StatBonus:t.stat.ATK_PERCENT,BurstCost:60,HpBase:[1030.3239,3686.4802],AtkBase:[20.12304,72.001564],DefBase:[59.514,212.94],Normals:IS,Skills:yS,Bursts:MS,Extra:[],Effects:[DS,OS,dS,gS,GS,RS]}),vS=[{Name:T.hits.HIT_Q_1,Element:t.stat.GEO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:.672}]},{Name:T.hits.HIT_Q_2,Element:t.stat.GEO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:.928}]}],HS=r.Factory({Name:"NoelleQ",OnApply:new r.Builder().infusion.Set(t.stat.GEO_DMG,!0).Next().observe.Target(t.stat.DEF_FLAT,t.stat.DEF_PERCENT,t.stat.DEF_FLAT,t.stat.ELEMENTAL_BURST_LEVEL,t.stat.ELEMENTAL_BURST_LEVEL_UP).stat.Char(t.stat.ATK_FLAT).Values(.4,.43,.46,.5,.53,.56,.6,.64,.68,.72,.76,.8,.85,.9,.95).Rank(e=>e.GetCharacter().Get(t.stat.ELEMENTAL_BURST_LEVEL)).Map((e,a)=>e*a.GetCharacter().Get(t.stat.DEF)).Build()}),PS=r.Factory({Name:"NoelleC2",OnApply:new r.Builder().stat.Char(t.stat.CHARGED_ATTACK_DMG).Values(.15).Build()}),BS=r.Factory({Name:"NoelleC3",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_SKILL_LEVEL_UP).Values(3).Build()}),wS=r.Factory({Name:"NoelleC4",OnApply:new r.Builder().instance.Location("Skill").Options({Name:"HIT_C4",Element:t.stat.GEO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.NONE,Talent:t.stat.NONE,Stat:t.stat.ATK,Initial:4}]}).Build()}),bS=r.Factory({Name:"NoelleC5",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_BURST_LEVEL_UP).Values(3).Build()}),KS=r.Factory({Name:"NoelleC6",OnApply(e,a,s){const n=e.GetCharacter(),i=e.FindEffect("NoelleQ");if(!i)throw new Error("Noelle Q effect not found");const l=s.Modifier(n.CreateModifier(t.stat.ATK_FLAT,0)),E=()=>{i.Enabled()?l.SetValue(.5*n.Get(t.stat.DEF)):l.SetValue(0)};return E(),s.Observer(n.CreateObserver(t.stat.DEF_FLAT,E)),s.Observer(n.CreateObserver(t.stat.DEF_PERCENT,E)),s.Observer(n.CreateObserver(t.stat.DEF_BASE,E)),s.Observer(i.CreateObserver(r.EffectEvent.ENABLE,E)),s.Observer(i.CreateObserver(r.EffectEvent.DISABLE,E)),()=>0}}),YS=[{Name:T.hits.HIT_N1,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.7912}]},{Name:T.hits.HIT_N2,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.7336}]},{Name:T.hits.HIT_N3,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.8626}]},{Name:T.hits.HIT_N4,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.1343}]},{Name:T.hits.HIT_CHARGED_SPIN,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.5074}]},{Name:T.hits.HIT_CHARGED_FINAL,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.9047}]},{Name:T.hits.HIT_PLUNGE,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.7459}]},{Name:T.hits.HIT_PLUNGE_LOW,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.4914}]},{Name:T.hits.HIT_PLUNGE_HIGH,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.8629}]}],FS=[{Name:T.hits.HIT_E,Element:t.stat.GEO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.DEF,Initial:1.2}]}],er=G.Factory({Name:"Noelle",Stars:4,Element:t.stat.GEO_DMG,StatBonus:t.stat.DEF_PERCENT,BurstCost:60,Region:t.region.MONDSTADT,Weapon:t.weapon.CLAYMORE,HpBase:[1012.088,3621.2327],AtkBase:[16.0272,57.34638],DefBase:[66.95325,239.5575],Normals:YS,Skills:FS,Bursts:vS,Extra:[],Effects:[HS,PS,BS,wS,bS,KS]}),kS=[{Name:T.hits.HIT_Q,Element:t.stat.GEO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:.8696}]}],VS=r.Factory({Name:"NingguangC3",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_BURST_LEVEL_UP).Values(3).Build()}),xS=r.Factory({Name:"NingguangC5",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_SKILL_LEVEL_UP).Values(3).Build()}),US=[{Name:T.hits.HIT_N1,Element:t.stat.GEO_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Stat:t.stat.ATK,Scaling:o.TalentScaling.ELEMENTAL_1A,Initial:.28}]},{Name:T.hits.HIT_CHARGED,Element:t.stat.GEO_DMG,Talent:t.stat.CHARGED_ATTACK_DMG,Scaling:[{Stat:t.stat.ATK,Scaling:o.TalentScaling.ELEMENTAL_1A,Initial:1.7408}]},{Name:"HIT_Jade",Element:t.stat.GEO_DMG,Talent:t.stat.CHARGED_ATTACK_DMG,Scaling:[{Stat:t.stat.ATK,Scaling:o.TalentScaling.ELEMENTAL_1A,Initial:.496}]},{Name:T.hits.HIT_PLUNGE,Element:t.stat.GEO_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Stat:t.stat.ATK,Scaling:o.TalentScaling.ELEMENTAL_1,Initial:.5683}]},{Name:T.hits.HIT_PLUNGE_LOW,Element:t.stat.GEO_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Stat:t.stat.ATK,Scaling:o.TalentScaling.ELEMENTAL_1,Initial:1.1363}]},{Name:T.hits.HIT_PLUNGE_HIGH,Element:t.stat.GEO_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Stat:t.stat.ATK,Scaling:o.TalentScaling.ELEMENTAL_1,Initial:1.4193}]}],WS=r.Factory({Name:"NingguangA4",ApplyOther:!0,OnApply:new r.Builder().Where({owner:{ascension:4}}).stat.Char(t.stat.GEO_DMG).Values(.12).Build()}),jS=[{Name:T.hits.HIT_E,Element:t.stat.GEO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:2.304}]}],ar=G.Factory({Name:"Ningguang",Stars:4,Element:t.stat.GEO_DMG,StatBonus:t.stat.GEO_DMG,Weapon:t.weapon.CATALYST,Region:t.region.LIYUE,BurstCost:40,HpBase:[820.6119,2936.1348],AtkBase:[17.808,63.7182],DefBase:[48.069,171.99],Normals:US,Skills:jS,Bursts:kS,Extra:[],Effects:[WS,VS,xS]}),zS=[{Name:T.hits.HIT_Q,Element:t.stat.HYDRO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:4.424}]}],qS=r.Factory({Name:"MonaQ",ApplyOther:!0,OnApply:new r.Builder().observe.Owner(t.stat.ELEMENTAL_BURST_LEVEL,t.stat.ELEMENTAL_BURST_LEVEL_UP).stat.Char(t.stat.ALL_DMG).Values(.4,.42,.44,.46,.48,.5,.52,.54,.56,.58,.6).Rank((e,a)=>a.Owner.GetCharacter().Get(t.stat.ELEMENTAL_BURST_LEVEL)).Build()}),QS=r.Factory({Name:"MonaC1",ApplyOther:!0,OnApply:new r.Builder().stat.Char(t.stat.ELECTROCHARGE_DMG,t.stat.VAPORIZE_DMG).Values(.15).Next().stat.Char(t.stat.ALL_DMG).Instance("HIT_SWIRL_HYDRO").Values(.15).Build()}),$S=r.Factory({Name:"MonaC3",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_BURST_LEVEL_UP).Values(3).Build()}),XS=r.Factory({Name:"MonaC4",ApplyOther:!0,OnApply:new r.Builder().stat.Char(t.stat.CRIT_RATE).Values(.15).Build()}),JS=r.Factory({Name:"MonaC5",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_SKILL_LEVEL_UP).Values(3).Build()}),ZS=r.Factory({Name:"MonaC6",MaxStacks:3,OnApply:new r.Builder().stat.Char(t.stat.CHARGED_ATTACK_DMG).Values(.6).Stacks().Build()}),t0=[{Name:T.hits.HIT_N1,Element:t.stat.HYDRO_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Stat:t.stat.ATK,Scaling:o.TalentScaling.ELEMENTAL_1,Initial:.376}]},{Name:T.hits.HIT_N2,Element:t.stat.HYDRO_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Stat:t.stat.ATK,Scaling:o.TalentScaling.ELEMENTAL_1,Initial:.36}]},{Name:T.hits.HIT_N3,Element:t.stat.HYDRO_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Stat:t.stat.ATK,Scaling:o.TalentScaling.ELEMENTAL_1,Initial:.448}]},{Name:T.hits.HIT_N4,Element:t.stat.HYDRO_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Stat:t.stat.ATK,Scaling:o.TalentScaling.ELEMENTAL_1,Initial:.5616}]},{Name:T.hits.HIT_CHARGED,Element:t.stat.HYDRO_DMG,Talent:t.stat.CHARGED_ATTACK_DMG,Scaling:[{Stat:t.stat.ATK,Scaling:o.TalentScaling.ELEMENTAL_1A,Initial:1.4972}]},{Name:T.hits.HIT_PLUNGE,Element:t.stat.HYDRO_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Stat:t.stat.ATK,Scaling:o.TalentScaling.ELEMENTAL_1,Initial:.5683}]},{Name:T.hits.HIT_PLUNGE_LOW,Element:t.stat.HYDRO_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Stat:t.stat.ATK,Scaling:o.TalentScaling.ELEMENTAL_1,Initial:1.1363}]},{Name:T.hits.HIT_PLUNGE_HIGH,Element:t.stat.HYDRO_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Stat:t.stat.ATK,Scaling:o.TalentScaling.ELEMENTAL_1,Initial:1.4193}]}],e0=r.Factory({Name:"MonaA1",OnApply:new r.Builder().Where({target:{ascension:1}}).instance.Location("Skill").Options({Name:"HIT_A1",Element:t.stat.HYDRO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Talent:t.stat.ELEMENTAL_SKILL_LEVEL,Stat:t.stat.ATK,Initial:1.328*.5}]}).Build()}),a0=r.Factory({Name:"MonaA4",OnApply:new r.Builder().Where({target:{ascension:4}}).observe.Target(t.stat.ENERGY_RECHARGE).stat.Char(t.stat.HYDRO_DMG).Values(.2).Map((e,a)=>e*a.GetCharacter().Get(t.stat.ENERGY_RECHARGE)).Build()}),s0=[{Name:T.hits.HIT_E_DOT,Element:t.stat.HYDRO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:.32}]},{Name:T.hits.HIT_E_EXPLOSION,Element:t.stat.HYDRO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:1.328}]}],sr=G.Factory({Name:"Mona",Stars:5,Weapon:t.weapon.CATALYST,Element:t.stat.HYDRO_DMG,StatBonus:t.stat.ENERGY_RECHARGE,Region:t.region.MONDSTADT,BurstCost:60,HpBase:[810.322,3327.62],AtkBase:[22.344,91.74984],DefBase:[50.8555,208.845],Normals:t0,Skills:s0,Bursts:zS,Extra:[],Effects:[qS,e0,a0,QS,$S,XS,JS,ZS]}),n0=[{Name:T.hits.HIT_Q,Element:t.stat.PYRO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:.4264}]}],i0=r.Factory({Name:"KleeC1",OnApply:new r.Builder().instance.Location("Burst").Options({Name:"HIT_C1",Element:t.stat.PYRO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Talent:t.stat.ELEMENTAL_BURST_LEVEL,Stat:t.stat.ATK,Initial:.4264*1.2}]}).Build()}),r0=r.Factory({Name:"KleeC2",ApplyOther:!0,OnApply:new r.Builder().stat.Enemy(t.stat.DEFREDUCTION).Values(.23).Build()}),l0=r.Factory({Name:"KleeC3",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_SKILL_LEVEL_UP).Values(3).Build()}),o0=r.Factory({Name:"KleeC4",OnApply:new r.Builder().instance.Location("Burst").Options({Name:"HIT_C4",Element:t.stat.PYRO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.NONE,Talent:t.stat.NONE,Stat:t.stat.ATK,Initial:5.55}]}).Build()}),c0=r.Factory({Name:"KleeC5",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_BURST_LEVEL_UP).Values(3).Build()}),E0=r.Factory({Name:"KleeC6",ApplyOther:!0,OnApply:new r.Builder().stat.Char(t.stat.PYRO_DMG).Build()}),T0=[{Name:T.hits.HIT_N1,Element:t.stat.PYRO_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Stat:t.stat.ATK,Scaling:o.TalentScaling.ELEMENTAL_1A,Initial:.7216}]},{Name:T.hits.HIT_N2,Element:t.stat.PYRO_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Stat:t.stat.ATK,Scaling:o.TalentScaling.ELEMENTAL_1A,Initial:.624}]},{Name:T.hits.HIT_N3,Element:t.stat.PYRO_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Stat:t.stat.ATK,Scaling:o.TalentScaling.ELEMENTAL_1A,Initial:.8992}]},{Name:T.hits.HIT_CHARGED,Element:t.stat.PYRO_DMG,Talent:t.stat.CHARGED_ATTACK_DMG,Scaling:[{Stat:t.stat.ATK,Scaling:o.TalentScaling.ELEMENTAL_1A,Initial:1.5736}]},{Name:T.hits.HIT_PLUNGE,Element:t.stat.PYRO_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Stat:t.stat.ATK,Scaling:o.TalentScaling.ELEMENTAL_1,Initial:.5683}]},{Name:T.hits.HIT_PLUNGE_LOW,Element:t.stat.PYRO_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Stat:t.stat.ATK,Scaling:o.TalentScaling.ELEMENTAL_1,Initial:1.1363}]},{Name:T.hits.HIT_PLUNGE_HIGH,Element:t.stat.PYRO_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Stat:t.stat.ATK,Scaling:o.TalentScaling.ELEMENTAL_1,Initial:1.4193}]}],_0=r.Factory({Name:"KleeA1",OnApply:new r.Builder().Where({target:{ascension:1}}).stat.Char(t.stat.CHARGED_ATTACK_DMG).Values(.5).Build()}),A0=[{Name:T.hits.HIT_E,Element:t.stat.PYRO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:.952}]},{Name:T.hits.HIT_E_DOT,Element:t.stat.PYRO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:.328}]}],nr=G.Factory({Name:"Klee",Stars:5,Weapon:t.weapon.CATALYST,Element:t.stat.PYRO_DMG,StatBonus:t.stat.PYRO_DMG,Region:t.region.MONDSTADT,BurstCost:60,HpBase:[800.7888,3288.4717],AtkBase:[24.206,99.39566],DefBase:[47.864,196.56],Normals:T0,Skills:A0,Bursts:n0,Extra:[],Effects:[_0,i0,r0,l0,o0,c0,E0]}),u0=[{Name:T.hits.HIT_Q,Element:t.stat.ELECTRO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:.88}]},{Name:T.hits.HIT_Q_DOT,Element:t.stat.ELECTRO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:.24}]},{Name:T.hits.HIT_Q_EXPLOSION,Element:t.stat.ELECTRO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:1.888}]}],S0=r.Factory({Name:"KeqingC1",OnApply:new r.Builder().instance.Options({Name:"HIT_C1",Element:t.stat.ELECTRO_DMG,Talent:t.stat.NONE,Scaling:[{Stat:t.stat.ATK,Initial:.5,Scaling:o.TalentScaling.NONE,Talent:t.stat.NONE}]}).Build()}),h0=r.Factory({Name:"KeqingC3",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_BURST_LEVEL_UP).Values(3).Build()}),L0=r.Factory({Name:"KeqingC4",OnApply:new r.Builder().stat.Char(t.stat.ATK_PERCENT).Values(.25).Build()}),f0=r.Factory({Name:"KeqingC5",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_SKILL_LEVEL_UP).Values(3).Build()}),m0=r.Factory({Name:"KeqingC6",OnApply:new r.Builder().stat.Char(t.stat.ELECTRO_DMG).Values(.06).Build()}),N0=[{Name:T.hits.HIT_N1,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.4102}]},{Name:T.hits.HIT_N2,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.4102}]},{Name:T.hits.HIT_N3,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.5444}]},{Name:T.hits.HIT_N4_1,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.3148}]},{Name:T.hits.HIT_N4_2,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.344}]},{Name:T.hits.HIT_N5,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.6699}]},{Name:T.hits.HIT_CHARGED_1,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.CHARGED_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.768}]},{Name:T.hits.HIT_CHARGED_2,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.CHARGED_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.86}]},{Name:T.hits.HIT_PLUNGE,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.6393}]},{Name:T.hits.HIT_PLUNGE_LOW,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.2784}]},{Name:T.hits.HIT_PLUNGE_HIGH,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.5968}]}],p0=r.Factory({Name:"KeqingA1",OnApply:new r.Builder().Where({target:{ascension:1}}).infusion.Set(t.stat.ELECTRO_DMG,!1).Build()}),C0=r.Factory({Name:"KeqingA4",OnApply:new r.Builder().Where({target:{ascension:4}}).stat.Char(t.stat.CRIT_RATE,t.stat.ENERGY_RECHARGE).Values(.15).Build()}),M0=[{Name:T.hits.HIT_E,Element:t.stat.ELECTRO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:.504}]},{Name:T.hits.HIT_E+"_SLASH",Element:t.stat.ELECTRO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:1.68}]},{Name:T.hits.HIT_E+"_SLASH_2",Element:t.stat.ELECTRO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:.84}]}],ir=G.Factory({Name:"Keqing",Stars:5,Element:t.stat.ELECTRO_DMG,StatBonus:t.stat.CRIT_DMG,Weapon:t.weapon.SWORD,Region:t.region.LIYUE,BurstCost:40,HpBase:[1020.0524,4188.8867],AtkBase:[25.137,103.21857],DefBase:[62.2232,255.528],Normals:N0,Skills:M0,Bursts:u0,Extra:[],Effects:[p0,C0,S0,h0,L0,f0,m0]}),d0=[{Name:T.hits.HIT_Q,Element:t.stat.HYDRO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:.6646}]}],g0=r.Factory({Name:"AyatoQ",ApplyOther:!0,OnApply:new r.Builder().observe.Owner(t.stat.ELEMENTAL_BURST_LEVEL,t.stat.ELEMENTAL_BURST_LEVEL_UP).stat.Char(t.stat.NORMAL_ATTACK_DMG).Values(.11,.12,.13,.14,.15,.16,.17,.18,.19,.2).Rank((e,a)=>a.Owner.GetCharacter().Get(t.stat.ELEMENTAL_BURST_LEVEL)).Build()}),G0=r.Factory({Name:"AyatoC1",OnApply:new r.Builder().stat.Char(t.stat.ALL_DMG).Instance(/HIT_N\d_E/i).Values(.4).Build()}),R0=r.Factory({Name:"AyatoC2",OnApply(e,a,s){const n=e.FindEffect("AyatoE");if(!n)throw new Error("Cannot find Ayato Skill");const i=s.Modifier(e.GetCharacter().CreateModifier(t.stat.HP_PERCENT,0)),l=function(){n.GetStacks()>=3?i.SetValue(.5):i.SetValue(0)};return l(),s.Observer(n.CreateObserver(r.EffectEvent.CHANGE_STACKS,l)),()=>0}}),I0=r.Factory({Name:"AyatoC3",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_SKILL_LEVEL_UP).Values(3).Build()}),D0=r.Factory({Name:"AyatoC5",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_BURST_LEVEL_UP).Values(3).Build()}),O0=r.Factory({Name:"AyatoC6",OnApply:new r.Builder().instance.Location("Skill").Options({Name:"HIT_C6",Element:t.stat.HYDRO_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.NONE,Talent:t.stat.NONE,Stat:t.stat.ATK,Initial:4.5}]}).Build()}),y0=[{Name:T.hits.HIT_N1,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.4496}]},{Name:T.hits.HIT_N2,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.4716}]},{Name:T.hits.HIT_N3,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.5861}]},{Name:T.hits.HIT_N4,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.2945}]},{Name:T.hits.HIT_N5,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.756}]},{Name:T.hits.HIT_CHARGED,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.CHARGED_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.2953}]},{Name:T.hits.HIT_PLUNGE,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.6393}]},{Name:T.hits.HIT_PLUNGE_LOW,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.2784}]},{Name:T.hits.HIT_PLUNGE_HIGH,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.5968}]}],v0=[{Name:T.hits.HIT_N1+"_E",Element:t.stat.HYDRO_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.5289}]},{Name:T.hits.HIT_N2+"_E",Element:t.stat.HYDRO_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.5891}]},{Name:T.hits.HIT_N3+"_E",Element:t.stat.HYDRO_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.6493}]},{Name:T.hits.HIT_E,Element:t.stat.HYDRO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.0148}]}],H0=r.Factory({Name:"AyatoE",MaxStacks:5,OnApply:new r.Builder().observe.Target(t.stat.ELEMENTAL_SKILL_LEVEL,t.stat.ELEMENTAL_SKILL_LEVEL_UP).mv.Mv(t.stat.HP,.56/100,/HIT_N\d_E/i).Map((e,a,s)=>e*s.GetStacks()*o.TalentScaling.PHYSICAL_1[a.GetCharacter().Get(t.stat.ELEMENTAL_SKILL_LEVEL)-1]).Build()}),rr=G.Factory({Name:"Ayato",Stars:5,Weapon:t.weapon.SWORD,Element:t.stat.HYDRO_DMG,StatBonus:t.stat.CRIT_DMG,Region:t.region.INAZUMA,BurstCost:80,HpBase:[1067.7184,4384.629],AtkBase:[23.275,95.57275],DefBase:[59.83,245.7],Normals:y0,Skills:v0,Bursts:d0,Extra:[],Effects:[H0,g0,G0,R0,I0,D0,O0]}),P0=[{Name:T.hits.HIT_Q_DOT,Element:t.stat.CRYO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:1.123}]},{Name:T.hits.HIT_Q_EXPLOSION,Element:t.stat.CRYO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:1.6845}]}],B0=r.Factory({Name:"AyakaC2",OnApply:new r.Builder().instance.Location("Burst").Options({Name:"HIT_C2",Element:t.stat.CRYO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Talent:t.stat.ELEMENTAL_BURST_LEVEL,Stat:t.stat.ATK,Initial:1.123}]}).Build()}),w0=r.Factory({Name:"AyakaC3",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_BURST_LEVEL_UP).Values(3).Build()}),b0=r.Factory({Name:"AyakaC4",ApplyOther:!0,OnApply:new r.Builder().stat.Enemy(t.stat.DEFREDUCTION).Values(.3).Build()}),K0=r.Factory({Name:"AyakaC5",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_SKILL_LEVEL_UP).Values(3).Build()}),Y0=r.Factory({Name:"AyakaC6",OnApply:new r.Builder().stat.Char(t.stat.CHARGED_ATTACK_DMG).Values(2.98).Build()}),F0=[{Name:T.hits.HIT_N1,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.4573}]},{Name:T.hits.HIT_N2,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.4868}]},{Name:T.hits.HIT_N3,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.6262}]},{Name:T.hits.HIT_N4,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.2265}]},{Name:T.hits.HIT_N5,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.7818}]},{Name:T.hits.HIT_CHARGED,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.CHARGED_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.5513}]},{Name:T.hits.HIT_PLUNGE,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.6393}]},{Name:T.hits.HIT_PLUNGE_LOW,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.2784}]},{Name:T.hits.HIT_PLUNGE_HIGH,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.5968}]}],k0=r.Factory({Name:"AyakaSprint",OnApply:new r.Builder().infusion.Set(t.stat.CRYO_DMG,!1).Build()}),V0=r.Factory({Name:"AyakaA1",OnApply:new r.Builder().Where({target:{ascension:1}}).stat.Char(t.stat.NORMAL_ATTACK_DMG,t.stat.CHARGED_ATTACK_DMG).Values(.3).Build()}),x0=r.Factory({Name:"AyakaA4",OnApply:new r.Builder().Where({target:{ascension:4}}).stat.Char(t.stat.CRYO_DMG).Values(.18).Build()}),U0=[{Name:T.hits.HIT_E,Element:t.stat.CRYO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:2.392}]}],lr=G.Factory({Name:"Ayaka",Stars:5,Element:t.stat.CRYO_DMG,StatBonus:t.stat.CRIT_DMG,Weapon:t.weapon.SWORD,Region:t.region.INAZUMA,BurstCost:80,HpBase:[1000.986,4110.59],AtkBase:[26.6266,109.33523],DefBase:[61.0266,250.614],Normals:F0,Skills:U0,Bursts:P0,Extra:[],Effects:[k0,V0,x0,B0,w0,b0,K0,Y0]}),W0=[{Name:T.hits.HIT_Q,Element:t.stat.ANEMO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:4.248}]},{Name:T.hits.HIT_Q_DOT,Element:t.stat.ANEMO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:.784}]}],j0=[{Name:T.hits.HIT_N1,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Stat:t.stat.ATK,Initial:.4833}]},{Name:T.hits.HIT_N2,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Stat:t.stat.ATK,Initial:.4558}]},{Name:T.hits.HIT_N3,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Stat:t.stat.ATK,Initial:.6029}]},{Name:T.hits.HIT_N4,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Stat:t.stat.ATK,Initial:.6588}]},{Name:T.hits.HIT_N5,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Stat:t.stat.ATK,Initial:.7921}]},{Name:T.hits.HIT_CHARGED,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.CHARGED_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Stat:t.stat.ATK,Initial:1.6202}]},{Name:T.hits.HIT_PLUNGE,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.6393}]},{Name:T.hits.HIT_PLUNGE_LOW,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.2784}]},{Name:T.hits.HIT_PLUNGE_HIGH,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.5968}]}],z0=r.Factory({Name:"JeanC1",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_SKILL_DMG).Values(.4).Build()}),q0=r.Factory({Name:"JeanC3",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_BURST_LEVEL_UP).Values(3).Build()}),Q0=r.Factory({Name:"JeanC4",ApplyOther:!0,OnApply:new r.Builder().stat.Enemy(t.stat.ANEMO_RES).Values(-.4).Build()}),$0=r.Factory({Name:"JeanC5",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_SKILL_LEVEL_UP).Values(3).Build()}),X0=[{Name:T.hits.HIT_E,Element:t.stat.ANEMO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:2.92}]}],or=G.Factory({Name:"Jean",Stars:5,Element:t.stat.ANEMO_DMG,StatBonus:t.stat.HEALING_BONUS,Weapon:t.weapon.SWORD,Region:t.region.MONDSTADT,BurstCost:80,HpBase:[1143.984,4697.817],AtkBase:[18.62,76.4582],DefBase:[59.83,245.7],Normals:j0,Skills:X0,Bursts:W0,Extra:[],Effects:[z0,q0,Q0,$0]}),J0=[{Name:T.hits.HIT_Q,Element:t.stat.GEO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.DEF,Initial:.9822}]},{Name:T.hits.HIT_Q_DOT,Element:t.stat.GEO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.DEF,Initial:.613}]}];function ta(e){const a=e.GetParty();if(!a)return e.GetCharacter().Options.Element===t.stat.GEO_DMG?1:0;let s=0;for(const n of a.GetMembers())n.GetCharacter().Options.Element===t.stat.GEO_DMG&&s++;return s}var Z0=r.Factory({Name:"GorouC3",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_SKILL_LEVEL_UP).Values(3).Build()}),th=r.Factory({Name:"GorouC5",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_BURST_LEVEL_UP).Values(3).Build()}),eh=r.Factory({Name:"GorouC6",ApplyOther:!0,OnApply:new r.Builder().observe.Party(!0).stat.Char(t.stat.GEO_CRIT_DMG).Values(.1,.2,.4).Rank(e=>ta(e)).Build()}),ah=[{Name:T.hits.HIT_N1,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.3775}]},{Name:T.hits.HIT_N2,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.3715}]},{Name:T.hits.HIT_N3,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.4945}]},{Name:T.hits.HIT_N4,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.59}]},{Name:T.hits.HIT_AIMED_NORMAL,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.AIMED_SHOT_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.4386}]},{Name:T.hits.HIT_AIMED_CHARGED,Element:t.stat.GEO_DMG,Talent:t.stat.CHARGED_AIMED_SHOT_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:1.24}]},{Name:T.hits.HIT_PLUNGE,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.5683}]},{Name:T.hits.HIT_PLUNGE_LOW,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.1363}]},{Name:T.hits.HIT_PLUNGE_HIGH,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.4193}]}],sh=r.Factory({Name:"GorouA1",ApplyOther:!0,OnApply:new r.Builder().Where({owner:{ascension:1}}).stat.Char(t.stat.DEF_PERCENT).Values(.25).Build()}),nh=r.Factory({Name:"GorouA4",OnApply:new r.Builder().Where({target:{ascension:4}}).mv.Mv(t.stat.DEF,1.56,"HIT_E").Next().Where({target:{ascension:4}}).mv.Mv(t.stat.DEF,.156,"HIT_Q","HIT_Q_DOT").Next().Build()}),ih=[{Name:T.hits.HIT_E,Element:t.stat.GEO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:1.072}]}],rh=r.Factory({Name:"GorouE",ApplyOther:!0,OnApply:new r.Builder().observe.Owner(t.stat.ELEMENTAL_SKILL_LEVEL,t.stat.ELEMENTAL_SKILL_LEVEL_UP).observe.Party(!0).stat.Char(t.stat.DEF_FLAT).Values(...o.TalentScaling.ELEMENTAL_1).Rank((e,a)=>a.Owner.GetCharacter().Get(t.stat.ELEMENTAL_SKILL_LEVEL)).Map((e,a)=>206.16*e*(ta(a)>=1?1:0)).Next().observe.Party(!0).stat.Char(t.stat.GEO_DMG).Values(.15).Map((e,a)=>e*(ta(a)>=3?1:0)).Build()}),cr=G.Factory({Name:"Gorou",Stars:4,Weapon:t.weapon.BOW,Element:t.stat.GEO_DMG,StatBonus:t.stat.GEO_DMG,BurstCost:80,Region:t.region.INAZUMA,HpBase:[802.3761,2870.8872],AtkBase:[15.31488,54.797653],DefBase:[54.36375,194.5125],Normals:ah,Skills:ih,Bursts:J0,Extra:[],Effects:[rh,sh,nh,Z0,th,eh]}),lh=[{Name:T.hits.HIT_Q,Element:t.stat.CRYO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:.7027}]}],oh=r.Factory({Name:"GanyuC1",ApplyOther:!0,OnApply:new r.Builder().stat.Enemy(t.stat.CRYO_RES).Values(-.15).Build()}),ch=r.Factory({Name:"GanyuC3",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_SKILL_LEVEL_UP).Values(3).Build()}),Eh=r.Factory({Name:"GanyuC4",ApplyOther:!0,MaxStacks:5,OnApply:new r.Builder().stat.Char(t.stat.ALL_DMG).Values(.05).Stacks().Build()}),Th=r.Factory({Name:"GanyuC5",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_BURST_LEVEL_UP).Values(3).Build()}),_h=[{Name:T.hits.HIT_N1,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Stat:t.stat.ATK,Initial:.3173}]},{Name:T.hits.HIT_N2,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Stat:t.stat.ATK,Initial:.356}]},{Name:T.hits.HIT_N3,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Stat:t.stat.ATK,Initial:.4549}]},{Name:T.hits.HIT_N4,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Stat:t.stat.ATK,Initial:.4549}]},{Name:T.hits.HIT_N5,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Stat:t.stat.ATK,Initial:.4825}]},{Name:T.hits.HIT_N6,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Stat:t.stat.ATK,Initial:.5762}]},{Name:T.hits.HIT_AIMED_NORMAL,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.AIMED_SHOT_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Stat:t.stat.ATK,Initial:.4386}]},{Name:T.hits.HIT_AIMED_CHARGED,Element:t.stat.CRYO_DMG,Talent:t.stat.CHARGED_AIMED_SHOT_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:1.24}]},{Name:"HIT_Frostflake",Element:t.stat.CRYO_DMG,Talent:t.stat.CHARGED_AIMED_SHOT_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:1.28}]},{Name:"HIT_FrostflakeBloom",Element:t.stat.CRYO_DMG,Talent:t.stat.CHARGED_AIMED_SHOT_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:2.176}]},{Name:T.hits.HIT_PLUNGE,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.5683}]},{Name:T.hits.HIT_PLUNGE_LOW,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.1363}]},{Name:T.hits.HIT_PLUNGE_HIGH,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.4193}]}],Ah=r.Factory({Name:"GanyuA1",OnApply:new r.Builder().Where({target:{ascension:1}}).stat.Char(t.stat.CRIT_RATE).Instance(/Frostflake/i).Values(.2).Build()}),uh=r.Factory({Name:"GanyuA4",ApplyOther:!0,OnApply:new r.Builder().Where({owner:{ascension:4}}).stat.Char(t.stat.CRYO_DMG).Values(.2).Build()}),Sh=[{Name:T.hits.HIT_E,Element:t.stat.CRYO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:1.32}]}],Er=G.Factory({Name:"Ganyu",Stars:5,Weapon:t.weapon.BOW,Region:t.region.LIYUE,Element:t.stat.CRYO_DMG,StatBonus:t.stat.CRIT_DMG,BurstCost:60,HpBase:[762.656,3131.878],AtkBase:[26.068,107.04148],DefBase:[49.0606,201.474],Normals:_h,Skills:Sh,Bursts:lh,Extra:[],Effects:[Ah,uh,oh,ch,Eh,Th]}),hh=[{Name:T.hits.HIT_Q,Element:t.stat.CRYO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:2.456}]},{Name:"HIT_LightfallSword",Element:t.stat.PHYSICAL_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Stat:t.stat.ATK,Initial:3.6705}]}],Lh=r.Factory({Name:"EulaQ",MaxStacks:30,OnApply:new r.Builder().observe.Target(t.stat.ELEMENTAL_BURST_LEVEL,t.stat.ELEMENTAL_BURST_LEVEL_UP).mv.Mv(t.stat.ATK,.7499,"HIT_LightfallSword").Map((e,a,s)=>{const n=Math.max(1,Math.min(15,a.GetCharacter().Get(t.stat.ELEMENTAL_BURST_LEVEL)));return s.GetStacks()*e*o.TalentScaling.PHYSICAL_1A[n-1]}).Build()}),fh=r.Factory({Name:"EulaC1",OnApply:new r.Builder().stat.Char(t.stat.PHYSICAL_DMG).Values(.3).Build()}),mh=r.Factory({Name:"EulaC3",ApplySelf:!0,OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_BURST_LEVEL_UP).Values(3).Build()}),Nh=r.Factory({Name:"EulaC4",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_BURST_DMG).Values(.25).Build()}),ph=r.Factory({Name:"EulaC5",ApplySelf:!0,OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_SKILL_LEVEL_UP).Values(3).Build()}),Ch=[{Name:T.hits.HIT_N1,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Stat:t.stat.ATK,Initial:.8973}]},{Name:T.hits.HIT_N2,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Stat:t.stat.ATK,Initial:.9355}]},{Name:T.hits.HIT_N3,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Stat:t.stat.ATK,Initial:.568}]},{Name:T.hits.HIT_N4,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Stat:t.stat.ATK,Initial:1.1264}]},{Name:T.hits.HIT_N5,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Stat:t.stat.ATK,Initial:.7183}]},{Name:T.hits.HIT_CHARGED_SPIN,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.CHARGED_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Stat:t.stat.ATK,Initial:.688}]},{Name:T.hits.HIT_CHARGED_FINAL,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.CHARGED_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Stat:t.stat.ATK,Initial:1.244}]},{Name:T.hits.HIT_PLUNGE,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Stat:t.stat.ATK,Initial:.7459}]},{Name:T.hits.HIT_PLUNGE_LOW,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Stat:t.stat.ATK,Initial:1.4914}]},{Name:T.hits.HIT_PLUNGE_HIGH,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Stat:t.stat.ATK,Initial:1.8629}]}],Mh=r.Factory({Name:"EulaA1",OnApply:new r.Builder().Where({target:{ascension:1}}).instance.Location("Burst").Options({Name:"HIT_A1",Talent:t.stat.ELEMENTAL_BURST_DMG,Element:t.stat.PHYSICAL_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Talent:t.stat.ELEMENTAL_BURST_LEVEL,Stat:t.stat.ATK,Initial:3.6705*.5}]}).Build()}),dh=[{Name:T.hits.HIT_E_PRESS,Element:t.stat.CRYO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:1.464}]},{Name:T.hits.HIT_E_HOLD,Element:t.stat.CRYO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:2.456}]},{Name:"HIT_Icewhirl",Element:t.stat.CRYO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:.96}]}],gh=r.Factory({Name:"EulaE_1",MaxStacks:2,OnApply:new r.Builder().stat.Char(t.stat.DEF_PERCENT).Values(.3).Stacks().Build()}),Gh=r.Factory({Name:"EulaE_2",ApplyOther:!0,OnApply:new r.Builder().observe.Owner(t.stat.ELEMENTAL_SKILL_LEVEL,t.stat.ELEMENTAL_SKILL_LEVEL_UP).stat.Enemy(t.stat.CRYO_RES,t.stat.PHYSICAL_RES).Values(-.16,-.17,-.18,-.19,-.2,-.21,-.22,-.23,-.24,-.25).Rank((e,a)=>a.Owner.GetCharacter().Get(t.stat.ELEMENTAL_SKILL_LEVEL)).Build()}),Tr=G.Factory({Name:"Eula",Stars:5,Weapon:t.weapon.CLAYMORE,Element:t.stat.CRYO_DMG,StatBonus:t.stat.CRIT_DMG,BurstCost:80,Region:t.region.MONDSTADT,HpBase:[1029.5856,4228.035],AtkBase:[26.6266,109.33523],DefBase:[58.45391,240.0489],Normals:Ch,Skills:dh,Bursts:hh,Extra:[],Effects:[gh,Gh,Lh,Mh,fh,mh,Nh,ph]}),Rh=[{Name:T.hits.HIT_Q,Element:t.stat.PYRO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:2.04}]},{Name:T.hits.HIT_Q_DOT,Element:t.stat.PYRO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:.6}]},{Name:T.hits.HIT_Q_EXPLOSION,Element:t.stat.PYRO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:2.04}]}],Ih=r.Factory({Name:"DilucQ",OnApply:new r.Builder().infusion.Set(t.stat.PYRO_DMG,!1).Build()}),Dh=r.Factory({Name:"DilucC1",OnApply:new r.Builder().stat.Char(t.stat.ALL_DMG).Values(.15).Build()}),Oh=r.Factory({Name:"DilucC2",MaxStacks:3,OnApply:new r.Builder().stat.Char(t.stat.ATK_PERCENT).Values(.1).Stacks().Build()}),yh=r.Factory({Name:"DilucC3",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_SKILL_LEVEL_UP).Values(3).Build()}),vh=r.Factory({Name:"DilucC4",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_SKILL_DMG).Values(.4).Build()}),Hh=r.Factory({Name:"DilucC5",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_BURST_LEVEL_UP).Values(3).Build()}),Ph=r.Factory({Name:"DilucC6",OnApply:new r.Builder().stat.Char(t.stat.NORMAL_ATTACK_DMG).Values(.3).Build()}),Bh=[{Name:T.hits.HIT_N1,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Stat:t.stat.ATK,Initial:.897}]},{Name:T.hits.HIT_N2,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Stat:t.stat.ATK,Initial:.8763}]},{Name:T.hits.HIT_N3,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Stat:t.stat.ATK,Initial:.9881}]},{Name:T.hits.HIT_N4,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Stat:t.stat.ATK,Initial:1.3399}]},{Name:T.hits.HIT_CHARGED_SPIN,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.CHARGED_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Stat:t.stat.ATK,Initial:.688}]},{Name:T.hits.HIT_CHARGED_FINAL,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.CHARGED_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Stat:t.stat.ATK,Initial:1.247}]},{Name:T.hits.HIT_PLUNGE,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.8951}]},{Name:T.hits.HIT_PLUNGE_LOW,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.7897}]},{Name:T.hits.HIT_PLUNGE_HIGH,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:2.2355}]}],wh=r.Factory({Name:"DilucA4",OnApply:new r.Builder().Where({target:{ascension:4}}).stat.Char(t.stat.PYRO_DMG).Values(.2).Build()}),bh=[{Name:T.hits.HIT_E_1,Element:t.stat.PYRO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:.944}]},{Name:T.hits.HIT_E_2,Element:t.stat.PYRO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:.976}]},{Name:T.hits.HIT_E_3,Element:t.stat.PYRO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:1.288}]}],_r=G.Factory({Name:"Diluc",Stars:5,Weapon:t.weapon.CLAYMORE,Element:t.stat.PYRO_DMG,StatBonus:t.stat.CRIT_RATE,BurstCost:40,Region:t.region.MONDSTADT,HpBase:[1010.5192,4149.7383],AtkBase:[26.068,107.04148],DefBase:[61.0266,250.614],Normals:Bh,Skills:bh,Bursts:Rh,Extra:[],Effects:[Ih,wh,Dh,Oh,yh,vh,Hh,Ph]}),Kh=[{Name:T.hits.HIT_N1+"_Q",Element:t.stat.ELECTRO_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.7828}]},{Name:T.hits.HIT_N2+"_Q",Element:t.stat.ELECTRO_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.8247}]},{Name:T.hits.HIT_N3+"_Q",Element:t.stat.ELECTRO_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.0463}]},{Name:T.hits.HIT_N4+"_Q",Element:t.stat.ELECTRO_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.5169}]},{Name:T.hits.HIT_N5+"_Q",Element:t.stat.ELECTRO_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.3084}]},{Name:T.hits.HIT_CHARGED+"_Q",Element:t.stat.ELECTRO_DMG,Talent:t.stat.CHARGED_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.0105}]},{Name:T.hits.HIT_PLUNGE+"_Q",Element:t.stat.ELECTRO_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.6393}]},{Name:T.hits.HIT_PLUNGE_LOW+"_Q",Element:t.stat.ELECTRO_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.2784}]},{Name:T.hits.HIT_PLUNGE_HIGH+"_Q",Element:t.stat.ELECTRO_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.5968}]}],Yh=r.Factory({Name:"CynoQ",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_MASTERY).Values(100).Build()}),Fh=r.Factory({Name:"CynoC2",MaxStacks:5,OnApply:new r.Builder().stat.Char(t.stat.ELECTRO_DMG).Values(.1).Stacks().Build()}),kh=r.Factory({Name:"CynoC3",ApplySelf:!0,OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_BURST_LEVEL_UP).Values(3).Build()}),Vh=r.Factory({Name:"CynoC5",ApplySelf:!0,OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_SKILL_LEVEL_UP).Values(3).Build()}),xh=[{Name:T.hits.HIT_N1,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.4926}]},{Name:T.hits.HIT_N2,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.4792}]},{Name:T.hits.HIT_N3,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.2931}]},{Name:T.hits.HIT_N4,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.7589}]},{Name:T.hits.HIT_CHARGED,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.CHARGED_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.2238}]},{Name:T.hits.HIT_PLUNGE,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.6393}]},{Name:T.hits.HIT_PLUNGE_LOW,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.2784}]},{Name:T.hits.HIT_PLUNGE_HIGH,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.5968}]}],Uh=r.Factory({Name:"CynoA1",OnApply:new r.Builder().Where({target:{ascension:1}}).instance.Location("Skill").Options({Name:"HIT_A1",Element:t.stat.ELECTRO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Stat:t.stat.ATK,Initial:.35,Scaling:o.TalentScaling.NONE,Talent:t.stat.NONE}]}).Next().Where({target:{ascension:1}}).stat.Char(t.stat.ALL_DMG).Instance("HIT_E","HIT_E_2").Values(.35).Build()}),Wh=new r.Builder().Where({target:{ascension:4}}).observe.Target(t.stat.ELEMENTAL_MASTERY).stat.Char(t.stat.DMG_FLAT).Instance(/N\d_Q$/i).Values(1.5).Map((e,a)=>e*a.GetCharacter().Get(t.stat.ELEMENTAL_MASTERY)).Build(),jh=r.Factory({Name:"CynoA4",OnApply(e,a,s){Wh(e,a,s);const n=e.GetCharacter(),i=e.FindEffect("CynoA1");let l;if(!i)throw new Error("Cannot find Cyno A1");function E(){if(!l){const _=e.FindInstance("HIT_A1");if(!_)return;l=s.Modifier(_.Subject.CreateModifier(t.stat.DMG_FLAT,0))}!l||(n.GetAscension()>=4?l.SetValue(2.5*n.Get(t.stat.ELEMENTAL_MASTERY)):l.SetValue(0))}E();for(const _ of r.EffectEvent.Values())s.Observer(i.CreateObserver(_,E));return s.Observer(n.CreateObserver(t.stat.ELEMENTAL_MASTERY,E)),s.Observer(n.CreateObserver(t.stat.LEVEL,E)),s.Observer(n.CreateObserver(t.stat.ASCENSION,E)),()=>0}}),zh=[{Name:T.hits.HIT_E,Element:t.stat.ELECTRO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:1.304}]},{Name:T.hits.HIT_E_2,Element:t.stat.ELECTRO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:1.568}]}],Ar=G.Factory({Name:"Cyno",Stars:5,Weapon:t.weapon.POLEARM,Element:t.stat.ELECTRO_DMG,StatBonus:t.stat.CRIT_DMG,BurstCost:80,Region:t.region.SUMERU,HpBase:[972.3864,3993.1443],AtkBase:[24.7646,101.68941],DefBase:[66.88994,274.6926],Normals:xh,Skills:zh,Bursts:Kh,Extra:[],Effects:[Yh,Uh,jh,Fh,kh,Vh]}),qh=[{Name:T.hits.HIT_Q,Element:t.stat.DENDRO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:2.0182}]},{Name:T.hits.HIT_Q_DOT,Element:t.stat.DENDRO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:.4325}]}],Qh=r.Factory({Name:"ColleiC1",OnApply:new r.Builder().stat.Char(t.stat.ENERGY_RECHARGE).Values(.2).Build()}),$h=r.Factory({Name:"ColleiC3",ApplySelf:!0,OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_SKILL_LEVEL_UP).Values(3).Build()}),Xh=r.Factory({Name:"ColleiC4",ApplyOther:!0,ApplySelf:!1,OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_MASTERY).Values(60).Build()}),Jh=r.Factory({Name:"ColleiC5",ApplySelf:!0,OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_BURST_LEVEL_UP).Values(3).Build()}),Zh=r.Factory({Name:"ColleiC6",OnApply:new r.Builder().instance.Location("Skill").Options({Name:"HIT_C6",Element:t.stat.DENDRO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Stat:t.stat.ATK,Scaling:o.TalentScaling.NONE,Talent:t.stat.NONE,Initial:2}]}).Build()}),tL=[{Name:T.hits.HIT_N1,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.436}]},{Name:T.hits.HIT_N2,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.4266}]},{Name:T.hits.HIT_N3,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.5409}]},{Name:T.hits.HIT_N4,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.6803}]},{Name:T.hits.HIT_AIMED_NORMAL,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.AIMED_SHOT_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.4386}]},{Name:T.hits.HIT_AIMED_CHARGED,Element:t.stat.DENDRO_DMG,Talent:t.stat.CHARGED_AIMED_SHOT_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:1.24}]},{Name:T.hits.HIT_PLUNGE,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.5683}]},{Name:T.hits.HIT_PLUNGE_LOW,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.1363}]},{Name:T.hits.HIT_PLUNGE_HIGH,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.4193}]}],eL=r.Factory({Name:"ColleiA1",OnApply:new r.Builder().Where({target:{ascension:1}}).instance.Location("Skill").Options({Name:"HIT_A1",Element:t.stat.DENDRO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Stat:t.stat.ATK,Scaling:o.TalentScaling.NONE,Talent:t.stat.NONE,Initial:.4}]}).Build()}),aL=[{Name:T.hits.HIT_E,Element:t.stat.DENDRO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:1.512}]}],ur=G.Factory({Name:"Collei",Stars:4,Weapon:t.weapon.BOW,Element:t.stat.DENDRO_DMG,StatBonus:t.stat.ATK_PERCENT,BurstCost:60,Region:t.region.SUMERU,HpBase:[820.6119,2936.1348],AtkBase:[16.73952,59.895107],DefBase:[50.358,180.18],Normals:tL,Skills:aL,Bursts:qh,Extra:[],Effects:[eL,Qh,$h,Xh,Jh,Zh]}),sL=[{Name:T.hits.HIT_Q,Element:t.stat.CRYO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:1.424}]}],nL=r.Factory({Name:"ChongyunC1",OnApply:new r.Builder().instance.Basic({Name:"HIT_C1",Element:t.stat.CRYO_DMG,Stat:t.stat.ATK,Values:[.5]}).Build()}),iL=r.Factory({Name:"ChongyunC3",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_BURST_LEVEL_UP).Values(3).Build()}),rL=r.Factory({Name:"ChongyunC5",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_SKILL_LEVEL_UP).Values(3).Build()}),lL=r.Factory({Name:"ChongyunC6",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_BURST_DMG).Values(.15).Build()}),oL=[{Name:T.hits.HIT_N1,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.7}]},{Name:T.hits.HIT_N2,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.6312}]},{Name:T.hits.HIT_N3,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.8032}]},{Name:T.hits.HIT_N4,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.0122}]},{Name:T.hits.HIT_CHARGED_SPIN,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.CHARGED_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.5629}]},{Name:T.hits.HIT_CHARGED_FINAL,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.CHARGED_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.0178}]},{Name:T.hits.HIT_PLUNGE,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.7459}]},{Name:T.hits.HIT_PLUNGE_LOW,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.4914}]},{Name:T.hits.HIT_PLUNGE_HIGH,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.8629}]}],cL=r.Factory({Name:"ChongyunA4",ApplyOther:!0,OnApply:new r.Builder().Where({target:{ascension:4}}).stat.Enemy(t.stat.CRYO_RES).Values(-.1).Build()}),EL=[{Name:T.hits.HIT_E,Element:t.stat.CRYO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:1.7204}]}],TL=r.Factory({Name:"ChongyunE",ApplyOther:!0,OnApply:new r.Builder().infusion.Set(t.stat.CRYO_DMG,!1).Build()}),Sr=G.Factory({Name:"Chongyun",Stars:4,Element:t.stat.CRYO_DMG,Weapon:t.weapon.CLAYMORE,StatBonus:t.stat.ATK_PERCENT,BurstCost:40,Region:t.region.LIYUE,HpBase:[920.90894,3294.9956],AtkBase:[18.6984,66.90411],DefBase:[54.36375,194.5125],Normals:oL,Skills:EL,Bursts:sL,Extra:[],Effects:[TL,cL,nL,iL,rL,lL]}),_L=r.Factory({Name:"IttoQ",OnApply:new r.Builder().observe.Target(t.stat.DEF_FLAT,t.stat.DEF_BASE,t.stat.DEF_PERCENT,t.stat.ELEMENTAL_BURST_LEVEL,t.stat.ELEMENTAL_BURST_LEVEL_UP).stat.Char(t.stat.ATK_FLAT).Values(...o.TalentScaling.ELEMENTAL_1).Rank(e=>e.GetCharacter().Get(t.stat.ELEMENTAL_BURST_LEVEL)).Map((e,a)=>.576*e*a.GetCharacter().Get(t.stat.DEF)).Next().infusion.Set(t.stat.GEO_DMG,!0).Build()}),AL=r.Factory({Name:"IttoC3",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_SKILL_LEVEL_UP).Values(3).Build()}),uL=r.Factory({Name:"IttoC4",ApplyOther:!0,OnApply:new r.Builder().stat.Char(t.stat.DEF_PERCENT,t.stat.ATK_PERCENT).Values(.2).Build()}),SL=r.Factory({Name:"IttoC5",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_BURST_LEVEL_UP).Values(3).Build()}),hL=r.Factory({Name:"IttoC6",OnApply:new r.Builder().stat.Char(t.stat.CHARGED_ATTACK_CRIT_DMG).Values(.7).Build()}),LL=[{Name:T.hits.HIT_N1,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.7923}]},{Name:T.hits.HIT_N2,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.7637}]},{Name:T.hits.HIT_N3,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.9164}]},{Name:T.hits.HIT_N4,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.1722}]},{Name:"HIT_KesagiriSlash",Element:t.stat.PHYSICAL_DMG,Talent:t.stat.CHARGED_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.9116}]},{Name:"HIT_KesagiriFinal",Element:t.stat.PHYSICAL_DMG,Talent:t.stat.CHARGED_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.9092}]},{Name:"HIT_SaichimonjiSlash",Element:t.stat.PHYSICAL_DMG,Talent:t.stat.CHARGED_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.9047}]},{Name:T.hits.HIT_PLUNGE,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.8183}]},{Name:T.hits.HIT_PLUNGE_LOW,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.6363}]},{Name:T.hits.HIT_PLUNGE_HIGH,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:2.0439}]}],fL=r.Factory({Name:"IttoA4",OnApply:new r.Builder().Where({target:{ascension:4}}).mv.Mv(t.stat.DEF,.35,/Kesagiri/i).Build()}),mL=[{Name:T.hits.HIT_E,Element:t.stat.GEO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:3.072}]}],hr=G.Factory({Name:"Itto",Stars:5,Weapon:t.weapon.CLAYMORE,Element:t.stat.GEO_DMG,StatBonus:t.stat.CRIT_RATE,Region:t.region.INAZUMA,BurstCost:70,HpBase:[1000.986,4110.59],AtkBase:[17.689,72.63529],DefBase:[74.66784,306.6336],Normals:LL,Skills:mL,Bursts:[],Extra:[],Effects:[_L,fL,AL,uL,SL,hL]}),NL=[{Name:T.hits.HIT_Q,Element:t.stat.PYRO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:.2808}]}],pL=r.Factory({Name:"AmberC1",OnApply:new r.Builder().instance.Location("Normal").Options({Name:"HIT_C1",Element:t.stat.PYRO_DMG,Talent:t.stat.CHARGED_AIMED_SHOT_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Talent:t.stat.NORMAL_ATTACK_LEVEL,Stat:t.stat.ATK,Initial:1.24*.2}]}).Build()}),CL=r.Factory({Name:"AmberC2",OnApply:new r.Builder().mv.Mv(t.stat.ATK,2,/hit_e/i).Build()}),ML=r.Factory({Name:"AmberC3",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_BURST_LEVEL_UP).Values(3).Build()}),dL=r.Factory({Name:"AmberC5",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_SKILL_LEVEL_UP).Values(3).Build()}),gL=r.Factory({Name:"AmberC6",ApplyOther:!0,OnApply:new r.Builder().stat.Char(t.stat.ATK_PERCENT).Values(.15).Build()}),GL=[{Name:T.hits.HIT_N1,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.3612}]},{Name:T.hits.HIT_N2,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.3612}]},{Name:T.hits.HIT_N3,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.4644}]},{Name:T.hits.HIT_N4,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.473}]},{Name:T.hits.HIT_N5,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.5934}]},{Name:T.hits.HIT_AIMED_NORMAL,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.AIMED_SHOT_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.4386}]},{Name:T.hits.HIT_AIMED_CHARGED,Element:t.stat.PYRO_DMG,Talent:t.stat.CHARGED_AIMED_SHOT_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:1.24}]},{Name:T.hits.HIT_PLUNGE,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.5683}]},{Name:T.hits.HIT_PLUNGE_LOW,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.1363}]},{Name:T.hits.HIT_PLUNGE_HIGH,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.4193}]}],RL=r.Factory({Name:"AmberA1",OnApply:new r.Builder().Where({target:{ascension:1}}).stat.Char(t.stat.ELEMENTAL_BURST_CRIT_RATE).Values(.1).Build()}),IL=r.Factory({Name:"AmberA4",OnApply:new r.Builder().Where({target:{ascension:4}}).stat.Char(t.stat.ATK_PERCENT).Values(.15).Build()}),DL=[{Name:T.hits.HIT_E,Element:t.stat.PYRO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:1.232}]}],Lr=G.Factory({Name:"Amber",Stars:4,Weapon:t.weapon.BOW,Element:t.stat.PYRO_DMG,StatBonus:t.stat.ATK_PERCENT,BurstCost:40,Region:t.region.MONDSTADT,HpBase:[793.2582,2838.2634],AtkBase:[18.6984,66.90411],DefBase:[50.358,180.18],Normals:GL,Skills:DL,Bursts:NL,Extra:[],Effects:[RL,IL,pL,CL,ML,dL,gL]}),OL=r.Factory({Name:"AlhaithamA4",OnApply:new r.Builder().Where({target:{ascension:4}}).observe.Target(t.stat.ELEMENTAL_MASTERY).stat.Char(t.stat.ELEMENTAL_SKILL_DMG,t.stat.ELEMENTAL_BURST_DMG).Values(.1/100).Map((e,a)=>Math.min(1,e*a.GetCharacter().Get(t.stat.ELEMENTAL_MASTERY))).Build()}),yL=[{Name:T.hits.HIT_Q,Element:t.stat.DENDRO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:1.216},{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ELEMENTAL_MASTERY,Initial:.9728}]}],vL=[{Name:T.hits.HIT_N1,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.4953}]},{Name:T.hits.HIT_N2,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.5075}]},{Name:T.hits.HIT_N3,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.3418}]},{Name:T.hits.HIT_N4,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.6677}]},{Name:T.hits.HIT_N5,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.8385}]},{Name:T.hits.HIT_CHARGED,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.CHARGED_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.5526}]},{Name:T.hits.HIT_PLUNGE,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.6393}]},{Name:T.hits.HIT_PLUNGE_LOW,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.2784}]},{Name:T.hits.HIT_PLUNGE_HIGH,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.5968}]}],HL=[{Name:T.hits.HIT_E,Element:t.stat.DENDRO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:1.936},{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ELEMENTAL_MASTERY,Initial:1.5488}]},{Name:T.hits.HIT_E_DOT+"_1",Element:t.stat.DENDRO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:.672},{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ELEMENTAL_MASTERY,Initial:1.344}]},{Name:T.hits.HIT_E_DOT+"_2",Element:t.stat.DENDRO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:.672*2},{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ELEMENTAL_MASTERY,Initial:1.344*2}]},{Name:T.hits.HIT_E_DOT+"_3",Element:t.stat.DENDRO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:.672*3},{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ELEMENTAL_MASTERY,Initial:1.344*3}]}],PL=r.Factory({Name:"AlhaithamE",OnApply:new r.Builder().infusion.Set(t.stat.DENDRO_DMG,!0).Build()}),BL=r.Factory({Name:"AlhaithamC2",MaxStacks:4,OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_MASTERY).Values(50).Stacks().Build()}),wL=r.Factory({Name:"AlhaithamC3",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_SKILL_LEVEL_UP).Values(3).Build()}),bL=r.Factory({Name:"AlhaithamC4",MaxStacks:3,ApplyOther:!0,OnApply:new r.Builder().Where({target:{isOwner:!0}}).stat.Char(t.stat.DENDRO_DMG).Values(.1).Stacks().Next().Where({target:{isOwner:!1}}).stat.Char(t.stat.ELEMENTAL_MASTERY).Values(30).Stacks().Build()}),KL=r.Factory({Name:"AlhaithamC5",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_BURST_LEVEL_UP).Values(3).Build()}),YL=r.Factory({Name:"AlhaithamC6",OnApply:new r.Builder().stat.Char(t.stat.CRIT_RATE).Values(.1).Next().stat.Char(t.stat.CRIT_DMG).Values(.7).Build()}),fr=G.Factory({Name:"Alhaitham",Stars:5,Weapon:t.weapon.SWORD,Element:t.stat.DENDRO_DMG,StatBonus:t.stat.DENDRO_DMG,Region:t.region.SUMERU,BurstCost:70,AtkBase:[24.3922,100.16024],DefBase:[60.84711,249.8769],HpBase:[1039.1188,4267.1836],Normals:vL,Skills:HL,Bursts:yL,Extra:[],Effects:[PL,OL,BL,wL,bL,KL,YL]}),FL=[{Name:T.hits.HIT_Q,Element:t.stat.GEO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:3.672}]},{Name:T.hits.HIT_Q_DOT,Element:t.stat.GEO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:.72}]}],kL=r.Factory({Name:"AlbedoC2",MaxStacks:4,OnApply:new r.Builder().mv.Mv(t.stat.DEF,.3,/HIT_Q/i).Map((e,a,s)=>e*s.GetStacks()).Build()}),VL=r.Factory({Name:"AlbedoC3",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_SKILL_LEVEL_UP).Values(3).Build()}),xL=r.Factory({Name:"AlbedoC4",ApplyOther:!0,OnApply:new r.Builder().stat.Char(t.stat.PLUNGE_ATTACK_DMG).Values(.3).Build()}),UL=r.Factory({Name:"AlbedoC5",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_BURST_LEVEL_UP).Values(3).Build()}),WL=r.Factory({Name:"AlbedoC6",ApplyOther:!0,OnApply:new r.Builder().Where({target:{shielded:!0}}).stat.Char(t.stat.ALL_DMG).Values(.17).Build()}),jL=[{Name:T.hits.HIT_N1,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Stat:t.stat.ATK,Initial:.3674}]},{Name:T.hits.HIT_N2,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Stat:t.stat.ATK,Initial:.3674}]},{Name:T.hits.HIT_N3,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Stat:t.stat.ATK,Initial:.4745}]},{Name:T.hits.HIT_N4,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Stat:t.stat.ATK,Initial:.4975}]},{Name:T.hits.HIT_N5,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Stat:t.stat.ATK,Initial:.6207}]},{Name:T.hits.HIT_CHARGED_1,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.CHARGED_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Stat:t.stat.ATK,Initial:.473}]},{Name:T.hits.HIT_CHARGED_2,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.CHARGED_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Stat:t.stat.ATK,Initial:.602}]},{Name:T.hits.HIT_PLUNGE,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.6393}]},{Name:T.hits.HIT_PLUNGE_LOW,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.2784}]},{Name:T.hits.HIT_PLUNGE_HIGH,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.5968}]}],zL=r.Factory({Name:"AlbedoA1",OnApply(e,a,s){const n=e.GetCharacter(),i=e.FindSkill(T.hits.HIT_E_DOT);if(!i)throw new Error("Cannot find Albedo Skill");const l=s.Modifier(i.Subject.CreateModifier(t.stat.ALL_DMG,0));function E(){n.GetAscension()>=1?l.SetValue(.25):l.SetValue(0)}return E(),s.Observer(n.CreateObserver(t.stat.LEVEL,E)),s.Observer(n.CreateObserver(t.stat.ASCENSION,E)),()=>0}}),qL=r.Factory({Name:"AlbedoA4",ApplyOther:!0,OnApply:new r.Builder().Where({owner:{ascension:4}}).stat.Char(t.stat.ELEMENTAL_MASTERY).Values(125).Build()}),QL=[{Name:T.hits.HIT_E,Element:t.stat.GEO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:1.304}]},{Name:T.hits.HIT_E_DOT,Element:t.stat.GEO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.DEF,Initial:1.336}]}],mr=G.Factory({Name:"Albedo",Element:t.stat.GEO_DMG,Stars:5,Weapon:t.weapon.SWORD,StatBonus:t.stat.GEO_DMG,Region:t.region.MONDSTADT,AtkBase:[19.551,80.28111],DefBase:[68.2062,280.098],HpBase:[1029.5856,4228.035],BurstCost:40,Normals:jL,Skills:QL,Bursts:FL,Extra:[],Effects:[zL,qL,kL,VL,xL,UL,WL]}),$L=[{Name:T.hits.HIT_Q,Element:t.stat.ELECTRO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:1.216}]},{Name:T.hits.HIT_Q_DOT,Element:t.stat.ELECTRO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:.96}]}],XL=r.Factory({Name:"BeidouC3",ApplySelf:!0,OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_SKILL_LEVEL_UP).Values(3).Build()}),JL=r.Factory({Name:"BeidouC4",ApplySelf:!0,OnApply:new r.Builder().instance.Options({Name:"HIT_C4",Element:t.stat.ELECTRO_DMG,Talent:t.stat.NONE,Scaling:[{Stat:t.stat.ATK,Initial:.2,Talent:t.stat.NONE,Scaling:o.TalentScaling.NONE}]}).Build()}),ZL=r.Factory({Name:"BeidouC5",ApplySelf:!0,OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_BURST_LEVEL_UP).Values(3).Build()}),tf=r.Factory({Name:"BeidouC6",ApplySelf:!0,ApplyOther:!0,OnApply:new r.Builder().stat.Enemy(t.stat.ELECTRO_RES).Values(-.15).Build()}),ef=[{Name:T.hits.HIT_N1,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Stat:t.stat.ATK,Initial:.7112}]},{Name:T.hits.HIT_N2,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Stat:t.stat.ATK,Initial:.7086}]},{Name:T.hits.HIT_N3,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Stat:t.stat.ATK,Initial:.8832}]},{Name:T.hits.HIT_N4,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Stat:t.stat.ATK,Initial:.8652}]},{Name:T.hits.HIT_N5,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Stat:t.stat.ATK,Initial:1.1214}]},{Name:T.hits.HIT_CHARGED_SPIN,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.CHARGED_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Stat:t.stat.ATK,Initial:.5624}]},{Name:T.hits.HIT_CHARGED_FINAL,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.CHARGED_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Stat:t.stat.ATK,Initial:1.0182}]},{Name:T.hits.HIT_PLUNGE,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.7459}]},{Name:T.hits.HIT_PLUNGE_LOW,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.4914}]},{Name:T.hits.HIT_PLUNGE_HIGH,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.8629}]}],af=r.Factory({Name:"BeidouA4",OnApply:new r.Builder().Where({target:{ascension:4}}).stat.Char(t.stat.NORMAL_ATTACK_DMG,t.stat.CHARGED_ATTACK_DMG).Values(.15).Build()}),sf=[{Name:T.hits.HIT_E,Element:t.stat.ELECTRO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:1.216}]}],nf=r.Factory({Name:"BeidouE",MaxStacks:2,OnApply:new r.Builder().observe.Target(t.stat.ELEMENTAL_SKILL_LEVEL,t.stat.ELEMENTAL_SKILL_LEVEL_UP).mv.Mv(t.stat.ATK,.96,T.hits.HIT_E).Map((e,a,s)=>{const n=s.GetStacks(),i=a.GetCharacter().Get(t.stat.ELEMENTAL_SKILL_LEVEL)-1,l=o.TalentScaling.ELEMENTAL_1[i];return e*l*n}).Build()}),Nr=G.Factory({Name:"Beidou",Stars:4,Weapon:t.weapon.CLAYMORE,Element:t.stat.ELECTRO_DMG,Region:t.region.LIYUE,StatBonus:t.stat.ELECTRO_DMG,AtkBase:[18.87648,67.54129],DefBase:[54.36375,194.5125],HpBase:[1094.1492,3914.8462],BurstCost:80,Normals:ef,Skills:sf,Bursts:$L,Extra:[],Effects:[nf,af,XL,JL,ZL,tf]}),rf=[{Name:T.hits.HIT_Q,Element:t.stat.HYDRO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:.5427}]}],lf=r.Factory({Name:"XingqiuC2",ApplySelf:!0,ApplyOther:!0,OnApply:new r.Builder().stat.Enemy(t.stat.HYDRO_RES).Values(-.15).Build()}),of=r.Factory({Name:"XingqiuC3",ApplySelf:!0,OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_BURST_LEVEL_UP).Values(3).Build()}),cf=r.Factory({Name:"XingqiuC4",ApplySelf:!0,OnApply:new r.Builder().mv.Multiplier(1.5,/^HIT_E_/i).Build()}),Ef=r.Factory({Name:"XingqiuC5",ApplySelf:!0,OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_SKILL_LEVEL_UP).Values(3).Build()}),Tf=[{Name:T.hits.HIT_N1,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Stat:t.stat.ATK,Initial:.4661}]},{Name:T.hits.HIT_N2,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Stat:t.stat.ATK,Initial:.4764}]},{Name:T.hits.HIT_N3,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Stat:t.stat.ATK,Initial:.2855}]},{Name:T.hits.HIT_N4,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Stat:t.stat.ATK,Initial:.5599}]},{Name:T.hits.HIT_N5,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Stat:t.stat.ATK,Initial:.3586}]},{Name:T.hits.HIT_CHARGED_1,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.CHARGED_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Stat:t.stat.ATK,Initial:.473}]},{Name:T.hits.HIT_CHARGED_2,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.CHARGED_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Stat:t.stat.ATK,Initial:.5616}]},{Name:T.hits.HIT_PLUNGE,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.6393}]},{Name:T.hits.HIT_PLUNGE_LOW,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.2784}]},{Name:T.hits.HIT_PLUNGE_HIGH,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.5968}]}],_f=r.Factory({Name:"XingqiuA4",ApplySelf:!0,OnApply:new r.Builder().stat.Char(t.stat.HYDRO_DMG).Where({owner:{ascension:4}}).Values(.2).Build()}),Af=[{Name:T.hits.HIT_E_1,Element:t.stat.HYDRO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:1.68}]},{Name:T.hits.HIT_E_2,Element:t.stat.HYDRO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:1.912}]}],pr=G.Factory({Name:"Xingqiu",Stars:4,Element:t.stat.HYDRO_DMG,Weapon:t.weapon.SWORD,Region:t.region.LIYUE,HpBase:[857.08356,3066.6296],AtkBase:[16.9176,60.53229],DefBase:[63.51975,227.2725],StatBonus:t.stat.ATK_PERCENT,Normals:Tf,Skills:Af,Bursts:rf,Extra:[],Effects:[_f,lf,of,cf,Ef],BurstCost:80}),uf=[{Name:T.hits.HIT_Q,Element:t.stat.PYRO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_2,Stat:t.stat.ATK,Initial:3.0327}]}],Sf=r.Factory({Name:"HuTaoQ",OnApply:new r.Builder().mv.Where({target:{hp:{leq:.5}}}).Multiplier(3.7909/3.0327,"HIT_Q").Build()}),hf=r.Factory({Name:"HuTaoC2",ApplySelf:!0,OnApply:new r.Builder().mv.Mv(t.stat.HP,.1,"HIT_E").Build()}),Lf=r.Factory({Name:"HuTaoC3",ApplySelf:!0,OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_SKILL_LEVEL_UP).Values(3).Build()}),ff=r.Factory({Name:"HuTaoC4",ApplySelf:!1,ApplyOther:!0,OnApply:new r.Builder().stat.Char(t.stat.CRIT_RATE).Values(.12).Build()}),mf=r.Factory({Name:"HuTaoC5",ApplySelf:!0,OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_BURST_LEVEL_UP).Values(3).Build()}),Nf=r.Factory({Name:"HuTaoC6",ApplySelf:!0,OnApply:new r.Builder().stat.Char(t.stat.CRIT_RATE).Values(1).Build()}),pf=[{Name:T.hits.HIT_N1,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_2,Stat:t.stat.ATK,Initial:.4689}]},{Name:T.hits.HIT_N2,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_2,Stat:t.stat.ATK,Initial:.4825}]},{Name:T.hits.HIT_N3,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_2,Stat:t.stat.ATK,Initial:.6105}]},{Name:T.hits.HIT_N4,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_2,Stat:t.stat.ATK,Initial:.6564}]},{Name:T.hits.HIT_N5_1,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_2,Stat:t.stat.ATK,Initial:.3327}]},{Name:T.hits.HIT_N5_2,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_2,Stat:t.stat.ATK,Initial:.352}]},{Name:T.hits.HIT_N6,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_2,Stat:t.stat.ATK,Initial:.8596}]},{Name:T.hits.HIT_CHARGED,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.CHARGED_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_2,Stat:t.stat.ATK,Initial:1.3596}]},{Name:T.hits.HIT_PLUNGE,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_2,Stat:t.stat.ATK,Initial:.6542}]},{Name:T.hits.HIT_PLUNGE_LOW,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_2,Stat:t.stat.ATK,Initial:1.3081}]},{Name:T.hits.HIT_PLUNGE_HIGH,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_2,Stat:t.stat.ATK,Initial:1.6339}]}],Cf=r.Factory({Name:"HuTaoA1",ApplySelf:!1,ApplyOther:!0,OnApply:new r.Builder().stat.Char(t.stat.CRIT_RATE).Where({owner:{ascension:1}}).Values(.12).Build()}),Mf=r.Factory({Name:"HuTaoA4",ApplySelf:!0,OnApply:new r.Builder().stat.Char(t.stat.PYRO_DMG).Where({owner:{ascension:4,hp:{leq:.5}}}).Values(.33).Build()}),df=[{Name:T.hits.HIT_E,Element:t.stat.PYRO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:.64}]}],gf=r.Factory({Name:"HuTaoE",ApplySelf:!0,OnApply:new r.Builder().observe.Target(t.stat.ELEMENTAL_SKILL_LEVEL,t.stat.ELEMENTAL_SKILL_LEVEL_UP,t.stat.ATK_BASE,t.stat.HP_BASE,t.stat.HP_FLAT,t.stat.HP_PERCENT).stat.Char(t.stat.ATK_FLAT).Values(...o.TalentScaling.ELEMENTAL_2).Rank(e=>e.GetCharacter().Get(t.stat.ELEMENTAL_SKILL_LEVEL)).Map((e,a)=>{const s=a.GetCharacter(),n=.0384*e*s.Get(t.stat.HP),i=s.Get(t.stat.ATK_BASE)*4;return Math.max(0,Math.min(i,n))}).Next().infusion.Set(t.stat.PYRO_DMG,!0).Build()}),Cr=G.Factory({Name:"HuTao",Element:t.stat.PYRO_DMG,Region:t.region.LIYUE,Stars:5,Weapon:t.weapon.POLEARM,HpBase:[1210.7164,4971.856],AtkBase:[8.2859,34.0239],DefBase:[68.2062,280.098],StatBonus:t.stat.CRIT_DMG,Normals:pf,Skills:df,Bursts:uf,Extra:[],Effects:[gf,Sf,Cf,Mf,hf,Lf,ff,mf,Nf],BurstCost:60}),Gf=[{Name:T.hits.HIT_Q,Element:t.stat.HYDRO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.HP,Initial:.0731}]},{Name:T.hits.HIT_Q+"_THROW",Element:t.stat.HYDRO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.HP,Initial:.0487}]}],Rf=r.Factory({Name:"YelanC2",OnApply:new r.Builder().instance.Options({Name:"HIT_C2",Element:t.stat.HYDRO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.HP,Initial:.14,Talent:t.stat.ELEMENTAL_BURST_LEVEL}]}).Build()}),If=r.Factory({Name:"YelanC3",ApplySelf:!0,OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_BURST_LEVEL_UP).Values(3).Build()}),Df=r.Factory({Name:"YelanC4",MaxStacks:4,ApplySelf:!0,ApplyOther:!0,OnApply:new r.Builder().stat.Char(t.stat.HP_PERCENT).Values(.1).Stacks().Build()}),Of=r.Factory({Name:"YelanC5",ApplySelf:!0,OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_SKILL_LEVEL_UP).Values(3).Build()}),yf=r.Factory({Name:"YelanC6",OnApply:new r.Builder().instance.Options({Name:"HIT_C6",Element:t.stat.HYDRO_DMG,Talent:t.stat.CHARGED_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.HP,Initial:1.56*.1158,Talent:t.stat.NORMAL_ATTACK_LEVEL}]}).Build()}),vf=[{Name:T.hits.HIT_N1,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.4068}]},{Name:T.hits.HIT_N2,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.3904}]},{Name:T.hits.HIT_N3,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.516}]},{Name:T.hits.HIT_N4,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.3251}]},{Name:T.hits.HIT_AIMED_NORMAL,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.AIMED_SHOT_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.4386}]},{Name:T.hits.HIT_AIMED_CHARGED,Element:t.stat.HYDRO_DMG,Talent:t.stat.CHARGED_AIMED_SHOT_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:1.24}]},{Name:"HIT_BREAKTHROUGH_BARB",Element:t.stat.HYDRO_DMG,Talent:t.stat.CHARGED_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.HP,Initial:.1158}]},{Name:T.hits.HIT_PLUNGE,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.5683}]},{Name:T.hits.HIT_PLUNGE_LOW,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.1363}]},{Name:T.hits.HIT_PLUNGE_HIGH,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.4193}]}],Hf=r.Factory({Name:"YelanA1",ApplySelf:!0,OnApply:new r.Builder().observe.Party(!0).stat.Char(t.stat.HP_PERCENT).Where({owner:{ascension:1}}).Values(.06,.12,.18,.3).Rank(e=>{const a=e.GetParty();if(!a)return 1;const s=a.GetMembers(),n=new Map;for(const l of s)n.set(l.GetCharacter().Options.Element,!0);let i=0;for(const l of n.values())l&&i++;return i}).Build()}),Pf=r.Factory({Name:"YelanA4",ApplySelf:!0,ApplyOther:!0,MaxTargets:1,MaxStacks:15,OnApply:new r.Builder().stat.Char(t.stat.ALL_DMG).Where({owner:{ascension:4}}).Values(.01).Next().stat.Char(t.stat.ALL_DMG).Where({owner:{ascension:4}}).Values(.035).Stacks().Map(e=>Math.min(.5,e)).Build()}),Bf=[{Name:T.hits.HIT_E,Element:t.stat.HYDRO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.HP,Initial:.2261}]}],Mr=G.Factory({Name:"Yelan",Stars:5,Element:t.stat.HYDRO_DMG,Weapon:t.weapon.BOW,Region:t.region.LIYUE,BurstCost:70,HpBase:[1124.9176,4619.52],AtkBase:[18.9924,77.987366],DefBase:[42.65879,175.1841],StatBonus:t.stat.CRIT_RATE,Normals:vf,Skills:Bf,Bursts:Gf,Extra:[],Effects:[Hf,Pf,Rf,If,Df,Of,yf]}),wf=[{Name:T.hits.HIT_Q,Element:t.stat.GEO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:[1,1.108,1.216,1.351,1.473,1.595,1.757,1.919,2.081,2.243,2.405,2.568,2.703,2.838,2.973],Stat:t.stat.ATK,Initial:4.0108}]}],bf=r.Factory({Name:"ZhongliC3",ApplySelf:!0,OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_SKILL_LEVEL_UP).Values(3).Build()}),Kf=r.Factory({Name:"ZhongliC5",ApplySelf:!0,OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_BURST_LEVEL_UP).Values(3).Build()}),Yf=[{Name:T.hits.HIT_N1,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Stat:t.stat.ATK,Initial:.3077}]},{Name:T.hits.HIT_N2,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Stat:t.stat.ATK,Initial:.3115}]},{Name:T.hits.HIT_N3,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Stat:t.stat.ATK,Initial:.3858}]},{Name:T.hits.HIT_N4,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Stat:t.stat.ATK,Initial:.4294}]},{Name:T.hits.HIT_N5,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Stat:t.stat.ATK,Initial:.1075}]},{Name:T.hits.HIT_N6,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Stat:t.stat.ATK,Initial:.545}]},{Name:T.hits.HIT_CHARGED,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.CHARGED_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Stat:t.stat.ATK,Initial:1.1103}]},{Name:T.hits.HIT_PLUNGE,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.6393}]},{Name:T.hits.HIT_PLUNGE_LOW,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.2784}]},{Name:T.hits.HIT_PLUNGE_HIGH,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.5968}]}],Ff=r.Factory({Name:"ZhongliA4",ApplySelf:!0,OnApply:new r.Builder().Where({target:{ascension:4}}).mv.Mv(t.stat.HP,.0139,/HIT_(N(\d)|CHARGED|PLUNGE)/).Next().Where({target:{ascension:4}}).mv.Mv(t.stat.HP,.019,/HIT_E/).Next().Where({target:{ascension:4}}).mv.Mv(t.stat.HP,.33,/HIT_Q/).Build()}),kf=[{Name:T.hits.HIT_E_PRESS,Element:t.stat.GEO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:.16}]},{Name:T.hits.HIT_E+"_RESONANCE",Element:t.stat.GEO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:.32}]},{Name:T.hits.HIT_E_HOLD,Element:t.stat.GEO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:.8}]}],Vf=r.Factory({Name:"ZhongliE",ApplySelf:!0,ApplyOther:!0,OnApply:(e,a,s)=>{const n=t.Elements;for(const i of n){const l=t.DmgToRes(i);s.Modifier(e.GetCharacter().GetEnemy().Subject.CreateModifier(l,-.2))}return()=>0}}),dr=G.Factory({Name:"Zhongli",Stars:5,Element:t.stat.GEO_DMG,Weapon:t.weapon.POLEARM,Region:t.region.LIYUE,HpBase:[1143.984,4697.817],AtkBase:[19.551,80.2811],DefBase:[57.4368,235.872],StatBonus:t.stat.GEO_DMG,BurstCost:40,Normals:Yf,Skills:kf,Bursts:wf,Extra:[],Effects:[Vf,Ff,bf,Kf]}),xf=[{Name:T.hits.HIT_Q,Element:t.stat.ELECTRO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:4.008}]},{Name:T.hits.HIT_N1+"_Q",Element:t.stat.ELECTRO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:.4447}]},{Name:T.hits.HIT_N2+"_Q",Element:t.stat.ELECTRO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:.4396}]},{Name:T.hits.HIT_N3+"_Q",Element:t.stat.ELECTRO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:.5382}]},{Name:T.hits.HIT_N4+"_Q",Element:t.stat.ELECTRO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:.3089}]},{Name:T.hits.HIT_N5+"_Q",Element:t.stat.ELECTRO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:.7394}]},{Name:T.hits.HIT_CHARGED_1+"_Q",Element:t.stat.ELECTRO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:.616}]},{Name:T.hits.HIT_CHARGED_2+"_Q",Element:t.stat.ELECTRO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:.7436}]},{Name:T.hits.HIT_PLUNGE+"_Q",Element:t.stat.ELECTRO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:.6393}]},{Name:T.hits.HIT_PLUNGE_LOW+"_Q",Element:t.stat.ELECTRO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:1.2784}]},{Name:T.hits.HIT_PLUNGE_HIGH+"_Q",Element:t.stat.ELECTRO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:1.5968}]}],Uf=r.Factory({Name:"RaidenQ",MaxStacks:60,OnApply:new r.Builder().observe.Target(t.stat.ELEMENTAL_BURST_LEVEL,t.stat.ELEMENTAL_BURST_LEVEL_UP).mv.Mv(t.stat.ATK,.0389,T.hits.HIT_Q).Map((e,a,s)=>s.GetStacks()*e*o.TalentScaling.ELEMENTAL_1[Math.max(0,Math.min(o.TalentScaling.ELEMENTAL_1.length-1,a.GetCharacter().Get(t.stat.ELEMENTAL_BURST_LEVEL)-1))]).Next().observe.Target(t.stat.ELEMENTAL_BURST_LEVEL,t.stat.ELEMENTAL_BURST_LEVEL_UP).mv.Mv(t.stat.ATK,.0073,/_.+_Q$/).Map((e,a,s)=>s.GetStacks()*e*o.TalentScaling.ELEMENTAL_1[Math.max(0,Math.min(o.TalentScaling.ELEMENTAL_1.length-1,a.GetCharacter().Get(t.stat.ELEMENTAL_BURST_LEVEL)-1))]).Build()}),Wf=r.Factory({Name:"RaidenC2",OnApply:new r.Builder().stat.Char(t.stat.DEFIGNORED).Values(.6).Build()}),jf=r.Factory({Name:"RaidenC3",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_BURST_LEVEL_UP).Values(3).Build()}),zf=r.Factory({Name:"RaidenC4",ApplyOther:!0,ApplySelf:!1,OnApply:new r.Builder().stat.Char(t.stat.ATK_PERCENT).Values(.3).Build()}),qf=r.Factory({Name:"RaidenC5",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_SKILL_LEVEL_UP).Values(3).Build()}),Qf=[{Name:T.hits.HIT_N1,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.3965}]},{Name:T.hits.HIT_N2,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.3973}]},{Name:T.hits.HIT_N3,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.4988}]},{Name:T.hits.HIT_N4,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.2898}]},{Name:T.hits.HIT_N5,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.6545}]},{Name:T.hits.HIT_CHARGED,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.CHARGED_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.9959}]},{Name:T.hits.HIT_PLUNGE,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.6393}]},{Name:T.hits.HIT_PLUNGE_LOW,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.2784}]},{Name:T.hits.HIT_PLUNGE_HIGH,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.5968}]}],$f=r.Factory({Name:"RaidenA4",OnApply:new r.Builder().Where({target:{ascension:4}}).observe.Target(t.stat.ENERGY_RECHARGE).stat.Char(t.stat.ELECTRO_DMG).Values(.4).Map((e,a)=>e*Math.max(0,a.GetCharacter().Get(t.stat.ENERGY_RECHARGE)-1)).Build()}),Xf=[{Name:T.hits.HIT_E,Element:t.stat.ELECTRO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:1.172}]},{Name:T.hits.HIT_E+"_COORDINATED",Element:t.stat.ELECTRO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:.42}]}],Jf=r.Factory({Name:"RaidenE",ApplyOther:!0,OnApply:new r.Builder().observe.Owner(t.stat.ELEMENTAL_SKILL_LEVEL,t.stat.ELEMENTAL_SKILL_LEVEL_UP).stat.Char(t.stat.ELEMENTAL_BURST_DMG).Values(.0022,.0023,.0024,.0025,.0026,.0027,.0028,.0029,.003).Rank((e,a)=>a.Owner.GetCharacter().Get(t.stat.ELEMENTAL_SKILL_LEVEL)).Map((e,a)=>e*a.GetCharacter().Options.BurstCost).Build()}),gr=G.Factory({Name:"Raiden",Stars:5,Weapon:t.weapon.POLEARM,Region:t.region.INAZUMA,Element:t.stat.ELECTRO_DMG,StatBonus:t.stat.ENERGY_RECHARGE,BurstCost:90,AtkBase:[26.2542,107.80606],DefBase:[61.44541,252.3339],HpBase:[1004.79926,4126.249],Normals:Qf,Skills:Xf,Bursts:xf,Extra:[],Effects:[Jf,Uf,$f,Wf,jf,zf,qf]}),Zf=[{Name:T.hits.HIT_Q,Element:t.stat.PYRO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:2.328}]}],t1=r.Factory({Name:"BennettQ",ApplyOther:!0,OnApply:new r.Builder().observe.Owner(t.stat.ATK_BASE,t.stat.ELEMENTAL_BURST_LEVEL,t.stat.ELEMENTAL_BURST_LEVEL_UP).stat.Char(t.stat.ATK_FLAT).Values(...o.TalentScaling.ELEMENTAL_1).Rank((e,a)=>a.Owner.GetCharacter().Get(t.stat.ELEMENTAL_BURST_LEVEL)).Map((e,a,s)=>{const n=s.Owner.FindEffect("BennettC1");return(.56*e+(n&&n.Enabled()?.2:0))*s.Owner.GetCharacter().Get(t.stat.ATK_BASE)}).Build()}),e1=r.Factory({Name:"BennettC1",OnApply(e,a,s){const n=e.FindEffect("BennettQ");if(!n)throw new Error("Bennett Burst effect not found");const i=n;function l(){i.Enabled()&&(i.Disable(),i.Enable())}return l(),s.Observer(a.CreateObserver(r.EffectEvent.ENABLE,l)),s.Observer(a.CreateObserver(r.EffectEvent.DISABLE,l)),s.Observer(a.CreateObserver(r.EffectEvent.CHANGE_TARGET,l)),()=>0}}),a1=r.Factory({Name:"BennettC2",OnApply:new r.Builder().Where({target:{hp:{leq:.7}}}).stat.Char(t.stat.ENERGY_RECHARGE).Values(.3).Build()}),s1=r.Factory({Name:"BennettC3",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_SKILL_LEVEL_UP).Values(3).Build()}),n1=r.Factory({Name:"BennettC5",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_BURST_LEVEL_UP).Values(3).Build()}),i1=r.Factory({Name:"BennettC6",ApplyOther:!0,OnApply:new r.Builder().stat.Char(t.stat.PYRO_DMG).Values(.15).Next().Where({target:{weapon:[t.weapon.CLAYMORE,t.weapon.SWORD,t.weapon.POLEARM]}}).infusion.Set(t.stat.PYRO_DMG,!1).Build()}),r1=[{Name:T.hits.HIT_N1,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.4455}]},{Name:T.hits.HIT_N2,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.4274}]},{Name:T.hits.HIT_N3,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.5461}]},{Name:T.hits.HIT_N4,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.5968}]},{Name:T.hits.HIT_N5,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.719}]},{Name:T.hits.HIT_CHARGED_1,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.CHARGED_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.559}]},{Name:T.hits.HIT_CHARGED_2,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.CHARGED_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.6072}]},{Name:T.hits.HIT_PLUNGE,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.6393}]},{Name:T.hits.HIT_PLUNGE_LOW,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.2784}]},{Name:T.hits.HIT_PLUNGE_HIGH,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.5968}]}],l1=[{Name:T.hits.HIT_E_PRESS,Element:t.stat.PYRO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:1.376}]},{Name:T.hits.HIT_E_1_1,Element:t.stat.PYRO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:.84}]},{Name:T.hits.HIT_E_1_2,Element:t.stat.PYRO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:.92}]},{Name:T.hits.HIT_E_2_1,Element:t.stat.PYRO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:.88}]},{Name:T.hits.HIT_E_2_2,Element:t.stat.PYRO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:.96}]},{Name:T.hits.HIT_E_EXPLOSION,Element:t.stat.PYRO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:1.32}]},{Name:"HIT_C4",Element:t.stat.PYRO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:.92*1.35}]}],Gr=G.Factory({Name:"Bennett",Stars:4,Weapon:t.weapon.SWORD,Element:t.stat.PYRO_DMG,Region:t.region.MONDSTADT,StatBonus:t.stat.ENERGY_RECHARGE,BurstCost:60,HpBase:[1039.4418,3719.104],AtkBase:[16.0272,57.34638],DefBase:[64.66425,231.3675],Normals:r1,Skills:l1,Bursts:Zf,Effects:[t1,e1,a1,s1,n1,i1],Extra:[]}),o1=[{Name:T.hits.HIT_Q,Element:t.stat.ELECTRO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:2.08}]}],c1=r.Factory({Name:"FischlC1",OnApply:new r.Builder().instance.Options({Name:"HIT_C1",Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.NONE,Stat:t.stat.ATK,Initial:.22,Talent:t.stat.NONE}]}).Build()}),E1=r.Factory({Name:"FischlC2",OnApply:new r.Builder().mv.Mv(t.stat.ATK,2,/HIT_E$/).Build()}),T1=r.Factory({Name:"FischlC3",ApplySelf:!0,OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_SKILL_LEVEL_UP).Values(3).Build()}),_1=r.Factory({Name:"FischlC4",OnApply:new r.Builder().instance.Options({Name:"HIT_C4",Element:t.stat.ELECTRO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.NONE,Stat:t.stat.ATK,Initial:2.22,Talent:t.stat.NONE}]}).Build()}),A1=r.Factory({Name:"FischlC5",ApplySelf:!0,OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_BURST_LEVEL_UP).Values(3).Build()}),u1=r.Factory({Name:"FischlC6",OnApply:new r.Builder().instance.Options({Name:"HIT_C6",Element:t.stat.ELECTRO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.NONE,Stat:t.stat.ATK,Initial:.3,Talent:t.stat.NONE}]}).Build()}),S1=[{Name:T.hits.HIT_N1,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.4412}]},{Name:T.hits.HIT_N2,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.4678}]},{Name:T.hits.HIT_N3,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.5814}]},{Name:T.hits.HIT_N4,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.5771}]},{Name:T.hits.HIT_N5,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.7207}]},{Name:T.hits.HIT_AIMED_NORMAL,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.AIMED_SHOT_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.4386}]},{Name:T.hits.HIT_AIMED_CHARGED,Element:t.stat.ELECTRO_DMG,Talent:t.stat.CHARGED_AIMED_SHOT_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:1.24}]},{Name:T.hits.HIT_PLUNGE,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.5683}]},{Name:T.hits.HIT_PLUNGE_LOW,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.1363}]},{Name:T.hits.HIT_PLUNGE_HIGH,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.4193}]}],h1=r.Factory({Name:"FischlA1",OnApply:new r.Builder().Where({target:{ascension:1}}).instance.Options({Name:"HIT_A1",Element:t.stat.ELECTRO_DMG,Talent:t.stat.CHARGED_AIMED_SHOT_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:1.24*1.527,Talent:t.stat.NORMAL_ATTACK_LEVEL}]}).Build()}),L1=r.Factory({Name:"FischlA4",OnApply:new r.Builder().Where({target:{ascension:4}}).instance.Options({Name:"HIT_A4",Element:t.stat.ELECTRO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.NONE,Stat:t.stat.ATK,Initial:.8,Talent:t.stat.NONE}]}).Build()}),f1=[{Name:T.hits.HIT_E,Element:t.stat.ELECTRO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:1.1544}]},{Name:"HIT_OZ",Element:t.stat.ELECTRO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:.888}]}],Rr=G.Factory({Name:"Fischl",Stars:4,Element:t.stat.ELECTRO_DMG,Region:t.region.MONDSTADT,Weapon:t.weapon.BOW,StatBonus:t.stat.ATK_PERCENT,AtkBase:[20.4792,73.27593],HpBase:[770.4634,2756.704],DefBase:[49.78575,178.1325],BurstCost:60,Normals:S1,Skills:f1,Bursts:o1,Extra:[],Effects:[h1,L1,c1,E1,T1,_1,A1,u1]}),m1=[{Name:T.hits.HIT_Q,Element:t.stat.ANEMO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:2.624}]},{Name:T.hits.HIT_Q_DOT,Element:t.stat.ANEMO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:1.2}]}],N1=r.Factory({Name:"KazuhaQ",MaxAuras:1,ValidAuras:t.Swirlable,OnApply(e,a,s){p1(e,a,s);function n(){const i=e.FindBurst(T.hits.HIT_Q+"_ADDITIONAL");if(!i)return;const l=a.GetAuras()[0];!l||(i.Options.Element=t.AuraToDmg(l))}return n(),s.Observer(a.CreateObserver(r.EffectEvent.CHANGE_AURAS,n)),s.Observer(a.CreateObserver(r.EffectEvent.ENABLE,n)),()=>0}}),p1=new r.Builder().instance.Location("Burst").Options({Name:T.hits.HIT_Q+"_ADDITIONAL",Element:t.stat.PYRO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:.36,Talent:t.stat.ELEMENTAL_BURST_LEVEL}]}).Build(),C1=r.Factory({Name:"KazuhaC2",ApplyOther:!0,OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_MASTERY).Values(200).Build()}),M1=r.Factory({Name:"KazuhaC3",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_SKILL_LEVEL_UP).Values(3).Build()}),d1=r.Factory({Name:"KazuhaC5",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_BURST_LEVEL_UP).Values(3).Build()}),g1=r.Factory({Name:"KazuhaC6",OnApply:new r.Builder().infusion.Set(t.stat.ANEMO_DMG,!1).Build()}),G1=[{Name:T.hits.HIT_N1,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Stat:t.stat.ATK,Initial:.4498}]},{Name:T.hits.HIT_N2,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Stat:t.stat.ATK,Initial:.4524}]},{Name:T.hits.HIT_N3_1,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Stat:t.stat.ATK,Initial:.258}]},{Name:T.hits.HIT_N3_2,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Stat:t.stat.ATK,Initial:.3096}]},{Name:T.hits.HIT_N4,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Stat:t.stat.ATK,Initial:.6072}]},{Name:T.hits.HIT_N5,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Stat:t.stat.ATK,Initial:.2537}]},{Name:T.hits.HIT_CHARGED_1,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.CHARGED_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Stat:t.stat.ATK,Initial:.43}]},{Name:T.hits.HIT_CHARGED_2,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.CHARGED_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1A,Stat:t.stat.ATK,Initial:.7465}]},{Name:T.hits.HIT_PLUNGE,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.8183}]},{Name:T.hits.HIT_PLUNGE_LOW,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.6363}]},{Name:T.hits.HIT_PLUNGE_HIGH,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:2.0439}]}],R1=r.Factory({Name:"KazuhaA1",MaxAuras:1,ValidAuras:t.Swirlable,OnApply(e,a,s){I1(e,a,s);function n(){const i=e.FindNormal("HIT_A1");if(!i)return;const l=a.GetAuras()[0];!l||(i.Options.Element=t.AuraToDmg(l))}return n(),s.Observer(a.CreateObserver(r.EffectEvent.CHANGE_AURAS,n)),s.Observer(a.CreateObserver(r.EffectEvent.ENABLE,n)),()=>0}}),I1=new r.Builder().Where({target:{ascension:1}}).instance.Location("Normal").Options({Name:"HIT_A1",Element:t.stat.PYRO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.NONE,Stat:t.stat.ATK,Initial:2,Talent:t.stat.NONE}]}).Build(),D1=r.Factory({Name:"KazuhaA4",ApplyOther:!0,MaxAuras:1/0,ValidAuras:t.Swirlable,OnApply(e,a,s){const n=a.Owner.GetCharacter(),i=e.GetCharacter(),l=t.Elements.filter(_=>_!==t.stat.PHYSICAL_DMG).map(_=>s.Modifier(i.CreateModifier(_,0)));function E(){const _=a.GetAuras().map(A=>t.AuraToDmg(A));for(const A of l)_.includes(A.GetProp())&&n.GetAscension()>=4?A.SetValue(.04/100*n.Get(t.stat.ELEMENTAL_MASTERY)):A.SetValue(0)}return E(),s.Observer(a.CreateObserver(r.EffectEvent.CHANGE_AURAS,E)),s.Observer(n.CreateObserver(t.stat.ELEMENTAL_MASTERY,E)),s.Observer(n.CreateObserver(t.stat.LEVEL,E)),s.Observer(n.CreateObserver(t.stat.ASCENSION,E)),()=>0}}),O1=[{Name:T.hits.HIT_E_PRESS,Element:t.stat.ANEMO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:1.92}]},{Name:T.hits.HIT_E_HOLD,Element:t.stat.ANEMO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:2.608}]}],y1=r.Factory({Name:"KazuhaE",OnApply:new r.Builder().instance.Location("Normal").Options({Name:T.hits.HIT_PLUNGE+"_E",Element:t.stat.ANEMO_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.8183,Talent:t.stat.NORMAL_ATTACK_LEVEL}]}).Next().instance.Location("Normal").Options({Name:T.hits.HIT_PLUNGE_LOW+"_E",Element:t.stat.ANEMO_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.6363,Talent:t.stat.NORMAL_ATTACK_LEVEL}]}).Next().instance.Location("Normal").Options({Name:T.hits.HIT_PLUNGE_HIGH+"_E",Element:t.stat.ANEMO_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:2.0439,Talent:t.stat.NORMAL_ATTACK_LEVEL}]}).Build()}),Ir=G.Factory({Name:"Kazuha",Stars:5,Weapon:t.weapon.SWORD,Region:t.region.INAZUMA,Element:t.stat.ANEMO_DMG,StatBonus:t.stat.ELEMENTAL_MASTERY,BurstCost:60,HpBase:[1039.1188,4267.1836],AtkBase:[23.0888,94.80817],DefBase:[62.8215,257.985],Normals:G1,Skills:O1,Bursts:m1,Extra:[],Effects:[y1,N1,R1,D1,C1,M1,d1,g1]}),v1=[{Name:T.hits.HIT_Q,Element:t.stat.ELECTRO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:4.096}]},{Name:T.hits.HIT_Q_DOT,Element:t.stat.ELECTRO_DMG,Talent:t.stat.ELEMENTAL_BURST_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:.3412}]}],H1=r.Factory({Name:"SaraC2",OnApply:new r.Builder().instance.Location("Skill").Options({Name:"HIT_C2",Element:t.stat.ELECTRO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:1.2576*.3,Talent:t.stat.ELEMENTAL_SKILL_LEVEL}]}).Build()}),P1=r.Factory({Name:"SaraC3",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_BURST_LEVEL_UP).Values(3).Build()}),B1=r.Factory({Name:"SaraC5",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_SKILL_LEVEL_UP).Values(3).Build()}),w1=r.Factory({Name:"SaraC6",ApplyOther:!0,OnApply:new r.Builder().stat.Char(t.stat.ELECTRO_CRIT_DMG).Values(.6).Build()}),b1=[{Name:T.hits.HIT_N1,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.3689}]},{Name:T.hits.HIT_N2,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.387}]},{Name:T.hits.HIT_N3,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.485}]},{Name:T.hits.HIT_N4,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.504}]},{Name:T.hits.HIT_N5,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.585}]},{Name:T.hits.HIT_AIMED_NORMAL,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.AIMED_SHOT_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.4386}]},{Name:T.hits.HIT_AIMED_CHARGED,Element:t.stat.ELECTRO_DMG,Talent:t.stat.CHARGED_AIMED_SHOT_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:1.24}]},{Name:T.hits.HIT_PLUNGE,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:.5683}]},{Name:T.hits.HIT_PLUNGE_LOW,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.1363}]},{Name:T.hits.HIT_PLUNGE_HIGH,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Scaling:o.TalentScaling.PHYSICAL_1,Stat:t.stat.ATK,Initial:1.4193}]}],K1=[{Name:T.hits.HIT_E,Element:t.stat.ELECTRO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:1.2576}]}],Y1=r.Factory({Name:"SaraE",ApplyOther:!0,OnApply:new r.Builder().observe.Owner(t.stat.ATK_BASE,t.stat.ELEMENTAL_SKILL_LEVEL,t.stat.ELEMENTAL_SKILL_LEVEL_UP).stat.Char(t.stat.ATK_FLAT).Values(...o.TalentScaling.ELEMENTAL_1).Rank((e,a)=>a.Owner.GetCharacter().Get(t.stat.ELEMENTAL_SKILL_LEVEL)).Map((e,a,s)=>.4296*e*s.Owner.GetCharacter().Get(t.stat.ATK_BASE)).Build()}),Dr=G.Factory({Name:"Sara",Stars:4,Weapon:t.weapon.BOW,Region:t.region.INAZUMA,Element:t.stat.ELECTRO_DMG,BurstCost:80,HpBase:[802.3761,2870.8872],AtkBase:[16.38336,58.620743],DefBase:[52.647,188.37],StatBonus:t.stat.ATK_PERCENT,Normals:b1,Skills:K1,Bursts:v1,Extra:[],Effects:[Y1,H1,P1,B1,w1]}),F1=[{Name:T.hits.HIT_N1,Element:t.stat.DENDRO_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Stat:t.stat.ATK,Scaling:o.TalentScaling.ELEMENTAL_1,Initial:.403}]},{Name:T.hits.HIT_N2,Element:t.stat.DENDRO_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Stat:t.stat.ATK,Scaling:o.TalentScaling.ELEMENTAL_1,Initial:.3697}]},{Name:T.hits.HIT_N3,Element:t.stat.DENDRO_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Stat:t.stat.ATK,Scaling:o.TalentScaling.ELEMENTAL_1,Initial:.4587}]},{Name:T.hits.HIT_N4,Element:t.stat.DENDRO_DMG,Talent:t.stat.NORMAL_ATTACK_DMG,Scaling:[{Stat:t.stat.ATK,Scaling:o.TalentScaling.ELEMENTAL_1,Initial:.5841}]},{Name:T.hits.HIT_CHARGED,Element:t.stat.DENDRO_DMG,Talent:t.stat.CHARGED_ATTACK_DMG,Scaling:[{Stat:t.stat.ATK,Scaling:o.TalentScaling.ELEMENTAL_1A,Initial:1.32}]},{Name:T.hits.HIT_PLUNGE,Element:t.stat.DENDRO_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Stat:t.stat.ATK,Scaling:o.TalentScaling.ELEMENTAL_1,Initial:.5683}]},{Name:T.hits.HIT_PLUNGE_LOW,Element:t.stat.DENDRO_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Stat:t.stat.ATK,Scaling:o.TalentScaling.ELEMENTAL_1,Initial:1.1363}]},{Name:T.hits.HIT_PLUNGE_HIGH,Element:t.stat.DENDRO_DMG,Talent:t.stat.PLUNGE_ATTACK_DMG,Scaling:[{Stat:t.stat.ATK,Scaling:o.TalentScaling.ELEMENTAL_1,Initial:1.4193}]}],k1=r.Factory({Name:"NahidaA1",ApplyOther:!0,MaxTargets:1,OnApply(e,a,s){const n=e.GetCharacter(),i=a.Owner.GetCharacter(),l=s.Modifier(n.CreateModifier(t.stat.ELEMENTAL_MASTERY,0));let E=[];const _=[];function A(S){if(S===l)return;if(i.Get(t.stat.ASCENSION)<1){l.SetValue(0);return}let h=0,L=n;for(const N of E){const p=N.Get(t.stat.ELEMENTAL_MASTERY);p>h&&(h=p,L=N)}L===n&&(h-=l.GetValue());const f=Math.min(250,Math.max(0,.25*h));l.SetValue(f)}function u(){_.forEach(h=>h.Remove());const S=e.GetParty();if(!S)E=[n];else{E=[];for(const h of S.GetMembers())E.push(h.GetCharacter())}for(const h of E)_.push(s.Observer(h.CreateObserver(t.stat.ELEMENTAL_MASTERY,A)));A()}return u(),s.Observer(e.Event.CreateObserver(G.CharboxEvent.CHANGE_PARTY,u)),s.Observer(a.CreateObserver(r.EffectEvent.ENABLE,u)),s.Observer(a.CreateObserver(r.EffectEvent.DISABLE,u)),s.Observer(a.CreateObserver(r.EffectEvent.CHANGE_CONDITIONS,u)),s.Observer(i.CreateObserver(t.stat.LEVEL,A)),s.Observer(i.CreateObserver(t.stat.ASCENSION,A)),()=>0}}),V1=[{Name:T.hits.HIT_E_PRESS,Element:t.stat.DENDRO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:.984}]},{Name:T.hits.HIT_E_HOLD,Element:t.stat.DENDRO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:1.304}]},{Name:T.hits.HIT_E_DOT,Element:t.stat.DENDRO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ATK,Initial:1.032},{Scaling:o.TalentScaling.ELEMENTAL_1,Stat:t.stat.ELEMENTAL_MASTERY,Initial:2.064}]}],x1=r.Factory({Name:"NahidaA4",OnApply(e,a,s){const n=e.GetCharacter(),i=e.FindSkill(T.hits.HIT_E_DOT);if(!i)throw new Error("Cannot find Nahida Skill");const l=s.Modifier(i.Subject.CreateModifier(t.stat.ALL_DMG,0)),E=s.Modifier(i.Subject.CreateModifier(t.stat.CRIT_RATE,0));let _,A;function u(){if(n.GetAscension()<4){l.SetValue(0),E.SetValue(0),_&&_.SetValue(0),A&&A.SetValue(0);return}const S=e.FindSkill("HIT_C6");S&&(_||(_=s.Modifier(S.Subject.CreateModifier(t.stat.ALL_DMG,0))),A||(A=s.Modifier(S.Subject.CreateModifier(t.stat.CRIT_RATE,0))));const h=Math.max(0,n.Get(t.stat.ELEMENTAL_MASTERY)-200),L=Math.min(.24,h*.03/100),f=Math.min(.8,h*.1/100);l.SetValue(f),E.SetValue(L),_&&_.SetValue(f),A&&A.SetValue(L)}return u(),s.Observer(n.CreateObserver(t.stat.ELEMENTAL_MASTERY,u)),s.Observer(n.CreateObserver(t.stat.LEVEL,u)),s.Observer(n.CreateObserver(t.stat.ASCENSION,u)),()=>0}}),U1=r.Factory({Name:"NahidaQ",OnApply(e,a,s){const n=e.FindSkill(T.hits.HIT_E_DOT);if(!n)throw new Error("Cannot find Nahida Skill");const i=s.Modifier(n.Subject.CreateModifier(t.stat.ALL_DMG,0));let l;function E(){const _=e.GetParty();if(!_){i.SetValue(0),l&&l.SetValue(0);return}const A=e.FindSkill("HIT_C6");A&&!l&&(l=s.Modifier(A.Subject.CreateModifier(t.stat.ALL_DMG,0)));const u=e.FindEffect("NahidaC1");let h=u&&u.Enabled()&&u.GetTargets().includes(e)?1:0;for(const N of _.GetMembers())N.GetCharacter().Options.Element===t.stat.PYRO_DMG&&h++;let L=0;h>=1&&(L=.1488),h>=2&&(L=.2232);const f=L*o.TalentScaling.ELEMENTAL_1[e.GetCharacter().Get(t.stat.ELEMENTAL_BURST_LEVEL)-1];i.SetValue(f),l&&l.SetValue(f)}return E(),s.Observer(a.CreateObserver(r.EffectEvent.ENABLE,E)),s.Observer(a.CreateObserver(r.EffectEvent.DISABLE,E)),s.Observer(e.GetCharacter().CreateObserver(t.stat.ELEMENTAL_BURST_LEVEL,E)),s.Observer(e.GetCharacter().CreateObserver(t.stat.ELEMENTAL_BURST_LEVEL_UP,E)),s.Observer(e.Event.CreateObserver(G.CharboxEvent.CHANGE_PARTY,E)),()=>0}}),W1=r.Factory({Name:"NahidaC1",OnApply(e,a,s){const n=e.FindEffect("NahidaQ");if(!n)throw new Error("Nahida Burst effect not found");const i=n;function l(){i.Enabled()&&(i.Disable(),i.Enable())}return l(),s.Observer(a.CreateObserver(r.EffectEvent.ENABLE,l)),s.Observer(a.CreateObserver(r.EffectEvent.DISABLE,l)),s.Observer(a.CreateObserver(r.EffectEvent.CHANGE_TARGET,l)),()=>0}}),j1=r.Factory({Name:"NahidaC2",ApplyOther:!0,MaxAuras:1,ValidAuras:[t.aura.QUICKEN],OnApply(e,a,s){z1(e,a,s);const i=["BURGEON","BLOOM","HYPERBLOOM","BURNING"].map(l=>e.FindTr("HIT_"+l));for(const l of i)!l||(s.Modifier(l.Subject.CreateModifier(t.stat.CRIT_RATE,.2)),s.Modifier(l.Subject.CreateModifier(t.stat.CRIT_DMG,1)));return()=>0}}),z1=new r.Builder().Where({effect:{aura:[t.aura.QUICKEN]}}).stat.Enemy(t.stat.DEFREDUCTION).Values(.3).Build(),q1=r.Factory({Name:"NahidaC3",ApplySelf:!0,OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_SKILL_LEVEL_UP).Values(3).Build()}),Q1=r.Factory({Name:"NahidaC4",MaxStacks:4,OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_MASTERY).Stacks([0,100,120,140,160]).Build()}),$1=r.Factory({Name:"NahidaC5",ApplySelf:!0,OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_BURST_LEVEL_UP).Values(3).Build()}),X1=r.Factory({Name:"NahidaC6",OnApply(e,a,s){J1(e,a,s);function n(){const i=e.FindEffect("NahidaQ"),l=e.FindEffect("NahidaA4");i&&i.Enabled()&&(i.Disable(),i.Enable()),l&&l.Enabled()&&(l.Disable(),l.Enable())}return n(),s.Observer(a.CreateObserver(r.EffectEvent.ENABLE,n)),s.Observer(a.CreateObserver(r.EffectEvent.DISABLE,n)),()=>0}}),J1=new r.Builder().instance.Location("Skill").Options({Name:"HIT_C6",Element:t.stat.DENDRO_DMG,Talent:t.stat.ELEMENTAL_SKILL_DMG,Scaling:[{Scaling:o.TalentScaling.NONE,Stat:t.stat.ATK,Talent:t.stat.NONE,Initial:2},{Scaling:o.TalentScaling.NONE,Stat:t.stat.ELEMENTAL_MASTERY,Talent:t.stat.NONE,Initial:4}]}).Build(),Or=G.Factory({Name:"Nahida",Stars:5,Element:t.stat.DENDRO_DMG,Region:t.region.SUMERU,Weapon:t.weapon.CATALYST,StatBonus:t.stat.ELEMENTAL_MASTERY,BurstCost:50,HpBase:[806.5087,3311.961],AtkBase:[23.275,95.57275],DefBase:[49.0606,201.474],Normals:F1,Skills:V1,Bursts:[],Extra:[],Effects:[U1,k1,x1,W1,j1,q1,Q1,$1,X1]}),ea=new q(e=>e.Name);ea.AddList(Object.values(Pi).sort((e,a)=>e.Name.localeCompare(a.Name)));function yr(){return ea.Get()}function Z1(e){return ea.Find(e)}var Z={};D(Z,{Akuoumaru:()=>Zr,AlleyHunter:()=>No,AmberBead:()=>Zo,AmenomaKageuchi:()=>Vl,AmosBow:()=>To,AquaSimulacra:()=>co,AquilaFavonia:()=>wl,BalladOfTheFjords:()=>Ur,BeaconOfTheReedSea:()=>$r,BlackTassel:()=>gc,BlackcliffAgate:()=>zo,BlackcliffLongsword:()=>jl,BlackcliffPole:()=>Rc,BlackcliffSlasher:()=>sl,BlackcliffWarbow:()=>jr,BloodtaintedGreatsword:()=>nl,CalamityQueller:()=>rc,CinnabarSpindle:()=>kl,CompoundBow:()=>Co,CoolSteel:()=>ro,CrescentPike:()=>Lc,DarkIronSword:()=>ao,Deathmatch:()=>Ic,DebateClub:()=>il,DodocoTales:()=>Uo,DragonsBane:()=>mc,DragonspineSpear:()=>Sc,ElegyForTheEnd:()=>pc,EmeraldOrb:()=>ec,EndOfTheLine:()=>_o,EngulfingLightning:()=>_c,EverlastingMoonglow:()=>bo,EyeOfPerception:()=>jo,FadingTwilight:()=>mo,FavoniusCodex:()=>Jo,FavoniusGreatsword:()=>rl,FavoniusLance:()=>Mc,FavoniusSword:()=>yc,FavoniusWarbow:()=>vc,FerrousShadow:()=>ll,FesteringDesire:()=>xl,FilletBlade:()=>so,FinaleOfTheDeep:()=>br,FindByName:()=>Em,FleuveCendreFerryman:()=>Kr,FlowingPurity:()=>wr,ForestRegalia:()=>El,FreedomSworn:()=>Dl,Frostbearer:()=>Wo,FruitOfFulfillment:()=>ko,GetByType:()=>Tm,GetList:()=>Bc,HakushinRing:()=>xo,Halberd:()=>fc,Hamayumi:()=>ho,HaranGeppakuFutsu:()=>vl,HarbingerOfDawn:()=>io,HuntersPath:()=>lo,IbisPiercer:()=>zr,IronSting:()=>zl,JadeCutter:()=>Pl,JadeSpear:()=>lc,JadefallSplendor:()=>qr,KagotsurubeIsshin:()=>Fl,KagurasVerity:()=>wo,KatsuragikiriNagamasa:()=>Tl,KeyOfKhajNisut:()=>yl,KingsSquire:()=>Ao,KitainCrossSpear:()=>uc,LightOfFoliarIncision:()=>Ol,LionsRoar:()=>Ql,LithicBlade:()=>Al,LithicSpear:()=>hc,LostPrayer:()=>Yo,LuxuriousSeaLord:()=>ol,MagicGuide:()=>nc,MailedFlower:()=>Qr,MakhairaAquamarine:()=>al,MappaMare:()=>qo,MemoryOfDust:()=>Ko,Messenger:()=>Io,MissiveWindspear:()=>Ec,MistsplitterReforged:()=>Hl,MitternachtsWaltz:()=>fo,Moonpiercer:()=>Tc,MouunsMoon:()=>uo,OathswornEye:()=>Vo,OtherworldlyStory:()=>ac,PolarStar:()=>Eo,Predator:()=>So,PrototypeAmber:()=>Qo,PrototypeArchaic:()=>Sl,PrototypeCrescent:()=>Mo,PrototypeRancour:()=>ql,PrototypeStarglitter:()=>Gc,Rainslasher:()=>hl,RavenBow:()=>vo,RecurveBow:()=>Oo,RedhornStonethresher:()=>Ll,RightfulReward:()=>Pr,RoyalBow:()=>Zl,RoyalGreatsword:()=>fl,RoyalGrimoire:()=>Xl,RoyalLongsword:()=>to,RoyalSpear:()=>Jl,Rust:()=>go,SacrificialBow:()=>Go,SacrificialFragments:()=>Xo,SacrificialGreatsword:()=>ml,SacrificialJade:()=>kr,SacrificialSword:()=>Nc,SapwoodBlade:()=>Yl,ScionOfTheBlazingSun:()=>Vr,SerpentSpine:()=>Il,SharpshootersOath:()=>yo,SkyriderGreatsword:()=>Nl,SkyriderSword:()=>eo,SkywardAtlas:()=>Fo,SkywardBlade:()=>Dc,SkywardHarp:()=>Oc,SkywardPride:()=>pl,SkywardSpine:()=>cc,Slingshot:()=>Do,SnowTombedStarsilver:()=>Cl,SolarPearl:()=>$o,SongOfBrokenPines:()=>ul,SongOfStillness:()=>Br,StaffOfHoma:()=>Cc,StaffOfTheScarletSands:()=>ic,SummitShaper:()=>Bl,SwordOfDescension:()=>Ul,TalkingStick:()=>xr,TheAlleyFlash:()=>Wl,TheBell:()=>Ml,TheBlackSword:()=>Xr,TheCatch:()=>Jr,TheFirstGreatMagic:()=>Wr,TheFlute:()=>$l,TheStringless:()=>Ro,TheUnforged:()=>dl,TheViridescentHunt:()=>po,TheWidsith:()=>Hc,ThousandFloatingDreams:()=>Po,ThrillingTalesOfDragonSlayers:()=>sc,ThunderingPulse:()=>oo,TidalShadow:()=>Yr,TomeOfTheEternalFlow:()=>Hr,ToukabouShigure:()=>bl,TravelersHandySword:()=>no,TulaytullahsRemembrance:()=>Ho,TwinNephrite:()=>tc,VortexVanquisher:()=>oc,WanderingEvenstar:()=>Bo,WavebreakerFin:()=>Ac,WhiteIronGreatsword:()=>Gl,WhiteTassel:()=>dc,Whiteblind:()=>gl,WindblumeOde:()=>Lo,WineAndSong:()=>tl,WolfFang:()=>Fr,WolfsGravestone:()=>Rl,XiphosMoonlight:()=>Kl});var vr={};D(vr,{Akuoumaru:()=>Zr,AlleyHunter:()=>No,AmberBead:()=>Zo,AmenomaKageuchi:()=>Vl,AmosBow:()=>To,AquaSimulacra:()=>co,AquilaFavonia:()=>wl,BalladOfTheFjords:()=>Ur,BeaconOfTheReedSea:()=>$r,BlackTassel:()=>gc,BlackcliffAgate:()=>zo,BlackcliffLongsword:()=>jl,BlackcliffPole:()=>Rc,BlackcliffSlasher:()=>sl,BlackcliffWarbow:()=>jr,BloodtaintedGreatsword:()=>nl,CalamityQueller:()=>rc,CinnabarSpindle:()=>kl,CompoundBow:()=>Co,CoolSteel:()=>ro,CrescentPike:()=>Lc,DarkIronSword:()=>ao,Deathmatch:()=>Ic,DebateClub:()=>il,DodocoTales:()=>Uo,DragonsBane:()=>mc,DragonspineSpear:()=>Sc,ElegyForTheEnd:()=>pc,EmeraldOrb:()=>ec,EndOfTheLine:()=>_o,EngulfingLightning:()=>_c,EverlastingMoonglow:()=>bo,EyeOfPerception:()=>jo,FadingTwilight:()=>mo,FavoniusCodex:()=>Jo,FavoniusGreatsword:()=>rl,FavoniusLance:()=>Mc,FavoniusSword:()=>yc,FavoniusWarbow:()=>vc,FerrousShadow:()=>ll,FesteringDesire:()=>xl,FilletBlade:()=>so,FinaleOfTheDeep:()=>br,FleuveCendreFerryman:()=>Kr,FlowingPurity:()=>wr,ForestRegalia:()=>El,FreedomSworn:()=>Dl,Frostbearer:()=>Wo,FruitOfFulfillment:()=>ko,HakushinRing:()=>xo,Halberd:()=>fc,Hamayumi:()=>ho,HaranGeppakuFutsu:()=>vl,HarbingerOfDawn:()=>io,HuntersPath:()=>lo,IbisPiercer:()=>zr,IronSting:()=>zl,JadeCutter:()=>Pl,JadeSpear:()=>lc,JadefallSplendor:()=>qr,KagotsurubeIsshin:()=>Fl,KagurasVerity:()=>wo,KatsuragikiriNagamasa:()=>Tl,KeyOfKhajNisut:()=>yl,KingsSquire:()=>Ao,KitainCrossSpear:()=>uc,LightOfFoliarIncision:()=>Ol,LionsRoar:()=>Ql,LithicBlade:()=>Al,LithicSpear:()=>hc,LostPrayer:()=>Yo,LuxuriousSeaLord:()=>ol,MagicGuide:()=>nc,MailedFlower:()=>Qr,MakhairaAquamarine:()=>al,MappaMare:()=>qo,MemoryOfDust:()=>Ko,Messenger:()=>Io,MissiveWindspear:()=>Ec,MistsplitterReforged:()=>Hl,MitternachtsWaltz:()=>fo,Moonpiercer:()=>Tc,MouunsMoon:()=>uo,OathswornEye:()=>Vo,OtherworldlyStory:()=>ac,PolarStar:()=>Eo,Predator:()=>So,PrototypeAmber:()=>Qo,PrototypeArchaic:()=>Sl,PrototypeCrescent:()=>Mo,PrototypeRancour:()=>ql,PrototypeStarglitter:()=>Gc,Rainslasher:()=>hl,RavenBow:()=>vo,RecurveBow:()=>Oo,RedhornStonethresher:()=>Ll,RightfulReward:()=>Pr,RoyalBow:()=>Zl,RoyalGreatsword:()=>fl,RoyalGrimoire:()=>Xl,RoyalLongsword:()=>to,RoyalSpear:()=>Jl,Rust:()=>go,SacrificialBow:()=>Go,SacrificialFragments:()=>Xo,SacrificialGreatsword:()=>ml,SacrificialJade:()=>kr,SacrificialSword:()=>Nc,SapwoodBlade:()=>Yl,ScionOfTheBlazingSun:()=>Vr,SerpentSpine:()=>Il,SharpshootersOath:()=>yo,SkyriderGreatsword:()=>Nl,SkyriderSword:()=>eo,SkywardAtlas:()=>Fo,SkywardBlade:()=>Dc,SkywardHarp:()=>Oc,SkywardPride:()=>pl,SkywardSpine:()=>cc,Slingshot:()=>Do,SnowTombedStarsilver:()=>Cl,SolarPearl:()=>$o,SongOfBrokenPines:()=>ul,SongOfStillness:()=>Br,StaffOfHoma:()=>Cc,StaffOfTheScarletSands:()=>ic,SummitShaper:()=>Bl,SwordOfDescension:()=>Ul,TalkingStick:()=>xr,TheAlleyFlash:()=>Wl,TheBell:()=>Ml,TheBlackSword:()=>Xr,TheCatch:()=>Jr,TheFirstGreatMagic:()=>Wr,TheFlute:()=>$l,TheStringless:()=>Ro,TheUnforged:()=>dl,TheViridescentHunt:()=>po,TheWidsith:()=>Hc,ThousandFloatingDreams:()=>Po,ThrillingTalesOfDragonSlayers:()=>sc,ThunderingPulse:()=>oo,TidalShadow:()=>Yr,TomeOfTheEternalFlow:()=>Hr,ToukabouShigure:()=>bl,TravelersHandySword:()=>no,TulaytullahsRemembrance:()=>Ho,TwinNephrite:()=>tc,VortexVanquisher:()=>oc,WanderingEvenstar:()=>Bo,WavebreakerFin:()=>Ac,WhiteIronGreatsword:()=>Gl,WhiteTassel:()=>dc,Whiteblind:()=>gl,WindblumeOde:()=>Lo,WineAndSong:()=>tl,WolfFang:()=>Fr,WolfsGravestone:()=>Rl,XiphosMoonlight:()=>Kl});var Hr=m.Factory({Name:"TomeOfTheEternalFlow",Stars:5,Type:t.weapon.CATALYST,Substat:t.stat.CRIT_DMG,Scaling:o.WeaponScaling.TYPE_44b,Effects:[r.Factory({Name:"TomeOfTheEternalFlow1",MaxStacks:3,MaxRank:5,OnApply:new r.Builder().stat.Char(t.stat.HP_PERCENT).Values(.16,.2,.24,.28,.32).Next().stat.Char(t.stat.CHARGED_ATTACK_DMG).Values(.14,.18,.22,.26,.3).Stacks().Build()})]}),Pr=m.Factory({Name:"RightfulReward",Stars:4,Type:t.weapon.POLEARM,Substat:t.stat.HP_PERCENT,Scaling:o.WeaponScaling.TYPE_44,Effects:[]}),Br=m.Factory({Name:"SongOfStillness",Stars:4,Type:t.weapon.BOW,Substat:t.stat.ATK_PERCENT,Scaling:o.WeaponScaling.TYPE_42,Effects:[r.Factory({Name:"SongOfStillness1",MaxRank:5,MaxConditions:1,Conditions:["HEALED"],OnApply:new r.Builder().Where({effect:{conditions:["HEALED"]}}).stat.Char(t.stat.ALL_DMG).Values(.16,.2,.24,.28,.32).Build()})]}),wr=m.Factory({Name:"FlowingPurity",Stars:4,Type:t.weapon.CATALYST,Substat:t.stat.ATK_PERCENT,Scaling:o.WeaponScaling.TYPE_44,Effects:[r.Factory({Name:"FlowingPurity1",MaxRank:5,MaxConditions:1,MaxStacks:6e3,Conditions:["CAST_SKILL"],OnApply:new r.Builder().Where({effect:{conditions:["CAST_SKILL"]}}).stat.Char(...t.Elements.filter(e=>e!==t.stat.PHYSICAL_DMG)).Values(.08,.1,.12,.14,.16).Next().stat.Char(...t.Elements.filter(e=>e!==t.stat.PHYSICAL_DMG)).Values(...[.02,.025,.03,.035,.04].map(e=>e/1e3)).Stacks().Build()})]}),br=m.Factory({Name:"FinaleOfTheDeep",Stars:4,Type:t.weapon.SWORD,Substat:t.stat.ATK_PERCENT,Scaling:o.WeaponScaling.TYPE_44,Effects:[r.Factory({Name:"FinaleOfTheDeep1",MaxRank:5,MaxStacks:100,MaxConditions:1,Conditions:["CAST_SKILL"],OnApply:new r.Builder().Where({effect:{conditions:["CAST_SKILL"]}}).stat.Char(t.stat.ATK_PERCENT).Values(.12,.15,.18,.21,.24).Next().observe.Target(t.stat.HP_BASE,t.stat.HP_PERCENT,t.stat.HP_FLAT).stat.Char(t.stat.ATK_FLAT).Values(.024,.03,.036,.042,.048).Map((e,a,s)=>{let n=e*s.GetStacks()/100*.25*a.GetCharacter().Get(t.stat.HP);return n=Math.min(n,150/.024*e),n}).Build()})]}),Kr=m.Factory({Name:"FleuveCendreFerryman",Stars:4,Type:t.weapon.SWORD,Substat:t.stat.ENERGY_RECHARGE,Scaling:o.WeaponScaling.TYPE_42,Effects:[r.Factory({Name:"FleuveCendreFerryman1",MaxRank:5,Conditions:["CAST_SKILL"],MaxConditions:1,OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_SKILL_CRIT_RATE).Values(.08,.1,.12,.14,.16).Next().Where({effect:{conditions:["CAST_SKILL"]}}).stat.Char(t.stat.ENERGY_RECHARGE).Values(.16,.2,.24,.28,.32).Build()})]}),Yr=m.Factory({Name:"TidalShadow",Stars:4,Type:t.weapon.CLAYMORE,Substat:t.stat.ATK_PERCENT,Scaling:o.WeaponScaling.TYPE_42,Effects:[r.Factory({Name:"TidalShadow1",MaxRank:5,Conditions:["HEALED"],MaxConditions:1,OnApply:new r.Builder().Where({effect:{conditions:["HEALED"]}}).stat.Char(t.stat.ATK_PERCENT).Values(.24,.3,.36,.42,.48).Build()})]}),Fr=m.Factory({Name:"WolfFang",Stars:4,Type:t.weapon.SWORD,Substat:t.stat.CRIT_RATE,Scaling:o.WeaponScaling.TYPE_42,Effects:[r.Factory({Name:"WolfFang1",MaxRank:5,OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_SKILL_DMG,t.stat.ELEMENTAL_BURST_DMG).Values(.16,.2,.24,.28,.32).Build()}),r.Factory({Name:"WolfFang2",MaxRank:5,MaxStacks:4,OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_SKILL_CRIT_RATE).Values(.02,.025,.03,.035,.04).Stacks().Build()}),r.Factory({Name:"WolfFang3",MaxRank:5,MaxStacks:4,OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_BURST_CRIT_RATE).Values(.02,.025,.03,.035,.04).Stacks().Build()})]}),kr=m.Factory({Name:"SacrificialJade",Stars:4,Type:t.weapon.CATALYST,Substat:t.stat.CRIT_RATE,Scaling:o.WeaponScaling.TYPE_42,Effects:[r.Factory({Name:"SacrificialJade1",MaxRank:5,Conditions:["OFF_FIELD"],MaxConditions:1,OnApply:new r.Builder().Where({effect:{conditions:["OFF_FIELD"]}}).stat.Char(t.stat.HP_PERCENT).Values(.32,.4,.48,.56,.64).Next().Where({effect:{conditions:["OFF_FIELD"]}}).stat.Char(t.stat.ELEMENTAL_MASTERY).Values(40,50,60,70,80).Build()})]}),Vr=m.Factory({Name:"ScionOfTheBlazingSun",Stars:4,Type:t.weapon.BOW,Substat:t.stat.CRIT_RATE,Scaling:o.WeaponScaling.TYPE_44,Effects:[r.Factory({Name:"ScionOfTheBlazingSun1",MaxRank:5,OnApply:new r.Builder().instance.Basic({Name:"HIT_ScionOfTheBlazingSun",Element:t.stat.PHYSICAL_DMG,Stat:t.stat.ATK,Values:[.6,.75,.9,1.05,1.2]}).Next().stat.Char(t.stat.CHARGED_ATTACK_DMG).Values(.28,.35,.42,.49,.56).Build()})]}),xr=m.Factory({Name:"TalkingStick",Stars:4,Type:t.weapon.CLAYMORE,Substat:t.stat.CRIT_RATE,Scaling:o.WeaponScaling.TYPE_44,Effects:[r.Factory({Name:"TalkingStick1",MaxRank:5,MaxAuras:2,ValidAuras:[t.aura.PYRO,t.aura.HYDRO],OnApply:new r.Builder().Where({effect:{aura:[t.aura.PYRO]}}).stat.Char(t.stat.ATK_PERCENT).Values(.16,.2,.24,.28,.32).Next().Where({effect:{aura:[t.aura.HYDRO]}}).stat.Char(...t.Elements.filter(e=>e!==t.stat.PHYSICAL_DMG)).Values(.12,.15,.18,.21,.24).Build()})]}),Ur=m.Factory({Name:"BalladOfTheFjords",Stars:4,Type:t.weapon.POLEARM,Scaling:o.WeaponScaling.TYPE_42,Substat:t.stat.CRIT_RATE,Effects:[r.Factory({Name:"BalladOfTheFjords1",MaxRank:5,OnApply:new r.Builder().observe.Party(!0).stat.Char(t.stat.ELEMENTAL_MASTERY).Values(120,150,180,210,240).Map((e,a)=>{const s=a.GetParty();if(!s)return 0;const n=new Set;for(const i of s.GetMembers())n.add(i.GetCharacter().Options.Element);return n.size>=3?e:0}).Build()})]}),Wr=m.Factory({Name:"TheFirstGreatMagic",Type:t.weapon.BOW,Stars:5,Substat:t.stat.CRIT_DMG,Scaling:o.WeaponScaling.TYPE_46,Effects:[r.Factory({Name:"TheFirstGreatMagic1",MaxRank:5,OnApply:new r.Builder().stat.Char(t.stat.CHARGED_ATTACK_DMG).Values(.16,.2,.24,.28,.32).Next().observe.Party(!0).stat.Char(t.stat.ATK_PERCENT).Values(.16,.2,.24,.28,.32).Map((e,a)=>{let s=1;const n=a.GetCharacter().Options.Element,i=a.GetParty();if(i)for(const l of i.GetMembers())l!==a&&l.GetCharacter().Options.Element===n&&s++;return s=Math.min(s,3),e*s}).Build()})]}),Pt=e=>r.Factory({Name:e,MaxRank:5,MaxStacks:3,OnApply:new r.Builder().stat.Char(t.stat.ATK_PERCENT).Values(.12,.15,.18,.21,.24).Stacks().Build()}),jr=m.Factory({Name:"BlackcliffWarbow",Stars:4,Type:t.weapon.BOW,Scaling:o.WeaponScaling.TYPE_44,Substat:t.stat.CRIT_DMG,Effects:[Pt("BlackcliffWarbow1")]}),zr=m.Factory({Name:"IbisPiercer",Type:t.weapon.BOW,Stars:4,Scaling:o.WeaponScaling.TYPE_44,Substat:t.stat.ATK_PERCENT,Effects:[r.Factory({Name:"IbisPiercer1",MaxRank:5,MaxStacks:2,OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_MASTERY).Values(40,50,60,70,80).Stacks().Build()})]}),qr=m.Factory({Name:"JadefallSplendor",Type:t.weapon.CATALYST,Stars:5,Scaling:o.WeaponScaling.TYPE_46,Substat:t.stat.HP_PERCENT,Effects:[r.Factory({Name:"JadefallSplendor1",MaxRank:5,OnApply:new r.Builder().observe.Owner(t.stat.HP_PERCENT,t.stat.HP_BASE,t.stat.HP_FLAT).stat.MapStat(e=>[e.GetCharacter().Options.Element]).Values(.3,.5,.7,.9,1.1).Map((e,a,s)=>Math.min([.12,.2,.28,.36,.44][s.GetRank()-1],e/100*a.GetCharacter().Get(t.stat.HP)/1e3)).Build()})]}),Qr=m.Factory({Name:"MailedFlower",Stars:4,Type:t.weapon.CLAYMORE,Substat:t.stat.ELEMENTAL_MASTERY,Scaling:o.WeaponScaling.TYPE_44,Effects:[r.Factory({Name:"MailedFlower1",MaxRank:5,OnApply:new r.Builder().stat.Char(t.stat.ATK_PERCENT).Values(.12,.15,.18,.21,.24).Next().stat.Char(t.stat.ELEMENTAL_MASTERY).Values(48,60,72,84,96).Build()})]}),$r=m.Factory({Name:"BeaconOfTheReedSea",Stars:5,Type:t.weapon.CLAYMORE,Substat:t.stat.CRIT_RATE,Scaling:o.WeaponScaling.TYPE_46,Effects:[r.Factory({Name:"BeaconOfTheReedSea1",MaxRank:5,Conditions:["HIT_SKILL","DMG_TAKEN"],MaxConditions:2,OnApply:new r.Builder().Where({effect:{conditions:["HIT_SKILL"]}}).stat.Char(t.stat.ATK_PERCENT).Values(.2,.25,.3,.35,.4).Next().Where({effect:{conditions:["DMG_TAKEN"]}}).stat.Char(t.stat.ATK_PERCENT).Values(.2,.25,.3,.35,.4).Next().Where({target:{shielded:!1}}).stat.Char(t.stat.HP_PERCENT).Values(.32,.4,.48,.56,.64).Build()})]}),Xr=m.Factory({Name:"TheBlackSword",Stars:4,Type:t.weapon.SWORD,Scaling:o.WeaponScaling.TYPE_42,Substat:t.stat.CRIT_RATE,Effects:[r.Factory({Name:"TheBlackSword1",MaxRank:5,OnApply:new r.Builder().stat.Char(t.stat.NORMAL_ATTACK_DMG,t.stat.CHARGED_ATTACK_DMG).Values(.2,.25,.3,.35,.4).Build()})]}),Jr=m.Factory({Name:"TheCatch",Stars:4,Type:t.weapon.POLEARM,Scaling:o.WeaponScaling.TYPE_42,Substat:t.stat.ENERGY_RECHARGE,Effects:[r.Factory({Name:"TheCatch1",MaxRank:5,OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_BURST_DMG).Values(.16,.2,.24,.28,.32).Next().stat.Char(t.stat.ELEMENTAL_BURST_CRIT_RATE).Values(.06,.075,.09,.105,.12).Build()})]}),aa=e=>r.Factory({Name:e,MaxRank:5,OnApply(a,s,n){const i=a.GetCharacter(),l=n.Modifier(i.CreateModifier(t.stat.ELEMENTAL_BURST_DMG,0));function E(){let _=[i];const A=a.GetParty();A&&(_=A.GetMembers().map(h=>h.GetCharacter()));let u=0;for(const h of _)u+=h.Options.BurstCost;const S=Math.min(em[s.GetRank()-1],tm[s.GetRank()-1]*u);l.SetValue(S)}return n.Observer(s.Event.CreateObserver(r.EffectEvent.CHANGE_RANK,E)),n.Observer(a.Event.CreateObserver(G.CharboxEvent.CHANGE_PARTY,E)),()=>0}}),tm=[.12/100,.15/100,.18/100,.21/100,.24/100],em=[.4,.5,.6,.7,.8],Zr=m.Factory({Name:"Akuoumaru",Stars:4,Type:t.weapon.CLAYMORE,Scaling:o.WeaponScaling.TYPE_42,Substat:t.stat.ATK_PERCENT,Effects:[aa("Akuoumaru1")]}),tl=m.Factory({Name:"WineAndSong",Stars:4,Type:t.weapon.CATALYST,Scaling:o.WeaponScaling.TYPE_44,Substat:t.stat.ENERGY_RECHARGE,Effects:[r.Factory({Name:"WineAndSong1",MaxRank:5,OnApply:new r.Builder().stat.Char(t.stat.ATK_PERCENT).Values(.2,.25,.3,.35,.4).Build()})]}),el=(e,a,s)=>r.Factory({Name:e,ApplyOther:!0,StackSelf:!0,MaxRank:5,OnApply(n,i,l){const E=i.Owner.GetCharacter(),_=n.GetCharacter(),A=l.Modifier(_.CreateModifier(a,0));function u(){const S=E.Get(t.stat.ELEMENTAL_MASTERY);let h=s[i.GetRank()-1]*S;E!==_&&(h*=.3),A.SetValue(h)}return u(),l.Observer(E.CreateObserver(t.stat.ELEMENTAL_MASTERY,u)),()=>0}}),al=m.Factory({Name:"MakhairaAquamarine",Stars:4,Type:t.weapon.CLAYMORE,Scaling:o.WeaponScaling.TYPE_42,Substat:t.stat.ELEMENTAL_MASTERY,Effects:[el("MakhairaAquamarine1",t.stat.ATK_FLAT,[.24,.3,.36,.42,.48])]}),sl=m.Factory({Name:"BlackcliffSlasher",Stars:4,Type:t.weapon.CLAYMORE,Scaling:o.WeaponScaling.TYPE_42,Substat:t.stat.CRIT_DMG,Effects:[Pt("BlackcliffSlasher1")]}),nl=m.Factory({Name:"BloodtaintedGreatsword",Stars:3,Type:t.weapon.CLAYMORE,Scaling:o.WeaponScaling.TYPE_38,Substat:t.stat.ELEMENTAL_MASTERY,Effects:[r.Factory({Name:"BloodtaintedGreatsword1",MaxRank:5,OnApply:new r.Builder().Where({enemy:{affected:[t.stat.PYRO_DMG,t.stat.ELECTRO_DMG]}}).stat.Char(t.stat.ALL_DMG).Values(.12,.15,.18,.21,.24).Build()})]}),il=m.Factory({Name:"DebateClub",Stars:3,Type:t.weapon.CLAYMORE,Scaling:o.WeaponScaling.TYPE_39,Substat:t.stat.ATK_PERCENT,Effects:[r.Factory({Name:"DebateClub1",MaxRank:5,OnApply:new r.Builder().instance.Basic({Name:"HIT_DebateClub",Element:t.stat.PHYSICAL_DMG,Stat:t.stat.ATK,Values:[.6,.75,.9,1.05,1.2]}).Build()})]}),rl=m.Factory({Name:"FavoniusGreatsword",Stars:4,Type:t.weapon.CLAYMORE,Scaling:o.WeaponScaling.TYPE_41,Substat:t.stat.ENERGY_RECHARGE,Effects:[]}),ll=m.Factory({Name:"FerrousShadow",Stars:3,Type:t.weapon.CLAYMORE,Scaling:o.WeaponScaling.TYPE_39,Substat:t.stat.HP_PERCENT,Effects:[r.Factory({Name:"FerrousShadow1",MaxRank:5,OnApply:new r.Builder().Where({target:{hp:{leq:.7}}}).stat.Char(t.stat.CHARGED_ATTACK_DMG).Values(.3,.35,.4,.45,.5).Build()})]}),ol=m.Factory({Name:"LuxuriousSeaLord",Type:t.weapon.CLAYMORE,Stars:4,Scaling:o.WeaponScaling.TYPE_41,Substat:t.stat.ATK_PERCENT,Effects:[r.Factory({Name:"LuxuriousSeaLord1",MaxRank:5,OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_BURST_DMG).Values(.12,.15,.18,.21,.24).Next().instance.Basic({Name:"HIT_LuxuriousSeaLord",Element:t.stat.PHYSICAL_DMG,Stat:t.stat.ATK,Values:[1,1.25,1.5,1.75,2]}).Build()})]}),cl=e=>r.Factory({Name:e,MaxRank:5,ApplyOther:!0,MaxTargets:1,OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_MASTERY).Values(60,75,90,105,120).Build()}),El=m.Factory({Name:"ForestRegalia",Stars:4,Type:t.weapon.CLAYMORE,Scaling:o.WeaponScaling.TYPE_44,Substat:t.stat.ENERGY_RECHARGE,Effects:[cl("ForestRegalia1")]}),Tl=m.Factory({Name:"KatsuragikiriNagamasa",Stars:4,Type:t.weapon.CLAYMORE,Scaling:o.WeaponScaling.TYPE_42,Substat:t.stat.ENERGY_RECHARGE,Effects:[r.Factory({Name:"KatsuragikiriNagamasa1",MaxRank:5,OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_SKILL_DMG).Values(.06,.075,.09,.105,.12).Build()})]}),_l=e=>r.Factory({Name:e,MaxRank:5,OnApply(a,s,n){const i=a.GetCharacter(),l=n.Modifier(i.CreateModifier(t.stat.CRIT_RATE,0)),E=n.Modifier(i.CreateModifier(t.stat.ATK_PERCENT,0));function _(){let A=[i];const u=a.GetParty();u&&(A=u.GetMembers().map(f=>f.GetCharacter()));const S=Math.min(4,A.filter(f=>f.Options.Region===t.region.LIYUE).length),h=am[s.GetRank()-1]*S,L=sm[s.GetRank()-1]*S;l.SetValue(h),E.SetValue(L)}return _(),n.Observer(s.CreateObserver(r.EffectEvent.CHANGE_RANK,_)),n.Observer(a.Event.CreateObserver(G.CharboxEvent.CHANGE_PARTY,_)),()=>0}}),am=[.03,.04,.05,.06,.07],sm=[.07,.08,.09,.1,.11],Al=m.Factory({Name:"LithicBlade",Stars:4,Type:t.weapon.CLAYMORE,Scaling:o.WeaponScaling.TYPE_42,Substat:t.stat.ATK_PERCENT,Effects:[_l("LithicBlade1")]}),sa=new Map;function nm(e){const a=sa.get(e);if(!a){const s=new Set;return sa.set(e,s),s}return a}var na=({Name:e,OnApply:a})=>r.Factory({Name:e,MaxRank:5,ApplyOther:!0,OnApply(s,n,i){a(s,n,i);const l=i.GetModifiers(),E=nm(s);l.forEach(A=>E.add(A));function _(){for(const A of l)Array.from(E).some(S=>S!==A&&S.GetProp()===A.GetProp()&&S.Enabled()&&S.GetValue()!==0)&&(A.SetValue(0),A.Disable())}_();for(const A of r.EffectEvent.Values())i.Observer(n.CreateObserver(A,_));return()=>{l.forEach(A=>E.delete(A)),E.size===0&&sa.delete(s)}}}),ul=m.Factory({Name:"SongOfBrokenPines",Stars:5,Type:t.weapon.CLAYMORE,Scaling:o.WeaponScaling.TYPE_49,Substat:t.stat.PHYSICAL_DMG,Effects:[r.Factory({Name:"SongOfBrokenPines1",MaxRank:5,OnApply:new r.Builder().stat.Char(t.stat.ATK_PERCENT).Values(.16,.2,.24,.28,.32).Build()}),na({Name:"SongOfBrokenPines2",OnApply:new r.Builder().stat.Char(t.stat.ATK_PERCENT).Values(.2,.25,.3,.35,.4).Build()})]}),Sl=m.Factory({Name:"PrototypeArchaic",Stars:4,Type:t.weapon.CLAYMORE,Scaling:o.WeaponScaling.TYPE_44,Substat:t.stat.ATK_PERCENT,Effects:[r.Factory({Name:"PrototypeArchaic1",MaxRank:5,OnApply:new r.Builder().instance.Basic({Name:"HIT_PrototypeArchaic",Element:t.stat.PHYSICAL_DMG,Stat:t.stat.ATK,Values:[2.4,3,3.6,4.2,4.8]}).Build()})]}),hl=m.Factory({Name:"Rainslasher",Stars:4,Type:t.weapon.CLAYMORE,Scaling:o.WeaponScaling.TYPE_42,Substat:t.stat.ELEMENTAL_MASTERY,Effects:[r.Factory({Name:"Rainslasher1",MaxRank:5,OnApply:new r.Builder().Where({enemy:{affected:[t.stat.HYDRO_DMG,t.stat.ELECTRO_DMG]}}).stat.Char(t.stat.ALL_DMG).Values(.2,.24,.28,.32,.36).Build()})]}),Ll=m.Factory({Name:"RedhornStonethresher",Stars:5,Type:t.weapon.CLAYMORE,Scaling:o.WeaponScaling.TYPE_44b,Substat:t.stat.CRIT_DMG,Effects:[r.Factory({Name:"RedhornStonethresher1",MaxRank:5,OnApply:new r.Builder().stat.Char(t.stat.DEF_PERCENT).Values(.28,.35,.42,.49,.56).Next().observe.Target(t.stat.DEF,t.stat.DEF_PERCENT,t.stat.DEF_FLAT).stat.Char(t.stat.NORMAL_ATTACK_DMG_FLAT).Values(.4,.5,.6,.7,.8).Map((e,a)=>e*a.GetCharacter().Get(t.stat.DEF)).Build()})]}),Bt=e=>r.Factory({Name:e,MaxRank:5,OnApply(a,s,n){const i=a.GetCharacter();function l(E=!0){if(!E)i.MapCritRate=_=>_;else{const _=s.GetRank();i.MapCritRate=A=>im(_,A)}}return l(!0),n.Observer(s.CreateObserver(r.EffectEvent.ENABLE,()=>l(!0))),n.Observer(s.CreateObserver(r.EffectEvent.CHANGE_RANK,()=>l(!0))),n.Observer(s.CreateObserver(r.EffectEvent.DISABLE,()=>l(!1))),()=>l(!1)}});function im(e,a){const s=Math.max,n=.08+.02*(e-1);return a<0?((5*n+a)*s(0,a)-(5*n*a-5*n+d(a,2)-a)*s(0,n+a)+(5*d(n,2)*a-5*d(n,2)+6*n*d(a,2)-11*n*a+5*n+d(a,3)-2*d(a,2)+a)*s(0,2*n+a)-(10*d(n,3)*a-10*d(n,3)+17*d(n,2)*d(a,2)-32*d(n,2)*a+15*d(n,2)+8*n*d(a,3)-21*n*d(a,2)+18*n*a-5*n+d(a,4)-3*d(a,3)+3*d(a,2)-a)*s(0,3*n+a)+(30*d(n,4)*a-30*d(n,4)+61*d(n,3)*d(a,2)-116*d(n,3)*a+55*d(n,3)+41*d(n,2)*d(a,3)-112*d(n,2)*d(a,2)+101*d(n,2)*a-30*d(n,2)+11*n*d(a,4)-38*n*d(a,3)+48*n*d(a,2)-26*n*a+5*n+d(a,5)-4*d(a,4)+6*d(a,3)-4*d(a,2)+a)*s(0,4*n+a)-(24*d(n,4)*a-24*d(n,4)+50*d(n,3)*d(a,2)-100*d(n,3)*a+50*d(n,3)+35*d(n,2)*d(a,3)-105*d(n,2)*d(a,2)+105*d(n,2)*a-35*d(n,2)+10*n*d(a,4)-40*n*d(a,3)+60*n*d(a,2)-40*n*a+10*n+d(a,5)-5*d(a,4)+10*d(a,3)-10*d(a,2)+5*a-1)*s(0,5*n+a))/(6*d(n,4)*a-6*d(n,4)+11*d(n,3)*d(a,2)-26*d(n,3)*a+15*d(n,3)+6*d(n,2)*d(a,3)-24*d(n,2)*d(a,2)+33*d(n,2)*a-15*d(n,2)+n*d(a,4)-6*n*d(a,3)+15*n*d(a,2)-20*n*a+15*n+1):(5*n+a)/(6*d(n,4)*a-6*d(n,4)+11*d(n,3)*d(a,2)-26*d(n,3)*a+15*d(n,3)+6*d(n,2)*d(a,3)-24*d(n,2)*d(a,2)+33*d(n,2)*a-15*d(n,2)+n*d(a,4)-6*n*d(a,3)+15*n*d(a,2)-20*n*a+15*n+1)}var fl=m.Factory({Name:"RoyalGreatsword",Stars:4,Type:t.weapon.CLAYMORE,Scaling:o.WeaponScaling.TYPE_44,Substat:t.stat.ATK_PERCENT,Effects:[Bt("RoyalGreatsword1")]}),ml=m.Factory({Name:"SacrificialGreatsword",Stars:4,Type:t.weapon.CLAYMORE,Scaling:o.WeaponScaling.TYPE_44,Substat:t.stat.ENERGY_RECHARGE,Effects:[]}),Nl=m.Factory({Name:"SkyriderGreatsword",Type:t.weapon.CLAYMORE,Stars:3,Scaling:o.WeaponScaling.TYPE_39,Substat:t.stat.PHYSICAL_DMG,Effects:[r.Factory({Name:"SkyriderGreatsword1",MaxRank:5,MaxStacks:4,OnApply:new r.Builder().stat.Char(t.stat.ATK_PERCENT).Values(.06,.07,.08,.09,.1).Build()})]}),pl=m.Factory({Name:"SkywardPride",Stars:5,Type:t.weapon.CLAYMORE,Scaling:o.WeaponScaling.TYPE_48,Substat:t.stat.ENERGY_RECHARGE,Effects:[r.Factory({Name:"SkywardPride1",MaxRank:5,OnApply:new r.Builder().stat.Char(t.stat.ALL_DMG).Values(.08,.1,.12,.14,.16).Next().instance.Basic({Name:"HIT_SkywardPride",Element:t.stat.PHYSICAL_DMG,Stat:t.stat.ATK,Values:[.8,1,1.2,1.4,1.6]}).Build()})]}),ia=(e,a)=>r.Factory({Name:e,MaxRank:5,OnApply:new r.Builder().instance.Options({Name:a,Element:t.stat.PHYSICAL_DMG,Talent:t.stat.NONE,Scaling:[{Initial:0,Stat:t.stat.NONE,Talent:t.stat.NONE,Scaling:o.TalentScaling.NONE}]}).Next().Where({not:!0,enemy:{affected:[t.stat.CRYO_DMG]}}).mv.Mv(t.stat.ATK,.8,a).Map((s,n,i)=>[.8,.95,1.1,1.25,1.4][i.GetRank()-1]).Next().Where({enemy:{affected:[t.stat.CRYO_DMG]}}).mv.Mv(t.stat.ATK,2,a).Map((s,n,i)=>[2,2.4,2.8,3.2,3.6][i.GetRank()-1]).Build()}),Cl=m.Factory({Name:"SnowTombedStarsilver",Stars:4,Type:t.weapon.CLAYMORE,Scaling:o.WeaponScaling.TYPE_44,Substat:t.stat.PHYSICAL_DMG,Effects:[ia("SnowTombedStarsilver1","HIT_SnowTombedStarsilver")]}),Ml=m.Factory({Name:"TheBell",Stars:4,Type:t.weapon.CLAYMORE,Scaling:o.WeaponScaling.TYPE_42,Substat:t.stat.HP_PERCENT,Effects:[r.Factory({Name:"TheBell1",MaxRank:5,OnApply:new r.Builder().Where({target:{shielded:!0}}).stat.Char(t.stat.ALL_DMG).Values(.12,.15,.18,.21,.24).Build()})]}),re=e=>r.Factory({Name:e,MaxRank:5,MaxStacks:5,OnApply:new r.Builder().stat.Char(t.stat.ATK_PERCENT).Values(.04,.05,.06,.07,.08).Stacks().Next().Where({target:{shielded:!0}}).stat.Char(t.stat.ATK_PERCENT).Values(.04,.05,.06,.07,.08).Stacks().Build()}),dl=m.Factory({Name:"TheUnforged",Type:t.weapon.CLAYMORE,Stars:5,Scaling:o.WeaponScaling.TYPE_46,Substat:t.stat.ATK_PERCENT,Effects:[re("TheUnforged1")]}),gl=m.Factory({Name:"Whiteblind",Stars:4,Type:t.weapon.CLAYMORE,Scaling:o.WeaponScaling.TYPE_42,Substat:t.stat.DEF_PERCENT,Effects:[r.Factory({Name:"Whiteblind1",MaxRank:5,MaxStacks:4,OnApply:new r.Builder().stat.Char(t.stat.ATK_PERCENT,t.stat.DEF_PERCENT).Values(.06,.075,.09,.105,.12).Stacks().Build()})]}),Gl=m.Factory({Name:"WhiteIronGreatsword",Stars:3,Type:t.weapon.CLAYMORE,Scaling:o.WeaponScaling.TYPE_39,Substat:t.stat.DEF_PERCENT,Effects:[]}),Rl=m.Factory({Name:"WolfsGravestone",Stars:5,Type:t.weapon.CLAYMORE,Scaling:o.WeaponScaling.TYPE_46,Substat:t.stat.ATK_PERCENT,Effects:[r.Factory({Name:"WolfsGravestone1",MaxRank:5,OnApply:new r.Builder().stat.Char(t.stat.ATK_PERCENT).Values(.2,.25,.3,.35,.4).Build()}),r.Factory({Name:"WolfsGravestone2",MaxRank:5,ApplyOther:!0,OnApply:new r.Builder().stat.Char(t.stat.ATK_PERCENT).Values(.4,.5,.6,.7,.8).Build()})]}),Il=m.Factory({Name:"SerpentSpine",Stars:4,Type:t.weapon.CLAYMORE,Scaling:o.WeaponScaling.TYPE_42,Substat:t.stat.CRIT_RATE,Effects:[r.Factory({Name:"SerpentSpine1",MaxRank:5,MaxStacks:5,OnApply:new r.Builder().stat.Char(t.stat.ALL_DMG).Values(.06,.07,.08,.09,.1).Stacks().Build()})]}),Dl=m.Factory({Name:"FreedomSworn",Stars:5,Type:t.weapon.SWORD,Scaling:o.WeaponScaling.TYPE_46,Substat:t.stat.ELEMENTAL_MASTERY,Effects:[r.Factory({Name:"FreedomSworn1",MaxRank:5,OnApply:new r.Builder().stat.Char(t.stat.ALL_DMG).Values(.1,.125,.15,.175,.2).Build()}),na({Name:"FreedomSworn2",OnApply:new r.Builder().stat.Char(t.stat.NORMAL_ATTACK_DMG,t.stat.CHARGED_ATTACK_DMG,t.stat.PLUNGE_ATTACK_DMG).Values(.16,.2,.24,.28,.32).Next().stat.Char(t.stat.ATK_PERCENT).Values(.2,.25,.3,.35,.4).Build()})]}),Ol=m.Factory({Name:"LightOfFoliarIncision",Stars:5,Type:t.weapon.SWORD,Scaling:o.WeaponScaling.TYPE_44b,Substat:t.stat.CRIT_DMG,Effects:[r.Factory({Name:"LightOfFoliarIncision1",MaxRank:5,Conditions:["HIT_NORMAL"],MaxConditions:1,OnApply:new r.Builder().stat.Char(t.stat.CRIT_RATE).Values(.04,.05,.06,.07,.08).Next().observe.Target(t.stat.ELEMENTAL_MASTERY).Where({effect:{conditions:["HIT_NORMAL"]}}).stat.Char(t.stat.NORMAL_ATTACK_DMG_FLAT,t.stat.ELEMENTAL_SKILL_DMG_FLAT).Values(1.2,1.5,1.8,2.1,2.4).Map((e,a)=>e*a.GetCharacter().Get(t.stat.ELEMENTAL_MASTERY)).Build()})]}),yl=m.Factory({Name:"KeyOfKhajNisut",Stars:5,Type:t.weapon.SWORD,Scaling:o.WeaponScaling.TYPE_44b,Substat:t.stat.HP_PERCENT,Effects:[r.Factory({Name:"KeyOfKhajNisut1",MaxRank:5,OnApply:new r.Builder().stat.Char(t.stat.HP_PERCENT).Values(.2,.25,.3,.35,.4).Build()}),r.Factory({Name:"KeyOfKhajNisut2",MaxRank:5,MaxStacks:3,ApplyOther:!0,OnApply:new r.Builder().observe.Owner(t.stat.HP,t.stat.HP_PERCENT,t.stat.HP_FLAT).Where({target:{isOwner:!0}}).stat.Char(t.stat.ELEMENTAL_MASTERY).Values(.12,.15,.18,.21,.24).Stacks().Map((e,a)=>e*a.GetCharacter().Get(t.stat.HP)/100).Next().observe.Owner(t.stat.HP,t.stat.HP_PERCENT,t.stat.HP_FLAT).stat.Char(t.stat.ELEMENTAL_MASTERY).Stacks([0,0,0,.2],[0,0,0,.25],[0,0,0,.3],[0,0,0,.35],[0,0,0,.4]).Map((e,a,{Owner:s})=>e*s.GetCharacter().Get(t.stat.HP)/100).Build()})]}),vl=m.Factory({Name:"HaranGeppakuFutsu",Stars:5,Type:t.weapon.SWORD,Scaling:o.WeaponScaling.TYPE_46,Substat:t.stat.CRIT_RATE,Effects:[r.Factory({Name:"HaranGeppakuFutsu1",MaxRank:5,MaxStacks:2,OnApply:new r.Builder().stat.Char(...t.Elements.filter(e=>e!==t.stat.PHYSICAL_DMG)).Values(.12,.15,.18,.21,.24).Next().stat.Char(t.stat.NORMAL_ATTACK_DMG).Values(.2,.25,.3,.35,.4).Stacks().Build()})]}),Hl=m.Factory({Name:"MistsplitterReforged",Stars:5,Type:t.weapon.SWORD,Scaling:o.WeaponScaling.TYPE_48,Substat:t.stat.CRIT_DMG,Effects:[r.Factory({Name:"MistsplitterReforged1",MaxRank:5,MaxStacks:3,OnApply:new r.Builder().stat.Char(...t.Elements.filter(e=>e!==t.stat.PHYSICAL_DMG)).Values(.12,.15,.18,.21,.24).Next().stat.Char().MapStat(e=>[e.GetCharacter().Options.Element]).Stacks([0,.08,.16,.28],[0,.1,.2,.35],[0,.12,.24,.42],[0,.14,.28,.49],[0,.16,.32,.56]).Build()})]}),Pl=m.Factory({Name:"JadeCutter",Stars:5,Type:t.weapon.SWORD,Scaling:o.WeaponScaling.TYPE_44b,Substat:t.stat.CRIT_RATE,Effects:[r.Factory({Name:"JadeCutter1",MaxRank:5,OnApply:new r.Builder().stat.Char(t.stat.HP_PERCENT).Values(.2,.25,.3,.35,.4).Next().observe.Target(t.stat.HP_PERCENT,t.stat.HP_FLAT,t.stat.HP_BASE).stat.Char(t.stat.ATK_FLAT).Values(.012,.015,.018,.021,.024).Map((e,a)=>e*a.GetCharacter().Get(t.stat.HP)).Build()})]}),Bl=m.Factory({Name:"SummitShaper",Stars:5,Type:t.weapon.SWORD,Scaling:o.WeaponScaling.TYPE_46,Substat:t.stat.ATK_PERCENT,Effects:[re("SummitShaper1")]}),wl=m.Factory({Name:"AquilaFavonia",Type:t.weapon.SWORD,Stars:5,Scaling:o.WeaponScaling.TYPE_48,Substat:t.stat.PHYSICAL_DMG,Effects:[r.Factory({Name:"AquilaFavonia1",MaxRank:5,OnApply:new r.Builder().stat.Char(t.stat.ATK_PERCENT).Values(.2,.25,.3,.35,.4).Next().instance.Basic({Name:"HIT_AquilaFavonia",Element:t.stat.PHYSICAL_DMG,Stat:t.stat.ATK,Values:[2,2.3,2.6,2.9,3.2]}).Build()})]}),bl=m.Factory({Name:"ToukabouShigure",Stars:4,Type:t.weapon.SWORD,Scaling:o.WeaponScaling.TYPE_42,Substat:t.stat.ELEMENTAL_MASTERY,Effects:[r.Factory({Name:"ToukabouShigure1",MaxRank:5,OnApply:new r.Builder().stat.Char(t.stat.ALL_DMG).Values(.16,.2,.24,.28,.32).Build()})]}),Kl=m.Factory({Name:"XiphosMoonlight",Type:t.weapon.SWORD,Stars:4,Scaling:o.WeaponScaling.TYPE_42,Substat:t.stat.ELEMENTAL_MASTERY,Effects:[el("XiphosMoonlight1",t.stat.ENERGY_RECHARGE,[.036/100,.045/100,.054/100,.063/100,.072/100])]}),Yl=m.Factory({Name:"SapwoodBlade",Stars:4,Type:t.weapon.SWORD,Scaling:o.WeaponScaling.TYPE_44,Substat:t.stat.ENERGY_RECHARGE,Effects:[cl("SapwoodBlade1")]}),Fl=m.Factory({Name:"KagotsurubeIsshin",Stars:4,Type:t.weapon.SWORD,Scaling:o.WeaponScaling.TYPE_42,Substat:t.stat.ATK_PERCENT,Effects:[r.Factory({Name:"KagotsurubeIsshin1",MaxRank:5,OnApply:new r.Builder().instance.Basic({Name:"HIT_KagotsurubeIsshin",Element:t.stat.PHYSICAL_DMG,Stat:t.stat.ATK,Values:[1.8]}).Next().stat.Char(t.stat.ATK_PERCENT).Values(.15).Build()})]}),kl=m.Factory({Name:"CinnabarSpindle",Stars:4,Type:t.weapon.SWORD,Scaling:o.WeaponScaling.TYPE_41,Substat:t.stat.DEF_PERCENT,Effects:[r.Factory({Name:"CinnabarSpindle1",MaxRank:5,OnApply:new r.Builder().mv.Mv(t.stat.DEF,.4,e=>e.Options.Talent===t.stat.ELEMENTAL_SKILL_DMG).Map((e,a,s)=>[.4,.5,.6,.7,.8][s.GetRank()-1]).Build()})]}),Vl=m.Factory({Name:"AmenomaKageuchi",Stars:4,Type:t.weapon.SWORD,Scaling:o.WeaponScaling.TYPE_41,Substat:t.stat.ATK_PERCENT,Effects:[]}),xl=m.Factory({Name:"FesteringDesire",Stars:4,Type:t.weapon.SWORD,Scaling:o.WeaponScaling.TYPE_42,Substat:t.stat.ENERGY_RECHARGE,Effects:[r.Factory({Name:"FesteringDesire1",MaxRank:5,OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_SKILL_DMG).Values(.16,.2,.24,.28,.32).Next().stat.Char(t.stat.ELEMENTAL_SKILL_CRIT_RATE).Values(.06,.075,.09,.105,.12).Build()})]}),Ul=m.Factory({Name:"SwordOfDescension",Stars:4,Type:t.weapon.SWORD,Scaling:o.WeaponScaling.TYPE_39b,Substat:t.stat.ATK_PERCENT,Effects:[r.Factory({Name:"SwordOfDescension1",MaxRank:5,OnApply:new r.Builder().instance.Basic({Name:"HIT_SwordOfDescension",Element:t.stat.PHYSICAL_DMG,Stat:t.stat.ATK,Values:[2]}).Next().Where({target:{name:/traveler/i}}).stat.Char(t.stat.ATK_FLAT).Values(66).Build()})]}),Wl=m.Factory({Name:"TheAlleyFlash",Stars:4,Type:t.weapon.SWORD,Scaling:o.WeaponScaling.TYPE_44,Substat:t.stat.ELEMENTAL_MASTERY,Effects:[r.Factory({Name:"TheAlleyFlash1",MaxRank:5,OnApply:new r.Builder().stat.Char(t.stat.ALL_DMG).Values(.12,.15,.18,.21,.24).Build()})]}),jl=m.Factory({Name:"BlackcliffLongsword",Stars:4,Type:t.weapon.SWORD,Scaling:o.WeaponScaling.TYPE_44,Substat:t.stat.CRIT_DMG,Effects:[Pt("BlackcliffLongsword1")]}),zl=m.Factory({Name:"IronSting",Stars:4,Type:t.weapon.SWORD,Scaling:o.WeaponScaling.TYPE_42,Substat:t.stat.ELEMENTAL_MASTERY,Effects:[r.Factory({Name:"IronSting1",MaxRank:5,MaxStacks:2,OnApply:new r.Builder().stat.Char(t.stat.ALL_DMG).Values(.06,.075,.09,.105,.12).Stacks().Build()})]}),ql=m.Factory({Name:"PrototypeRancour",Stars:4,Type:t.weapon.SWORD,Scaling:o.WeaponScaling.TYPE_44,Substat:t.stat.PHYSICAL_DMG,Effects:[r.Factory({Name:"PrototypeRancour1",MaxRank:5,MaxStacks:4,OnApply:new r.Builder().stat.Char(t.stat.ATK_PERCENT,t.stat.DEF_PERCENT).Values(.04,.05,.06,.07,.08).Stacks().Build()})]}),Ql=m.Factory({Name:"LionsRoar",Stars:4,Type:t.weapon.SWORD,Scaling:o.WeaponScaling.TYPE_42,Substat:t.stat.ATK_PERCENT,Effects:[r.Factory({Name:"LionsRoar1",MaxRank:5,OnApply:new r.Builder().Where({enemy:{affected:[t.stat.PYRO_DMG,t.stat.ELECTRO_DMG]}}).stat.Char(t.stat.ALL_DMG).Values(.2,.24,.28,.32,.36).Build()})]}),$l=m.Factory({Name:"TheFlute",Stars:4,Type:t.weapon.SWORD,Scaling:o.WeaponScaling.TYPE_42,Substat:t.stat.ATK_PERCENT,Effects:[r.Factory({Name:"TheFlute1",MaxRank:5,OnApply:new r.Builder().instance.Basic({Name:"HIT_TheFlute",Element:t.stat.PHYSICAL_DMG,Stat:t.stat.ATK,Values:[1,1.25,1.5,1.75,2]}).Build()})]}),Xl=m.Factory({Name:"RoyalGrimoire",Type:t.weapon.CATALYST,Stars:4,Scaling:o.WeaponScaling.TYPE_44,Substat:t.stat.ATK_PERCENT,Effects:[Bt("RoyalGrimoire1")]}),Jl=m.Factory({Name:"RoyalSpear",Stars:4,Type:t.weapon.POLEARM,Scaling:o.WeaponScaling.TYPE_44,Substat:t.stat.ATK_PERCENT,Effects:[Bt("RoyalSpear1")]}),Zl=m.Factory({Name:"RoyalBow",Stars:4,Type:t.weapon.BOW,Scaling:o.WeaponScaling.TYPE_42,Substat:t.stat.ATK_PERCENT,Effects:[Bt("RoyalBow1")]}),to=m.Factory({Name:"RoyalLongsword",Stars:4,Type:t.weapon.SWORD,Scaling:o.WeaponScaling.TYPE_42,Substat:t.stat.ATK_PERCENT,Effects:[Bt("RoyalLongsword1")]}),eo=m.Factory({Name:"SkyriderSword",Stars:3,Type:t.weapon.SWORD,Scaling:o.WeaponScaling.TYPE_38,Substat:t.stat.ENERGY_RECHARGE,Effects:[r.Factory({Name:"SkyriderSword1",MaxRank:5,OnApply:new r.Builder().stat.Char(t.stat.ATK_PERCENT).Values(.12,.15,.18,.21,.24).Build()})]}),ao=m.Factory({Name:"DarkIronSword",Stars:3,Type:t.weapon.SWORD,Scaling:o.WeaponScaling.TYPE_39,Substat:t.stat.ELEMENTAL_MASTERY,Effects:[r.Factory({Name:"DarkIronSword1",MaxRank:5,OnApply:new r.Builder().stat.Char(t.stat.ATK_PERCENT).Values(.2,.25,.3,.35,.4).Build()})]}),so=m.Factory({Name:"FilletBlade",Stars:3,Type:t.weapon.SWORD,Scaling:o.WeaponScaling.TYPE_39,Substat:t.stat.ATK_PERCENT,Effects:[r.Factory({Name:"FilletBlade1",MaxRank:5,OnApply:new r.Builder().instance.Basic({Name:"HIT_FilletBlade",Element:t.stat.PHYSICAL_DMG,Stat:t.stat.ATK,Values:[2.4,2.8,3.2,3.6,4]}).Build()})]}),no=m.Factory({Name:"TravelersHandySword",Stars:3,Type:t.weapon.SWORD,Scaling:o.WeaponScaling.TYPE_40,Substat:t.stat.DEF_PERCENT,Effects:[]}),io=m.Factory({Name:"HarbingerOfDawn",Stars:3,Type:t.weapon.SWORD,Scaling:o.WeaponScaling.TYPE_39,Substat:t.stat.CRIT_DMG,Effects:[r.Factory({Name:"HarbingerOfDawn1",MaxRank:5,OnApply:new r.Builder().Where({target:{hp:{geq:.9}}}).stat.Char(t.stat.CRIT_RATE).Values(.14,.175,.21,.245,.28).Build()})]}),ro=m.Factory({Name:"CoolSteel",Stars:3,Type:t.weapon.SWORD,Scaling:o.WeaponScaling.TYPE_39,Substat:t.stat.ATK_PERCENT,Effects:[r.Factory({Name:"CoolSteel1",MaxRank:5,OnApply:new r.Builder().Where({enemy:{affected:[t.stat.CRYO_DMG,t.stat.HYDRO_DMG]}}).stat.Char(t.stat.ALL_DMG).Values(.12,.15,.18,.21,.24).Build()})]}),lo=m.Factory({Name:"HuntersPath",Stars:5,Type:t.weapon.BOW,Scaling:o.WeaponScaling.TYPE_44b,Substat:t.stat.CRIT_RATE,Effects:[r.Factory({Name:"HuntersPath1",MaxRank:5,Conditions:["HIT_CHARGED"],MaxConditions:1,OnApply:new r.Builder().stat.Char(...t.Elements.filter(e=>e!==t.stat.PHYSICAL_DMG)).Values(.12,.15,.18,.21,.24).Next().observe.Target(t.stat.ELEMENTAL_MASTERY).Where({effect:{conditions:["HIT_CHARGED"]}}).stat.Char(t.stat.CHARGED_ATTACK_DMG_FLAT).Values(1.6,2,2.4,2.8,3.2).Map((e,a)=>e*a.GetCharacter().Get(t.stat.ELEMENTAL_MASTERY)).Build()})]}),oo=m.Factory({Name:"ThunderingPulse",Stars:5,Type:t.weapon.BOW,Scaling:o.WeaponScaling.TYPE_48,Substat:t.stat.CRIT_DMG,Effects:[r.Factory({Name:"ThunderingPulse1",MaxRank:5,MaxStacks:3,OnApply:new r.Builder().stat.Char(t.stat.ATK_PERCENT).Values(.2,.25,.3,.35,.4).Next().stat.Char(t.stat.NORMAL_ATTACK_DMG).Stacks([0,.12,.24,.4],[0,.15,.3,.5],[0,.18,.36,.6],[0,.21,.42,.7],[0,.24,.48,.8]).Build()})]}),co=m.Factory({Name:"AquaSimulacra",Stars:5,Type:t.weapon.BOW,Scaling:o.WeaponScaling.TYPE_44b,Substat:t.stat.CRIT_DMG,Effects:[r.Factory({Name:"AquaSimulacra1",MaxRank:5,Conditions:["FAR","NEAR"],MaxConditions:1,OnApply:new r.Builder().stat.Char(t.stat.HP_PERCENT).Values(.16,.2,.24,.28,.32).Next().Where({effect:{conditions:["NEAR"]}}).stat.Char(t.stat.ALL_DMG).Values(.2,.25,.3,.35,.4).Build()})]}),Eo=m.Factory({Name:"PolarStar",Stars:5,Type:t.weapon.BOW,Scaling:o.WeaponScaling.TYPE_46,Substat:t.stat.CRIT_RATE,Effects:[r.Factory({Name:"PolarStar1",MaxRank:5,MaxStacks:4,OnApply:new r.Builder().stat.Char(t.stat.ATK_PERCENT).Stacks([0,.1,.2,.3,.48],[0,.125,.25,.375,.6],[0,.15,.3,.45,.72],[0,.175,.35,.525,.84],[0,.2,.4,.6,.96]).Build()})]}),To=m.Factory({Name:"AmosBow",Stars:5,Type:t.weapon.BOW,Scaling:o.WeaponScaling.TYPE_46,Substat:t.stat.ATK_PERCENT,Effects:[r.Factory({Name:"AmosBow1",MaxRank:5,MaxStacks:5,OnApply:new r.Builder().stat.Char(t.stat.NORMAL_ATTACK_DMG,t.stat.CHARGED_ATTACK_DMG).Values(.12,.15,.18,.21,.24).Next().stat.Char(t.stat.NORMAL_ATTACK_DMG,t.stat.CHARGED_ATTACK_DMG).Values(.08,.1,.12,.14,.16).Stacks().Build()})]}),_o=m.Factory({Name:"EndOfTheLine",Stars:4,Type:t.weapon.BOW,Scaling:o.WeaponScaling.TYPE_42,Substat:t.stat.ENERGY_RECHARGE,Effects:[r.Factory({Name:"EndOfTheLine1",MaxRank:5,OnApply:new r.Builder().instance.Basic({Name:"HIT_EndOfTheLine",Element:t.stat.PHYSICAL_DMG,Stat:t.stat.ATK,Values:[.8,1,1.2,1.4,1.6]}).Build()})]}),Ao=m.Factory({Name:"KingsSquire",Type:t.weapon.BOW,Stars:4,Scaling:o.WeaponScaling.TYPE_41,Substat:t.stat.ATK_PERCENT,Effects:[r.Factory({Name:"KingsSquire1",MaxRank:5,OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_MASTERY).Values(60,80,100,120,140).Next().instance.Basic({Name:"HIT_KingsSquire",Element:t.stat.PHYSICAL_DMG,Stat:t.stat.ATK,Values:[1,1.2,1.4,1.6,1.8]}).Build()})]}),uo=m.Factory({Name:"MouunsMoon",Type:t.weapon.BOW,Stars:4,Scaling:o.WeaponScaling.TYPE_44,Substat:t.stat.ATK_PERCENT,Effects:[aa("MouunsMoon1")]}),So=m.Factory({Name:"Predator",Stars:4,Type:t.weapon.BOW,Scaling:o.WeaponScaling.TYPE_42,Substat:t.stat.ATK_PERCENT,Effects:[r.Factory({Name:"Predator1",MaxRank:5,MaxStacks:2,OnApply:new r.Builder().stat.Char(t.stat.NORMAL_ATTACK_DMG,t.stat.CHARGED_ATTACK_DMG).Values(.1).Stacks().Next().Where({target:{name:"Aloy"}}).stat.Char(t.stat.ATK_FLAT).Values(66).Build()})]}),ho=m.Factory({Name:"Hamayumi",Stars:4,Type:t.weapon.BOW,Scaling:o.WeaponScaling.TYPE_41,Substat:t.stat.ATK_PERCENT,Effects:[r.Factory({Name:"Hamayumi1",MaxRank:5,OnApply:new r.Builder().stat.Char(t.stat.NORMAL_ATTACK_DMG).Values(.16,.2,.24,.28,.32).Next().stat.Char(t.stat.CHARGED_ATTACK_DMG).Values(.12,.15,.18,.21,.24).Next().Where({target:{energy:{geq:1}}}).stat.Char(t.stat.NORMAL_ATTACK_DMG).Values(.16,.2,.24,.28,.32).Next().Where({target:{energy:{geq:1}}}).stat.Char(t.stat.CHARGED_ATTACK_DMG).Values(.12,.15,.18,.21,.24).Next().Build()})]}),Lo=m.Factory({Name:"WindblumeOde",Stars:4,Type:t.weapon.BOW,Scaling:o.WeaponScaling.TYPE_42,Substat:t.stat.ELEMENTAL_MASTERY,Effects:[r.Factory({Name:"WindblumeOde1",MaxRank:5,OnApply:new r.Builder().stat.Char(t.stat.ATK_PERCENT).Values(.16,.2,.24,.28,.32).Build()})]}),fo=m.Factory({Name:"MitternachtsWaltz",Stars:4,Type:t.weapon.BOW,Scaling:o.WeaponScaling.TYPE_42,Substat:t.stat.PHYSICAL_DMG,Effects:[r.Factory({Name:"MitternachtsWaltz1",MaxRank:5,Conditions:["HIT_NORMAL","HIT_SKILL"],MaxConditions:2,OnApply:new r.Builder().Where({effect:{conditions:["HIT_NORMAL"]}}).stat.Char(t.stat.ELEMENTAL_SKILL_DMG).Values(.2,.25,.3,.35,.4).Next().Where({effect:{conditions:["HIT_SKILL"]}}).stat.Char(t.stat.NORMAL_ATTACK_DMG).Values(.2,.25,.3,.35,.4).Build()})]}),mo=m.Factory({Name:"FadingTwilight",Stars:4,Type:t.weapon.BOW,Scaling:o.WeaponScaling.TYPE_44,Substat:t.stat.ENERGY_RECHARGE,Effects:[r.Factory({Name:"FadingTwilight1",MaxRank:5,MaxStacks:3,OnApply:new r.Builder().stat.Char(t.stat.ALL_DMG).Stacks([0,.06,.1,.14],[0,.075,.125,.175],[0,.09,.15,.21],[0,.105,.175,.245],[0,.12,.2,.28]).Build()})]}),No=m.Factory({Name:"AlleyHunter",Stars:4,Type:t.weapon.BOW,Scaling:o.WeaponScaling.TYPE_44,Substat:t.stat.ATK_PERCENT,Effects:[r.Factory({Name:"AlleyHunter1",MaxRank:5,MaxStacks:10,OnApply:new r.Builder().stat.Char(t.stat.ALL_DMG).Values(.02,.025,.03,.035,.04).Stacks().Build()})]}),po=m.Factory({Name:"TheViridescentHunt",Stars:4,Type:t.weapon.BOW,Scaling:o.WeaponScaling.TYPE_42,Substat:t.stat.CRIT_RATE,Effects:[r.Factory({Name:"TheViridescentHunt1",MaxRank:5,OnApply:new r.Builder().instance.Basic({Name:"HIT_TheViridescentHunt",Element:t.stat.PHYSICAL_DMG,Stat:t.stat.ATK,Values:[.4,.5,.6,.7,.8]}).Build()})]}),Co=m.Factory({Name:"CompoundBow",Stars:4,Type:t.weapon.BOW,Scaling:o.WeaponScaling.TYPE_41,Substat:t.stat.PHYSICAL_DMG,Effects:[r.Factory({Name:"CompoundBow1",MaxRank:5,MaxStacks:4,OnApply:new r.Builder().stat.Char(t.stat.ATK_PERCENT).Values(.04,.05,.06,.07,.08).Stacks().Build()})]}),Mo=m.Factory({Name:"PrototypeCrescent",Stars:4,Type:t.weapon.BOW,Scaling:o.WeaponScaling.TYPE_42,Substat:t.stat.ATK_PERCENT,Effects:[r.Factory({Name:"PrototypeCrescent1",MaxRank:5,OnApply:new r.Builder().stat.Char(t.stat.ATK_PERCENT).Values(.36,.45,.54,.63,.72).Build()})]}),go=m.Factory({Name:"Rust",Type:t.weapon.BOW,Stars:4,Scaling:o.WeaponScaling.TYPE_42,Substat:t.stat.ATK_PERCENT,Effects:[r.Factory({Name:"Rust1",MaxRank:5,OnApply:new r.Builder().stat.Char(t.stat.NORMAL_ATTACK_DMG).Values(.4,.5,.6,.7,.8).Next().stat.Char(t.stat.CHARGED_ATTACK_DMG).Values(-.1).Build()})]}),Go=m.Factory({Name:"SacrificialBow",Type:t.weapon.BOW,Stars:4,Scaling:o.WeaponScaling.TYPE_44,Substat:t.stat.ENERGY_RECHARGE,Effects:[]}),Ro=m.Factory({Name:"TheStringless",Stars:4,Type:t.weapon.BOW,Scaling:o.WeaponScaling.TYPE_42,Substat:t.stat.ELEMENTAL_MASTERY,Effects:[r.Factory({Name:"TheStringless1",MaxRank:5,OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_SKILL_DMG,t.stat.ELEMENTAL_BURST_DMG).Values(.24,.3,.36,.42,.48).Build()})]}),Io=m.Factory({Name:"Messenger",Type:t.weapon.BOW,Stars:3,Scaling:o.WeaponScaling.TYPE_40,Substat:t.stat.CRIT_DMG,Effects:[r.Factory({Name:"Messenger1",MaxRank:5,OnApply:new r.Builder().instance.Basic({Name:"HIT_Messenger",Element:t.stat.PHYSICAL_DMG,Stat:t.stat.ATK,Values:[1,1.25,1.5,1.75,2]}).Build()})]}),Do=m.Factory({Name:"Slingshot",Stars:3,Type:t.weapon.BOW,Scaling:o.WeaponScaling.TYPE_38,Substat:t.stat.CRIT_RATE,Effects:[r.Factory({Name:"Slingshot1",MaxRank:5,Conditions:["FAR","NEAR"],MaxConditions:1,OnApply:new r.Builder().Where({effect:{conditions:["FAR"]}}).stat.Char(t.stat.NORMAL_ATTACK_DMG,t.stat.CHARGED_ATTACK_DMG).Values(.36,.42,.48,.54,.6).Next().Where({effect:{conditions:["NEAR"]}}).stat.Char(t.stat.NORMAL_ATTACK_DMG,t.stat.CHARGED_ATTACK_DMG).Values(-.1).Build()})]}),Oo=m.Factory({Name:"RecurveBow",Stars:3,Type:t.weapon.BOW,Scaling:o.WeaponScaling.TYPE_38,Substat:t.stat.HP_PERCENT,Effects:[]}),yo=m.Factory({Name:"SharpshootersOath",Stars:3,Type:t.weapon.BOW,Scaling:o.WeaponScaling.TYPE_39,Substat:t.stat.CRIT_DMG,Effects:[r.Factory({Name:"SharpshootersOath1",Conditions:["WEAK_SPOT"],MaxConditions:1,MaxRank:5,OnApply:new r.Builder().Where({effect:{conditions:["WEAK_SPOT"]}}).stat.Char(t.stat.AIMED_SHOT_DMG).Values(.24,.3,.36,.42,.48).Build()})]}),vo=m.Factory({Name:"RavenBow",Stars:3,Type:t.weapon.BOW,Scaling:o.WeaponScaling.TYPE_40,Substat:t.stat.ELEMENTAL_MASTERY,Effects:[r.Factory({Name:"RavenBow1",MaxRank:5,OnApply:new r.Builder().Where({enemy:{affected:[t.stat.PYRO_DMG,t.stat.ELECTRO_DMG]}}).stat.Char(t.stat.ALL_DMG).Values(.12,.15,.18,.21,.24).Build()})]}),Ho=m.Factory({Name:"TulaytullahsRemembrance",Stars:5,Type:t.weapon.CATALYST,Scaling:o.WeaponScaling.TYPE_48,Substat:t.stat.CRIT_DMG,Effects:[r.Factory({Name:"TulaytullahsRemembrance1",MaxRank:5,MaxStacks:10,OnApply:new r.Builder().stat.Char(t.stat.NORMAL_ATTACK_DMG).Values(.048,.06,.072,.084,.096).Stacks().Build()})]}),Po=m.Factory({Name:"ThousandFloatingDreams",Type:t.weapon.CATALYST,Stars:5,Scaling:o.WeaponScaling.TYPE_44b,Substat:t.stat.ELEMENTAL_MASTERY,Effects:[r.Factory({Name:"ThousandFloatingDreams1",MaxRank:5,OnApply(e,a,s){const n=e.GetCharacter(),i=s.Modifier(n.CreateModifier(t.stat.ELEMENTAL_MASTERY,0)),l=[s.Modifier(n.CreateModifier(n.Options.Element,0)),s.Modifier(n.CreateModifier(n.Options.Element,0)),s.Modifier(n.CreateModifier(n.Options.Element,0))];function E(){l.forEach(h=>h.SetValue(0));let _=[n];const A=e.GetParty();A&&(_=A.GetMembers().map(h=>h.GetCharacter()));let u=0,S=0;for(const h of _)if(h!==n)if(h.Options.Element===n.Options.Element)u++;else{const L=l[S++];if(!L)continue;L.SetProp(h.Options.Element),L.SetValue(lm[a.GetRank()-1])}u=Math.min(3,u),i.SetValue(rm[a.GetRank()-1]*u)}return E(),s.Observer(e.Event.CreateObserver(G.CharboxEvent.CHANGE_PARTY,E)),s.Observer(a.Event.CreateObserver(r.EffectEvent.CHANGE_RANK,E)),()=>0}}),r.Factory({Name:"ThousandFloatingDreams2",MaxRank:5,ApplyOther:!0,ApplySelf:!1,StackSelf:!0,OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_MASTERY).Values(40,42,44,46,48).Build()})]}),rm=[32,40,48,56,64],lm=[.1,.14,.18,.22,.26],Bo=m.Factory({Name:"WanderingEvenstar",Stars:4,Type:t.weapon.CATALYST,Scaling:o.WeaponScaling.TYPE_42,Substat:t.stat.ELEMENTAL_MASTERY,Effects:[r.Factory({Name:"WanderingEvenstar1",StackSelf:!0,ApplyOther:!0,MaxRank:5,OnApply:new r.Builder().observe.Owner(t.stat.ELEMENTAL_MASTERY).stat.Char(t.stat.ATK_FLAT).Values(.24,.3,.36,.42,.48).Map((e,a,s)=>e*s.Owner.GetCharacter().Get(t.stat.ELEMENTAL_MASTERY)*(a===s.Owner?1:.3)).Build()})]}),wo=m.Factory({Name:"KagurasVerity",Stars:5,Type:t.weapon.CATALYST,Scaling:o.WeaponScaling.TYPE_46,Substat:t.stat.CRIT_DMG,Effects:[r.Factory({Name:"KagurasVerity1",MaxRank:5,MaxStacks:3,OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_SKILL_DMG).Values(.12,.15,.18,.21,.24).Stacks().Next().stat.Char(...t.Elements.filter(e=>e!==t.stat.PHYSICAL_DMG)).Stacks([0,0,0,.12],[0,0,0,.15],[0,0,0,.18],[0,0,0,.21],[0,0,0,.24]).Build()})]}),bo=m.Factory({Name:"EverlastingMoonglow",Stars:5,Type:t.weapon.CATALYST,Scaling:o.WeaponScaling.TYPE_46,Substat:t.stat.HP_PERCENT,Effects:[r.Factory({Name:"EverlastingMoonglow1",MaxRank:5,OnApply:new r.Builder().stat.Char(t.stat.HEALING_BONUS).Values(.1,.125,.15,.175,.2).Next().observe.Target(t.stat.HP_PERCENT,t.stat.HP_BASE,t.stat.HP_FLAT).stat.Char(t.stat.NORMAL_ATTACK_DMG_FLAT).Values(.01,.015,.02,.025,.03).Map((e,a)=>e*a.GetCharacter().Get(t.stat.HP)).Build()})]}),Ko=m.Factory({Name:"MemoryOfDust",Stars:5,Type:t.weapon.CATALYST,Scaling:o.WeaponScaling.TYPE_46,Substat:t.stat.ATK_PERCENT,Effects:[re("MemoryOfDust1")]}),Yo=m.Factory({Name:"LostPrayer",Stars:5,Type:t.weapon.CATALYST,Scaling:o.WeaponScaling.TYPE_48,Substat:t.stat.CRIT_RATE,Effects:[r.Factory({Name:"LostPrayer1",MaxRank:5,MaxStacks:4,OnApply:new r.Builder().stat.Char(...t.Elements.filter(e=>e!==t.stat.PHYSICAL_DMG)).Values(.08,.1,.12,.14,.16).Stacks().Build()})]}),Fo=m.Factory({Name:"SkywardAtlas",Stars:5,Type:t.weapon.CATALYST,Scaling:o.WeaponScaling.TYPE_48,Substat:t.stat.ATK_PERCENT,Effects:[r.Factory({Name:"SkywardAtlas1",MaxRank:5,OnApply:new r.Builder().stat.Char(...t.Elements.filter(e=>e!==t.stat.PHYSICAL_DMG)).Values(.12,.15,.18,.21,.24).Next().instance.Basic({Name:"HIT_SkywardAtlas",Element:t.stat.PHYSICAL_DMG,Stat:t.stat.ATK,Values:[1.6,2,2.4,4.8,3.2]}).Build()})]}),ko=m.Factory({Name:"FruitOfFulfillment",Stars:4,Type:t.weapon.CATALYST,Scaling:o.WeaponScaling.TYPE_42,Substat:t.stat.ENERGY_RECHARGE,Effects:[r.Factory({Name:"FruitOfFulfillment1",MaxRank:5,MaxStacks:5,OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_MASTERY).Values(24,27,30,33,36).Stacks().Next().stat.Char(t.stat.ATK_PERCENT).Values(-.05).Stacks().Build()})]}),Vo=m.Factory({Name:"OathswornEye",Stars:4,Type:t.weapon.CATALYST,Scaling:o.WeaponScaling.TYPE_44,Substat:t.stat.ATK_PERCENT,Effects:[r.Factory({Name:"OathswornEye1",MaxRank:5,OnApply:new r.Builder().stat.Char(t.stat.ENERGY_RECHARGE).Values(.24,.3,.36,.42,.48).Build()})]}),xo=m.Factory({Name:"HakushinRing",Stars:4,Type:t.weapon.CATALYST,Scaling:o.WeaponScaling.TYPE_44,Substat:t.stat.ENERGY_RECHARGE,Effects:[r.Factory({Name:"HakushinRing1",ApplyOther:!0,MaxRank:5,OnApply:new r.Builder().stat.Char().MapStat(e=>[e.GetCharacter().Options.Element]).Values(.1,.125,.15,.175,.2).Build()})]}),Uo=m.Factory({Name:"DodocoTales",Stars:4,Type:t.weapon.CATALYST,Scaling:o.WeaponScaling.TYPE_41,Substat:t.stat.ATK_PERCENT,Effects:[r.Factory({Name:"DodocoTales1",MaxRank:5,Conditions:["HIT_NORMAL","HIT_CHARGED"],MaxConditions:2,OnApply:new r.Builder().Where({effect:{conditions:["HIT_NORMAL"]}}).stat.Char(t.stat.CHARGED_ATTACK_DMG).Values(.16,.2,.24,.28,.32).Next().Where({effect:{conditions:["HIT_CHARGED"]}}).stat.Char(t.stat.ATK_PERCENT).Values(.08,.1,.12,.14,.16).Next().Build()})]}),Wo=m.Factory({Name:"Frostbearer",Stars:4,Type:t.weapon.CATALYST,Scaling:o.WeaponScaling.TYPE_42,Substat:t.stat.ATK_PERCENT,Effects:[ia("Frostbearer1","HIT_Frostbearer")]}),jo=m.Factory({Name:"EyeOfPerception",Stars:4,Type:t.weapon.CATALYST,Scaling:o.WeaponScaling.TYPE_41,Substat:t.stat.ATK_PERCENT,Effects:[r.Factory({Name:"EyeOfPerception1",MaxRank:5,OnApply:new r.Builder().instance.Basic({Name:"HIT_EyeOfPerception",Element:t.stat.PHYSICAL_DMG,Stat:t.stat.ATK,Values:[2.4,2.7,3,3.3,3.6]}).Build()})]}),zo=m.Factory({Name:"BlackcliffAgate",Stars:4,Type:t.weapon.CATALYST,Scaling:o.WeaponScaling.TYPE_42,Substat:t.stat.CRIT_DMG,Effects:[Pt("BlackcliffAgate1")]}),qo=m.Factory({Name:"MappaMare",Stars:4,Type:t.weapon.CATALYST,Scaling:o.WeaponScaling.TYPE_42,Substat:t.stat.ELEMENTAL_MASTERY,Effects:[r.Factory({Name:"MappaMare1",MaxRank:5,MaxStacks:2,OnApply:new r.Builder().stat.Char(...t.Elements.filter(e=>e!==t.stat.PHYSICAL_DMG)).Values(.08,.1,.12,.14,.16).Stacks().Build()})]}),Qo=m.Factory({Name:"PrototypeAmber",Stars:4,Type:t.weapon.CATALYST,Scaling:o.WeaponScaling.TYPE_42,Substat:t.stat.HP_PERCENT,Effects:[]}),$o=m.Factory({Name:"SolarPearl",Stars:4,Type:t.weapon.CATALYST,Scaling:o.WeaponScaling.TYPE_42,Substat:t.stat.CRIT_RATE,Effects:[r.Factory({Name:"SolarPearl1",MaxRank:5,Conditions:["HIT_NORMAL","HIT_SKILL"],MaxConditions:2,OnApply:new r.Builder().Where({effect:{conditions:["HIT_NORMAL"]}}).stat.Char(t.stat.ELEMENTAL_SKILL_DMG,t.stat.ELEMENTAL_BURST_DMG).Values(.2,.25,.3,.35,.4).Next().Where({effect:{conditions:["HIT_SKILL"]}}).stat.Char(t.stat.NORMAL_ATTACK_DMG).Values(.2,.25,.3,.35,.4).Next().Build()})]}),Xo=m.Factory({Name:"SacrificialFragments",Type:t.weapon.CATALYST,Stars:4,Scaling:o.WeaponScaling.TYPE_41,Substat:t.stat.ELEMENTAL_MASTERY,Effects:[]}),Jo=m.Factory({Name:"FavoniusCodex",Stars:4,Type:t.weapon.CATALYST,Scaling:o.WeaponScaling.TYPE_42,Substat:t.stat.ENERGY_RECHARGE,Effects:[]}),Zo=m.Factory({Name:"AmberBead",Stars:3,Type:t.weapon.CATALYST,Scaling:o.WeaponScaling.TYPE_39,Substat:t.stat.ELEMENTAL_MASTERY,Effects:[r.Factory({Name:"AmberBead1",MaxRank:5,MaxStacks:2,OnApply:new r.Builder().stat.Char(...t.Elements.filter(e=>e!==t.stat.PHYSICAL_DMG)).Values(.06,.075,.09,.105,.12).Stacks().Build()})]}),tc=m.Factory({Name:"TwinNephrite",Stars:3,Type:t.weapon.CATALYST,Scaling:o.WeaponScaling.TYPE_40,Substat:t.stat.CRIT_RATE,Effects:[r.Factory({Name:"TwinNephrite1",MaxRank:5,OnApply:new r.Builder().stat.Char(t.stat.ATK_PERCENT).Values(.12,.14,.16,.18,.2).Build()})]}),ec=m.Factory({Name:"EmeraldOrb",Stars:3,Type:t.weapon.CATALYST,Scaling:o.WeaponScaling.TYPE_40,Substat:t.stat.ELEMENTAL_MASTERY,Effects:[r.Factory({Name:"EmeraldOrb1",MaxRank:5,OnApply:new r.Builder().stat.Char(t.stat.ATK_PERCENT).Values(.2,.25,.3,.35,.4).Build()})]}),ac=m.Factory({Name:"OtherworldlyStory",Stars:3,Type:t.weapon.CATALYST,Scaling:o.WeaponScaling.TYPE_39,Substat:t.stat.ENERGY_RECHARGE,Effects:[]}),sc=m.Factory({Name:"ThrillingTalesOfDragonSlayers",Stars:3,Type:t.weapon.CATALYST,Scaling:o.WeaponScaling.TYPE_39,Substat:t.stat.HP_PERCENT,Effects:[r.Factory({Name:"ThrillingTalesOfDragonSlayers1",MaxRank:5,ApplySelf:!1,ApplyOther:!0,MaxTargets:1,OnApply:new r.Builder().stat.Char(t.stat.ATK_PERCENT).Values(.24,.3,.36,.42,.48).Build()})]}),nc=m.Factory({Name:"MagicGuide",Type:t.weapon.CATALYST,Stars:3,Scaling:o.WeaponScaling.TYPE_38,Substat:t.stat.ELEMENTAL_MASTERY,Effects:[r.Factory({Name:"MagicGuide1",MaxRank:5,OnApply:new r.Builder().Where({enemy:{affected:[t.stat.HYDRO_DMG,t.stat.ELECTRO_DMG]}}).stat.Char(t.stat.ALL_DMG).Values(.12,.15,.18,.21,.24).Build()})]}),ic=m.Factory({Name:"StaffOfTheScarletSands",Stars:5,Type:t.weapon.POLEARM,Scaling:o.WeaponScaling.TYPE_44b,Substat:t.stat.CRIT_RATE,Effects:[r.Factory({Name:"StaffOfTheScarletSands1",MaxRank:5,MaxStacks:3,OnApply:new r.Builder().observe.Target(t.stat.ELEMENTAL_MASTERY).stat.Char(t.stat.ATK_FLAT).Values(.52,.65,.78,.91,1.04).Map((e,a)=>e*a.GetCharacter().Get(t.stat.ELEMENTAL_MASTERY)).Next().observe.Target(t.stat.ELEMENTAL_MASTERY).stat.Char(t.stat.ATK_FLAT).Values(.28,.35,.42,.49,.56).Stacks().Map((e,a)=>e*a.GetCharacter().Get(t.stat.ELEMENTAL_MASTERY)).Next().Build()})]}),rc=m.Factory({Name:"CalamityQueller",Stars:5,Type:t.weapon.POLEARM,Scaling:o.WeaponScaling.TYPE_49,Substat:t.stat.ATK_PERCENT,Effects:[r.Factory({Name:"CalamityQueller1",MaxRank:5,MaxStacks:6,Conditions:["ON_FIELD","OFF_FIELD"],MaxConditions:1,OnApply:new r.Builder().stat.Char(...t.Elements.filter(e=>e!==t.stat.PHYSICAL_DMG)).Values(.12,.15,.18,.21,.24).Next().stat.Char(t.stat.ATK_PERCENT).Values(.032,.04,.048,.056,.064).Stacks().Next().Where({effect:{conditions:["OFF_FIELD"]}}).stat.Char(t.stat.ATK_PERCENT).Values(.032,.04,.048,.056,.064).Stacks().Next().Build()})]}),lc=m.Factory({Name:"JadeSpear",Stars:5,Type:t.weapon.POLEARM,Scaling:o.WeaponScaling.TYPE_48,Substat:t.stat.CRIT_RATE,Effects:[r.Factory({Name:"JadeSpear1",MaxRank:5,MaxStacks:7,OnApply:new r.Builder().stat.Char(t.stat.ATK_PERCENT).Values(.032,.039,.046,.053,.06).Stacks().Next().stat.Char(t.stat.ALL_DMG).Stacks([0,0,0,0,0,0,0,.12],[0,0,0,0,0,0,0,.15],[0,0,0,0,0,0,0,.18],[0,0,0,0,0,0,0,.21],[0,0,0,0,0,0,0,.24]).Build()})]}),oc=m.Factory({Name:"VortexVanquisher",Stars:5,Type:t.weapon.POLEARM,Scaling:o.WeaponScaling.TYPE_46,Substat:t.stat.ATK_PERCENT,Effects:[re("VortexVanquisher1")]}),cc=m.Factory({Name:"SkywardSpine",Stars:5,Type:t.weapon.POLEARM,Scaling:o.WeaponScaling.TYPE_48,Substat:t.stat.ENERGY_RECHARGE,Effects:[r.Factory({Name:"SkywardSpine1",MaxRank:5,OnApply:new r.Builder().stat.Char(t.stat.CRIT_RATE).Values(.08,.1,.12,.14,.16).Next().instance.Basic({Name:"HIT_SkywardSpine",Element:t.stat.PHYSICAL_DMG,Stat:t.stat.ATK,Values:[.4,.55,.7,.85,1]}).Build()})]}),Ec=m.Factory({Name:"MissiveWindspear",Type:t.weapon.POLEARM,Stars:4,Scaling:o.WeaponScaling.TYPE_42,Substat:t.stat.ATK_PERCENT,Effects:[r.Factory({Name:"MissiveWindspear1",MaxRank:5,OnApply:new r.Builder().stat.Char(t.stat.ATK_PERCENT).Values(.12,.15,.18,.21,.24).Next().stat.Char(t.stat.ELEMENTAL_MASTERY).Values(48,60,72,84,96).Build()})]}),Tc=m.Factory({Name:"Moonpiercer",Stars:4,Type:t.weapon.POLEARM,Scaling:o.WeaponScaling.TYPE_44,Substat:t.stat.ELEMENTAL_MASTERY,Effects:[r.Factory({Name:"Moonpiercer1",ApplyOther:!0,MaxTargets:1,MaxRank:5,OnApply:new r.Builder().stat.Char(t.stat.ATK_PERCENT).Values(.16,.2,.24,.28,.32).Build()})]}),_c=m.Factory({Name:"EngulfingLightning",Stars:5,Type:t.weapon.POLEARM,Scaling:o.WeaponScaling.TYPE_46,Substat:t.stat.ENERGY_RECHARGE,Effects:[r.Factory({Name:"EngulfingLightning1",MaxRank:5,Conditions:["CAST_BURST","NO_BURST"],MaxConditions:1,OnApply:new r.Builder().observe.Target(t.stat.ENERGY_RECHARGE).stat.Char(t.stat.ATK_PERCENT).Values(.28,.35,.42,.49,.56).Map((e,a,s)=>om(e,a.GetCharacter().Get(t.stat.ENERGY_RECHARGE),s.GetRank())).Next().Where({effect:{conditions:["CAST_BURST"]}}).stat.Char(t.stat.ENERGY_RECHARGE).Values(.3,.35,.4,.45,.5).Build()})]});function om(e,a,s){return Math.min(e*Math.max(0,a-1),cm[s-1])}var cm=[.8,.9,1,1.1,1.2],Ac=m.Factory({Name:"WavebreakerFin",Stars:4,Type:t.weapon.POLEARM,Scaling:o.WeaponScaling.TYPE_45,Substat:t.stat.ATK_PERCENT,Effects:[aa("WavebreakerFin1")]}),uc=m.Factory({Name:"KitainCrossSpear",Stars:4,Type:t.weapon.POLEARM,Scaling:o.WeaponScaling.TYPE_44,Substat:t.stat.ELEMENTAL_MASTERY,Effects:[r.Factory({Name:"KitainCrossSpear1",MaxRank:5,OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_SKILL_DMG).Values(.06,.075,.09,.105,.12).Build()})]}),Sc=m.Factory({Name:"DragonspineSpear",Stars:4,Type:t.weapon.POLEARM,Scaling:o.WeaponScaling.TYPE_41,Substat:t.stat.PHYSICAL_DMG,Effects:[ia("DragonspineSpear1","HIT_DragonspineSpear")]}),hc=m.Factory({Name:"LithicSpear",Stars:4,Type:t.weapon.POLEARM,Scaling:o.WeaponScaling.TYPE_44,Substat:t.stat.ATK_PERCENT,Effects:[_l("LithicSpear1")]}),Lc=m.Factory({Name:"CrescentPike",Stars:4,Type:t.weapon.POLEARM,Scaling:o.WeaponScaling.TYPE_44,Substat:t.stat.PHYSICAL_DMG,Effects:[r.Factory({Name:"CrescentPike1",MaxRank:5,OnApply:new r.Builder().instance.Basic({Name:"HIT_CrescentPike",Element:t.stat.PHYSICAL_DMG,Stat:t.stat.ATK,Values:[.2,.25,.3,.35,.4]}).Build()})]}),fc=m.Factory({Name:"Halberd",Stars:3,Type:t.weapon.POLEARM,Scaling:o.WeaponScaling.TYPE_40,Substat:t.stat.ATK_PERCENT,Effects:[r.Factory({Name:"Halberd1",MaxRank:5,OnApply:new r.Builder().instance.Basic({Name:"HIT_Halberd",Element:t.stat.PHYSICAL_DMG,Stat:t.stat.ATK,Values:[1.6,2,2.4,2.8,3.2]}).Build()})]}),mc=m.Factory({Name:"DragonsBane",Stars:4,Type:t.weapon.POLEARM,Scaling:o.WeaponScaling.TYPE_41,Substat:t.stat.ELEMENTAL_MASTERY,Effects:[r.Factory({Name:"DragonsBane1",MaxRank:5,OnApply:new r.Builder().Where({enemy:{affected:[t.stat.HYDRO_DMG,t.stat.PYRO_DMG]}}).stat.Char(t.stat.ALL_DMG).Values(.2,.24,.28,.32,.36).Build()})]}),Nc=m.Factory({Name:"SacrificialSword",Type:t.weapon.SWORD,Stars:4,Scaling:o.WeaponScaling.TYPE_41,Substat:t.stat.ENERGY_RECHARGE,Effects:[]}),pc=m.Factory({Name:"ElegyForTheEnd",Type:t.weapon.BOW,Stars:5,Scaling:o.WeaponScaling.TYPE_46,Substat:t.stat.ENERGY_RECHARGE,Effects:[r.Factory({Name:"ElegyForTheEnd1",ApplySelf:!0,MaxRank:5,OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_MASTERY).Values(60,75,90,105,120).Build()}),na({Name:"ElegyForTheEnd2",OnApply:new r.Builder().stat.Char(t.stat.ELEMENTAL_MASTERY).Values(100,125,150,175,200).Next().stat.Char(t.stat.ATK_PERCENT).Values(.2,.25,.3,.35,.4).Build()})]}),Cc=m.Factory({Name:"StaffOfHoma",Type:t.weapon.POLEARM,Stars:5,Scaling:o.WeaponScaling.TYPE_46,Substat:t.stat.CRIT_DMG,Effects:[r.Factory({Name:"StaffOfHoma1",ApplySelf:!0,MaxRank:5,OnApply:new r.Builder().stat.Char(t.stat.HP_PERCENT).Values(.2,.25,.3,.35,.4).Next().observe.Target(t.stat.HP_BASE,t.stat.HP_PERCENT,t.stat.HP_FLAT).stat.Char(t.stat.ATK_FLAT).Values(.008,.01,.012,.014,.016).Map((e,a)=>a.GetCharacter().Get(t.stat.HP)*e).Next().observe.Target(t.stat.HP_BASE,t.stat.HP_PERCENT,t.stat.HP_FLAT).stat.Char(t.stat.ATK_FLAT).Where({target:{hp:{leq:.5}}}).Values(.01,.012,.014,.016,.018).Map((e,a)=>a.GetCharacter().Get(t.stat.HP)*e).Build()})]}),Mc=m.Factory({Name:"FavoniusLance",Type:t.weapon.POLEARM,Stars:4,Scaling:o.WeaponScaling.TYPE_44,Substat:t.stat.ENERGY_RECHARGE,Effects:[]}),dc=m.Factory({Name:"WhiteTassel",Stars:3,Type:t.weapon.POLEARM,Scaling:o.WeaponScaling.TYPE_39,Substat:t.stat.CRIT_RATE,Effects:[r.Factory({Name:"WhiteTassel1",MaxRank:5,OnApply:new r.Builder().stat.Char(t.stat.NORMAL_ATTACK_DMG).Values(.24,.3,.36,.42,.48).Build()})]}),gc=m.Factory({Name:"BlackTassel",Stars:3,Type:t.weapon.POLEARM,Scaling:o.WeaponScaling.TYPE_38,Substat:t.stat.HP_PERCENT,Effects:[r.Factory({Name:"BlackTassel1",MaxRank:5,Conditions:["NO_SLIMES","SLIMES"],MaxConditions:1,OnApply:new r.Builder().Where({effect:{conditions:["SLIMES"]}}).stat.Char(t.stat.ALL_DMG).Values(.4,.5,.6,.7,.8).Build()})]}),Gc=m.Factory({Name:"PrototypeStarglitter",Stars:4,Type:t.weapon.POLEARM,Scaling:o.WeaponScaling.TYPE_42,Substat:t.stat.ENERGY_RECHARGE,Effects:[r.Factory({Name:"PrototypeStarglitter1",MaxStacks:2,MaxRank:5,OnApply:new r.Builder().stat.Char(t.stat.NORMAL_ATTACK_DMG,t.stat.CHARGED_ATTACK_DMG).Values(.08,.1,.12,.14,.16).Stacks().Next().Build()})]}),Rc=m.Factory({Name:"BlackcliffPole",Stars:4,Type:t.weapon.POLEARM,Scaling:o.WeaponScaling.TYPE_42,Substat:t.stat.CRIT_DMG,Effects:[Pt("BlackcliffPole1")]}),Ic=m.Factory({Name:"Deathmatch",Stars:4,Type:t.weapon.POLEARM,Scaling:o.WeaponScaling.TYPE_41,Substat:t.stat.CRIT_RATE,Effects:[r.Factory({Name:"Deathmatch1",MaxRank:5,MaxConditions:1,Conditions:["ENEMY_1","ENEMY_2"],OnApply:new r.Builder().Where({effect:{conditions:["ENEMY_2"]}}).stat.Char(t.stat.ATK_PERCENT,t.stat.DEF_PERCENT).Values(.16,.2,.24,.28,.32).Next().Where({effect:{conditions:["ENEMY_1"]}}).stat.Char(t.stat.ATK_PERCENT).Values(.24,.3,.36,.42,.48).Build()})]}),Dc=m.Factory({Name:"SkywardBlade",Stars:5,Type:t.weapon.SWORD,Substat:t.stat.ENERGY_RECHARGE,Scaling:o.WeaponScaling.TYPE_46,Effects:[r.Factory({Name:"SkywardBlade1",MaxRank:5,OnApply:new r.Builder().stat.Char(t.stat.CRIT_RATE).Values(.04,.05,.06,.07,.08).Next().instance.Basic({Name:"HIT_SkywardBlade",Element:t.stat.PHYSICAL_DMG,Stat:t.stat.ATK,Values:[.2,.25,.3,.35,.4]}).Build()})]}),Oc=m.Factory({Name:"SkywardHarp",Type:t.weapon.BOW,Stars:5,Scaling:o.WeaponScaling.TYPE_48,Substat:t.stat.CRIT_RATE,Effects:[r.Factory({Name:"SkywardHarp1",MaxRank:5,OnApply:new r.Builder().stat.Char(t.stat.CRIT_DMG).Values(.2,.25,.3,.35,.4).Next().instance.Basic({Name:"HIT_SkywardHarp",Element:t.stat.PHYSICAL_DMG,Stat:t.stat.ATK,Values:[1.25]}).Build()})]}),yc=m.Factory({Name:"FavoniusSword",Type:t.weapon.SWORD,Stars:4,Scaling:o.WeaponScaling.TYPE_41,Substat:t.stat.ENERGY_RECHARGE,Effects:[]}),vc=m.Factory({Name:"FavoniusWarbow",Type:t.weapon.BOW,Stars:4,Scaling:o.WeaponScaling.TYPE_41,Substat:t.stat.ENERGY_RECHARGE,Effects:[]}),Hc=m.Factory({Name:"TheWidsith",Stars:4,Type:t.weapon.CATALYST,Scaling:o.WeaponScaling.TYPE_42,Substat:t.stat.CRIT_DMG,Effects:[r.Factory({Name:"TheWidsith1",MaxRank:5,Conditions:["RECITATIVE","ARIA","INTERLUDE"],MaxConditions:1,OnApply:new r.Builder().Where({effect:{conditions:["RECITATIVE"]}}).stat.Char(t.stat.ATK_PERCENT).Values(.6,.75,.9,1.05,1.2).Next().Where({effect:{conditions:["ARIA"]}}).stat.Char(...t.Elements.filter(e=>e!==t.stat.PHYSICAL_DMG)).Values(.48,.6,.72,.84,.96).Next().Where({effect:{conditions:["INTERLUDE"]}}).stat.Char(t.stat.ELEMENTAL_MASTERY).Values(240,300,360,420,480).Build()})]}),Pc=Object.values(vr).sort((e,a)=>e.Type===a.Type?e.Stars===a.Stars?e.Name.localeCompare(a.Name):e.Stars-a.Stars:e.Type-a.Type),le={};for(const e of Pc)le[e.Type]||(le[e.Type]=[]),le[e.Type].push(e);var ra=new q(e=>e.Name);ra.AddList(Pc);function Bc(){return ra.Get()}function Em(e){return ra.Find(e)}function Tm(e){return le[e]||[]}var oe={};D(oe,{FindByName:()=>Am,GetList:()=>_m});var ft=new q(e=>e.Name);for(const e of yr())e.Effects.forEach(a=>ft.Add(a));for(const e of Bc())e.Effects.forEach(a=>ft.Add(a));for(const e of vi())e.Piece2.forEach(a=>ft.Add(a)),e.Piece4.forEach(a=>ft.Add(a));for(const e of hn())ft.Add(e);function _m(){return ft.Get()}function Am(e){return ft.Find(e)}var wt={};D(wt,{ArtifactStore:()=>hm,CopyCharbox:()=>pm,FilterArtifacts:()=>la,PartyFrom:()=>um});function um(e){const a=new G.Party;for(const s in e.characters){const n=Lt.FindByName(s);if(!n)throw new Error(`Character not found: ${s}`);const i=n();a.Add(i);const l=e.characters[s],E=Object.keys(l.weapon)[0];if(E){const _=Z.FindByName(E);if(!_)throw new Error(`Weapon not found: ${s}`);i.SetWeapon(_)}l.artifacts&&Object.keys(l.artifacts).length>0&&i.SetArtifacts(new ht.Artbox(i))}return G.ImportParty(e,a),a}function la(e,a,s){const n=a.map(i=>Sm(i));return s&&n.push({filter(i){return!(s.pieces&&!s.pieces.includes(i.piece)||s.only&&s.only==="locked"!==!!i.locked)}}),wa.Filter({values:e,mode:"every",filters:n})}function Sm(e){const a=e.pieces||t.piece.Values(),s=e.subsMode||"some";return{for(n){return a.includes(n.piece)},filter(n){if(e.main&&!e.main.includes(n.mainstat))return!1;if(e.subs){const i=n.substats.map(E=>E.stat);if(!e.subs[s](E=>i.includes(E)))return!1}return!(Number.isFinite(e.stars)&&n.stars<(e.stars||0)||Number.isFinite(e.level)&&n.level<(e.level||0))}}}var hm=class{constructor(e){this.onChange=e,this.list=[],this.filtered=[]}Update(){this.onChange()}All(){return this.list}Clear(){this.list.splice(0,this.list.length),this.filtered.splice(0,this.filtered.length),this.onChange()}Add(e,a="push"){const s=I.Export(e);this.list[a](s),this.filtered=[...this.list],this.onChange()}AddExported(e,a="push"){this.list[a](e),this.filtered=[...this.list],this.onChange()}Filter(e,a){const{values:s}=la(this.list,e,a);return this.filtered=s,s}Get(){return this.filtered}Replace(e,a){const s=this.list.indexOf(e);return s===-1?!1:(this.list.splice(s,1,a),this.onChange(),!0)}RemoveMultiple(e,a){const{indexes:s}=la(this.list,e,a),n=[];return this.list.forEach((i,l)=>{s.includes(l)||n.push(i)}),this.list=n,this.onChange(),n.length}Remove(e){const a=this.list.indexOf(e);return a===-1?!1:(this.list.splice(a,1),this.onChange(),!0)}};function Lm(e,a){const s=e.GetArtifacts();let n=a.GetArtifacts();if(!s){a.SetArtifacts(void 0);return}n||(n=new ht.Artbox(a),a.SetArtifacts(n));const i=n,l=s.GetActiveSets(),E=i.GetActiveSets(),_=(()=>{const A=new Map;return s.GetEffects().forEach(u=>{const S=u.GetTargets().map(h=>h===e?a:h);A.set(u.Options.Name,S)}),A})();i.GetArtifacts().forEach((A,u)=>{const S=s.Get(u);I.Import(I.Export(S),A)}),l.every(A=>E.includes(A))&&i.GetEffects().forEach(A=>{const u=_.get(A.Options.Name);u&&A.ApplyMultiple(u)})}var fm=[[t.stat.NORMAL_ATTACK_LEVEL,t.stat.NORMAL_ATTACK_LEVEL_UP],[t.stat.ELEMENTAL_SKILL_LEVEL,t.stat.ELEMENTAL_SKILL_LEVEL_UP],[t.stat.ELEMENTAL_BURST_LEVEL,t.stat.ELEMENTAL_BURST_LEVEL_UP]];function mm(e,a){const s=e.GetCharacter(),n=a.GetCharacter();for(const[i,l]of fm){const E=s.Get(i)-s.Get(l),_=n.Get(l);n.Set(i,E+_)}}function Nm(e,a){const s=e.GetWeapon(),n=a.GetWeapon();if(!s){a.SetWeapon(void 0);return}if(!n||n.Options.Name!==s.Options.Name){const l=Z.FindByName(s.Options.Name);if(!l)throw new Error(`Weapon not found: ${s.Options.Name}`);a.SetWeapon(l)}const i=a.GetWeapon();if(!i)throw new Error("Target has no weapon");m.Import(m.Export(s),i)}function pm(e,a){a.GetCharacter().SetLevel(e.GetCharacter().GetLevel()),a.GetCharacter().SetAscension(e.GetCharacter().GetAscension()),mm(e,a),Nm(e,a),Lm(e,a)}function B(e){const a=e.endsWith("%");a&&(e=e.slice(0,e.length-1));let s=parseFloat(e);if(!Number.isFinite(s))throw new Error(`Invalid number format: "${e}"`);return a&&(s/=100),s}function VN(e){return e}var Cm=()=>({show:{description:"Shows the rolls of the character artifacts",arguments:[],compile({Value:e,Log:a}){return function(){const i=e.GetChar().GetArtifacts();if(!i){a.Error("Current character has no artifacts");return}a.Log(`
`+i.GetArtifacts().map(l=>T.ArtifactRolls(l)).join(`
`))}}},tier:{description:"Sets the rolls tier to equip.`",example:"artifact rolls tier avg",arguments:["0 | 1 | 2 | 3 | avg = 4"],compile({Value:e,Log:a},[s]){let n,i;return s==="avg"?(n=4,i="AVERAGE"):(n=Math.max(0,Math.min(4,Math.floor(B(s)))),i=n+""),function(){e.Config.substats.tier=n,a.Logf("Rolls tier set to %s",i)}}},equip:{description:"Equips the given rolls to the artifacts.Arguments in the form `[stat] [rolls] [stat] [rolls] ...`.",example:"artifact rolls equip crit_rate 10 crit_dmg 12 elemental_mastery 3",compile({Value:e,Log:a},s){const n=[];for(let i=0;i<s.length;i+=2){const l=s[i].toUpperCase(),E=t.stat.Get(l),_=t.stat.Name(E),A=s[i+1];if(!A)throw a.Throwf("Missing # of rolls for stat %s",_);const u=Math.max(0,Math.floor(B(A)));n.push([E,u])}return function(){const l=e.GetChar().GetArtifacts();if(!l)throw a.Throw("Current character has no artifacts");l.EquipRolls({substats:n,tier:e.Config.substats.tier})?e.Config.substats.tier===4?a.Logf("Equipped rolls of tier %s","AVERAGE"):a.Logf("Equipped rolls of tier %d",e.Config.substats.tier):a.Error("Rolls could not be equipped")}}}}),Mm=()=>({list:{description:"Lists the registered artifact sets",arguments:[],compile({Log:e}){const a=new T.Table(T.labels.SET,T.labels.STARS),s=J.GetList();return s.forEach(n=>a.AddRow(n.Name,n.Stars)),function(){e.Logf("Total artifact sets: %d",s.length),e.Log(`
`+a.String())}}},add:{description:"Adds a build of 5 artifacts to the current character",arguments:[],compile({Value:e,Log:a}){return function(){const n=e.GetChar();n.GetArtifacts()?a.Warn("Artifacts not created. Character already has artifacts"):(n.SetArtifacts(new ht.Artbox(n)),a.Log("Artifacts created"))}}},fill:{description:"Adds 4 empty substats to all artifacts in the current character",arguments:[],compile({Value:e,Log:a}){return function(){const i=e.GetChar().GetArtifacts();i?(i.GetArtifacts().forEach(l=>l.FillSubstats()),a.Log("All artifacts filled")):a.Error("Character has no artifacts")}}},main:{description:"Sets the mainstats of the character artifacts.",example:"artifact main atk_percent pyro_dmg crit_rate",arguments:["sands","goblet","circlet"],compile({Value:e,Log:a},[s,n,i]){const l=t.stat.Get(s.toUpperCase()),E=t.stat.Get(n.toUpperCase()),_=t.stat.Get(i.toUpperCase());return function(){const S=e.GetChar().GetArtifacts();if(!S){a.Error("Current character has no artifacts");return}S.Get(2).SetMainstat(l),S.Get(3).SetMainstat(E),S.Get(4).SetMainstat(_);const h=S.GetArtifacts().map(L=>t.stat.Name(L.GetMainstat()));a.Logf("Artifact mainstats set to %s",h.join(", "))}}},level:{description:"Sets the level of all the artifacts of the current character.",example:"artifact level 20",arguments:["level"],compile({Value:e,Log:a},[s]){const n=B(s);return function(){const E=e.GetChar().GetArtifacts();if(!E){a.Error("Current character has no artifacts");return}E.GetArtifacts().forEach(A=>A.SetLevel(n));const _=E.GetArtifacts().map(A=>A.GetLevel());a.Logf("Artifact levels set to %s",_.join(", "))}}},stars:{description:"Sets the stars of all the artifacts of the current character.",example:"artifact stars 5",arguments:["stars"],compile({Value:e,Log:a},[s]){const n=B(s);return function(){const E=e.GetChar().GetArtifacts();if(!E){a.Error("Current character has no artifacts");return}E.GetArtifacts().forEach(A=>A.SetStars(n));const _=E.GetArtifacts().map(A=>A.GetStars());a.Logf("Artifact stars set to %s",_.join(", "))}}},remove:{description:"Removes all artifacts from the current character",arguments:[],compile({Value:e,Log:a}){return function(){e.GetChar().SetArtifacts(void 0),a.Log("Artifacts removed")}}},show:{description:"Shows the artifacts of the current character",arguments:[],compile({Value:e,Log:a}){return function(){const i=e.GetChar().GetArtifacts();if(!i){a.Error("Current character has no artifacts");return}a.Log(`
`+T.Artifact(...i.GetArtifacts()))}}},rolls:{description:"Control the artifact rolls in the current character",children:Cm()},sets:{description:"Changes the artifact sets. Arguments in one of the following forms:\n- `artifact sets [name]`: 2-piece effect of the given set\n- `artifact sets [nameA] [nameB]`: 2-piece effect of the given sets, or the 4-piece effect if they're both the same.\n- `artifact sets [name] [# of pieces]`: the given set with 2-piece or 4-piece effects.\n\nrun without arguments to remove all the sets.",example:`artifact sets CrimsonWitchOfFlames 4 // 4-piece set
artifact sets CrimsonWitchOfFlames WanderersTroupe // 2 + 2 piece set`,compile({Value:e,Log:a},s){if(s.length===0)return function(){const A=e.GetChar().GetArtifacts();if(!A)throw a.Throw("Current character has no artifacts");A.GetArtifacts().forEach(u=>u.SetSet(void 0)),a.Log("Removed all artifact sets")};s.length===1&&s.push("2");let n,i;const l=J.FindByName(s[0]);if(!l)throw a.Throwf("Set %s not found",s[0]);if(n=l.Name,s[1]==="2")i=void 0;else if(s[1]==="4")i=n;else{const E=J.FindByName(s[1]);if(!E)throw a.Throwf("Set %s not found",s[1]);i=E.Name}return function(){const A=e.GetChar().GetArtifacts();if(!A)throw a.Throw("Current character has no artifacts");A.Get(0).SetSet(n),A.Get(1).SetSet(n),A.Get(2).SetSet(i),A.Get(3).SetSet(i),a.Logf("Artifact sets set to %s",A.GetActiveSets().join(", "))}}}}),dm=()=>{const e={};return t.piece.Values().forEach(a=>e[t.piece.Name(a).toLowerCase()]={description:"Controls the artifact "+t.piece.Name(a),children:gm(a)()}),e},gm=e=>()=>({main:{description:"Sets the mainstat of the "+t.piece.Name(e),example:t.piece.Name(e).toLowerCase()+" main "+t.stat.Name(t.PieceToMainstats(e)[0]),arguments:["mainstat"],compile({Value:a,Log:s},[n]){const i=t.stat.Get(n.toUpperCase());return function(){const _=a.GetChar().GetArtifacts();if(!_){s.Error("Current character has no artifacts");return}_.Get(e).SetMainstat(i),s.Logf("%s mainstat set to %s",t.piece.Name(e),_.Get(e).GetMainstat())}}},set:{description:"Sets the set name of the "+t.piece.Name(e),example:t.piece.Name(e).toLowerCase()+" set WanderersTroupe",arguments:["set"],compile({Value:a,Log:s},[n]){return function(){const E=a.GetChar().GetArtifacts();if(!E){s.Error("Current character has no artifacts");return}E.Get(e).SetSet(n),s.Logf("%s set changed to %s",t.piece.Name(e),E.Get(e).GetSet())}}},level:{description:"Sets the level of the "+t.piece.Name(e),example:t.piece.Name(e).toLowerCase()+" level 16",arguments:["level"],compile({Value:a,Log:s},[n]){const i=B(n);return function(){const _=a.GetChar().GetArtifacts();if(!_){s.Error("Current character has no artifacts");return}_.Get(e).SetLevel(i),s.Logf("%s level set to %d",t.piece.Name(e),_.Get(e).GetLevel())}}},stars:{description:"Sets the stars of the "+t.piece.Name(e),example:t.piece.Name(e).toLowerCase()+" stars 4",arguments:["stars"],compile({Value:a,Log:s},[n]){const i=B(n);return function(){const _=a.GetChar().GetArtifacts();if(!_){s.Error("Current character has no artifacts");return}_.Get(e).SetStars(i),s.Logf("%s stars set to %d",t.piece.Name(e),_.Get(e).GetStars())}}},show:{description:"Shows the "+t.piece.Name(e),arguments:[],compile({Value:a,Log:s}){return function(){const l=a.GetChar().GetArtifacts();if(!l){s.Error("Current character has no artifacts");return}s.Log(`
`+T.Artifact(l.Get(e)))}}},rolls:{description:"Shows the rolls of the "+t.piece.Name(e),arguments:[],compile({Value:a,Log:s}){return function(){const l=a.GetChar().GetArtifacts();if(!l){s.Error("Current character has no artifacts");return}const E=l.Get(e);s.Log(T.ArtifactRolls(E))}}},sub:{description:"Control the substats of the "+t.piece.Name(e),children:{clear:{description:"Set all substats to 0",arguments:[],compile({Value:a,Log:s}){return function(){const l=a.GetChar().GetArtifacts();if(!l){s.Error("Current character has no artifacts");return}l.Get(e).ClearSubstats(),s.Log("Substats cleared")}}},add:{description:"Adds a new substat to the artifact.",example:t.piece.Name(e).toLowerCase()+" sub add crit_rate 7.8%",arguments:["stat","value"],compile({Value:a,Log:s},[n,i]){const l=t.stat.Get(n.toUpperCase()),E=B(i);return function(){const u=a.GetChar().GetArtifacts();if(!u){s.Error("Current character has no artifacts");return}u.Get(e).AddSubstat(l,E)?s.Log("Substat added"):s.Warn("Substat not added")}}},set:{description:"Changes a substat. Substat index starts from zero.",example:t.piece.Name(e).toLowerCase()+" sub set 2 crit_rate 7.8%",arguments:["index","stat","value"],compile({Value:a,Log:s},[n,i,l]){const E=B(n),_=t.stat.Get(i.toUpperCase()),A=B(l);return function(){const h=a.GetChar().GetArtifacts();if(!h){s.Error("Current character has no artifacts");return}const L=h.Get(e);if(E>=L.SubstatsLength()){s.Errorf("Substat index out of range [0-%d]",L.SubstatsLength()-1);return}L.SetSubstat(E,_),L.SetSubstatValue(E,A),s.Logf("Substat %d changed",E)}}}}},downgrade:{description:"Converts a 5-star artifact to a 4-star artifact, reducing the value of substats.",arguments:[],compile({Value:a,Log:s}){return function(){const l=a.GetChar().GetArtifacts();if(!l){s.Error("Current character has no artifacts");return}const E=l.Get(e);I.transform.Downgrade(E),s.Log("Artifact downgraded")}}}}),Gm=()=>({list:{description:"Lists the stats of the current character",arguments:[],compile({Value:e,Log:a}){return function(){const n=e.GetChar().GetCharacter(),i=new T.Table(T.labels.STAT,T.labels.VALUE);i.DecimalPlaces=4;for(const l of t.stat.Values())i.AddRow(t.stat.Name(l),n.Get(l));a.Log(`
`+i.String())}}},get:{description:"Gets the value of stats in the current character",example:"character stat get crit_rate crit_dmg",compile({Value:e,Log:a},s){const n=s.map(i=>t.stat.Get(i.toUpperCase()));return function(){const l=e.GetChar().GetCharacter(),E=new T.Table(T.labels.STAT,T.labels.VALUE);E.DecimalPlaces=4;for(const _ of n)E.AddRow(t.stat.Name(_),l.Get(_));a.Log(`
`+E.String())}}},set:{description:"Sets the value of a stat in the current character",example:"character stat set atk_percent 45%",arguments:["stat","value"],compile({Value:e,Log:a},[s,n]){const i=t.stat.Get(s.toUpperCase()),l=B(n);return function(){const _=e.GetChar(),A=_.GetCharacter();if(i===t.stat.HP_CURRENT||i===t.stat.ENERGY_CURRENT)A.Set(i,l);else{const u=A.Get(i);_.AddModifier(A.CreateModifier(i,l-u))}a.Logf("Character stat %s set to %.4f",t.stat.Name(i),l)}}},add:{description:"Adds to the value of a stat in the current character",example:"character stat add atk_percent 10%",arguments:["stat","value"],compile({Value:e,Log:a},[s,n]){const i=t.stat.Get(s.toUpperCase()),l=B(n);return function(){const _=e.GetChar(),A=_.GetCharacter();_.AddModifier(A.CreateModifier(i,l)),a.Logf("Modified %s + %.4f = %.4f",t.stat.Name(i),l,A.Get(i))}}},mods:{description:"Lists the stats added to the character with `stat add [...]`",arguments:[],compile({Value:e,Log:a}){return function(){const n=e.GetChar(),i=new T.Table(T.labels.STAT,T.labels.VALUE);i.DecimalPlaces=4,n.GetModifiers().forEach(l=>i.AddRow(t.stat.Name(l.GetProp()),l.GetValue())),a.Log(`
`+i.String())}}},clear:{description:"Removes the stat modifiers created by `stat add [...]`",arguments:[],compile({Value:e,Log:a}){return function(){e.GetChar().ClearModifiers(),a.Log("Cleared modifiers")}}}}),Rm=()=>({add:{description:"Adds a new character.",example:"character add hutao",arguments:["name"],compile(e,[a]){const{Value:s,Log:n}=e,i=Lt.FindByName(a);if(!i)throw n.Throwf("Character not found: %s",a);return function(){if(s.Party.FindMember(a)){n.Errorf("Cannot add character %s because it is already added",i.Name);return}const _=i();s.Party.Add(_),n.Logf("Character %s added to the party",_.GetCharacter().Options.Name),e.Compile(["character","set",i.Name],{line:n.Line})()}}},remove:{description:"Removes a character from the party",example:"character remove Hutao",arguments:["name"],compile(e,[a]){const{Value:s,Log:n}=e;return function(){const l=s.Party.FindMember(a);if(!l){n.Errorf("Cannot remove character %s because it is not added",a);return}s.Party.Remove(l)?(l.GetEffects().forEach(E=>E.Disable().UnapplyAll()),s.GetChar()===l&&e.Compile(["character","unset"],{line:n.Line})(),n.Logf("Character %s removed",l.GetCharacter().Options.Name)):n.Logf("Cannot remove character %s",l.GetCharacter().Options.Name)}}},set:{description:"Sets the current character",example:"character set Hutao",arguments:["name"],compile({Value:e,Log:a},[s]){return function(){const i=e.Party.FindMember(s);if(!i){a.Errorf("Cannot set character %s because it is not added",s);return}e.SetChar(i),a.Logf("Character %s set as current",i.GetCharacter().Options.Name)}}},unset:{description:"Unsets the current character",arguments:[],compile({Value:e,Log:a}){return function(){e.SetChar(void 0),a.Log("Character unset. There is no current character selected")}}},level:{description:"Sets the level of the current character",example:`character level 70
character level 80+ // level 80 ascended`,arguments:["level"],compile({Value:e,Log:a},[s]){let n=s;const i=s.endsWith("+");i&&(n=s.slice(0,n.length-1));const l=B(n),E=i?6:0;return function(){const A=e.GetChar().GetCharacter();A.SetLevel(l),A.SetAscension(E),a.Logf("Character level set to %d%s",A.GetLevel(),A.IsAscended()?"+":"")}}},talent:{description:"Sets the talent levels of the current character",example:"character talent 9 5 7",arguments:["normal","skill","burst"],compile({Value:e,Log:a},s){const[n,i,l]=s.map(E=>B(E));return function(){const _=e.GetChar().GetCharacter();_.Set(t.stat.NORMAL_ATTACK_LEVEL,n),_.Set(t.stat.ELEMENTAL_SKILL_LEVEL,i),_.Set(t.stat.ELEMENTAL_BURST_LEVEL,l),a.Logf("Character Normal Attack level set to %d",n),a.Logf("Character Elemental Skill level set to %d",i),a.Logf("Character Elemental Burst level set to %d",l)}}},list:{description:"Lists all the registered characters",arguments:[],compile({Log:e}){const a=new T.Table(T.labels.CHARACTER,T.labels.ELEMENT,T.labels.WEAPON,T.labels.STARS,T.labels.REGION),s=Lt.GetList();s.forEach(i=>a.AddRow(i.Name,t.stat.Name(i.Element),t.weapon.Name(i.Weapon),i.Stars,t.region.Name(i.Region)));const n=a.String();return function(){e.Logf("Total characters: %d",s.length),e.Log(`
`+n)}}},show:{description:"Shows the characters in the party",arguments:[],compile({Value:e,Log:a}){return function(){a.Log(`
`+T.Character(...e.Party.GetMembers()))}}},damage:{description:"Shows the current character's damage instances",arguments:[],compile({Value:e,Log:a}){return function(){const n=e.GetChar();a.Log(`
`+T.Instance(...n.GetInstances()))}}},stat:{description:"Controls character stats directly",children:Gm()}}),Im=()=>({all:{description:"List all effects in the party",arguments:[],compile({Value:e,Log:a}){return function(){a.Log(`
`+T.Effect(...e.Party.GetAllEffects()))}}},list:{description:"Lists the effects of the current character",arguments:[],compile({Value:e,Log:a}){return function(){const i=[...e.GetChar().GetEffects(),...e.Party.GetResonances()];a.Log(`
`+T.Effect(...i))}}},applied:{description:"Lists all the effects in the party that are applied to the current character.",arguments:[],compile({Value:e,Log:a}){return function(){const n=e.GetChar(),i=e.Party.GetAppliedEffects(n);a.Log(`
`+T.Effect(...i))}}},set:{description:"Sets the current effect",example:"effect set RaidenE",arguments:["name"],compile({Value:e,Log:a},[s]){return function(){let l=e.GetChar().FindEffect(s);if(l||(l=e.Party.GetResonances().find(E=>E.Options.Name.toLowerCase()===s.toLowerCase())),!l){a.Errorf("Cannot find effect %s",s);return}e.SetEffect(l),a.Logf("Effect set to %s",l.Options.Name)}}},unset:{description:"Unsets the current effect",arguments:[],compile({Value:e,Log:a}){return function(){e.SetEffect(void 0),a.Log("Current effect unset")}}},show:{description:"Shows details about the current effect",arguments:[],compile({Value:e,Log:a}){return function(){const n=e.GetEffect();a.Log(`
`+T.EffectDetail(n))}}},enable:{description:"Enables the current effect",arguments:[],compile({Value:e,Log:a}){return function(){const n=e.GetEffect();n.Enable(),a.Logf("Effect %s enabled",n.Options.Name)}}},disable:{description:"Disables the current effect",arguments:[],compile({Value:e,Log:a}){return function(){const n=e.GetEffect();n.Disable(),a.Logf("Effect %s disabled",n.Options.Name)}}},apply:{description:"Applies the current effect to the given characters, or all",example:`effect apply HuTao
effect apply HuTao Xingqiu
effect apply all`,compile({Value:e,Log:a},s){return function(){const i=e.GetEffect();if(s[0]==="all"){for(const l of e.Party.GetMembers())i.Apply(l);a.Logf("Effect %s applied to all members",i.Options.Name);return}for(const l of s){const E=e.Party.FindMember(l);if(!E){a.Errorf("Cannot find target %s",l);return}i.Apply(E)?a.Logf("Effect %s applied to target %s",i.Options.Name,E.GetCharacter().Options.Name):a.Warnf("Effect %s NOT applied to target %s",i.Options.Name,E.GetCharacter().Options.Name)}}}},unapply:{description:"Unapplies the current effect from the given characters, or all",example:`effect apply HuTao
effect unapply HuTao Xingqiu
effect unapply all`,compile({Value:e,Log:a},s){return function(){const i=e.GetEffect();if(s[0]==="all"){for(const l of e.Party.GetMembers())i.Unapply(l);a.Logf("Effect %s unapplied from all members",i.Options.Name);return}for(const l of s){const E=e.Party.FindMember(l);if(!E){a.Errorf("Cannot find target %s",l);return}i.Unapply(E)?a.Logf("Effect %s unapplied from target %s",i.Options.Name,E.GetCharacter().Options.Name):a.Warnf("Effect %s NOT unapplied from target %s",i.Options.Name,E.GetCharacter().Options.Name)}}}},lock:{description:`Locks the effect to prevent being modified by character stat changes.

This will disable all the effect observers for the provided character.

Note that enabling the effect again will re-activate all the observers again.`,example:`effect set HuTaoE
effect enable
effect lock HuTao
character level 1
// this code will lock the HP to ATK conversion of Hu Tao to prevent it from changing`,arguments:["character"],compile({Value:e,Log:a},[s]){return function(){const i=e.GetEffect(),l=e.Party.FindMember(s);if(!l){a.Errorf("Cannot find character %s in the party",s);return}i.Lock(l),a.Logf("Effect %s locked for character %s. Note that enabling the effect again will re-activate all the observers again.",i.Options.Name,l.GetCharacter().Options.Name)}}},stacks:{description:"Sets the current effect's stacks",example:"effect stacks 9",arguments:["stacks"],compile({Value:e,Log:a},[s]){const n=B(s);return function(){const l=e.GetEffect();l.SetStacks(n),a.Logf("Effect stacks set to %f",l.GetStacks())}}},condition:{description:"Sets the current effect's condition (s)",example:`effect condition near
effect condition far
effect condition // this removes all conditions`,compile({Value:e,Log:a},s){return function(){const i=e.GetEffect();i.SetConditions(...s);const l=i.GetConditions();a.Logf("Effect conditions set to ["+"%s".repeat(l.length)+"]",...l)}}},aura:{description:"Sets the current effect's applied aura (s), or all",example:`effect aura frozen
effect aura hydro electro
effect aura // this removes all auras
effect aura all // this applies all auras`,compile({Value:e,Log:a},s){return function(){const i=e.GetEffect(),l=s.length>0&&s[0].match(/all/i)?t.aura.Values().filter(_=>_!==t.aura.NONE):s.map(_=>t.aura.Get(_.toUpperCase()));i.SetAuras(...l);const E=i.GetAuras().map(_=>t.aura.Name(_));a.Logf("Effect auras set to ["+"%s".repeat(E.length)+"]",...E)}}},details:{description:"Shows the registered modifiers of the current effect",arguments:[],compile({Value:e,Log:a}){return function(){const n=e.GetEffect();a.Log(`
`+n.Register())}}}}),Dm=()=>({show:{description:"Shows all the enemies",arguments:[],compile({Value:e,Log:a}){return function(){const i=e.Party.GetMembers().map(l=>l.GetCharacter().GetEnemy());a.Logf(`
`+T.Enemy(...i))}}},level:{description:"Sets the level of all enemies",example:"enemy level 100",arguments:["level"],compile({Value:e,Log:a},[s]){const n=B(s);return function(){e.Party.GetMembers().forEach(l=>l.GetCharacter().GetEnemy().SetLevel(n)),a.Logf("All enemy levels changed to %d",n)}}},aura:{description:"Sets enemies applied aura (s), or all",example:`enemy aura frozen
enemy aura hydro electro
enemy aura // this removes all auras
enemy aura all // this applies all auras`,compile({Value:e,Log:a},s){const n=s.length>0&&s[0].match(/all/i)?t.aura.Values().filter(i=>i!==t.aura.NONE):s.map(i=>t.aura.Get(i.toUpperCase()));return function(){e.Party.GetMembers().forEach(l=>l.GetCharacter().GetEnemy().SetAuras(...n)),a.Logf("All enemy auras changed to %s",n.map(l=>t.aura.Name(l)).join(", "))}}}}),Om="https://enka.network";function wc(e){return pt(this,null,function*(){try{return yield(yield fetch(bc(e))).json()}catch(a){console.error("[ENKA ERROR]",a)}})}function bc(e){return Om+"/api/uid/"+e}var Kc={};D(Kc,{ReadOnly:()=>pT});var ym={EQUIP_BRACER:t.piece.FLOWER,EQUIP_NECKLACE:t.piece.PLUME,EQUIP_SHOES:t.piece.SANDS,EQUIP_RING:t.piece.GOBLET,EQUIP_DRESS:t.piece.CIRCLET},vm={20848859:"BlackcliffSlasher",37147251:"SolarPearl",160493219:"DarkIronSword",197755235:"VortexVanquisher",231836963:"JadeCutter",310247243:"KagurasVerity",313300315:"SapwoodBlade",342097547:"CinnabarSpindle",346510395:"LuxuriousSeaLord",411685275:"CompoundBow",452357939:"Moonpiercer",479076483:"CoolSteel",481755219:"BlackcliffPole",540938627:"Predator",578575283:"CrescentPike",618786571:"Halberd",623534363:"FavoniusCodex",650049651:"WindblumeOde",656120259:"SharpshootersOath",680510411:"Whiteblind",688991243:"CalamityQueller",693354267:"MemoryOfDust",716252627:"LithicSpear",735056795:"FavoniusGreatsword",807607555:"SkywardAtlas",828711395:"AmosBow",850802171:"WhiteIronGreatsword",877751435:"RoyalGreatsword",902184579:"ForestRegalia",902264035:"AquilaFavonia",930640955:"TheBell",944332883:"SummitShaper",1012170803:"KagotsurubeIsshin",1021898539:"Slingshot",1072884907:"MappaMare",1075647299:"SongOfBrokenPines",1089950259:"SkywardPride",1154009435:"PrototypeStarglitter",1163263227:"TheWidsith",1148024603:"TheCatch",1240067179:"FavoniusWarbow",1321135667:"LionsRoar",1348687251:"HuntersPath",1388004931:"SkyriderSword",1390797107:"WhiteTassel",1406746947:"OtherworldlyStory",1437658243:"SerpentSpine",1455107995:"LostPrayer",1470442731:"MissiveWindspear",1479961579:"FerrousShadow",1600275315:"HaranGeppakuFutsu",1608953539:"HarbingerOfDawn",1675686363:"SacrificialGreatsword",1773425155:"SwordOfDescension",1860795787:"MouunsMoon",1890163363:"EverlastingMoonglow",1901973075:"PolarStar",1990641987:"SacrificialSword",1990820123:"AmenomaKageuchi",1991707099:"PrototypeRancour",1997709467:"JadeSpear",2006422931:"LithicBlade",2195665683:"SacrificialFragments",2267978875:"FruitOfFulfillment",2279290283:"MagicGuide",2324146259:"HakushinRing",2359799475:"Akuoumaru",2375993851:"RoyalLongsword",2400012995:"SacrificialBow",2417717595:"AlleyHunter",2425414923:"FadingTwilight",2474354867:"FavoniusSword",2491797315:"KitainCrossSpear",2521338131:"PrototypeAmber",2539208459:"OathswornEye",2556914683:"TheStringless",2587614459:"Frostbearer",2614170427:"SkyriderGreatsword",2664629131:"DragonsBane",2749853923:"FesteringDesire",2753539619:"SnowTombedStarsilver",2792766467:"TheUnforged",2832648187:"RoyalBow",2918525947:"ThunderingPulse",2935286715:"RoyalSpear",2947140987:"TheAlleyFlash",2949448555:"FreedomSworn",2963220587:"EmeraldOrb",3063191787:"EndOfTheLine",3073454867:"MakhairaAquamarine",3090373787:"WineAndSong",3097441915:"DebateClub",3112679155:"ElegyForTheEnd",3156385731:"EyeOfPerception",3169209451:"Rust",3176599083:"KingsSquire",3235324891:"StaffOfHoma",3273999011:"BlackcliffAgate",3378007475:"BlackcliffLongsword",3421967235:"FilletBlade",3439749859:"TheViridescentHunt",3443142923:"DragonspineSpear",3447737235:"BlackcliffWarbow",3456986819:"DodocoTales",3500935003:"ThrillingTalesOfDragonSlayers",3587621259:"TheFlute",3625393819:"PrototypeCrescent",3673792067:"TravelersHandySword",3684723963:"Rainslasher",3717849275:"EngulfingLightning",3719372715:"TwinNephrite",3722933411:"PrototypeArchaic",3755004051:"FavoniusLance",3796905611:"TheBlackSword",3827789435:"RoyalGrimoire",3914951691:"RedhornStonethresher",3933622347:"SkywardHarp",3949653579:"MitternachtsWaltz",3975746731:"RavenBow",3995710363:"WolfsGravestone",4049410651:"Deathmatch",4055003299:"SkywardBlade",4090429643:"BloodtaintedGreatsword",4103022435:"IronSting",4103766499:"BlackTassel",4122509083:"WavebreakerFin",4124851547:"MistsplitterReforged",4158505619:"SkywardSpine",4186179883:"Hamayumi",4193089947:"KatsuragikiriNagamasa",4230231107:"AquaSimulacra",4238339131:"StaffOfTheScarletSands",4267718859:"RecurveBow",302691299:"AmberBead",2834063555:"BeaconOfTheReedSea",316078811:"IbisPiercer",4007372867:"JadefallSplendor",454086795:"KeyOfKhajNisut",275622963:"LightOfFoliarIncision",1200948859:"MailedFlower",4139294531:"Messenger",1201790667:"ThousandFloatingDreams",2448629019:"ToukabouShigure",359484419:"TulaytullahsRemembrance",426363739:"WanderingEvenstar",143051931:"XiphosMoonlight",449192923:"BalladOfTheFjords",800766043:"FinaleOfTheDeep",1921306659:"FleuveCendreFerryman",2432865507:"FlowingPurity",4158971171:"RightfulReward",2275710883:"SacrificialJade",2958179435:"ScionOfTheBlazingSun",2600875323:"SongOfStillness",3459616011:"TalkingStick",2988480723:"TheFirstGreatMagic",2077869763:"TidalShadow",2265792579:"WolfFang",4176923379:"TomeOfTheEternalFlow"},Hm={83115355:"MaidenBeloved",147298547:"WanderersTroupe",156294403:"HeartOfDepth",855894507:"Berserker",862591315:"PaleFlame",933076627:"BlizzardStrayer",1186209435:"Gambler",1212345779:"GladiatorsFinale",1337666507:"TenacityOfTheMillelith",1438974835:"RetracingBolide",1524173875:"CrimsonWitchOfFlames",1541919827:"BloodstainedChivalry",1558036915:"VermillionHereafter",1562601179:"ViridescentVenerer",1632377563:"Lavawalker",1675079283:"DeepwoodMemories",1751039235:"NoblesseOblige",1756609915:"OceanHuedClam",1873342283:"Thundersoother",2040573235:"ArchaicPetra",2276480763:"EmblemOfSeveredFate",2364208851:"ResolutionOfSojourner",2512309395:"ThunderingFury",2546254811:"HuskOfOpulentDreams",2764598579:"TheExile",2890909531:"MartialArtist",3535784755:"BraveHeart",3618167299:"Scholar",3626268211:"EchoesOfAnOffering",3890292467:"Instructor",4082302819:"DefendersWill",4144069251:"ShimenawasReminiscence",4145306051:"GildedDreams",3094139291:"FlowerOfParadiseLost",2538235187:"DesertPavilionChronicle",1925210475:"NymphsDream",235897163:"VourukashasGlow",3410220315:"GoldenTroupe",1249831867:"MarechausseeHunter"},Yc={FIGHT_PROP_BASE_ATTACK:t.stat.ATK_BASE,FIGHT_PROP_HP:t.stat.HP_FLAT,FIGHT_PROP_ATTACK:t.stat.ATK_FLAT,FIGHT_PROP_DEFENSE:t.stat.DEF_FLAT,FIGHT_PROP_HP_PERCENT:t.stat.HP_PERCENT,FIGHT_PROP_ATTACK_PERCENT:t.stat.ATK_PERCENT,FIGHT_PROP_DEFENSE_PERCENT:t.stat.DEF_PERCENT,FIGHT_PROP_CRITICAL:t.stat.CRIT_RATE,FIGHT_PROP_CRITICAL_HURT:t.stat.CRIT_DMG,FIGHT_PROP_CHARGE_EFFICIENCY:t.stat.ENERGY_RECHARGE,FIGHT_PROP_HEAL_ADD:t.stat.HEALING_BONUS,FIGHT_PROP_ELEMENT_MASTERY:t.stat.ELEMENTAL_MASTERY,FIGHT_PROP_PHYSICAL_ADD_HURT:t.stat.PHYSICAL_DMG,FIGHT_PROP_FIRE_ADD_HURT:t.stat.PYRO_DMG,FIGHT_PROP_ELEC_ADD_HURT:t.stat.ELECTRO_DMG,FIGHT_PROP_WATER_ADD_HURT:t.stat.HYDRO_DMG,FIGHT_PROP_WIND_ADD_HURT:t.stat.ANEMO_DMG,FIGHT_PROP_ICE_ADD_HURT:t.stat.CRYO_DMG,FIGHT_PROP_ROCK_ADD_HURT:t.stat.GEO_DMG,FIGHT_PROP_GRASS_ADD_HURT:t.stat.DENDRO_DMG},Pm={10000002:"Ayaka",10000003:"Jean",10000006:"Lisa",10000014:"Barbara",10000015:"Kaeya",10000016:"Diluc",10000020:"Razor",10000021:"Amber",10000022:"Venti",10000023:"Xiangling",10000024:"Beidou",10000025:"Xingqiu",10000026:"Xiao",10000027:"Ningguang",10000029:"Klee",10000030:"Zhongli",10000031:"Fischl",10000032:"Bennett",10000033:"Tartaglia",10000034:"Noelle",10000035:"Qiqi",10000036:"Chongyun",10000037:"Ganyu",10000038:"Albedo",10000039:"Diona",10000041:"Mona",10000042:"Keqing",10000043:"Sucrose",10000044:"Xinyan",10000045:"Rosaria",10000046:"HuTao",10000047:"Kazuha",10000048:"Yanfei",10000049:"Yoimiya",10000050:"Thoma",10000051:"Eula",10000052:"Raiden",10000053:"Sayu",10000054:"Kokomi",10000055:"Gorou",10000056:"Sara",10000057:"Itto",10000058:"Yae",10000059:"Heizou",10000060:"Yelan",10000062:"Aloy",10000063:"Shenhe",10000064:"Yunjin",10000065:"Kuki",10000066:"Ayato",10000067:"Collei",10000068:"Dori",10000069:"Tighnari",10000070:"Nilou",10000071:"Cyno",10000079:"Dehya",10000072:"Candace",10000073:"Nahida",10000074:"Layla",10000075:"Wanderer",10000076:"Faruzan",10000078:"Alhaitham",10000080:"Mika",10000087:"Neuvillette"};function Fc(e){const a=[];for(const s of e.avatarInfoList){const n=Pm[s.avatarId];if(!n){console.error(`[ENKA ERROR] Cannot find character by avatarId ${s.avatarId}`);continue}const i=Lt.FindByName(n);if(!i){console.error(`[ENKA ERROR] Cannot find character by name ${n}`);continue}const l=parseInt(s.propMap[4001].val)||1,E=parseInt(s.propMap[1002].val)||1,_=Object.values(s.skillLevelMap),A=i(),u=new ht.Artbox(A);A.SetArtifacts(u);const S=A.GetCharacter();S.SetLevel(l),S.SetAscension(E),S.Set(t.stat.NORMAL_ATTACK_LEVEL,_[0]),S.Set(t.stat.ELEMENTAL_SKILL_LEVEL,_[1]),S.Set(t.stat.ELEMENTAL_BURST_LEVEL,_[2]);const h=s.equipList.filter(f=>f.flat.itemType==="ITEM_RELIQUARY"),L=s.equipList.filter(f=>f.flat.itemType==="ITEM_WEAPON");for(const f of h){const{reliquary:N,flat:p}=f;if(!N)continue;const{level:M}=N;if(!p.equipType){console.error("Cannot get artifact piece");continue}const C=ym[p.equipType];if(p.rankLevel<4){console.error("[ENKA ERROR] Cannot set 3-star artifacts");continue}const g=u.Get(C);if(g.SetStars(p.rankLevel),g.SetLevel(M-1),!p.reliquaryMainstat){console.error("[ENKA ERROR] Cannot get artifact mainstat");continue}g.SetMainstat(Yc[p.reliquaryMainstat.mainPropId]);const R=p.reliquarySubstats;if(!R){console.error("[ENKA ERROR] Cannot get artifact substats");continue}for(const y of R){const H=Yc[y.appendPropId];let P=y.statValue;t.FlatStats.includes(H)||(P/=100),g.AddSubstat(H,P)}const v=f.flat.setNameTextMapHash;if(v){const y=parseInt(v),H=Hm[y];g.SetSet(H)}}u.GetArtifacts().forEach(f=>f.FillSubstats());for(const f of L){const N=parseInt(f.flat.nameTextMapHash),p=vm[N];if(!p){console.error("[ENKA ERROR] Cannot find weapon by key "+f.flat.nameTextMapHash);continue}const M=Z.FindByName(p);if(!M){console.error("[ENKA ERROR] Cannot find weapon by name "+p);continue}A.SetWeapon(M);const C=A.GetWeapon();if(!C){console.error("[ENKA ERROR] Cannot equip weapon by name "+M.Name);continue}if(!f.weapon)continue;const{level:g,promoteLevel:R,affixMap:v}=f.weapon;C.SetLevel(g),C.SetAscension(R);const y=Object.values(v).reduce((H,P)=>Math.max(H,P),0)+1;C.SetRank(y)}a.push(A)}return a}function kc(e){return pt(this,null,function*(){const a=yield wc(e);if(!a)throw new Error("[ENKA ERROR] Cannot fetch data from Enka.Network");return Fc(a)})}var Bm=()=>{let e=[];return{uid:{description:"Imports characters from a player UID using Enka.Network service",example:"enka uid 609609619",arguments:["UID"],compile({Log:a},[s]){return function(){a.Log("Importing from Enka.Network service. Please wait..."),kc(s).then(i=>{e=i;const l=new T.Table(T.labels.CHARACTER,T.labels.LEVEL);for(const E of e){const _=E.GetCharacter();l.AddRow(_.Options.Name,_.GetLevel())}a.Log(`
Imported characters:
`+l.String()),a.Logf("Imported %d characters from Enka.Network",i.length),a.Log("Run `enka load <characters...>` to load an imported character to the current party")}).catch(i=>a.Error(String(i).valueOf()))}}},load:{description:"Loads characters imported from Enka.Network to the current party",example:"enka load hutao xingqiu yelan zhongli",compile(a,s){const{Value:n,Log:i}=a;return function(){const E=[];for(const _ of s){const A=e.find(u=>u.GetCharacter().Options.Name.toLowerCase()===_);if(!A){i.Errorf('Character "%s" not found in Enka',_);continue}n.Party.Add(A),E.push(A)}i.Logf("Added %d characters to the party",E.length),E.length>0&&a.Compile(["character","set",E[0].GetCharacter().Options.Name],{line:i.Line})()}}}}},wm=()=>({list:{description:"Lists all the registered foods",arguments:[],compile({Log:e}){const a=Ht.GetList(),s=T.Food(...a);return function(){e.Log(`
`+s)}}},add:{description:"Adds a food to the party. Rank is the food quality (1 = suspicious, 2 = normal, 3 = delicious)",arguments:["name","rank"],example:"food add adeptustemptation 3",compile({Value:e,Log:a},[s,n]){const i=Ht.FindByName(s),l=Math.floor(B(n));if(!i)throw a.Throwf("Cannot find food %s",s);return function(){e.Party.GetFoods().Add(i).SetRank(l),a.Logf("Food %s added",i.Name)}}},remove:{description:"Removes a food from the party",arguments:["name"],example:"food remove adeptustemptation",compile({Value:e,Log:a},[s]){return function(){e.Party.GetFoods().Remove(s),a.Logf("Food %s removed",s)}}},show:{description:"Shows the currently added foods",arguments:[],compile({Value:e,Log:a}){return function(){const n=e.Party.GetFoods().GetAll();a.Log(`
`+T.Food(...n))}}},clear:{description:"Clears all the foods from the party",arguments:[],compile({Value:e,Log:a}){return function(){e.Party.GetFoods().Clear(),a.Log("Cleared all foods")}}}}),bm=()=>({clear:{description:"Clears all the rotation actions",arguments:[],compile({Value:e,Log:a}){return function(){e.Rotation.Clear(),a.Log("Rotation cleared")}}},run:{description:"Runs the rotation",arguments:[],compile({Value:e,Log:a}){return function(){a.Warn("Running rotation..."),e.Rotation.SetCharacters(...e.Party.GetMembers());const n=e.Rotation.Run();a.Logf("Rotation damage: %d",n)}}},log:{description:"Controls rotation logs",children:{enable:{description:"Enables the rotation logs",arguments:[],compile({Value:e,Log:a}){return function(){e.Rotation.Log=a,a.Log("Rotation log enabled")}}},disable:{description:"Disables the rotation logs",arguments:[],compile({Value:e,Log:a}){return function(){e.Rotation.Log=void 0,a.Log("Rotation log disabled")}}}}},summary:{description:"Prints a summary of the last rotation run",arguments:[],compile({Value:e,Log:a}){return function(){a.Log(`
`+T.Rotation(e.Rotation.GetSummary()))}}},hit:{description:'Adds a hit to the rotation. Arguments in the form:\n	`rotation hit [character_name] [hit_name] [extra...]`.\n\nWhere `[extra...]` can be one or more of the following:\n	- a multiplier in the form `*3`, `*0.5`, etc.\n	- `aura=x` to set the aura uptime, where `0 <= x <= 1`.\n	- `reaction=x` to set the reaction uptime, where `0 <= x <= aura`.\n\nIf no values provided for `aura` or `reaction`, they will be set to 1 by default.\n\nIf `reaction` is greater than `aura`, it will be set to the value of `aura`.\n\nDO NOT include the prefix "hit_" for the hit name, it will be automatically added.',example:`rotation hit Hutao Charged *9 // 9 charged attacks from Hu Tao
rotation hit Hutao N1 aura=90% reaction=40% // hutao normal attack 1 with 90% aura and 40% reaction uptime`,arguments:["charname","hitname","extra..."],compile({Value:e,Log:a},[s,n,...i]){n="HIT_"+n;let l=1,E=1,_=1;return i.forEach(A=>{const u=A.match(Km);if(u){const h=B(u[1]);l*=h;return}const S=A.match(Ym);if(S){const h=S[1].toLowerCase(),L=B(S[2]);h==="aura"?E=L:h==="reaction"&&(_=L)}}),function(){e.Rotation.AddHit(s,n,l,_,E,a.Line),a.Logf("Added hit %s (%s) to rotation with multiplier=%.2f, aura=%.2f, reaction=%.2f",n,s,l,_,E)}}},do:{description:"Saves a command to be executed as a rotation action.",example:"rotation do effect stacks 9",compile(e,a){const{Value:s,Log:n}=e,i=e.Compile(a,{line:n.Line});return function(){s.Rotation.AddFn(i,n.Line),n.Logf("Added action to rotation: `%s`",a.join(" "))}}},duration:{description:"Sets the rotation duration, in seconds.",example:"rotation duration 22 // 22 seconds",compile({Value:e,Log:a},[s]){const n=B(s);return function(){e.Rotation.Duration=n,a.Logf("Rotation duration set to %.2f seconds.",n)}}}}),Km=/^\*([0-9]+(?:\.[0-9]+)?%?)$/i,Ym=/^(reaction|aura)=([0-9]+(?:\.[0-9]+)?%?)$/i,Vc=()=>({substats:{tier:4}}),Fm=class{constructor(){this.Party=new G.Party,this.Rotation=new ne.Rotation,this.Config=Vc()}Reset(){this.Party=new G.Party,this.Rotation=new ne.Rotation,this.Character=void 0,this.Effect=void 0,this.Config=Vc(),this.State=void 0}GetEffect(){if(!this.Effect)throw new Error("Effect not set");return this.Effect}SetEffect(e){this.Effect=e}GetChar(){if(!this.Character)throw new Error("Character not set");return this.Character}SetChar(e){if(e&&!this.Party.GetMembers().includes(e))throw new Error("Cannot set scenario character: character not in party");this.Character=e}},km=()=>({save:{description:"Saves the current party state.",arguments:[],compile({Value:e,Log:a}){return function(){e.State=G.ExportParty(e.Party),a.Log("State saved")}}},load:{description:"Loads a previously saved party state.",arguments:[],compile(e){const{Value:a,Log:s}=e;return function(){if(!a.State){s.Error("No state saved");return}a.Party=wt.PartyFrom(a.State);const i=a.Party.GetMembers()[0],l=i?i.GetCharacter().Options.Name:void 0;e.Compile(["character","unset"],{line:s.Line})(),e.Compile(["effect","unset"],{line:s.Line})(),l&&e.Compile(["character","set",l],{line:s.Line})(),s.Log("Party loaded from saved state")}}},clear:{description:"Removes the saved state",arguments:[],compile({Value:e,Log:a}){return function(){e.State=void 0,a.Log("State cleared")}}},b64:{description:"Exports/imports party state as base64 strings",children:{export:{description:"Exports party state as a base64 string.",arguments:[],compile({Value:e,Log:a}){return function(){if(!e.State){a.Error("No state saved");return}const n=btoa(JSON.stringify(e.State));a.Log(n)}}},import:{description:"Imports party state from a base64 string.",arguments:["base64-string"],compile(e,[a]){const{Value:s,Log:n}=e,i=JSON.parse(atob(a));return function(){s.State=i,e.Compile(["state","load"],{line:n.Line})()}}}}}}),Vm=()=>({list:{description:"List all registered weapons",arguments:[],compile({Log:e}){const a=Lt.Bennett(),s=Z.GetList(),n=new T.Table(T.labels.NAME,T.labels.WEAPON,t.stat.Name(t.stat.ATK_BASE),T.labels.STAT,T.labels.VALUE,T.labels.STARS);for(const l of s){const E=l(a);E.SetLevel(90),n.AddRow(l.Name,t.weapon.Name(l.Type),E.GetAtkBase(),t.stat.Name(E.GetSubstat()),E.GetSubstatValue(),l.Stars)}n.DecimalPlaces=4;const i=n.String();return function(){e.Logf("Total weapons: %d",s.length),e.Log(`
`+i)}}},set:{description:"Sets the weapon of the current character",example:"weapon set StaffOfHoma",arguments:["name"],compile({Value:e,Log:a},[s]){const n=Z.FindByName(s);if(!n)throw a.Throwf("Cannot find weapon %s",s);return function(){e.GetChar().SetWeapon(n),a.Logf("Weapon set to %s",n.Name)}}},level:{description:"Sets the level of the current character's weapon",example:`weapon level 70
weapon level 80+ //level 80 ascended`,arguments:["level"],compile({Value:e,Log:a},[s]){let n=s;const i=s.endsWith("+");i&&(n=s.slice(0,n.length-1));const l=B(n),E=i?6:0;return function(){const A=e.GetChar().GetWeapon();if(!A){a.Error("Character weapon is not set");return}A.SetLevel(l),A.SetAscension(E),a.Logf("Weapon level set to %d%s",A.GetLevel(),A.IsAscended()?"+":"")}}},rank:{description:"Sets the rank of the current character's weapon",example:"weapon rank 5",arguments:["rank"],compile({Value:e,Log:a},[s]){const n=B(s);return function(){const l=e.GetChar().GetWeapon();if(!l){a.Error("Character weapon is not set");return}l.SetRank(n),a.Logf("Weapon rank set to %d",l.GetRank())}}},remove:{description:"Removes the character weapon",arguments:[],compile({Value:e,Log:a}){return function(){e.GetChar().SetWeapon(void 0),a.Log("Weapon removed")}}}}),oa=class{constructor(){this.Scenario=new Fm,this.Program=new Zt(this.Scenario),this.Program.Set(it(F({character:{description:"Controls characters in the party",children:Rm()},weapon:{description:"Controls weapons in the party",children:Vm()},effect:{description:"Controls effects in the party",children:Im()},artifact:{description:"Controls all the artifacts",children:Mm()}},dm()),{enemy:{description:"Controls all enemies in the party.",children:Dm()},food:{description:"Controls food buffs",children:wm()},rotation:{description:"Controls the rotation",children:bm()},reset:{description:"Resets the scenario to its initial state",arguments:[],compile({Value:e,Log:a}){return function(){e.Reset(),a.Warnf("Command `reset` executed.")}}},state:{description:"Functions to save/load the party state",children:km()},enka:{description:"Imports characters from Enka.Network service",children:Bm()}}))}},xc={};D(xc,{BackendWorker:()=>CN,Generate:()=>Wc,Optimizer:()=>dN,RotationDamage:()=>MN,SetGenerator:()=>Wm,VirtualWorker:()=>Uc});var xm=0,Uc=class{constructor(e){this.poster=e,this.listenersByPath=new Map,this.pathsByListener=new Map,this.errorListeners=[]}SetPoster(e){this.poster=e}SetKiller(e){this.killer=e}Kill(){if(!this.killer)throw new Error("No killer function is defined for this worker");this.killer()}Post(e,a){const s=(++xm).toString(36);return this.poster(e,s,a),s}Recieve(e,a,s){return pt(this,null,function*(){const n=this.listenersByPath.get(e);if(!n){console.error("WORKER PATH NOT FOUND: ",e);return}for(const i of[...n])yield i(a,s)})}Error(e){return pt(this,null,function*(){for(const a of[...this.errorListeners])yield a(e)})}AddErrorListener(e){if(this.errorListeners.includes(e))throw new Error("Cannot add the same listener twice");return this.errorListeners.push(e),e}RemoveErrorListener(e){const a=this.errorListeners.indexOf(e);return a===-1?!1:(this.errorListeners.splice(a,1),!0)}AddListener(e,a){if(this.pathsByListener.has(a))throw new Error("Cannot add the same listener twice");this.pathsByListener.set(a,e);let s=this.listenersByPath.get(e);return s||(s=[],this.listenersByPath.set(e,s)),s.push(a),a}RemoveListener(e){const a=this.pathsByListener.get(e);if(!a)return!1;const s=this.listenersByPath.get(a);if(!s)return!1;const n=s.indexOf(e);return n===-1?!1:(s.splice(n,1),!0)}};function*Um(e,a){let s=[];for(const n of a)s.push(n),s.length>=e&&(yield s,s=[]);s.length>0&&(yield s)}var ca=void 0;function Wm(e){ca=e}function Wc(){if(!ca)throw new Error("No backend worker generator is defined");return ca()}var Ea=class{constructor(e){this.actions=e,this.listeners=[]}Post(e,a){const s=this.worker;if(!s)throw new Error("Worker not set for this action");s.Post(e,a)}SetWorker(e){this.worker&&this.RemoveWorker();for(const a in this.actions){const s=this.actions[a];e.AddListener(a,s),this.listeners.push(s)}this.worker=e}RemoveWorker(){if(!!this.worker)for(const e of this.listeners)this.worker.RemoveListener(e)}},Ta=class{constructor(){this.worker=Wc()}Kill(){this.worker.Kill()}},jc={};D(jc,{Filter:()=>_a});function _a(e,...a){return a.every(s=>jm(e,s))}function jm(e,a){const s=e.Get(a.stat);return a.operator==="<="?s<=a.value:s>=a.value}var ct=class{constructor(){this.MAX_CHUNK_SIZE=1/0,this.MAX_CHILDREN=1/0,this.TRANSFORM=!1,this.total=0}SetConfig(e){this.config=e}SetTarget(e){this.target=e}SetParty(e){this.party=e}SetRotation(e){this.rotation=e}Init(e){this.config=e,this.runner=new oa;const a=this.runner.Scenario;e.Party&&(a.Party=wt.PartyFrom(e.Party),this.party=a.Party),e.Cmd&&(this.runner.Program.CompileString(e.Cmd)(),this.rotation=a.Rotation,this.rotation.Log=void 0),e.Target&&(this.runner.Program.Compile(["character","set",e.Target])(),this.target=a.Character),this.init(e)}setTotal(e){this.total=e}GetTotal(){return this.total}GetConfig(){if(!this.config)throw new Error("Configuration not set for this optimizer. Try to run `.Init()` first");return this.config}GetParty(){if(!this.party)throw new Error("Party not set for this optimizer. Try to run `.Init()` first");return this.party}GetTarget(){if(!this.target)throw new Error("Target character not set for this optimizer. Try to run `.Init()` first");return this.target}GetRotation(){if(!this.rotation)throw new Error("Rotation not set for this optimizer. Try to run `.Init()` first");return this.rotation}GetRunner(){if(!this.runner)throw new Error("Runner not set for this optimizer. Try to run `.Init()` first");return this.runner}Run(){if(!this.rotation)throw new Error("Rotation not set for this optimizer. Try to run `.Init()` first");const e=G.ExportParty(this.GetParty());this.rotation.SetCharacters(...this.GetParty().GetMembers());const a=this.rotation.Run();return G.ImportParty(e,this.GetParty()),a}Optimize(){for(const e of this.Generate())this.Insert(this.Evaluate(e));return this.Get()}Transform(e){throw new Error("Method not implemented.")}RecieveMessage(e){}getConstants(){const e={};return this.target&&(e.target_name=this.target.GetCharacter().Options.Name,e.target_element=t.stat.Name(this.target.GetCharacter().Options.Element),e.target_element_aura=t.aura.Name(t.DmgToAura(this.target.GetCharacter().Options.Element))),this.party&&this.party.GetMembers().forEach((s,n)=>{const i=s.GetCharacter(),l="member_"+n;e[l+"_name"]=i.Options.Name,e[l+"_element"]=t.stat.Name(i.Options.Element),e[l+"_element_aura"]=t.aura.Name(t.DmgToAura(i.Options.Element))}),e}},zc=5,bt=class extends ct{constructor(){super(...arguments),this.queue=new st,this.initDamage=0}init(e){if(e.substats.length>zc)throw new Error(`Cannot optimize more than ${zc} substats at once. Requested ${e.substats.length} substats instead`);const a=this.GetTarget(),s=(()=>{const E=a.GetArtifacts();if(!E)throw new Error("Cannot optimize substats without artifacts");return E})();this.initDamage=this.Run();for(const E of s.GetArtifacts())E.SetStars(5),E.ClearSubstats();const n=e.substats.map(({stat:E})=>E),i=e.substats.map(({min:E})=>E),l=e.substats.map(({max:E})=>E);this.modifiers=n.map(E=>a.GetCharacter().CreateModifier(E,0)),this.generator=Gn(n.length,e.total,i,l)}*Generate(){if(!this.generator)throw new Error("No generator has been initialized");yield*this.generator}Evaluate(e){const{tier:a,filter:s}=this.GetConfig(),n=this.GetTarget();if(!this.modifiers)throw new Error("Optimizer initialized incorrectly (no modifiers created)");const i=this.modifiers;e.forEach((u,S)=>i[S].SetValue(u*o.GetSubstatValue(5,i[S].GetProp(),a)));const l=[],E=[];i.forEach(u=>{const S=u.GetProp();l.push(n.GetCharacter().Get(S)),E.push(S)});const _=[n.GetCharacter().Get(t.stat.ATK),n.GetCharacter().Get(t.stat.DEF),n.GetCharacter().Get(t.stat.HP)];if(s&&!_a(n.GetCharacter(),...s))return{rolls:e,stats:l,optimized:E,damage:-1,relative:0,basic:_};const A=this.Run();return{rolls:e,stats:l,optimized:E,damage:A,relative:A/this.initDamage,basic:_}}Insert(e){e.damage>=0&&this.queue.Push(e,e.damage)}Get(){return this.queue.Extract()}Format(e){const a=this.GetConfig(),s=a.substats.map(({stat:i})=>t.stat.Name(i)),n=new K(t.stat.Name(t.stat.ATK),t.stat.Name(t.stat.DEF),t.stat.Name(t.stat.HP),...s,T.labels.DAMAGE,T.labels.RELATIVE);for(const i of e){const l=[];i.stats.forEach((_,A)=>{const S=t.FlatStats.includes(a.substats[A].stat)?w(_,0):w(_*100,2)+"%";l.push(S+` (${i.rolls[A]})`)});const E=i.basic.map(_=>w(_,0));n.AddRow(...E,...l,w(i.damage,0),w(i.relative*100,2)+"%")}return n}EquipCmd(e){const a=this.GetConfig();let s=`artifact add
artifact fill
artifact stars 5
artifact rolls tier `+a.tier+`
`;return s+="artifact rolls equip "+e.rolls.map((n,i)=>({rolls:n,stat:a.substats[i].stat})).reduce((n,i)=>n+t.stat.Name(i.stat)+" "+i.rolls+" ",""),s}Clear(){var e;(e=this.modifiers)==null||e.forEach(a=>a.Disable())}},qc={};D(qc,{SubstatsOptimizer:()=>bt,defaultConfig:()=>Aa});var Aa=()=>({total:25,tier:o.SubstatTier.ROLL_AVG,substats:[{stat:t.stat.CRIT_RATE,min:0,max:10},{stat:t.stat.CRIT_DMG,min:0,max:12},{stat:t.stat.ATK_PERCENT,min:0,max:12},{stat:t.stat.ELEMENTAL_MASTERY,min:0,max:12}]}),Qc={[t.piece.FLOWER]:t.PieceToMainstats(t.piece.FLOWER),[t.piece.PLUME]:t.PieceToMainstats(t.piece.PLUME),[t.piece.SANDS]:t.PieceToMainstats(t.piece.SANDS),[t.piece.GOBLET]:t.PieceToMainstats(t.piece.GOBLET),[t.piece.CIRCLET]:t.PieceToMainstats(t.piece.CIRCLET)},$c=class extends ct{constructor(){super(...arguments),this.results=new st,this.initDamage=0,this.allStats=Qc}init(e){if(e.mainstats)for(const n of t.piece.Values()){let i=e.mainstats[n];!i||(i=i.filter(l=>Qc[n].includes(l)),i.length!==0&&(this.allStats[n]=i))}const a=Object.values(this.allStats).map(n=>n.length).reduce((n,i)=>n*i,1);this.setTotal(a);const s=this.GetTarget();this.state=G.Export(s),this.initDamage=this.Run(),e.substats&&(this.subsOptimizer=new bt,this.subsOptimizer.SetParty(this.GetParty()),this.subsOptimizer.SetTarget(this.GetTarget()),this.subsOptimizer.SetRotation(this.GetRotation()),this.subsOptimizer.Init(F({},e.substats)),this.subsCombinations=Array.from(this.subsOptimizer.Generate()),this.state=G.Export(s))}*Generate(){for(const e of this.allStats[t.piece.FLOWER])for(const a of this.allStats[t.piece.PLUME])for(const s of this.allStats[t.piece.SANDS])for(const n of this.allStats[t.piece.GOBLET])for(const i of this.allStats[t.piece.CIRCLET])yield[e,a,s,n,i]}Evaluate(e){const a=this.GetTarget(),s=a.GetArtifacts();if(!s)throw new Error("Target character has no artifacts to be optimized");for(let i=0;i<e.length;i++)s.Get(i).SetMainstat(e[i]);const n={damage:-1,mainstats:e,relative:0};if(this.subsOptimizer&&this.subsCombinations){const i=this.subsOptimizer;this.subsCombinations.forEach(_=>i.Insert(i.Evaluate(_)));const E=i.Get()[0];E&&(n.damage=E.damage,n.substats=E)}else n.damage=this.Run();return n.relative=n.damage/this.initDamage,this.state&&G.Import(this.state,a),n}Insert(e){e.damage>=0&&this.results.Push(e,e.damage)}Get(){return this.results.Extract()}Format(e){const a=this.GetConfig(),s=[t.piece.Name(t.piece.SANDS),t.piece.Name(t.piece.GOBLET),t.piece.Name(t.piece.CIRCLET)];if(a.substats){s.push(t.stat.Name(t.stat.ATK),t.stat.Name(t.stat.DEF),t.stat.Name(t.stat.HP));const i=a.substats.substats.map(l=>t.stat.Name(l.stat));s.push(...i)}s.push(T.labels.DAMAGE,T.labels.RELATIVE);const n=new K(...s);for(const i of e){const l=i.mainstats.slice(2).map(E=>t.stat.Name(E));if(a.substats&&i.substats){const E=a.substats,_=i.substats,A=[];_.stats.forEach((S,h)=>{const f=t.FlatStats.includes(E.substats[h].stat)?w(S,0):w(S*100,2)+"%";A.push(f+` (${_.rolls[h]})`)});const u=_.basic.map(S=>w(S,0));l.push(...u,...A)}l.push(w(i.damage,0),w(i.relative*100,2)+"%"),n.AddRow(...l)}return n}EquipCmd(e){const a=this.GetConfig();let s=`artifact add
artifact fill
`;for(const n of[t.piece.SANDS,t.piece.GOBLET,t.piece.CIRCLET]){const i=t.piece.Name(n).toLowerCase(),l=t.stat.Name(e.mainstats[n]);s+=i+" main "+l+`
`}if(e.substats&&a.substats){const n=new bt;n.SetConfig(a.substats),s+=n.EquipCmd(e.substats)}return s}},ua=Array.from(new Set([...t.Substats,...t.Elements,t.stat.HEALING_BONUS]).values()),Xc=class extends ct{constructor(){super(...arguments),this.modifiers={},this.queue=new st}init(){const e=this.GetTarget();ua.forEach(a=>this.modifiers[a]=e.GetCharacter().CreateModifier(a,0)),this.setTotal(ua.length)}*Generate(){for(const e of ua)yield e}Evaluate(e){const a=this.GetConfig(),s=o.GetSubstatValue(5,e,a.tier);if(!this.modifiers)throw new Error("No modifiers has been initialized. Try to run `.Init()` first.");const n=this.modifiers[e];n.SetValue(0);const i=this.Run();n.SetValue(s);const l=this.Run();return n.SetValue(0),{stat:e,damage:l,benefit:l/i-1}}Insert(e){this.queue.Push(e,e.benefit)}Get(){return this.queue.Extract()}Format(e){const a=this.GetConfig(),s=new T.Table(T.labels.STAT,T.labels.VALUE,T.labels.DAMAGE,T.labels.BENEFIT);for(const{stat:n,damage:i,benefit:l}of e){const E=t.FlatStats.includes(n)?w(o.GetSubstatValue(5,n,a.tier),0):w(o.GetSubstatValue(5,n,a.tier)*100,2);s.AddRow(t.stat.Name(n),E,w(i,2),w(l*100,4)+"%")}return s}};function*Kt(...e){e.length===0&&(yield[]);function*a(s,n){for(const i of e[s]){const l=[...n,i];s===e.length-1?yield l:yield*a(s+1,l)}}yield*a(0,[])}function Jc(e,a){const s=e.map(l=>{const E=a==null?void 0:a.get(l.Name.toLowerCase());if(E)return[E];{const _=[...l.Conditions||[""]],A=new Set([0]);return A.add(l.MaxStacks||0),A.add(Math.floor((l.MaxStacks||0)/2)),Array.from(Kt(_,Array.from(A))).map(([S,h])=>["effect condition "+S+`
effect stacks `+h])}});s.length===0&&s.push([]);const n=Array.from(Kt(...s)),i=[];for(const l of n){const E={};l.forEach((_,A)=>{E[e[A].Name]=_}),i.push(E)}return i}var ce=J.GetList(),Zc=class extends ct{constructor(){super(...arguments),this.cases=new Map,this.combinations=[],this.constants={},this.initDamage=0,this.queue=new st}init(e){this.Combinate(e),this.setTotal(this.combinations.length),this.constants=this.getConstants(),this.initDamage=this.Run();const s=this.GetTarget().GetArtifacts();if(!s)throw new Error("Target character has no artifacts to be optimized");this.initState=s.GetArtifacts().map(n=>I.Export(n))}Combinate(e){e.ConfigCmd&&(this.cases=Jt(e.ConfigCmd)),this.combinations=[];for(let a=0;a<ce.length;a++)for(let s=a;s<ce.length;s++){const n=[ce[a],ce[s]].sort((i,l)=>i.Stars-l.Stars);this.combinations.push(...this.createRows(n[0],n[1]))}}createRows(e,a){const s=(()=>e===a?[...e.Piece2,...e.Piece4]:[...e.Piece2,...a.Piece2])(),n=Jc(s,this.cases),i=[];for(const l of n){const E={sets:[e.Name,a.Name],cmds:l};i.push(E)}return i}*Generate(){for(const e of this.combinations)yield e}Evaluate(e){const a=this.GetRunner(),n=this.GetTarget().GetArtifacts();if(!n)throw new Error("Target character has no artifacts to be optimized");const[i,l]=e.sets,E=J.FindByName(i),_=J.FindByName(l);n.Get(0).SetSet(i),n.Get(1).SetSet(i),n.Get(2).SetSet(l),n.Get(3).SetSet(l);const A=new Set;E&&E.Stars===4&&(A.add(0),A.add(1)),_&&_.Stars===4&&(A.add(2),A.add(3));for(const h of A)I.transform.Downgrade(n.Get(h));const u={sets:[i,l],states:[],damage:0,relative:0};for(const h of n.GetEffects()){const L=h.Options.Name;a.Scenario.Effect=h;const f=e.cmds[L];if(!f)continue;let N="";for(const p of f){const M=a.Program.CompileString(p,{constants:this.constants});M(),N+=M.String()+`
`}u.states.push({state:r.Export(h),cmd:"effect set "+L+`
`+N,effect:L})}const S=this.Run();if(u.damage=S,u.relative=S/this.initDamage,this.initState&&A.size>0){const h=this.initState;n.GetArtifacts().forEach((L,f)=>I.Import(h[f],L))}return u}Insert(e){this.queue.Push(e,e.damage)}Get(){return this.queue.Extract()}Format(e){const a=new T.Table(T.labels.SET,T.labels.SET,T.labels.STACKS,T.labels.CONDITION,T.labels.DAMAGE,T.labels.RELATIVE);for(const s of e){let[n,i]=s.sets;n===i?(n+=" (2)",i+=" (4)"):(n+=" (2)",i+=" (2)");const l=s.states.map(({state:_,effect:A})=>{const u=oe.FindByName(A);return u&&(u.MaxStacks||0)>0?_.stacks+"":""}).filter(_=>!!_).join(", "),E=s.states.map(({state:_})=>[..._.conditions]).reduce((_,A)=>(A.forEach(u=>_.push(u)),_),[]).filter(_=>!!_).join(", ");a.AddRow(n,i,l,E,s.damage,w(s.relative*100,2)+"%")}return a}EquipCmd(e){let a=`artifact add
artifact sets `+e.sets.join(" ")+`
`;const[s,n]=e.sets,i=J.FindByName(s),l=J.FindByName(n),E=new Set;i&&i.Stars===4&&(E.add("flower"),E.add("plume")),l&&l.Stars===4&&(E.add("sands"),E.add("goblet"));for(const _ of E)a+=_+` downgrade
`;for(const{cmd:_}of e.states)a+=_+`

`;return a+="effect unset",a}},tE=class extends ct{constructor(){super(...arguments),this.cases=new Map,this.combinations=[],this.constants={},this.initDamage=0,this.queue=new st}init(e){this.Combinate(e),this.setTotal(this.combinations.length),this.constants=this.getConstants(),this.initDamage=this.Run()}Combinate(e){var a;e.ConfigCmd&&(this.cases=Jt(e.ConfigCmd));const s=(()=>e.All?Z.GetList():Z.GetByType(this.GetTarget().GetCharacter().Options.Weapon||0))();this.combinations=[];for(const n of s){const i=((a=e.Ranks)==null?void 0:a[n.Stars])||[1];if(n.Effects.length===0){for(const E of i)this.combinations.push({weapon:n.Name,cmds:{},cmd:`weapon level 90
weapon rank `+E});continue}const l=Jc(n.Effects,this.cases);for(const E of l)for(const _ of i){const A={weapon:n.Name,cmds:E,cmd:`weapon level 90
weapon rank `+_};this.combinations.push(A)}}}*Generate(){for(const e of this.combinations)yield e}Evaluate(e){var a;const s=this.GetRunner(),n=this.GetTarget();s.Scenario.Character=n,(a=n.GetWeapon())==null||a.Unequip();const i=Z.FindByName(e.weapon);if(!i)throw new Error("Cannot find weapon: "+e.weapon);n.SetWeapon(i);const l=n.GetWeapon();if(!l)throw new Error("Cannot equip the weapon: "+e.weapon);const E=s.Program.CompileString(e.cmd,{constants:this.constants});E();const _={weapon:l.Options.Name,states:[],damage:0,relative:0,cmd:E.String(),rank:l.GetRank()};for(const u of l.GetEffects()){const S=u.Options.Name;s.Scenario.Effect=u;const h=e.cmds[S];if(!h)continue;let L="";for(const f of h){const N=s.Program.CompileString(f,{constants:this.constants});N(),L+=N.String()+`
`}_.states.push({state:r.Export(u),cmd:"effect set "+S+`
`+L,effect:S})}const A=this.Run();return _.damage=A,_.relative=A/this.initDamage,_}Insert(e){this.queue.Push(e,e.damage)}Get(){return this.queue.Extract()}Format(e){const a=new K(T.labels.WEAPON,T.labels.STACKS,T.labels.CONDITION,T.labels.DAMAGE,T.labels.RELATIVE);for(const s of e){const n=s.states.map(({state:l,effect:E})=>{const _=oe.FindByName(E);return _&&(_.MaxStacks||0)>0?l.stacks+"":""}).filter(l=>!!l).join(", "),i=s.states.map(({state:l})=>[...l.conditions]).reduce((l,E)=>(E.forEach(_=>l.push(_)),l),[]).filter(l=>!!l).join(", ");a.AddRow(s.weapon+` (R${s.rank})`,n,i,s.damage,w(s.relative*100,2)+"%")}return a}EquipCmd(e){let a="weapon set "+e.weapon+`
`+e.cmd+`
`;for(const{cmd:s}of e.states)a+=s+`

`;return a+="effect unset",a}};function zm(e,a){if(e.allowSetNumber){const s=e.allowSetNumber;if(a.length===0&&!s.includes(0)||!a.map(([,i])=>i).some(i=>s.includes(i)))return!1}if(e.allowOnly){const s=e.allowOnly.map(i=>i.toLowerCase());if(!a.map(i=>i[0].toLowerCase()).every(i=>s.includes(i)))return!1}return!0}var qm=[...t.Mainstats,...t.Substats],eE=class extends ct{constructor(){super(...arguments),this.compiled=new Map,this.groups=[],this.mods=new Map,this.initDamage=0,this.initSets=[],this.queue=new st(5),this.prevSets="",this.equipCmd=""}init(e){var a,s;e.artifacts=[...e.artifacts];const n=this.GetRunner().Program,i=Jt(e.ConfigCmd||"");for(const[E,_]of i){const A="effect set "+E+`
`+_.join(`
`)+`
effect unset`,u=n.CompileString(A,{constants:this.getConstants()});this.compiled.set(E,u)}for(const E of t.piece.Values())this.groups[E]=[];if(e.artifacts.forEach((E,_)=>this.groups[E.piece].push([_,E])),this.target){this.initDamage=this.Run();let E=(a=this.target.GetArtifacts())==null?void 0:a.GetArtifacts();E||(this.target.SetArtifacts(new ht.Artbox(this.target)),E=(s=this.target.GetArtifacts())==null?void 0:s.GetArtifacts());const _=[];E&&E.forEach(A=>{this.groups[A.GetPiece()].length>0&&A.Disable(),_[A.GetPiece()]=A.GetSet()}),this.initSets=_;for(const A of qm)this.mods.set(A,this.target.GetCharacter().CreateModifier(A,0))}for(const E of t.piece.Values())this.groups[E].length||this.groups[E].push([-1,void 0]);let l=1;for(const E of Object.values(this.groups))E.sort((_,A)=>{var u,S;return(((u=_[1])==null?void 0:u.set)||"").localeCompare(((S=A[1])==null?void 0:S.set)||"")}),l*=E.length;this.setTotal(l)}*Generate(){for(let e=0;e<this.groups[t.piece.FLOWER].length;e++)for(let a=0;a<this.groups[t.piece.PLUME].length;a++)for(let s=0;s<this.groups[t.piece.SANDS].length;s++)for(let n=0;n<this.groups[t.piece.GOBLET].length;n++)for(let i=0;i<this.groups[t.piece.CIRCLET].length;i++)yield this.Combinate([e,a,s,n,i])}Combinate(e){const a=this.GetConfig(),s=t.piece.Values().map(u=>this.groups[u][e[u]]),n=s.map(([,u])=>u),i=s.map(([u])=>u),l=[...this.initSets];for(const u of n)!u||(l[u.piece]=u.set);const[E,_]=Xe(l);if(!zm(a,E))return;const A=[];for(const u of n){if(!u)continue;const S=u,h=o.GetMainstatValue(S.stars,S.mainstat,S.level),L=A.find(f=>f.stat===S.mainstat);L?L.value+=h:A.push({stat:S.mainstat,value:h});for(const{stat:f,value:N}of S.substats){const p=A.find(M=>M.stat===f);p?p.value+=N:A.push({stat:f,value:N})}}return{indexes:i,sets:_,stats:A}}configSets(e,a){const s=a.join(";");if(s!==this.prevSets){this.equipCmd="",e.Get(0).SetSet(a[0]),e.Get(1).SetSet(a[0]),e.Get(2).SetSet(a[1]),e.Get(3).SetSet(a[1]),e.Get(4).SetSet(void 0);for(const n of e.GetEffects()){const i=this.compiled.get(n.Options.Name.toLowerCase());i&&(i(),this.equipCmd+=i.toString()+`
`)}this.prevSets=s}}Evaluate(e){if(!e)return;const a=this.GetTarget(),s=a.GetArtifacts(),{filter:n}=this.GetConfig();if(!s)throw new Error("Target has no artifacts to be optimized. Try to run `.Init()` first");for(const{stat:E,value:_}of e.stats){const A=this.mods.get(E);if(!A)throw new Error("Modifier not initialized for stat "+E+". Try to run `.Init()` first");A.SetValue(_)}if(this.configSets(s,e.sets),n&&!_a(a.GetCharacter(),...n))return;const i=this.Run(),l=i/this.initDamage;for(const{stat:E}of e.stats){const _=this.mods.get(E);if(!_)throw new Error("Modifier not initialized for stat "+E+". Try to run `.Init()` first");_.SetValue(0)}return{indexes:e.indexes,sets:e.sets,cmd:this.equipCmd,damage:i,relative:l}}Insert(e){e&&e.damage>0&&this.queue.Push(e,e.damage)}Get(){return this.queue.Extract()}Format(){throw new Error("Method not implemented.")}GetArtifacts({indexes:e}){const{artifacts:a}=this.GetConfig();return e.filter(s=>s>=0).map(s=>a[s])}},aE={};D(aE,{FoodOptimizer:()=>sE});var sE=class extends ct{constructor(){super(...arguments),this.initDamage=0,this.queue=new st,this.groups=[]}init(){this.initDamage=this.Run();for(const e of[gt.FoodType.OFFENSIVE,gt.FoodType.ELEMENTAL,gt.FoodType.DEFENSIVE]){const a=Ht.GetByType(e);this.groups.push(a.map(s=>s.Name))}this.setTotal(this.groups.reduce((e,a)=>e*a.length,1))}Generate(){return Kt(...this.groups)}Evaluate(e){const a=this.GetRunner(),s=e.map(i=>"food add "+i+" 3").join(`
`);a.Program.CompileString(s)();const n=this.Run();return{foods:e,cmd:s,damage:n,relative:n/this.initDamage}}Insert(e){this.queue.Push(e,e.damage)}Get(){return this.queue.Extract()}Format(e){const a=new K("FOOD_TYPE_0","FOOD_TYPE_3","FOOD_TYPE_1","DAMAGE","RELATIVE");for(const s of e)a.AddRow(...s.foods,w(s.damage,0),w(s.relative*100,2)+"%");return a}};function*nE(e){const a=Object.keys(e),s=a.map(i=>e[i]),n=Kt(...s);for(const i of n){const l={};for(let E=0;E<a.length;E++){const _=a[E],A=i[E];l[_]=A}yield l}}function iE(e){let a=1;const s=Object.keys(e);for(const n of s)a*=e[n].length;return a}var Ee=class{constructor(){this.weapons=[],this.artifacts=[]}addWeapon(e){this.weapons.push(e)}getWeapons(){return this.weapons.length>0?this.weapons:[{empty:[!0],name:[""],rank:[0]}]}addArtifacts(e){this.artifacts.push(e)}getArtifacts(){return this.artifacts.length>0?this.artifacts:[{empty:[!0],sands:[0],goblet:[0],circlet:[0]}]}*generate(){const e=Kt(this.getWeapons(),this.getArtifacts());for(const a of e){const s=nE(a[0]);for(const n of s){const i=nE(a[1]);for(const l of i)yield{weapon:n,artifact:l}}}}get(){return{weapon:this.weapons,artifact:this.artifacts}}clear(){this.weapons=[],this.artifacts=[]}static*Generate(...e){const a=new Ee;for(const s of e){for(const n of s.weapon)a.addWeapon(n);for(const n of s.artifact)a.addArtifacts(n);yield*a.generate(),a.clear()}}static Count(...e){let a=0;for(const s of e){const n=s.weapon.map(l=>iE(l)).reduce((l,E)=>l+E,0),i=s.artifact.map(l=>iE(l)).reduce((l,E)=>l+E,0);a+=n*i}return a}};function Qm(e){let a="";return e.weapon.empty||(a+=$m(e.weapon)+`
`),e.artifact.empty||(a+=Xm(e.artifact)),a}function $m(e){const a=Z.FindByName(e.name);if(!a)throw new Error(`Weapon ${e.name} not found`);const s=[`weapon set ${e.name}`,`weapon rank ${e.rank}`,"weapon level 90"];for(const n of a.Effects)s.push("effect unset",`effect set ${n.Name}`),s.push(rE(e,n.ApplyOther)),s.push("effect unset");return s.join(`
`)}function Xm(e){const a=["artifact add","artifact main "+[e.sands,e.goblet,e.circlet].map(s=>t.stat.Name(s)).join(" "),"artifact stars 5","artifact level 20"];if(e.set&&(a.push("artifact sets "+e.set.join(" ")),e.set[0]===e.set[1])){const s=J.FindByName(e.set[0]);if(!s)throw new Error(`Set ${e.set[0]} not found`);for(const n of s.Piece4)a.push("effect unset",`effect set ${n.Name}`),a.push(rE(e,n.ApplyOther)),a.push("effect unset")}return a.join(`
`)}function rE(e,a){const s=[];return Number.isFinite(e.stacks)&&s.push(`effect stacks ${e.stacks}`),e.condition&&s.push(`effect condition ${e.condition.join(" ")}`),e.aura&&s.push(`effect aura ${e.aura.join(" ")}`),e.target&&a&&s.push("effect unapply all",`effect apply ${e.target.join(" ")}`),s.join(`
`)}function Te(e){const a=new Map;for(const s of e){const n=Jm(s);a.set(n.name,n.value)}return a}function Jm(e){const a=e.split("="),s=a.shift()||"",n=a.join("=");if(a.length===0)return{name:"",value:[s]};const i=[],l=n.split(",");for(const E of l)E.includes(":")?i.push(...Zm(E)):i.push(E);return{name:s,value:i}}function Zm(e){const a=e.split(":");if(a.length===1)return a;if(a.length>3)throw new Error(`Invalid argument range: ${e} has more than 3 values (min:max:step)`);const[s,n,i]=a,l=parseInt(i!=null?i:1),E=parseInt(s),_=parseInt(n);if(!Number.isFinite(E)||!Number.isFinite(_)||!Number.isFinite(l))throw new Error(`Invalid argument range: ${e} has non-numeric values`);if(E>_)throw new Error(`Invalid argument range: ${e} has min > max`);if(l<=0)throw new Error(`Invalid argument range: ${e} has step <= 0`);const A=[];for(let u=E;u<=_;u+=l)A.push(u.toString());return A}function lE(e){const{list:a,query:s,count:n=1,threshold:i=.5,substring:l=!0}=e,E=new st(n);for(const _ of a){if(l&&_.includes(s)){const u=_.length/s.length;E.Push(_,u);continue}const A=ba.stringSimilarity(s,_);A>=i&&E.Push(_,A)}return E.Extract()}var $=new Map;t.stat.Values().forEach(e=>{const a=t.stat.Name(e).toLowerCase();$.set(a,e)}),$.set("hp",t.stat.HP_FLAT),$.set("hp%",t.stat.HP_PERCENT),$.set("atk",t.stat.ATK_FLAT),$.set("atk%",t.stat.ATK_PERCENT),$.set("def",t.stat.DEF_FLAT),$.set("def%",t.stat.DEF_PERCENT),$.set("er",t.stat.ENERGY_RECHARGE),$.set("em",t.stat.ELEMENTAL_MASTERY),$.set("cr",t.stat.CRIT_RATE),$.set("cd",t.stat.CRIT_DMG),$.set("cdmg",t.stat.CRIT_DMG),t.Elements.forEach(e=>{const a=t.stat.Name(e).toLowerCase().replace(/_?dmg/ig,"");$.set(a,e)}),Array.from($.keys());function Sa(e){return $.get(e)}function oE(e){var a,s,n,i;const l=((a=e.get("stacks"))!=null?a:["0"]).map(u=>parseInt(u)),E=((s=e.get("condition"))!=null?s:[""]).map(u=>u.split(";")),_=((n=e.get("aura"))!=null?n:[""]).map(u=>u.split(";")),A=((i=e.get("target"))!=null?i:[""]).map(u=>u.split(";"));return{stacks:l,condition:E,aura:_,target:A}}var tN=J.GetList().map(e=>e.Name.toLowerCase());function eN(e){var a;const s=Te(e),n=(s.get("main")||["atk%","atk%","atk%"]).map(u=>u.split("/")).map(u=>u.map(S=>{const h=Sa(S);if(!h)throw new Error(`Main stat "${S}" not found`);return h})),[i,l,E]=n;if(!i)throw new Error("Main stat sands not found");if(!l)throw new Error("Main stat goblet not found");if(!E)throw new Error("Main stat circlet not found");const _=(a=s.get("set"))==null?void 0:a.map(u=>nN(u)),A=F({sands:i,goblet:l,circlet:E},oE(s));return _&&(A.set=_),A}var aN=/^([a-z]+)\+([a-z]+)$/i,sN=/^([a-z]+)\*(4|2)$/i;function nN(e){let a=e.match(aN);if(a){const[,s,n]=a;return[_e(s),_e(n)]}if(a=e.match(sN),a){const[,s,n]=a,i=[];for(let l=0;l<parseInt(n)/2;l++)i.push(_e(s));return i}return[_e(e)]}function _e(e){const a=lE({list:tN,query:e,count:1,threshold:.2});if(a.length===0)throw new Error(`Set name "${e}" not found`);return a[0]}var iN=class{constructor(){this.Value=Aa(),this.Enabled=!1}Apply(e){return this.Enabled?e.substats=[F({},this.Value)]:delete e.substats,this.Enabled}DefaultRange(){const e=new K(O.STAT,O.MIN,O.MAX);this.Value=Aa();for(const{stat:a,min:s,max:n}of this.Value.substats){const i=t.stat.Name(a);e.AddRow(i,s,n)}return`Total: ${this.Value.total}
Tier: ${this.Value.tier}
`+e.toString()}ParseRange(e){const a=new K(O.STAT,O.MIN,O.MAX),s=[],n=Te(e);for(const[i,l]of n){const E=Sa(i);if(!E)throw new Error(`Substat "${i}" not found`);let _=1/0,A=0;l.forEach(S=>{const h=parseFloat(S);h<_&&(_=h),h>A&&(A=h)}),s.push({stat:E,min:_,max:A});const u=t.stat.Name(E);a.AddRow(u,_,A)}return this.Value.substats=s,a+""}ParseMin(e){const a=new K(O.STAT,O.MIN),s=[],n=Te(e);for(const[i,l]of n){const E=Sa(i);if(!E)throw new Error(`Substat "${i}" not found`);if(l.length!==1)throw new Error(`Substat "${i}" min must be a single value`);const _=B(l[0]);s.push({stat:E,value:_,operator:">="}),a.AddRow(t.stat.Name(E),_)}return this.Value.filter=s,a}Cmd(){return{enable:{description:"Enables substat optimization. When enabled, substats currently in artifacts will be removed, and replaced with an optimal combination of substats based on the ranges defined.",arguments:[],compile:({Log:e})=>()=>{e.Log("Substat optimization enabled"),this.Enabled=!0}},disable:{description:"Disables substat optimization. When disabled, substats currently in artifacts will be kept.",arguments:[],compile:({Log:e})=>()=>{this.Enabled=!1,e.Log("Substat optimization disabled")}},total:{description:"Sets the total substat rolls to optimize. Values must be between 0 and 45.",arguments:["total"],example:"substats total 25 // optimize for 25 substat rolls",compile:({Log:e},[a])=>{const s=parseInt(a);if(isNaN(s)||s<0||s>45)throw new Error("Total must be between 0 and 45");return()=>{this.Value.total=s,e.Log(`Substat optimization total set to ${s}`),this.Enabled=!0,e.Log("Substat optimization enabled")}}},tier:{description:`Sets the tier of substat rolls to optimize. 
`,arguments:["0 | 1 | 2 | 3 | avg = 4"],example:`substats tier 3 // optimize max-rolls
substats tier avg // optimize average rolls`,compile:({Log:e},[a])=>{let s,n;return a==="avg"||a==="4"?(s=4,n="AVERAGE"):(s=Math.max(0,Math.min(4,Math.floor(B(a)))),n=s+""),()=>{this.Value.tier=s,e.Logf("Substat optimization tier set to %s",n),this.Enabled=!0,e.Log("Substat optimization enabled")}}},range:{description:`Defines the range of substats to be used in optimization in the form:

\`range <stat>=<min>:<max> [stat2=<min>:<max> ...]\`

When executed, the substats optimization will be enabled.`,arguments:["..."],example:"substats range atk=2:12 cr=2:10 cd=2:12 em=2:12 // standard range",compile:({Log:e},a)=>()=>{const s=this.ParseRange(a);e.Log("Substat optimization ranges:"),e.Log(`
`+s.toString()),this.Enabled=!0,e.Log("Substat optimization enabled")}},min:{description:`Adds a minimum value for a substat in the form:

\`min <stat>=<min> [stat2=<min> ...]\`

When executed, the substats optimization will be enabled.`,arguments:["..."],compile:({Log:e},a)=>()=>{const s=this.ParseMin(a);e.Log("Substat optimization minimums:"),e.Log(`
`+s.toString()),this.Enabled=!0,e.Log("Substat optimization enabled")}},default:{description:"Resets the substat ranges to the default values.",arguments:[],compile:({Log:e})=>()=>{const a=this.DefaultRange();e.Log(`Substat optimization ranges reset to default:
`+a),this.Enabled=!0,e.Log("Substat optimization enabled")}}}}},rN=class{constructor(e){const a=Number.isFinite(e)?Z.GetByType(e):Z.GetList();this.namesAll=a.map(s=>s.Name.toLowerCase()),this.names4=a.filter(s=>s.Stars===4).map(s=>s.Name.toLowerCase()),this.names5=a.filter(s=>s.Stars===5).map(s=>s.Name.toLowerCase())}Parse([e,...a]){var s;const n=Te(a),i=this.parseName(e),l=((s=n.get("rank"))!=null?s:["1"]).map(E=>parseInt(E));return F({name:i,rank:l},oE(n))}parseName(e){if(e==="all")return this.namesAll;if(e==="4*")return this.names4;if(e==="5*")return this.names5;const a=lE({list:this.namesAll,query:e,count:1,threshold:.4});if(a.length===0)throw new Error(`Weapon name "${e}" not found`);return a}},cE=class{constructor(e){this.Program=new Zt(this),this.combinator=new Ee,this.groups=[],this.Substats=new iN;const a=new rN(e);this.Program.Set({add:{description:"Saves the current combinations group and starts a new one.",arguments:[],compile:({Log:s})=>()=>{this.groups.push(this.combinator.get()),this.combinator.clear(),s.Log("Combination group saved")}},weapon:{description:"Adds weapons to be combined, in the form:\n```\nweapon <name> [rank=] [stacks=] [condition=] [aura=] [target=]\n```\n- The weapon name can be a partial or similar name, and can be `all`, `4*`, or `5*`.\n- Rank and stacks can be defined as a list, e.g. `rank=1,2,3`, or a range, e.g. `rank=1:3`.\n- Conditions and auras can also be lists, e.g. `aura=pyro,hydro`.\n",arguments:["name","opts..."],example:`weapon all // all weapons
weapon 4* // all 4* weapons
weapon jadespear rank=1,5 stacks=0:7 // Jade Spear, rank 1 or 5, all stacks
weapon thrillingtales rank=5 target=mona // Thrilling Tales, rank 5, apply to Mona
`,compile:({Log:s},n)=>{const i=a.Parse(n);return()=>{var l,E,_,A,u,S,h;this.combinator.addWeapon(i),s.Logf(`
Added weapons: %s
  Rank: %s
  Stacks: %s
  Condition: %s
  Aura: %s
  Target: %s
`,i.name.join(", "),i.rank.join(", "),(l=i.stacks)==null?void 0:l.join(", "),(_=(E=i.condition)==null?void 0:E.join(", "))!=null?_:"",(u=(A=i.aura)==null?void 0:A.join(", "))!=null?u:"",(h=(S=i.target)==null?void 0:S.join(", "))!=null?h:"")}}},artifact:{description:"Adds artifacts to be combined, in the form:\n```\nartifact [main=] [set=] [stacks=] [condition=] [aura=] [target=]\n```\n- The main stat is in the form `main=sands,goblet,circlet`, where each slot can have multiple options separated by `/`.\n- Stacks can be defined as a list, e.g. `rank=1,2,3`, or a range, e.g. `rank=1:3`.\n- Conditions and auras can also be lists, e.g. `aura=pyro,hydro`.\n",arguments:["..."],example:`// compare 4pc Crimson Witch and Emblem of Severed Fate,
// with ATK% vs EM sands, Pyro goblet, and CR vs CD circlet
artifact main=atk%/em,pyro,cr/cd set=crimson*4,emblem*4`,compile:({Log:s},n)=>{const i=eN(n);return()=>{var l,E,_,A,u,S,h;const L=F({},i),f=this.Substats.Apply(L);this.combinator.addArtifacts(L),s.Logf(`
Added artifacts:
  Sands: %s
  Goblet: %s
  Circlet: %s
  Stacks: %s
  Condition: %s
  Aura: %s
  Target: %s
`,L.sands.map(N=>t.stat.Name(N)).join(", "),L.goblet.map(N=>t.stat.Name(N)).join(", "),L.circlet.map(N=>t.stat.Name(N)).join(", "),(l=L.stacks)==null?void 0:l.join(", "),(_=(E=L.condition)==null?void 0:E.join(", "))!=null?_:"",(u=(A=L.aura)==null?void 0:A.join(", "))!=null?u:"",(h=(S=L.target)==null?void 0:S.join(", "))!=null?h:""),f&&s.Log("Applied substats optimization to artifacts")}}},substats:{description:"Configures substats to optimize for the next combination group. By default, substats are not optimized and current artifacts will be used.",children:this.Substats.Cmd()}})}Groups(){return this.groups}};function lN(e){const a=new Set,s=new Map;for(const{substats:l}of e)if(!!(l!=null&&l.optimized))for(const E of l.optimized)a.add(E);const n=[...a].map((l,E)=>(s.set(l,E),t.stat.Name(l))),i=new K("WEAPON","STACKS","CONDITION","AURA","SANDS","GOBLET","CIRCLET","SET","STACKS","CONDITION","AURA","ATK","DEF","HP",...n,"DAMAGE","RELATIVE");for(const{combination:l,substats:E,damage:_,relative:A}of e){const u={name:"",stacks:"",condition:"",aura:""},S={name:"",stacks:"",condition:"",aura:""};l.weapon.empty||(u.name=l.weapon.name+` (R${l.weapon.rank})`,Number.isFinite(l.weapon.stacks)&&(u.stacks=l.weapon.stacks===0?"":l.weapon.stacks+""),l.weapon.condition&&(u.condition=l.weapon.condition.join(", ")),l.weapon.aura&&(u.aura=l.weapon.aura.join(", ")));let h=ha(3);if(!l.artifact.empty){if(h=[l.artifact.sands,l.artifact.goblet,l.artifact.circlet].map(p=>t.stat.Name(p)),l.artifact.set){const p=[];for(const C of l.artifact.set)p.push(C,C);const[M]=Xe(p);S.name=M.map(([C,g])=>`${C} (${g})`).join(" + ")}Number.isFinite(l.artifact.stacks)&&(S.stacks=l.artifact.stacks===0?"":l.artifact.stacks+""),l.artifact.condition&&(S.condition=l.artifact.condition.join(", ")),l.artifact.aura&&(S.aura=l.artifact.aura.join(", "))}const L=ha(3),f=ha(n.length);E&&(E.optimized.forEach((N,p)=>{const M=s.get(N);if(M!==void 0){const C=E.stats[p],R=t.FlatStats.includes(N)?w(C,0):w(C*100,2)+"%";f[M]=R+` (${E.rolls[p]})`}}),E.basic.forEach((N,p)=>L[p]=w(N,0))),i.AddRow(u.name,u.stacks,u.condition,u.aura,...h,S.name,S.stacks,S.condition,S.aura,...L,...f,w(_,0),w(A*100,2)+"%")}return i.RemoveEmptyColumns(),i}function ha(e,...a){const s=Array.from(Array(e)).fill(void 0);for(let n=0;n<e;n++)s[n]=a[n];return s}var La=class extends ct{constructor(){super(...arguments),this.generator=void 0,this.constants={},this.initDamage=0,this.results=new st}init(e){var a;this.constants=this.getConstants();const s=new cE((a=this.target)==null?void 0:a.GetCharacter().Options.Weapon);s.Program.Log=new k,s.Program.Log.Out=()=>{},s.Program.CompileString(e.ConfigCmd,{constants:this.constants})(),this.generator=Ee.Generate(...s.Groups()),this.setTotal(Ee.Count(...s.Groups())),this.party&&(this.initState=Wn(this.party),this.initDamage=this.Run()),SN()===1&&console.log(`[MAIN WORKER INIT LOG]
`+s.Program.Log)}*Generate(){yield*this.generator}Evaluate(e){const a=this.GetRunner(),s=this.GetTarget();a.Scenario.Character=s;let n=Qm(e);a.Program.CompileString(n,this.constants)();let l=0,E;if(e.artifact.substats){const A=new bt;A.SetParty(this.GetParty()),A.SetTarget(this.GetTarget()),A.SetRotation(this.GetRotation()),A.Init(F({},e.artifact.substats));for(const u of A.Generate())A.Insert(A.Evaluate(u));if(E=A.Get()[0],!E){A.Clear(),Qe(this.initState,this.party);return}l=E.damage,n+=`
`+A.EquipCmd(E),A.Clear(),Qe(this.initState,this.party)}else l=this.Run();const _=l/this.initDamage;return{cmd:n,combination:e,substats:E,damage:l,relative:_}}Insert(e){!e||this.results.Push(e,e.damage)}Get(){return this.results.Extract()}Format(e){return La.Format(e)}static Format(e){const a=e.filter(s=>s!==void 0);return lN(a)}},x=lt("NORMAL_ATTACK_LEVEL","ELEMENTAL_SKILL_LEVEL","ELEMENTAL_BURST_LEVEL","CHARACTER_LEVEL","CHARACTER_ASCENSION","WEAPON_LEVEL","WEAPON_ASCENSION");function oN(e,a){const s=cN(a),n=e[s];if(!n)throw new Error(`Cost not found for ${s}`);return n}function cN(e){switch(e.type){case x.NORMAL_ATTACK_LEVEL:case x.ELEMENTAL_SKILL_LEVEL:case x.ELEMENTAL_BURST_LEVEL:return"talent_"+e.value;default:return x.Name(e.type).toLowerCase()+"_"+e.value}}var Ae={damage:{criteria:"max",fn(e,a){return a}},cost:{criteria:"min",fn(e){return e.cost}},efficiency:{criteria:"max",fn(e,a,s){return s/e.cost}}};function xN(e){return e}function EN(e,a,...s){var n;const i={};for(const l of s){const E=(n=e.upgrades[a])==null?void 0:n[l];if(!E)throw new Error(`Upgrade ${l} not found for ${a} stars`);try{i[l]=TN(e,E)}catch(_){throw new Error(`cannot calculate cost for upgrade ${l} at ${a} stars: 
${_}`)}}return i}function TN(e,a){const s=Object.keys(a),n=Object.keys(e.domains),i=new Gt(n);i.Objective(Gt.Vars(n,A=>[A,e.domains[A].cost]));for(const A of s)i.Constraint(Gt.Vars(n,u=>[u,-e.domains[u][A]]),-a[A]);const l=i.Solve("min");if(!l.feasible)throw new Error("cannot calculate cost because the problem is infeasible. Check that the required resources are obtainable from the given domains.");const E=l.result,_=Gt.Vars(n,A=>{const u=l[A];if(!!u)return[A,u]});return F({cost:E},_)}var _N=()=>({domains:{},upgrades:{5:{},4:{},3:{}}}),EE=class{constructor(){this.Program=new Zt(this),this.pool=_N(),this.stars=[5],this.pointer="domains",this.Program.Set({domain:{description:"Sets the current domain to add resources to.",arguments:["name"],compile:({Log:e},[a])=>()=>{this.pool.domains[a]||(this.pool.domains[a]={}),this.pointer="domains",this.name=a,e.Log(`Domain set to ${a}`)}},upgrade:{description:"Sets the current upgrade to add resources to,in the currently selected stars with the `stars` command.",arguments:["name"],compile:({Log:e},[a])=>()=>{for(const s of this.stars)this.pool.upgrades[s][a]||(this.pool.upgrades[s][a]={});this.pointer="upgrades",this.name=a,e.Log(`Upgrade set to ${a}`)}},stars:{description:"Sets the current stars to add upgrades to.",arguments:["stars..."],compile:({Log:e},a)=>{const s=a.map(B);return()=>{for(const n of s)this.pool.upgrades[n]||(this.pool.upgrades[n]={});this.stars=s,e.Log(`Stars set to ${s}`)}}},cost:{description:"Sets the resin cost for the current domain.",arguments:["cost"],compile:({Log:e},[a])=>{const s=B(a);return()=>{const n=this.getLists();for(const i of n)i.cost=s;e.Log(`Resin cost set to ${s}`)}}},resource:{description:"Adds a resource to the current domain or upgrade.",arguments:["name","value"],compile:({Log:e},[a,s])=>{const n=B(s);return()=>{const i=this.getLists();for(const l of i)l[a]=n;e.Log(`Resource ${n} set to ${a}`)}}}})}getLists(){if(!this.name)throw new Error("No domain or upgrade selected");if(this.pointer==="domains"){const a=this.pool.domains[this.name];if(!a)throw new Error(`No domain named ${this.name}`);return[a]}const e=[];for(const a of this.stars){const s=this.pool.upgrades[a][this.name];if(!s)throw new Error(`No upgrade named ${this.name}`);e.push(s)}return e}GetDomains(){return this.pool.domains}GetResources(){const e=new Set;for(const a of Object.values(this.pool.domains))for(const s of Object.keys(a))e.add(s);for(const a of Object.values(this.pool.upgrades))for(const s of Object.values(a))for(const n of Object.keys(s))e.add(n);return Array.from(e)}GetStars(){return Object.keys(this.pool.upgrades).map(B)}GetUpgrades(e){return this.pool.upgrades[e]}GetPool(){return this.pool}CalculateCost(){const e={};for(const a of Object.keys(this.pool.upgrades)){const s=B(a);e[s]=EN(this.GetPool(),s,...Object.keys(this.pool.upgrades[s]))}return e}};function AN(e){const a=e.GetCharacter(),s=e.GetWeapon(),n=a.Options.Name,i=TE(n,a);return s&&i.push(...TE(n,s,!1)),i.push(...uN(a)),i}function TE(e,a,s=!0){const n=a.GetLevel(),i=a.GetAscension(),l=ts(i);return n<l?[{target:e,type:s?x.CHARACTER_LEVEL:x.WEAPON_LEVEL,stars:a.Options.Stars,value:l,visible:l}]:i<6?[{target:e,type:s?x.CHARACTER_ASCENSION:x.WEAPON_ASCENSION,stars:a.Options.Stars,value:i+1,visible:i+1}]:[]}var fa=[1,1,2,4,6,8,10];function uN(e){const a=e.GetAscension(),s=e.Get(t.stat.NORMAL_ATTACK_LEVEL_UP),n=e.Get(t.stat.ELEMENTAL_SKILL_LEVEL_UP),i=e.Get(t.stat.ELEMENTAL_BURST_LEVEL_UP),l=e.Get(t.stat.NORMAL_ATTACK_LEVEL)-s,E=e.Get(t.stat.ELEMENTAL_SKILL_LEVEL)-n,_=e.Get(t.stat.ELEMENTAL_BURST_LEVEL)-i,A=[];return l<fa[a]&&A.push({target:e.Options.Name,type:x.NORMAL_ATTACK_LEVEL,stars:e.Options.Stars,value:l+1,visible:l+1+s}),E<fa[a]&&A.push({target:e.Options.Name,type:x.ELEMENTAL_SKILL_LEVEL,stars:e.Options.Stars,value:E+1,visible:E+1+n}),_<fa[a]&&A.push({target:e.Options.Name,type:x.ELEMENTAL_BURST_LEVEL,stars:e.Options.Stars,value:_+1,visible:_+1+i}),A}function ma(e){let a="character set "+e.target+`
`;const s=x.Name(e.type),n=ts(e.visible-1);switch(e.type){case x.NORMAL_ATTACK_LEVEL:case x.ELEMENTAL_SKILL_LEVEL:case x.ELEMENTAL_BURST_LEVEL:a+=`character stat set ${s} ${e.visible}
`;break;case x.CHARACTER_LEVEL:a+=`character level ${e.visible}
`;break;case x.CHARACTER_ASCENSION:a+=`character level ${n}+
`;break;case x.WEAPON_LEVEL:a+=`weapon level ${e.visible}
`;break;case x.WEAPON_ASCENSION:a+=`weapon level ${n}+
`;break}return a}var _E=class extends ct{constructor(){super(...arguments),this.TRANSFORM=!0,this.MAX_CHUNK_SIZE=1,this.MAX_CHILDREN=1,this.queue=new st,this.levelCount=0,this.initDamage=0,this.prevDamage=0,this.costs={},this.criteria=Ae.damage,this.result=[],this.SendMessage=()=>{if(this.queue.Length()<this.levelCount)return;const e=this.queue.Extract();this.result.push(e);const a=e[0];return a.selected=!0,{step:"upgrade",upgrade:a.upgrade,cmd:ma(a.upgrade),damage:a.damage}}}init(e){if(!e.costs){const a=new EE;a.Program.CompileString(e.resourceCmd)(),e.costs=a.CalculateCost()}this.prevDamage=this.initDamage=this.Run(),this.costs=e.costs,this.criteria=Ae[e.criteria]}getUpgrades(){const e=[],s=this.GetParty().GetMembers();for(const n of s){const i=AN(n);e.push(...i)}return e}RecieveMessage(e){if(!e||e.step!=="upgrade"||!e.damage)return;const a=ma(e.upgrade);this.GetRunner().Program.CompileString(a)(),this.prevDamage=e.damage}*Generate(){let e;do{e=this.getUpgrades(),this.levelCount=e.length;for(const a of e)yield{step:"evaluate",upgrade:a,cmd:ma(a)}}while(e.length>0)}Evaluate(e){const a=this.GetParty(),s=G.ExportParty(a);this.GetRunner().Program.CompileString(e.cmd)();const i=this.Run(),l=i/this.prevDamage-1;G.ImportParty(s,a);const E=oN(this.costs[e.upgrade.stars],e.upgrade),_={};for(const[A,u]of Object.entries(Ae))_[A]=u.fn(E,i,l);return it(F({criteria:this.GetConfig().criteria},_),{cmd:e.cmd,costData:E,upgrade:e.upgrade,relative:i/this.initDamage,increase:l})}Insert(e){const a=e[this.GetConfig().criteria]*(this.criteria.criteria==="max"?1:-1);this.queue.Push(e,a)}Get(){return this.queue.Extract()}Transform(){return this.result.filter(e=>e.length>0&&e[0].increase>1e-6).map(e=>e.filter((a,s,n)=>a.increase<1e-6?!1:n.findIndex(l=>l.cmd===a.cmd)===s))}Format(){throw new Error("Method not implemented.")}static Curve(e){const a=[];let s=0;for(const[n]of e){const i=n.costData;s+=i.cost,a.push([s,n.damage])}return a}},AE={SubstatsOptimizer:bt,MainstatOptimizer:$c,NextRollOptimizer:Xc,SetOptimizer:Zc,WeaponOptimizer:tE,ArtifactsOptimizer:eE,FoodOptimizer:sE,GeneralOptimizer:La,UpgradesOptimizer:_E};function UN(e){return e}var uE=0;function SN(){return uE}function Na(e){uE=e}var hN=class extends Ta{Init(e){return new Promise((a,s)=>{const n=this.worker.Post("backend:optimizer/run/child/init",e),i=this.worker.AddListener("frontend:optimizer/run/child/init",(E,{id:_})=>{_===n&&(a(),this.worker.RemoveListener(i))}),l=this.worker.AddErrorListener(E=>{this.worker.RemoveErrorListener(l),s(E)})})}Send(e){return new Promise((a,s)=>{const n=this.worker.Post("backend:optimizer/run/child/run",e),i=this.worker.AddListener("frontend:optimizer/run/child/run",(E,{id:_,result:A})=>{_===n&&(a(A),this.worker.RemoveListener(i))}),l=this.worker.AddErrorListener(E=>{this.worker.RemoveErrorListener(l),s(E)})})}SendMessage(e){return new Promise((a,s)=>{const n=this.worker.Post("backend:optimizer/run/child/msg",e),i=this.worker.AddListener("frontend:optimizer/run/child/msg",(E,{id:_})=>{_===n&&(a(),this.worker.RemoveListener(i))}),l=this.worker.AddErrorListener(E=>{this.worker.RemoveErrorListener(l),s(E)})})}},LN=class extends Ea{constructor(){super({["backend:optimizer/run"]:(e,a)=>this.Run(e,a)})}Run(e,a){return pt(this,null,function*(){Na(1),k.Global.SaveLogs=!1,k.Global.Out=()=>{};const s=new AE[a.tool];s.Init(a.config);const n=(()=>{const L=s.SendMessage;return L?()=>pt(this,null,function*(){const f=L();s.RecieveMessage(f),yield Promise.all(_.map(N=>N.SendMessage(f)))}):()=>{}})(),i=s.GetTotal();this.Post("frontend:optimizer/run",{id:"progress:"+e,result:[],progress:0,total:i});const l=Math.min(a.chunk,s.MAX_CHUNK_SIZE),E=Math.min(a.children,s.MAX_CHILDREN);console.log(`[WORKER] Spawning ${E} child workers`);const _=fN(E);yield Promise.all(_.map(L=>L.Init(it(F({},a),{rows:[]}))));const A=Um(l*_.length,s.Generate());let u=0;for(const L of A){const N=(yield Promise.all(_.map((p,M)=>{const C=L.slice(M*l,(M+1)*l);return p.Send(it(F({},a),{rows:C}))}))).reduce((p,M)=>(M.forEach(C=>p.push(C)),p),[]);for(const p of N)s.Insert(p);yield n(),u+=L.length,this.Post("frontend:optimizer/run",{id:"progress:"+e,result:[],progress:u,total:i})}const S=s.Get(),h=(()=>{if(s.TRANSFORM)return s.Transform(S)})();_.forEach(L=>L.Kill()),this.Post("frontend:optimizer/run",{id:e,result:S,transform:h})})}};function fN(e){return Array.from(Array(e)).fill(0).map(()=>new hN)}var mN=class extends Ea{constructor(){super({["backend:optimizer/run/child/init"]:(e,a)=>this.Init(e,a),["backend:optimizer/run/child/run"]:(e,a)=>this.Run(e,a),["backend:optimizer/run/child/msg"]:(e,a)=>this.Msg(e,a)})}Init(e,a){Na(2),k.Global.SaveLogs=!1,k.Global.Out=()=>{},(this.optimizer=new AE[a.tool]).Init(a.config),console.log("[CHILD WORKER] Child worker initialized"),this.Post("frontend:optimizer/run/child/init",{id:e})}Run(e,a){if(!this.optimizer)throw new Error("[CHILD WORKER] Optimizer not set in the child worker");for(const n of a.rows)this.optimizer.Insert(this.optimizer.Evaluate(n));const s=this.optimizer.Get();this.Post("frontend:optimizer/run/child/run",{id:e,result:s})}Msg(e,a){if(Na(2),!this.optimizer)throw new Error("[CHILD WORKER] Optimizer not set in the child worker");this.optimizer.RecieveMessage(a),this.Post("frontend:optimizer/run/child/msg",{id:e})}},NN=class extends Ea{constructor(){super({["backend:rotation-damage/run"]:(e,a)=>this.Run(e,a)})}Run(e,a){const s=new oa;k.Global.Out=()=>{};const n=wt.PartyFrom(a.party);s.Scenario.Party=n;try{s.Program.CompileString(a.command)();const i=s.Scenario.Rotation;s.Program.Compile(["rotation","log","enable"])(),s.Program.Compile(["rotation","run"])();const l=i.GetSummary(),E=i.GetDetails();this.Post("frontend:rotation-damage/run",{result:{summary:l,details:E,log:k.Global.String()},id:e})}catch{this.Post("frontend:rotation-damage/run",{result:{log:k.Global.String()},id:e})}}},pN=[NN,LN,mN];function CN(e){const a=new Uc(e);for(const s of pN)new s().SetWorker(a);return a}var MN=class extends Ta{Run(e,a){const s=G.ExportParty(e);return new Promise((n,i)=>{const l=this.worker.Post("backend:rotation-damage/run",{party:s,command:a}),E=this.worker.AddListener("frontend:rotation-damage/run",(A,{result:u,id:S})=>{S===l&&(n(u),this.worker.RemoveListener(E))}),_=this.worker.AddErrorListener(A=>{this.worker.RemoveErrorListener(_),i(A)})})}},dN=class extends Ta{constructor(){super(...arguments),this.Children=1,this.Chunk=100,this.OnProgress=()=>{}}Run(e,a){return console.log("[CLIENT] Running optimizer worker for tool: "+e),new Promise((s,n)=>{const i=this.worker.Post("backend:optimizer/run",{tool:e,config:a,children:this.Children,chunk:this.Chunk}),l=this.worker.AddListener("frontend:optimizer/run",(_,{id:A,result:u,transform:S,progress:h,total:L})=>{if(A!==i){A==="progress:"+i&&Number.isFinite(h)&&Number.isFinite(L)&&this.OnProgress(h||0,L||0);return}s({result:u,transform:S}),this.worker.RemoveListener(l)}),E=this.worker.AddErrorListener(_=>{this.worker.RemoveErrorListener(E),n(_)})})}},SE={};D(SE,{artifacts:()=>NE,filter:()=>jc,food:()=>aE,general:()=>pE,mainstat:()=>hE,nextroll:()=>LE,set:()=>fE,substats:()=>qc,upgrades:()=>CE,weapon:()=>mE});var hE={};D(hE,{MainstatOptimizer:()=>$c,defaultConfig:()=>gN});var gN=()=>({}),LE={};D(LE,{NextRollOptimizer:()=>Xc,defaultConfig:()=>GN});var GN=()=>({tier:o.SubstatTier.ROLL_AVG}),fE={};D(fE,{SetOptimizer:()=>Zc,defaultConfig:()=>RN});var RN=()=>({ConfigCmd:`
/*
IMPORTANT: Remember to mark the "Shielded" checkbox in the character attributes
if you want to optimize Retracing Bolide with its 4-piece set effect enabled.

Note that the effect configurations in this section will override the configurations you do
in the application, but will be overrided by configurations done in the rotation code.
*/

case 
NoblesseOblige4
TenacityOfTheMillelith4
DeepwoodMemories4
ArchaicPetra4
ViridescentVenerer4
Instructor4:
  // by default, these party effects will be applied to the entire party.
  effect apply all
  /* 
  you can apply the effect to the member you want, for example:

  effect apply Xiangling

  If you don't want the effect to be applied to the target, then unapply
  from it:

  effect unapply $target_name
  */
  
case 
ArchaicPetra4 
ViridescentVenerer4:
  // by default, Petra and VV effects will have applied the aura corresponding to the target's element,
  // you can change it to the aura (s) you want, or all.
  effect aura $target_element_aura
  // the constant $target_element_aura is predefined by the optimizer, 
  // you can read more about it in the documentation.
  
case OceanHuedClam4:
  // stacks refer to accumulated healing so by default will be 0.
  // set this to the corresponding value if you're optimizing a character
  // with healing capabilities.
  effect stacks 0  
  
/* 
you can add more custom configurations here. Something like, for example:

case CrimsonWitchOfFlames4:
  effect stacks 1

to optimize Crimson with 1 stacks.
*/  
`.trim()}),mE={};D(mE,{WeaponOptimizer:()=>tE,defaultConfig:()=>IN});var IN=()=>({Ranks:{3:[5],4:[1,5],5:[1]},ConfigCmd:`
/*
IMPORTANT: Remember to mark the "Shielded" checkbox in the 
character attributes if you want to optimize weapons from
Golden Majesty series (Memory of Dust, Summit Shaper, etc.).
*/
case
WolfsGravestone2
ElegyForTheEnd2
FreedomSworn2
SongOfBrokenPines2
ThousandFloatingDreams2
KeyOfKhajNisut2
HakushinRing1
MakhairaAquamarine1
WanderingEvenstar1
XiphosMoonlight1:
  /*
  These weapon effects will be applied to the entire party
  by default. You can write your own configurations to apply
  to specific characters.
  */
  effect apply all

case KeyOfKhajNisut2:
  effect stacks 3

case
ThrillingTalesOfDragonSlayers1
ForestRegalia1
SapwoodBlade1:
  /*
  By default, these weapon effects will be applied ONLY to the
  first character in the party.
  */
  effect unapply all
  effect apply $member_0_name
`.trim()}),NE={};D(NE,{ArtifactsOptimizer:()=>eE,defaultConfig:()=>DN});var DN=()=>({artifacts:[],allowSetNumber:[2,4],ConfigCmd:`
/*
You will have to configure all set effects here. This optimizer won't 
automatically set any stacks or conditions to the effects.

Also remember to mark the "Shielded" checkbox in the character attributes
if you want to optimize Retracing Bolide with its 4-piece set effect enabled.

Note that the effect configurations in this section will override the configurations 
you do in the application, but will be overrided by configurations done in the 
rotation code.
*/

case 
NoblesseOblige4
TenacityOfTheMillelith4
DeepwoodMemories4
ArchaicPetra4
ViridescentVenerer4
Instructor4:
  // by default, these party effects will be applied to the entire party.
  effect apply all
  /* 
  you can apply the effect to the member you want, for example:

  effect apply Xiangling

  If you don't want the effect to be applied to the target, then unapply
  from it:

  effect unapply $target_name
  */
  
case 
ArchaicPetra4 
ViridescentVenerer4:
  // by default, Petra and VV effects will have applied the aura corresponding to 
  // the target's element, you can change it to the aura (s) you want, or all.
  effect aura $target_element_aura
  // the constant $target_element_aura is predefined by the optimizer, 
  // you can read more about it in the documentation.
  
case OceanHuedClam4:
  // stacks refer to accumulated healing so by default will be 0.
  // set this to the corresponding value if you're optimizing a character
  // with healing capabilities.
  effect stacks 0

case CrimsonWitchOfFlames4:
  effect stacks 1 // optimize CW4 with 1 stacks

case PaleFlame4:
  effect stacks 2

case
HuskOfOpulentDreams4
FlowerOfParadiseLost4
VermillionHereafter4:
  effect stacks 4
    `.trim()}),pE={};D(pE,{CombinatorCmd:()=>cE,GeneralOptimizer:()=>La,defaultConfig:()=>ON});var ON=()=>({ConfigCmd:`
# Uncomment the line below if you want to generate optimal substats
# using the default ranges of rolls:
    // substats default
# Also, you can define your own rolls range:
    // substats range atk%=0:12 cr=0:10 cd=0:12 em=0:12 er=0:12
# And you can define minimum values for substats:
    // substats min atk%=5 cr=3 cd=3 em=3 er=3
# And general rolls configuration:
    // substats tier 3   // use max rolls
    // substats tier avg // use average rolls
    // substats total 25 // optimize 25 rolls
# By default, the substats optimization is disabled., which means
# that it will be used the values defined in the artifacts.
# Any of the commands above will enable the substats optimization.


weapon 4* rank=1,5            # optimize all 4* weapons at rank 1 and 5
artifact main=atk%,atk%,cr/cd # compare crit rate and crit damage circlets
add

weapon 5* rank=1              # optimize all 5* weapons at rank 1
artifact main=atk%,atk%,cr/cd # compare crit rate and crit damage circlets
add

# You can also add specific weapons and configurations:
// weapon jadespear rank=3 stacks=1,3,5
// weapon alleyhunter rank=5 stacks=1:10

# Or specific combinations of artifact sets:
// artifact main=atk%,pyro/physical,cr/cd set=gladiator*4
// artifact main=atk%,pyro/physical,cr/cd set=gladiator+noblesse
    `}),CE={};D(CE,{Criteria:()=>Ae,ResourceCmd:()=>EE,Upgrade:()=>x,UpgradesOptimizer:()=>_E,defaultConfig:()=>HN});var yN=`
domain mora_ley_line
cost 20
resource mora 60000

domain exp_ley_line
cost 20
resource exp 122500

domain talent_domain
cost 20
resource mora 2375
resource talent_book 1.1311111111111112

domain weapon_domain
cost 20
resource mora 2375
resource weapon_ascension 0.6314814814814815

domain elite_boss
cost 40
resource mora 6000
resource elite 2.55
resource character_ascension 0.31807407407407406

domain weekly_boss
cost 60
resource mora 8100
resource character_ascension 0.07998148148148147
resource weekly 0.7966666666666667
`.trim(),vN=`
stars 4 5 // 4* and 5* characters
upgrade character_level_20
resource mora 24200
resource exp 120175

upgrade character_level_40
resource mora 115800
resource exp 578325

upgrade character_level_50
resource mora 116000
resource exp 579100

upgrade character_level_60
resource mora 171000
resource exp 854125

upgrade character_level_70
resource mora 239200
resource exp 1195925

upgrade character_level_80
resource mora 322400
resource exp 1611875

upgrade character_level_90
resource mora 684800
resource exp 3423125

upgrade character_ascension_1
resource mora 20000

upgrade character_ascension_2
resource mora 40000
resource elite 2

upgrade character_ascension_3
resource mora 60000
resource elite 4

upgrade character_ascension_4
resource mora 80000
resource elite 8

upgrade character_ascension_5
resource mora 100000
resource elite 12

upgrade character_ascension_6
resource mora 120000
resource elite 20

upgrade talent_2
resource mora 12500
resource talent_book 0.3333333333333333

upgrade talent_3
resource mora 17500
resource talent_book 0.6666666666666666

upgrade talent_4
resource mora 25000
resource talent_book 1.3333333333333333

upgrade talent_5
resource mora 30000
resource talent_book 2

upgrade talent_6
resource mora 37000
resource talent_book 3

upgrade talent_7
resource mora 120000
resource talent_book 4
resource weekly 1

upgrade talent_8
resource mora 260000
resource talent_book 6
resource weekly 1

upgrade talent_9
resource mora 450000
resource talent_book 12
resource weekly 2

upgrade talent_10
resource mora 700000
resource talent_book 16
resource weekly 2

stars 3 // 3* weapons
upgrade weapon_ascension_1
resource mora 5000
resource weapon_ascension 0.07407407407407407

upgrade weapon_ascension_2
resource mora 10000
resource weapon_ascension 0.2222222222222222

upgrade weapon_ascension_3
resource mora 15000
resource weapon_ascension 0.4444444444444444

upgrade weapon_ascension_4
resource mora 20000
resource weapon_ascension 0.6666666666666666

upgrade weapon_ascension_5
resource mora 25000
resource weapon_ascension 1.3333333333333333

upgrade weapon_ascension_6
resource mora 30000
resource weapon_ascension 3

upgrade weapon_level_20
resource mora 5360

upgrade weapon_level_40
resource mora 27400

upgrade weapon_level_50
resource mora 27640

upgrade weapon_level_60
resource mora 40820

upgrade weapon_level_70
resource mora 57180

upgrade weapon_level_80
resource mora 77020

upgrade weapon_level_90
resource mora 163460

stars 4 // 4* weapons
upgrade weapon_ascension_1
resource mora 5000
resource weapon_ascension 0.1111111111111111

upgrade weapon_ascension_2
resource mora 15000
resource weapon_ascension 0.3333333333333333

upgrade weapon_ascension_3
resource mora 20000
resource weapon_ascension 0.6666666666666666

upgrade weapon_ascension_4
resource mora 30000
resource weapon_ascension 1

upgrade weapon_ascension_5
resource mora 35000
resource weapon_ascension 2

upgrade weapon_ascension_6
resource mora 45000
resource weapon_ascension 4

upgrade weapon_level_20
resource mora 8120

upgrade weapon_level_40
resource mora 41520

upgrade weapon_level_50
resource mora 41880

upgrade weapon_level_60
resource mora 61840

upgrade weapon_level_70
resource mora 86640

upgrade weapon_level_80
resource mora 116720

upgrade weapon_level_90
resource mora 247640

stars 5 // 5* weapons
upgrade weapon_ascension_1
resource mora 10000
resource weapon_ascension 0.18518518518518517

upgrade weapon_ascension_2
resource mora 20000
resource weapon_ascension 0.5555555555555556

upgrade weapon_ascension_3
resource mora 30000
resource weapon_ascension 1

upgrade weapon_ascension_4
resource mora 45000
resource weapon_ascension 1.6666666666666665

upgrade weapon_ascension_5
resource mora 55000
resource weapon_ascension 3

upgrade weapon_ascension_6
resource mora 65000
resource weapon_ascension 6

upgrade weapon_level_20
resource mora 12160

upgrade weapon_level_40
resource mora 62280

upgrade weapon_level_50
resource mora 62840

upgrade weapon_level_60
resource mora 92800

upgrade weapon_level_70
resource mora 129920

upgrade weapon_level_80
resource mora 175040

upgrade weapon_level_90
resource mora 371480

`.trim(),HN=()=>({resourceCmd:PN+`
`+yN+`

`+BN+`
`+vN,criteria:"damage"}),PN=`
# Configures the resources obtained in each domain,
# and the resources required to adquire each upgrade.
# This data will be used to calculate the cost of each
# upgrade.
`.trim(),BN=`
# Configures the resources required by each upgrade.
# Levels, ascensions and talents require a certain
# amount of resources to be adquired, and so they
# have a cost associated with them.
# The cost will be calculated based on the resources
# configured here.
`,ME={};D(ME,{enka:()=>dE,good:()=>gE});var dE={};D(dE,{FetchEnka:()=>wc,GetEnka:()=>kc,GetEnkaUrl:()=>bc,ParseEnka:()=>Fc});var gE={};D(gE,{Parse:()=>bN,ParseArtifact:()=>RE});var wN={flower:t.piece.FLOWER,plume:t.piece.PLUME,sands:t.piece.SANDS,goblet:t.piece.GOBLET,circlet:t.piece.CIRCLET},GE={hp:t.stat.HP_FLAT,hp_:t.stat.HP_PERCENT,atk:t.stat.ATK_FLAT,atk_:t.stat.ATK_PERCENT,def:t.stat.DEF_FLAT,def_:t.stat.DEF_PERCENT,eleMas:t.stat.ELEMENTAL_MASTERY,enerRech_:t.stat.ENERGY_RECHARGE,heal_:t.stat.HEALING_BONUS,critRate_:t.stat.CRIT_RATE,critDMG_:t.stat.CRIT_DMG,physical_dmg_:t.stat.PHYSICAL_DMG,anemo_dmg_:t.stat.ANEMO_DMG,geo_dmg_:t.stat.GEO_DMG,electro_dmg_:t.stat.ELECTRO_DMG,hydro_dmg_:t.stat.HYDRO_DMG,pyro_dmg_:t.stat.PYRO_DMG,cryo_dmg_:t.stat.CRYO_DMG,dendro_dmg_:t.stat.DENDRO_DMG};function RE(e){const a=wN[e.slotKey];t.piece.Name(a);const s=new I.Artifact(a),n=J.FindByName(e.setKey);n?s.SetSet(n.Name):(console.warn(`Could not find artifacts set "${e.setKey}"`),s.SetSet(e.setKey)),s.SetStars(e.rarity),s.SetLevel(e.level);const i=GE[e.mainStatKey];t.stat.Name(i),s.SetMainstat(i);for(const{key:l,value:E}of e.substats){const _=GE[l];t.stat.Name(_);let A=E;if(t.FlatStats.includes(_)||(A/=100),!Number.isFinite(A)||A<0)throw new Error(`Invalid substat value: ${A}`);s.AddSubstat(_,A)}return s}function bN(e){return(e.artifacts||[]).map(s=>RE(s))}function KN(){return new Worker("/genshin-damage-calc/v4/assets/worker_child.2dddaa96.js")}jt.worker.SetGenerator(()=>{const e=new KN,a=new jt.worker.VirtualWorker((s,n,i)=>e.postMessage({path:s,id:n,data:i}));return a.SetKiller(()=>e.terminate()),e.addEventListener("message",async({data:s})=>{if(s.error){await a.Error(s.error);return}a.Recieve(s.path,s.id,s.data)}),a});const ue=self,pa=jt.worker.BackendWorker((e,a,s)=>ue.postMessage({path:e,id:a,data:s}));pa.SetKiller(()=>ue.terminate()),ue.addEventListener("message",async({data:e})=>{try{await pa.Recieve(e.path,e.id,e.data)}catch(a){console.error("[WORKER ERROR]",a),pa.Error(a),ue.postMessage({error:a})}})})();
